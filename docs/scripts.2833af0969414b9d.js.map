{"version":3,"mappings":"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","names":["Lt","i","P","n","y","R","type","B","c","jquery","get","pushStack","each","map","slice","first","last","even","odd","eq","end","push","Ue","pe","expando","noop","isPlainObject","isEmptyObject","globalEval","u","nonce","Q","makeArray","inArray","merge","grep","ve","guid","h","xi","hasOwnProperty","Ge","Wn","Zt","ID","Za","An","er","Ia","Qe","vn","dir","bi","ye","apply","Wi","st","Le","Kt","Ct","qt","qi","Si","_t","He","St","Nt","Xt","De","Ae","On","oe","ei","$e","Mi","cacheLength","find","relative","preFilter","ATTR","CHILD","PSEUDO","filter","TAG","CLASS","ii","on","ji","mi","sn","pseudos","not","has","contains","lang","target","root","focus","enabled","selected","empty","parent","header","input","button","text","lt","gt","radio","submit","_n","Oi","value","replace","fn","Xi","xe","Fa","nt","p","T","Z","N","is","prototype","children","closest","index","add","addBack","parents","parentsUntil","next","prev","nextAll","prevAll","nextUntil","prevUntil","siblings","firstChild","contents","match","qe","pt","arguments","remove","this","disable","disabled","lock","locked","fireWith","fire","fired","Deferred","state","always","catch","pipe","Ke","promise","then","Be","when","isReady","yt","Rt","cache","Mt","set","access","hasData","Gt","xt","data","removeData","_data","_removeData","je","at","queue","dequeue","_queueHooks","clearQueue","be","l","composed","A","show","hide","toggle","s","E","thead","re","ne","namespace","delegateType","global","dispatch","handle","handlers","elem","addProp","Object","enumerable","fix","special","load","noBubble","click","setup","trigger","_default","beforeunload","postDispatch","constructor","stopPropagation","stopImmediatePropagation","altKey","mouseenter","one","off","htmlPrefilter","clone","Pi","cleanData","detach","append","prepend","before","after","html","nodeType","replaceWith","appendTo","ki","$t","boxSizingReliable","pixelBoxStyles","pixelPosition","reliableMarginLeft","scrollboxSize","reliableTrDimensions","position","Hi","letterSpacing","cssHooks","opacity","cssNumber","animationIterationCount","cssProps","style","css","marginLeft","margin","expand","cur","run","init","scrollTop","linear","swing","In","en","height","specialEasing","easing","stop","tweeners","tweener","prefilters","W","display","prefilter","complete","fadeTo","animate","finish","slideDown","fadeOut","fadeToggle","slow","Yi","attr","removeAttr","attrHooks","Oe","ct","prop","removeProp","propHooks","tabIndex","propFix","for","S","addClass","removeClass","toggleClass","hasClass","val","valHooks","option","select","simulate","triggerHandler","teardown","fi","join","serialize","serializeArray","name","$n","ra","ga","active","etag","ajaxSettings","url","accepts","xml","responseFields","converters","flatOptions","ajaxSetup","ajaxPrefilter","it","ft","readyState","ti","getAllResponseHeaders","setRequestHeader","overrideMimeType","statusCode","abort","Ht","Tt","Qt","Bi","ci","Gi","vt","Zn","pn","nn","getJSON","getScript","dataFilter","wrapAll","wrapInner","wrap","unwrap","Jn","send","binary","script","charset","jsonp","done","length","setOffset","offset","top","pageYOffset","offsetParent","scrollLeft","Height","padding","bind","unbind","delegate","undelegate","hover","e","d","toString","M","jQuery","window","m","I","transitionDuration","j","q","Se","le","di","Li","ze","Ve","bubbles","Array","dispose","mt","_queueCallback","VERSION","NAME","DATA_KEY","EVENT_KEY","_e","close","_destroyElement","ie","f","setDataAttribute","removeDataAttribute","getDataAttributes","getDataAttribute","focusableChildren","interval","kt","ArrowLeft","t","super","Default","nextWhenVisible","document","pause","cycle","to","_getConfig","Wt","w","_handleSwipe","_addEventListeners","_addTouchEventListeners","_keydown","_getItemIndex","_getItemByOrder","_triggerSlideEvent","relatedTarget","_setActiveIndicatorElement","_updateInterval","_slide","_directionToOrder","_orderToDirection","_config","v","te","_isShown","g","_getDimension","_initializeChildren","_addAriaAndCollapsedClass","L","Zi","DefaultType","C","update","_completeHide","_createPopper","_getMenuElement","_getPlacement","_detectNavbar","_getOffset","_getPopperConfig","placement","boundary","ui","_selectMenuItem","key","getWidth","_disableOverFlow","_setElementAttributes","reset","_saveInitialAttribute","_resetElementAttributes","_applyManipulationCallback","isOverflowing","className","Ii","Ei","_getElement","Ci","rootElement","_append","_emulateAnimation","trapElement","cn","activate","deactivate","_handleFocusin","_handleKeydown","Vi","backdrop","defaultPrevented","handleUpdate","_initializeBackDrop","isVisible","_initializeFocusTrap","_showElement","_setEscapeEvent","_setResizeEvent","_hideModal","_showBackdrop","_isAnimated","_triggerBackdropTransition","classList","_adjustDialog","_resetAdjustments","rt","It","Vt","animation","ca","AUTO","Pn","popperConfig","Hn","HIDE","Kn","Event","enable","toggleEnabled","clearTimeout","li","container","isWithContent","getTipElement","setContent","_sanitizeAndSetContent","setElementContent","getTitle","updateAttachment","_initializeOnDelegatedTarget","_resolvePossibleFunction","fallbackPlacements","element","onFirstUpdate","_addAttachmentClass","_getAttachment","_setListeners","_fixTitle","_enter","_leave","_isWithActiveTrigger","ia","_getDelegateConfig","_cleanTipClass","_getBasicClassPrefix","_handlePopperPlacementChange","_disposePopper","mn","ba","content","ya","_getContent","Yn","zn","refresh","ha","_getScrollTop","_getScrollHeight","_getOffsetHeight","_process","_activate","_clear","_transitionComplete","_maybeScheduleHide","_onInteraction","_clearTimeout","Alert","exports","Ze","shimChrome","browserDetails","receiver","track","_pc","id","localcandidate","V","mandatory","chromeMediaSource","console","ideal","exact","PermissionDeniedError","candidate","completed","default","J","inboundrtp","mediaSource","video","browser","codecs","offer","setLocalDescription","answer","NotSupportedError","iceServers","configurable","indexOf","b","sdpMid","x","iceTransport","cname","compound","mid","he","ot","ssrc","Et","Xe","Ee","new","Promise","sdp","foundation","payloadType","semantics","algorithm","role","usernameFragment","stream","kind","username","body","searchParams","formData","status","location","loadjs","success","requirejs","shim","sio","async","error","retrycb","self","format","updateWebconfTags","fetchRetryCount","Ne","method","Authorization","gettype","et","ke","httpCode","token","apiKey","_method","bearerToken","ccid","media","destId","uuid","parent_conv_id","code","_","reason","U","dest_roomId","apiCC","X","roomId","K","forceNew","photoURL","tool","sessionMCU","quiet","userId","roomName","mode","createSession","ue","MCUType","noStreamCheck","updateCalls","ee","Ie","Pe","we","ge","Je","tt","ce","We","me","Te","bodyPix","architecture","si","Ft","Reflect","Ti","yolo","_i","class","wi","pipelineCallId","file","failure","ocr","ni","ai","Ai","transferType","modelName","timeout","pubSub","G","multiplier","oldBackgroundSubtraction","r","audio","optional","ae","amplitude","navigator","command","callId","eventType","available","clientId","callerId","audioAmplitude","substream","high","medium","low","temporal","D","original","ssrc_groups","sim","ssrcs","Re","stripInactiveMLines","Ce","AudioRecv","AudioSend","VideoRecv","VideoSend","sendChunkNb","setTimeout","chunkLength","audioReceived","codecId","videoReceived","remoteAudioSent","remoteVideoSent","audioSent","videoSent","remoteAudioReceived","remoteVideoReceived","timestamp","packetsReceived","packetsSent","offerToReceiveAudio","OfferToReceiveAudio","DtlsSrtpKeyAgreement","sdpMLineIndex","minWidth","facingMode","rid","direction","sender","details","delay","browserAbout","save","volatile","LocalCandidateType","updateStream","multi","codec","transactionId","failed","force","roomID","callback","prune","addUserMedia","ignoreModeChangeKindOld","videoMinQuality","maxBitrate","JSON","scaleResolutionDownBy","hostOnly","urls","early","dt","restart","userMedia","noHangup","callControl","replay","number","muteState","apzcallId","accept","tests","min","median","max","apiRTC","audioEnabled","ttl","clearInterval","audioOnly","videoOnly","videoStartQuality","userMediaStreamId","startTime","dataCall","echoCancellation","webRTCClient","test","isNaN","fromx","offsetX","MediaRecorder","sessionStorage","MediaStreamTrack","sourceId","width","err","label","deviceId","device","title","ts","browserName","info","Sentry","dsn","ag","_C","decode","encode","F","detail","eventManager","invalidateApiCCId","extend","lowerize","major","trim","rgx","str","oldsafari","version","amazon","model","sprint","vendor","HTC","os","windows","ME","ua","ARCHITECTURE","MODEL","Call","Y","fe","O","listener","z","ht","bt","a","o","H","description","de","apiCCId","localStorage","Me","se","k","zt","$","fromError","event","yi","hangup","receiveData","remoteStreamUpdated","MCURecordingStarted","MCURecordingStopped","MCURecordedStreamsAvailable","getUserMediaStreamId","screensharing","contact","stats","errorCode","tries","from","mediaURL","callType","Fe","isRecorded","Ki","mediaTypeForIncomingCall","tn","onEvent","pi","started","aa","invitationId","roomname","Sa","Ut","bn","dn","ja","Wa","$a","Ln","Mr","ur","gn","mediaTypeForOutgoingCall","fileInfo","Dt","Ri","wn","leftGroup","joinedGroup","userDataChanged","Mn","an","group","removeFromGroup","Aa","contactCatalog","Ye","gi","zi","MCUAvailableStream","listEventType","MCUAvailableStreamUpdate","MCUAvailableComposite","isRemote","MCUAvailableReplay","MCURemoveStream","remoteStreamAdded","remoteStreamRemoved","roomMemberUpdate","contactId","contacts","slowLink","videoQualityChanged","simulcastFeedChanged","localStreamUpdated","MCUStreamingStarted","MCUStreamingStopped","onCallStatsUpdate","Oa","cpuLimited","bandwidthLimited","callRestarting","MCUParticipantEjected","MCURoomModeChanged","oldMode","Dn","ut","capacity","isVideoOnly","forceScreenSharingCallType","callEstablishedHandler","streamAddedHandler","la","convId","snapshot","receiveNotifier","streamId","resource","Vn","streamInfo","rn","triggerAdaptation","noTriggerAdaptation","dtmfCode","Qi","Ga","At","session","topic","mr","Ni","invalidateUserToken","rr","filename","mo","Ja","za","Tn","Wr","La","Pt","requesterId","forEach","locateFile","selfieMode","image","alpha","transform","audioSourceId","sr","Br","da","kn","password","To","overallIncoming","whiteboardCursor","added","extjs","Yt","testServer","upload","download","enableHighAccuracy","Do","audioInput","Jt","Bn","ko","Yr","xa","unloadjs","No","searchStr","Ar","define","apiRTC_sioLoader","oi","audioinput","audiooutput","videoinput","ln","LOG_PREFIX","assignObject","throttle","hashString","arrayBuffertoString","getAudioContext","parseRecordingEvent","paramsToQueryString","createError","isSet","isTypeof","dataCallsOnHold","Int8Array","BigInt64Array","NATIVE_ARRAY_BUFFER_VIEWS","aTypedArrayConstructor","exportTypedArrayMethod","exportTypedArrayStaticMethod","isView","isTypedArray","setInt8","setUint8","unsafe","bytes","buffer","getInt8","getUint8","getInt16","getUint16","getInt32","getUint32","getFloat32","getFloat64","setInt16","setUint16","setInt32","setUint32","setFloat32","setFloat64","ArrayBuffer","includes","foo","left","return","getConstructor","that","clear","delete","size","setStrong","values","CSSRuleList","EXISTS","Function","pack","unpack","objectID","getOwnPropertyNames","fastKey","getWeakData","onFreeze","getterFor","IteratorPrototype","characterData","isPrototypeOf","propertyIsEnumerable","entries","codeAt","start","getOwnPropertyDescriptor","view","concat","fill","isArray","sort","splice","DataView","now","toISOString","toJSON","String","log10","isInteger","MAX_SAFE_INTEGER","assign","create","defineProperty","sham","getPrototypeOf","keys","setPrototypeOf","parseInt","reject","resolve","all","race","construct","exec","source","startsWith","Symbol","keyFor","useSetter","useSimple","getOwnPropertySymbols","stringify","updateSearchParams","getAll","URLSearchParams","fetch","Request","Bt","vi","ri","jt","ftp","wt","na","un","hn","Di","xn","Nn","Xn","Rn","Fi","href","origin","host","hostname","port","pathname","search","ta","URL","template","nameFormatter","timestampFormatter","reg","TRACE"],"sources":["node_modules/jquery/dist/jquery.min.js","node_modules/bootstrap/dist/js/bootstrap.min.js","node_modules/@apirtc/apirtc/apiRTC.min.js"],"sourcesContent":["/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */\n!function(e,t){\"use strict\";\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(C,e){\"use strict\";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return\"function\"==typeof e&&\"number\"!=typeof e.nodeType&&\"function\"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement(\"script\");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?n[o.call(e)]||\"object\":typeof e}var f=\"3.6.0\",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&\"length\"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&(\"array\"===n||0===t||\"number\"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for(\"boolean\"==typeof a&&(l=a,a=arguments[s]||{},s++),\"object\"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],\"__proto__\"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:\"jQuery\"+(f+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||\"[object Object]\"!==o.call(e))&&(!(t=r(e))||\"function\"==typeof(n=v.call(t,\"constructor\")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,\"string\"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),\"function\"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each(\"Boolean Number String Function Array Date RegExp Object Error Symbol\".split(\" \"),function(e,t){n[\"[object \"+t+\"]\"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S=\"sizzle\"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",M=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",I=\"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",W=\"\\\\[\"+M+\"*(\"+I+\")(?:\"+M+\"*([*^$|!~]?=)\"+M+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+I+\"))|)\"+M+\"*\\\\]\",F=\":(\"+I+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+W+\")*)|.*)\\\\)|)\",B=new RegExp(M+\"+\",\"g\"),$=new RegExp(\"^\"+M+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+M+\"+$\",\"g\"),_=new RegExp(\"^\"+M+\"*,\"+M+\"*\"),z=new RegExp(\"^\"+M+\"*([>+~]|\"+M+\")\"+M+\"*\"),U=new RegExp(M+\"|>\"),X=new RegExp(F),V=new RegExp(\"^\"+I+\"$\"),G={ID:new RegExp(\"^#(\"+I+\")\"),CLASS:new RegExp(\"^\\\\.(\"+I+\")\"),TAG:new RegExp(\"^(\"+I+\"|[*])\"),ATTR:new RegExp(\"^\"+W),PSEUDO:new RegExp(\"^\"+F),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+M+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+M+\"*(?:([+-]|)\"+M+\"*(\\\\d+)|))\"+M+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+R+\")$\",\"i\"),needsContext:new RegExp(\"^\"+M+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+M+\"*((?:-\\\\d)?\\\\d*)\"+M+\"*\\\\)|)(?=[^-]|$)\",\"i\")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\\d$/i,K=/^[^{]+\\{\\s*\\[native \\w/,Z=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ee=/[+~]/,te=new RegExp(\"\\\\\\\\[\\\\da-fA-F]{1,6}\"+M+\"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\",\"g\"),ne=function(e,t){var n=\"0x\"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,ie=function(e,t){return t?\"\\0\"===e?\"\\ufffd\":e.slice(0,-1)+\"\\\\\"+e.charCodeAt(e.length-1).toString(16)+\" \":\"\\\\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&\"fieldset\"===e.nodeName.toLowerCase()},{dir:\"parentNode\",next:\"legend\"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],\"string\"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+\" \"]&&(!v||!v.test(t))&&(1!==p||\"object\"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute(\"id\"))?s=s.replace(re,ie):e.setAttribute(\"id\",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?\"#\"+s:\":scope\")+\" \"+xe(l[o]);c=l.join(\",\")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute(\"id\")}}}return g(t.replace($,\"$1\"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+\" \")>b.cacheLength&&delete e[r.shift()],e[t+\" \"]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement(\"fieldset\");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split(\"|\"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return\"input\"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return(\"input\"===t||\"button\"===t)&&e.type===n}}function ge(t){return function(e){return\"form\"in e?e.parentNode&&!1===e.disabled?\"label\"in e?\"label\"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:\"label\"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&\"undefined\"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||\"HTML\")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener(\"unload\",oe,!1):n.attachEvent&&n.attachEvent(\"onunload\",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement(\"div\")),\"undefined\"!=typeof e.querySelectorAll&&!e.querySelectorAll(\":scope fieldset div\").length}),d.attributes=ce(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute(\"id\")===t}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t=\"undefined\"!=typeof e.getAttributeNode&&e.getAttributeNode(\"id\");return t&&t.value===n}},b.find.ID=function(e,t){if(\"undefined\"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode(\"id\"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return\"undefined\"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\"*\"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if(\"undefined\"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML=\"<a id='\"+S+\"'></a><select id='\"+S+\"-\\r\\\\' msallowcapture=''><option selected=''></option></select>\",e.querySelectorAll(\"[msallowcapture^='']\").length&&v.push(\"[*^$]=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||v.push(\"\\\\[\"+M+\"*(?:value|\"+R+\")\"),e.querySelectorAll(\"[id~=\"+S+\"-]\").length||v.push(\"~=\"),(t=C.createElement(\"input\")).setAttribute(\"name\",\"\"),e.appendChild(t),e.querySelectorAll(\"[name='']\").length||v.push(\"\\\\[\"+M+\"*name\"+M+\"*=\"+M+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\":checked\").length||v.push(\":checked\"),e.querySelectorAll(\"a#\"+S+\"+*\").length||v.push(\".#.+[+~]\"),e.querySelectorAll(\"\\\\\\f\"),v.push(\"[\\\\r\\\\n\\\\f]\")}),ce(function(e){e.innerHTML=\"<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>\";var t=C.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&v.push(\"name\"+M+\"*[*^$|!~]?=\"),2!==e.querySelectorAll(\":enabled\").length&&v.push(\":enabled\",\":disabled\"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(\":disabled\").length&&v.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),v.push(\",.*:\")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,\"*\"),c.call(e,\"[s!='']:x\"),s.push(\"!=\",F)}),v=v.length&&new RegExp(v.join(\"|\")),s=s.length&&new RegExp(s.join(\"|\")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+\" \"]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+\"\").replace(re,ie)},se.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||\"\").replace(te,ne),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+\" \"];return t||(t=new RegExp(\"(^|\"+M+\")\"+e+\"(\"+M+\"|$)\"))&&m(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||\"undefined\"!=typeof e.getAttribute&&e.getAttribute(\"class\")||\"\")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?\"!=\"===r:!r||(t+=\"\",\"=\"===r?t===i:\"!=\"===r?t!==i:\"^=\"===r?i&&0===t.indexOf(i):\"*=\"===r?i&&-1<t.indexOf(i):\"$=\"===r?i&&t.slice(-i.length)===i:\"~=\"===r?-1<(\" \"+t.replace(B,\" \")+\" \").indexOf(i):\"|=\"===r&&(t===i||t.slice(0,i.length+1)===i+\"-\"))}},CHILD:function(h,e,t,g,v){var y=\"nth\"!==h.slice(0,3),m=\"last\"!==h.slice(-4),x=\"of-type\"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?\"nextSibling\":\"previousSibling\",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l=\"only\"===h&&!u&&\"nextSibling\"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error(\"unsupported pseudo: \"+e);return a[S]?a(o):1<a.length?(t=[e,e,\"\",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,\"$1\"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||\"\")||se.error(\"unsupported lang: \"+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute(\"xml:lang\")||e.getAttribute(\"lang\"))return(t=t.toLowerCase())===n||0===t.indexOf(n+\"-\")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r=\"\";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&\"parentNode\"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||\"*\",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[\" \"],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:\" \"===e[s-2].type?\"*\":\"\"})).replace($,\"$1\"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+\" \"];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($,\" \")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+\" \"];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l=\"0\",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG(\"*\",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l=\"function\"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&\"ID\"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split(\"\").sort(j).join(\"\")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement(\"fieldset\"))}),ce(function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||fe(\"type|href|height|width\",function(e,t,n){if(!n)return e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||fe(\"value\",function(e,t,n){if(!n&&\"input\"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute(\"disabled\")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[\":\"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):\"string\"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if(\"string\"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,\"string\"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,\"string\"==typeof e){if(!(r=\"<\"===e[0]&&\">\"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a=\"string\"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?\"string\"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,\"parentNode\")},parentsUntil:function(e,t,n){return h(e,\"parentNode\",n)},next:function(e){return O(e,\"nextSibling\")},prev:function(e){return O(e,\"previousSibling\")},nextAll:function(e){return h(e,\"nextSibling\")},prevAll:function(e){return h(e,\"previousSibling\")},nextUntil:function(e,t,n){return h(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return h(e,\"previousSibling\",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,\"template\")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return\"Until\"!==r.slice(-5)&&(t=e),t&&\"string\"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\\x20\\t\\r\\n\\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r=\"string\"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:\"\")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&\"string\"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t=\"\",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=\"\"),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[[\"notify\",\"progress\",S.Callbacks(\"memory\"),S.Callbacks(\"memory\"),2],[\"resolve\",\"done\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),0,\"resolved\"],[\"reject\",\"fail\",S.Callbacks(\"once memory\"),S.Callbacks(\"once memory\"),1,\"rejected\"]],i=\"pending\",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},\"catch\":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+\"With\"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError(\"Thenable self-resolution\");t=e&&(\"object\"==typeof e||\"function\"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+\"With\"](this===s?void 0:this,arguments),this},s[t[0]+\"With\"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),\"pending\"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn(\"jQuery.Deferred exception: \"+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener(\"DOMContentLoaded\",B),C.removeEventListener(\"load\",B),S.ready()}S.fn.ready=function(e){return F.then(e)[\"catch\"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,\"complete\"===E.readyState||\"loading\"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener(\"DOMContentLoaded\",B),C.addEventListener(\"load\",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if(\"object\"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,\"ms-\").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if(\"string\"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&\"string\"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r=\"data-\"+t.replace(K,\"-$&\").toLowerCase(),\"string\"==typeof(n=e.getAttribute(r))){try{n=\"true\"===(i=n)||\"false\"!==i&&(\"null\"===i?null:i===+i+\"\"?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,\"hasDataAttrs\"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf(\"data-\")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,\"hasDataAttrs\",!0)}return i}return\"object\"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||\"fx\")+\"queue\",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||\"fx\";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks(\"once memory\").add(function(){Y.remove(e,[t+\"queue\",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return\"string\"!=typeof t&&(n=t,t=\"fx\",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),\"fx\"===t&&\"inprogress\"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";while(a--)(n=Y.get(o[a],e+\"queueHooks\"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,te=new RegExp(\"^(?:([+-])=|)(\"+ee+\")([a-z%]*)$\",\"i\"),ne=[\"Top\",\"Right\",\"Bottom\",\"Left\"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return\"none\"===(e=t||e).style.display||\"\"===e.style.display&&ie(e)&&\"none\"===S.css(e,\"display\")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,\"\")},u=s(),l=n&&n[3]||(S.cssNumber[t]?\"\":\"px\"),c=e.nodeType&&(S.cssNumber[t]||\"px\"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?(\"none\"===n&&(l[c]=Y.get(r,\"display\")||null,l[c]||(r.style.display=\"\")),\"\"===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,\"display\"),o.parentNode.removeChild(o),\"none\"===u&&(u=\"block\"),ue[s]=u)))):\"none\"!==n&&(l[c]=\"none\",Y.set(r,\"display\",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i,he=/^$|^module$|\\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement(\"div\")),(fe=E.createElement(\"input\")).setAttribute(\"type\",\"radio\"),fe.setAttribute(\"checked\",\"checked\"),fe.setAttribute(\"name\",\"t\"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML=\"<textarea>x</textarea>\",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML=\"<option></option>\",y.option=!!ce.lastChild;var ge={thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};function ve(e,t){var n;return n=\"undefined\"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||\"*\"):\"undefined\"!=typeof e.querySelectorAll?e.querySelectorAll(t||\"*\"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],\"globalEval\",!t||Y.get(t[n],\"globalEval\"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,\"<select multiple='multiple'>\",\"</select>\"]);var me=/<|&#?\\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if(\"object\"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement(\"div\")),s=(de.exec(o)||[\"\",\"\"])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=\"\"}else p.push(t.createTextNode(o));f.textContent=\"\",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),\"script\"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||\"\")&&n.push(o)}return f}var be=/^([^.]*)(?:\\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==(\"focus\"===t)}function Ee(e,t,n,r,i,o){var a,s;if(\"object\"==typeof t){for(s in\"string\"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&(\"string\"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return\"undefined\"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||\"\").match(P)||[\"\"]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(\".\")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||\"\").match(P)||[\"\"]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||\"\").split(\".\").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&(\"**\"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,\"handle events\")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,\"events\")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!(\"click\"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(\"click\"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+\" \"]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Se(t,\"click\",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Se(t,\"click\"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,\"input\")&&Y.get(t,\"click\")||A(t,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,\"char\":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&\"function\"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\\s*(?:[^=]|=\\s*.checked.)/i,Ne=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;function je(e,t){return A(e,\"table\")&&A(11!==t.nodeType?t:t.firstChild,\"tr\")&&S(e).children(\"tbody\")[0]||e}function De(e){return e.type=(null!==e.getAttribute(\"type\"))+\"/\"+e.type,e}function qe(e){return\"true/\"===(e.type||\"\").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute(\"type\"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,\"handle events\"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&\"string\"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,\"script\"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,\"script\"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||\"\")&&!Y.access(u,\"globalEval\")&&S.contains(l,u)&&(u.src&&\"module\"!==(u.type||\"\").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute(\"nonce\")},l):b(u.textContent.replace(Ne,\"\"),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,\"script\")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,\"input\"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:\"input\"!==l&&\"textarea\"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,\"script\")).length&&ye(a,!f&&ve(e,\"script\")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent=\"\");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if(\"string\"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||[\"\",\"\"])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp(\"^(\"+ee+\")(?!px)[a-z%]+$\",\"i\"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join(\"|\"),\"i\");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(\"\"!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+\"\":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText=\"position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0\",l.style.cssText=\"position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%\",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n=\"1%\"!==e.top,s=12===t(e.marginLeft),l.style.right=\"60%\",o=36===t(e.right),r=36===t(e.width),l.style.position=\"absolute\",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement(\"div\"),l=E.createElement(\"div\");l.style&&(l.style.backgroundClip=\"content-box\",l.cloneNode(!0).style.backgroundClip=\"\",y.clearCloneStyle=\"content-box\"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement(\"table\"),t=E.createElement(\"tr\"),n=E.createElement(\"div\"),e.style.cssText=\"position:absolute;left:-11111px;border-collapse:separate\",t.style.cssText=\"border:1px solid\",t.style.height=\"1px\",n.style.height=\"9px\",n.style.display=\"block\",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=[\"Webkit\",\"Moz\",\"ms\"],$e=E.createElement(\"div\").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Ge={letterSpacing:\"0\",fontWeight:\"400\"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||\"px\"):t}function Qe(e,t,n,r,i,o){var a=\"width\"===t?1:0,s=0,u=0;if(n===(r?\"border\":\"content\"))return 0;for(;a<4;a+=2)\"margin\"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?(\"content\"===n&&(u-=S.css(e,\"padding\"+ne[a],!0,i)),\"margin\"!==n&&(u-=S.css(e,\"border\"+ne[a]+\"Width\",!0,i))):(u+=S.css(e,\"padding\"+ne[a],!0,i),\"padding\"!==n?u+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i):s+=S.css(e,\"border\"+ne[a]+\"Width\",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e[\"offset\"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,r),o=i,a=We(e,t,r),s=\"offset\"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a=\"auto\"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,\"tr\")||\"auto\"===a||!parseFloat(a)&&\"inline\"===S.css(e,\"display\",!1,r))&&e.getClientRects().length&&(i=\"border-box\"===S.css(e,\"boxSizing\",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?\"border\":\"content\"),o,r,a)+\"px\"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&\"get\"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];\"string\"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o=\"number\"),null!=n&&n==n&&(\"number\"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?\"\":\"px\")),y.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(l[t]=\"inherit\"),a&&\"set\"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&\"get\"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),\"normal\"===i&&t in Ge&&(i=Ge[t]),\"\"===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each([\"height\",\"width\"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,\"display\"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&\"absolute\"===i.position,a=(o||n)&&\"border-box\"===S.css(e,\"boxSizing\",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e[\"offset\"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,\"border\",!1,i)-.5)),s&&(r=te.exec(t))&&\"px\"!==(r[3]||\"px\")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,\"marginLeft\"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+\"px\"}),S.each({margin:\"\",padding:\"\",border:\"Width\"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r=\"string\"==typeof e?e.split(\" \"):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},\"margin\"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?\"\":\"px\")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,\"\"))&&\"auto\"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:\"swing\"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i[\"margin\"+(n=ne[r])]=i[\"padding\"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners[\"*\"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&\"expand\"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{\"*\":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=[\"*\"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f=\"width\"in t||\"height\"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,\"fxshow\");for(r in n.queue||(null==(a=S._queueHooks(e,\"fx\")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,\"fx\").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||\"toggle\"===i,i===(g?\"hide\":\"show\")){if(\"show\"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,\"display\")),\"none\"===(c=S.css(e,\"display\"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,\"display\"),le([e]))),(\"inline\"===c||\"inline-block\"===c&&null!=l)&&\"none\"===S.css(e,\"float\")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l=\"none\"===c?\"\":c)),h.display=\"inline-block\")),n.overflow&&(h.overflow=\"hidden\",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?\"hidden\"in v&&(g=v.hidden):v=Y.access(e,\"fxshow\",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,\"fxshow\"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&\"object\"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:\"number\"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,\"finish\"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return\"string\"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||\"fx\",[]),this.each(function(){var e=!0,t=null!=i&&i+\"queueHooks\",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||\"fx\"),this.each(function(){var e,t=Y.get(this),n=t[a+\"queue\"],r=t[a+\"queueHooks\"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each([\"toggle\",\"show\",\"hide\"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||\"boolean\"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st(\"show\"),slideUp:st(\"hide\"),slideToggle:st(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||\"fx\",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement(\"input\"),nt=E.createElement(\"select\").appendChild(E.createElement(\"option\")),tt.type=\"checkbox\",y.checkOn=\"\"!==tt.value,y.optSelected=nt.selected,(tt=E.createElement(\"input\")).value=\"t\",tt.type=\"radio\",y.radioValue=\"t\"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return\"undefined\"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+\"\"),n):i&&\"get\"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&\"radio\"===t&&A(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(\" \")}function gt(e){return e.getAttribute&&e.getAttribute(\"class\")||\"\"}function vt(e){return Array.isArray(e)?e:\"string\"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,\"tabindex\");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{\"for\":\"htmlFor\",\"class\":\"className\"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&\" \"+ht(i)+\" \"){a=0;while(o=e[a++])r.indexOf(\" \"+o+\" \")<0&&(r+=o+\" \");i!==(s=ht(r))&&n.setAttribute(\"class\",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr(\"class\",\"\");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&\" \"+ht(i)+\" \"){a=0;while(o=e[a++])while(-1<r.indexOf(\" \"+o+\" \"))r=r.replace(\" \"+o+\" \",\" \");i!==(s=ht(r))&&n.setAttribute(\"class\",s)}return this},toggleClass:function(i,t){var o=typeof i,a=\"string\"===o||Array.isArray(i);return\"boolean\"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&\"boolean\"!==o||((e=gt(this))&&Y.set(this,\"__className__\",e),this.setAttribute&&this.setAttribute(\"class\",e||!1===i?\"\":Y.get(this,\"__className__\")||\"\"))})},hasClass:function(e){var t,n,r=0;t=\" \"+e+\" \";while(n=this[r++])if(1===n.nodeType&&-1<(\" \"+ht(gt(n))+\" \").indexOf(t))return!0;return!1}});var yt=/\\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t=\"\":\"number\"==typeof t?t+=\"\":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?\"\":e+\"\"})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&\"set\"in r&&void 0!==r.set(this,t,\"value\")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&\"get\"in r&&void 0!==(e=r.get(t,\"value\"))?e:\"string\"==typeof(e=t.value)?e.replace(yt,\"\"):null==e?\"\":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,\"value\");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a=\"select-one\"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,\"optgroup\"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each([\"radio\",\"checkbox\"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})}),y.focusin=\"onfocusin\"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,\"type\")?e.type:e,h=v.call(e,\"namespace\")?e.namespace.split(\".\"):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(\".\")&&(d=(h=d.split(\".\")).shift(),h.sort()),u=d.indexOf(\":\")<0&&\"on\"+d,(e=e[S.expando]?e:new S.Event(d,\"object\"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join(\".\"),e.rnamespace=e.namespace?new RegExp(\"(^|\\\\.)\"+h.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,\"events\")||Object.create(null))[e.type]&&Y.get(o,\"handle\"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:\"focusin\",blur:\"focusout\"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\\?/;S.parseXML=function(e){var t,n;if(!e||\"string\"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,\"text/xml\")}catch(e){}return n=t&&t.getElementsByTagName(\"parsererror\")[0],t&&!n||S.error(\"Invalid XML: \"+(n?S.map(n.childNodes,function(e){return e.textContent}).join(\"\\n\"):e)),t};var Ct=/\\[\\]$/,Et=/\\r?\\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+\"[\"+(\"object\"==typeof t&&null!=t?e:\"\")+\"]\",t,r,i)});else if(r||\"object\"!==w(e))i(n,e);else for(t in e)At(n+\"[\"+t+\"]\",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(null==n?\"\":n)};if(null==e)return\"\";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join(\"&\")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,\"elements\");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(\":disabled\")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,\"\\r\\n\")}}):{name:t.name,value:n.replace(Et,\"\\r\\n\")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\\/\\//,Ot={},Pt={},Rt=\"*/\".concat(\"*\"),Mt=E.createElement(\"a\");function It(o){return function(e,t){\"string\"!=typeof e&&(t=e,e=\"*\");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])\"+\"===n[0]?(n=n.slice(1)||\"*\",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return\"string\"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s[\"*\"]&&l(\"*\")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:\"GET\",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Rt,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/\\bxml\\b/,html:/\\bhtml/,json:/\\bjson\\b/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":JSON.parse,\"text xml\":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks(\"once memory\"),w=v.statusCode||{},a={},s={},u=\"canceled\",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+\" \"]=(n[t[1].toLowerCase()+\" \"]||[]).concat(t[2])}t=n[e.toLowerCase()+\" \"]}return null==t?null:t.join(\", \")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+\"\").replace(Ht,bt.protocol+\"//\"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||\"*\").toLowerCase().match(P)||[\"\"],null==v.crossDomain){r=E.createElement(\"a\");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+\"//\"+Mt.host!=r.protocol+\"//\"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&\"string\"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger(\"ajaxStart\"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,\"\"),v.hasContent?v.data&&v.processData&&0===(v.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&(v.data=v.data.replace(Nt,\"+\")):(o=v.url.slice(f.length),v.data&&(v.processData||\"string\"==typeof v.data)&&(f+=(Tt.test(f)?\"&\":\"?\")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,\"$1\"),o=(Tt.test(f)?\"&\":\"?\")+\"_=\"+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader(\"If-Modified-Since\",S.lastModified[f]),S.etag[f]&&T.setRequestHeader(\"If-None-Match\",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader(\"Content-Type\",v.contentType),T.setRequestHeader(\"Accept\",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+(\"*\"!==v.dataTypes[0]?\", \"+Rt+\"; q=0.01\":\"\"):v.accepts[\"*\"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u=\"abort\",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger(\"ajaxSend\",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort(\"timeout\")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,\"No Transport\");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||\"\",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while(\"*\"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+\" \"+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray(\"script\",v.dataTypes)&&S.inArray(\"json\",v.dataTypes)<0&&(v.converters[\"text script\"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if(\"*\"===o)o=u;else if(\"*\"!==u&&u!==o){if(!(a=l[u+\" \"+o]||l[\"* \"+o]))for(i in l)if((s=i.split(\" \"))[1]===o&&(a=l[u+\" \"+s[0]]||l[\"* \"+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e[\"throws\"])t=a(t);else try{t=a(t)}catch(e){return{state:\"parsererror\",error:a?e:\"No conversion from \"+u+\" to \"+o}}}return{state:\"success\",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader(\"Last-Modified\"))&&(S.lastModified[f]=u),(u=T.getResponseHeader(\"etag\"))&&(S.etag[f]=u)),204===e||\"HEAD\"===v.type?l=\"nocontent\":304===e?l=\"notmodified\":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l=\"error\",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+\"\",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?\"ajaxSuccess\":\"ajaxError\",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger(\"ajaxComplete\",[T,v]),--S.active||S.event.trigger(\"ajaxStop\")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,\"json\")},getScript:function(e,t){return S.get(e,void 0,t,\"script\")}}),S.each([\"get\",\"post\"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)\"content-type\"===t.toLowerCase()&&(e.contentType=e.headers[t]||\"\")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:\"GET\",dataType:\"script\",cache:!0,async:!1,global:!1,converters:{\"text script\":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not(\"body\").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&\"withCredentials\"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e[\"X-Requested-With\"]||(e[\"X-Requested-With\"]=\"XMLHttpRequest\"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,\"abort\"===e?r.abort():\"error\"===e?\"number\"!=typeof r.status?t(0,\"error\"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,\"text\"!==(r.responseType||\"text\")||\"string\"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o(\"error\"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o(\"abort\");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/\\b(?:java|ecma)script\\b/},converters:{\"text script\":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\")}),S.ajaxTransport(\"script\",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S(\"<script>\").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on(\"load error\",i=function(e){r.remove(),i=null,e&&t(\"error\"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\\?(?=&|$)|\\?\\?/;S.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=zt.pop()||S.expando+\"_\"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter(\"json jsonp\",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?\"url\":\"string\"==typeof e.data&&0===(e.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Ut.test(e.data)&&\"data\");if(a||\"jsonp\"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,\"$1\"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?\"&\":\"?\")+e.jsonp+\"=\"+r),e.converters[\"script json\"]=function(){return o||S.error(r+\" was not called\"),o[0]},e.dataTypes[0]=\"json\",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),\"script\"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument(\"\").body).innerHTML=\"<form></form><form></form>\",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return\"string\"!=typeof e?[]:(\"boolean\"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument(\"\")).createElement(\"base\")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(\" \");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(i=\"POST\"),0<a.length&&S.ajax({url:e,type:i||\"GET\",dataType:\"html\",data:t}).done(function(e){o=arguments,a.html(r?S(\"<div>\").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,\"position\"),c=S(e),f={};\"static\"===l&&(e.style.position=\"relative\"),s=c.offset(),o=S.css(e,\"top\"),u=S.css(e,\"left\"),(\"absolute\"===l||\"fixed\"===l)&&-1<(o+u).indexOf(\"auto\")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),\"using\"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if(\"fixed\"===S.css(r,\"position\"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&\"static\"===S.css(e,\"position\"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,\"borderTopWidth\",!0),i.left+=S.css(e,\"borderLeftWidth\",!0))}return{top:t.top-i.top-S.css(r,\"marginTop\",!0),left:t.left-i.left-S.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&\"static\"===S.css(e,\"position\"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(t,i){var o=\"pageYOffset\"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each([\"top\",\"left\"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+\"px\":t})}),S.each({Height:\"height\",Width:\"width\"},function(a,s){S.each({padding:\"inner\"+a,content:s,\"\":\"outer\"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||\"boolean\"!=typeof e),i=r||(!0===e||!0===t?\"margin\":\"border\");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf(\"outer\")?e[\"inner\"+a]:e.document.documentElement[\"client\"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body[\"scroll\"+a],r[\"scroll\"+a],e.body[\"offset\"+a],r[\"offset\"+a],r[\"client\"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each(\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu\".split(\" \"),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if(\"string\"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return(\"number\"===t||\"string\"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?\"\":(e+\"\").replace(Xt,\"\")},\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},\"undefined\"==typeof e&&(C.jQuery=C.$=S),S});\n","/*!\n  * Bootstrap v5.1.3 (https://getbootstrap.com/)\n  * Copyright 2011-2021 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)\n  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n  */\n!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e(require(\"@popperjs/core\")):\"function\"==typeof define&&define.amd?define([\"@popperjs/core\"],e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).bootstrap=e(t.Popper)}(this,(function(t){\"use strict\";function e(t){if(t&&t.__esModule)return t;const e=Object.create(null);if(t)for(const i in t)if(\"default\"!==i){const s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>t[i]})}return e.default=t,Object.freeze(e)}const i=e(t),s=\"transitionend\",n=t=>{let e=t.getAttribute(\"data-bs-target\");if(!e||\"#\"===e){let i=t.getAttribute(\"href\");if(!i||!i.includes(\"#\")&&!i.startsWith(\".\"))return null;i.includes(\"#\")&&!i.startsWith(\"#\")&&(i=`#${i.split(\"#\")[1]}`),e=i&&\"#\"!==i?i.trim():null}return e},o=t=>{const e=n(t);return e&&document.querySelector(e)?e:null},r=t=>{const e=n(t);return e?document.querySelector(e):null},a=t=>{t.dispatchEvent(new Event(s))},l=t=>!(!t||\"object\"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),c=t=>l(t)?t.jquery?t[0]:t:\"string\"==typeof t&&t.length>0?document.querySelector(t):null,h=(t,e,i)=>{Object.keys(i).forEach((s=>{const n=i[s],o=e[s],r=o&&l(o)?\"element\":null==(a=o)?`${a}`:{}.toString.call(a).match(/\\s([a-z]+)/i)[1].toLowerCase();var a;if(!new RegExp(n).test(r))throw new TypeError(`${t.toUpperCase()}: Option \"${s}\" provided type \"${r}\" but expected type \"${n}\".`)}))},d=t=>!(!l(t)||0===t.getClientRects().length)&&\"visible\"===getComputedStyle(t).getPropertyValue(\"visibility\"),u=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains(\"disabled\")||(void 0!==t.disabled?t.disabled:t.hasAttribute(\"disabled\")&&\"false\"!==t.getAttribute(\"disabled\")),g=t=>{if(!document.documentElement.attachShadow)return null;if(\"function\"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?g(t.parentNode):null},_=()=>{},f=t=>{t.offsetHeight},p=()=>{const{jQuery:t}=window;return t&&!document.body.hasAttribute(\"data-bs-no-jquery\")?t:null},m=[],b=()=>\"rtl\"===document.documentElement.dir,v=t=>{var e;e=()=>{const e=p();if(e){const i=t.NAME,s=e.fn[i];e.fn[i]=t.jQueryInterface,e.fn[i].Constructor=t,e.fn[i].noConflict=()=>(e.fn[i]=s,t.jQueryInterface)}},\"loading\"===document.readyState?(m.length||document.addEventListener(\"DOMContentLoaded\",(()=>{m.forEach((t=>t()))})),m.push(e)):e()},y=t=>{\"function\"==typeof t&&t()},E=(t,e,i=!0)=>{if(!i)return void y(t);const n=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:i}=window.getComputedStyle(t);const s=Number.parseFloat(e),n=Number.parseFloat(i);return s||n?(e=e.split(\",\")[0],i=i.split(\",\")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(i))):0})(e)+5;let o=!1;const r=({target:i})=>{i===e&&(o=!0,e.removeEventListener(s,r),y(t))};e.addEventListener(s,r),setTimeout((()=>{o||a(e)}),n)},w=(t,e,i,s)=>{let n=t.indexOf(e);if(-1===n)return t[!i&&s?t.length-1:0];const o=t.length;return n+=i?1:-1,s&&(n=(n+o)%o),t[Math.max(0,Math.min(n,o-1))]},A=/[^.]*(?=\\..*)\\.|.*/,T=/\\..*/,C=/::\\d+$/,k={};let L=1;const S={mouseenter:\"mouseover\",mouseleave:\"mouseout\"},O=/^(mouseenter|mouseleave)/i,N=new Set([\"click\",\"dblclick\",\"mouseup\",\"mousedown\",\"contextmenu\",\"mousewheel\",\"DOMMouseScroll\",\"mouseover\",\"mouseout\",\"mousemove\",\"selectstart\",\"selectend\",\"keydown\",\"keypress\",\"keyup\",\"orientationchange\",\"touchstart\",\"touchmove\",\"touchend\",\"touchcancel\",\"pointerdown\",\"pointermove\",\"pointerup\",\"pointerleave\",\"pointercancel\",\"gesturestart\",\"gesturechange\",\"gestureend\",\"focus\",\"blur\",\"change\",\"reset\",\"select\",\"submit\",\"focusin\",\"focusout\",\"load\",\"unload\",\"beforeunload\",\"resize\",\"move\",\"DOMContentLoaded\",\"readystatechange\",\"error\",\"abort\",\"scroll\"]);function D(t,e){return e&&`${e}::${L++}`||t.uidEvent||L++}function I(t){const e=D(t);return t.uidEvent=e,k[e]=k[e]||{},k[e]}function P(t,e,i=null){const s=Object.keys(t);for(let n=0,o=s.length;n<o;n++){const o=t[s[n]];if(o.originalHandler===e&&o.delegationSelector===i)return o}return null}function x(t,e,i){const s=\"string\"==typeof e,n=s?i:e;let o=H(t);return N.has(o)||(o=t),[s,n,o]}function M(t,e,i,s,n){if(\"string\"!=typeof e||!t)return;if(i||(i=s,s=null),O.test(e)){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};s?s=t(s):i=t(i)}const[o,r,a]=x(e,i,s),l=I(t),c=l[a]||(l[a]={}),h=P(c,r,o?i:null);if(h)return void(h.oneOff=h.oneOff&&n);const d=D(r,e.replace(A,\"\")),u=o?function(t,e,i){return function s(n){const o=t.querySelectorAll(e);for(let{target:r}=n;r&&r!==this;r=r.parentNode)for(let a=o.length;a--;)if(o[a]===r)return n.delegateTarget=r,s.oneOff&&$.off(t,n.type,e,i),i.apply(r,[n]);return null}}(t,i,s):function(t,e){return function i(s){return s.delegateTarget=t,i.oneOff&&$.off(t,s.type,e),e.apply(t,[s])}}(t,i);u.delegationSelector=o?i:null,u.originalHandler=r,u.oneOff=n,u.uidEvent=d,c[d]=u,t.addEventListener(a,u,o)}function j(t,e,i,s,n){const o=P(e[i],s,n);o&&(t.removeEventListener(i,o,Boolean(n)),delete e[i][o.uidEvent])}function H(t){return t=t.replace(T,\"\"),S[t]||t}const $={on(t,e,i,s){M(t,e,i,s,!1)},one(t,e,i,s){M(t,e,i,s,!0)},off(t,e,i,s){if(\"string\"!=typeof e||!t)return;const[n,o,r]=x(e,i,s),a=r!==e,l=I(t),c=e.startsWith(\".\");if(void 0!==o){if(!l||!l[r])return;return void j(t,l,r,o,n?i:null)}c&&Object.keys(l).forEach((i=>{!function(t,e,i,s){const n=e[i]||{};Object.keys(n).forEach((o=>{if(o.includes(s)){const s=n[o];j(t,e,i,s.originalHandler,s.delegationSelector)}}))}(t,l,i,e.slice(1))}));const h=l[r]||{};Object.keys(h).forEach((i=>{const s=i.replace(C,\"\");if(!a||e.includes(s)){const e=h[i];j(t,l,r,e.originalHandler,e.delegationSelector)}}))},trigger(t,e,i){if(\"string\"!=typeof e||!t)return null;const s=p(),n=H(e),o=e!==n,r=N.has(n);let a,l=!0,c=!0,h=!1,d=null;return o&&s&&(a=s.Event(e,i),s(t).trigger(a),l=!a.isPropagationStopped(),c=!a.isImmediatePropagationStopped(),h=a.isDefaultPrevented()),r?(d=document.createEvent(\"HTMLEvents\"),d.initEvent(n,l,!0)):d=new CustomEvent(e,{bubbles:l,cancelable:!0}),void 0!==i&&Object.keys(i).forEach((t=>{Object.defineProperty(d,t,{get:()=>i[t]})})),h&&d.preventDefault(),c&&t.dispatchEvent(d),d.defaultPrevented&&void 0!==a&&a.preventDefault(),d}},B=new Map,z={set(t,e,i){B.has(t)||B.set(t,new Map);const s=B.get(t);s.has(e)||0===s.size?s.set(e,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(s.keys())[0]}.`)},get:(t,e)=>B.has(t)&&B.get(t).get(e)||null,remove(t,e){if(!B.has(t))return;const i=B.get(t);i.delete(e),0===i.size&&B.delete(t)}};class R{constructor(t){(t=c(t))&&(this._element=t,z.set(this._element,this.constructor.DATA_KEY,this))}dispose(){z.remove(this._element,this.constructor.DATA_KEY),$.off(this._element,this.constructor.EVENT_KEY),Object.getOwnPropertyNames(this).forEach((t=>{this[t]=null}))}_queueCallback(t,e,i=!0){E(t,e,i)}static getInstance(t){return z.get(c(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,\"object\"==typeof e?e:null)}static get VERSION(){return\"5.1.3\"}static get NAME(){throw new Error('You have to implement the static method \"NAME\", for each component!')}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}}const F=(t,e=\"hide\")=>{const i=`click.dismiss${t.EVENT_KEY}`,s=t.NAME;$.on(document,i,`[data-bs-dismiss=\"${s}\"]`,(function(i){if([\"A\",\"AREA\"].includes(this.tagName)&&i.preventDefault(),u(this))return;const n=r(this)||this.closest(`.${s}`);t.getOrCreateInstance(n)[e]()}))};class q extends R{static get NAME(){return\"alert\"}close(){if($.trigger(this._element,\"close.bs.alert\").defaultPrevented)return;this._element.classList.remove(\"show\");const t=this._element.classList.contains(\"fade\");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),$.trigger(this._element,\"closed.bs.alert\"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=q.getOrCreateInstance(this);if(\"string\"==typeof t){if(void 0===e[t]||t.startsWith(\"_\")||\"constructor\"===t)throw new TypeError(`No method named \"${t}\"`);e[t](this)}}))}}F(q,\"close\"),v(q);const W='[data-bs-toggle=\"button\"]';class U extends R{static get NAME(){return\"button\"}toggle(){this._element.setAttribute(\"aria-pressed\",this._element.classList.toggle(\"active\"))}static jQueryInterface(t){return this.each((function(){const e=U.getOrCreateInstance(this);\"toggle\"===t&&e[t]()}))}}function K(t){return\"true\"===t||\"false\"!==t&&(t===Number(t).toString()?Number(t):\"\"===t||\"null\"===t?null:t)}function V(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}$.on(document,\"click.bs.button.data-api\",W,(t=>{t.preventDefault();const e=t.target.closest(W);U.getOrCreateInstance(e).toggle()})),v(U);const X={setDataAttribute(t,e,i){t.setAttribute(`data-bs-${V(e)}`,i)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${V(e)}`)},getDataAttributes(t){if(!t)return{};const e={};return Object.keys(t.dataset).filter((t=>t.startsWith(\"bs\"))).forEach((i=>{let s=i.replace(/^bs/,\"\");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),e[s]=K(t.dataset[i])})),e},getDataAttribute:(t,e)=>K(t.getAttribute(`data-bs-${V(e)}`)),offset(t){const e=t.getBoundingClientRect();return{top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},position:t=>({top:t.offsetTop,left:t.offsetLeft})},Y={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const i=[];let s=t.parentNode;for(;s&&s.nodeType===Node.ELEMENT_NODE&&3!==s.nodeType;)s.matches(e)&&i.push(s),s=s.parentNode;return i},prev(t,e){let i=t.previousElementSibling;for(;i;){if(i.matches(e))return[i];i=i.previousElementSibling}return[]},next(t,e){let i=t.nextElementSibling;for(;i;){if(i.matches(e))return[i];i=i.nextElementSibling}return[]},focusableChildren(t){const e=[\"a\",\"button\",\"input\",\"textarea\",\"select\",\"details\",\"[tabindex]\",'[contenteditable=\"true\"]'].map((t=>`${t}:not([tabindex^=\"-\"])`)).join(\", \");return this.find(e,t).filter((t=>!u(t)&&d(t)))}},Q=\"carousel\",G={interval:5e3,keyboard:!0,slide:!1,pause:\"hover\",wrap:!0,touch:!0},Z={interval:\"(number|boolean)\",keyboard:\"boolean\",slide:\"(boolean|string)\",pause:\"(string|boolean)\",wrap:\"boolean\",touch:\"boolean\"},J=\"next\",tt=\"prev\",et=\"left\",it=\"right\",st={ArrowLeft:it,ArrowRight:et},nt=\"slid.bs.carousel\",ot=\"active\",rt=\".active.carousel-item\";class at extends R{constructor(t,e){super(t),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._indicatorsElement=Y.findOne(\".carousel-indicators\",this._element),this._touchSupported=\"ontouchstart\"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return G}static get NAME(){return Q}next(){this._slide(J)}nextWhenVisible(){!document.hidden&&d(this._element)&&this.next()}prev(){this._slide(tt)}pause(t){t||(this._isPaused=!0),Y.findOne(\".carousel-item-next, .carousel-item-prev\",this._element)&&(a(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(t){this._activeElement=Y.findOne(rt,this._element);const e=this._getItemIndex(this._activeElement);if(t>this._items.length-1||t<0)return;if(this._isSliding)return void $.one(this._element,nt,(()=>this.to(t)));if(e===t)return this.pause(),void this.cycle();const i=t>e?J:tt;this._slide(i,this._items[t])}_getConfig(t){return t={...G,...X.getDataAttributes(this._element),...\"object\"==typeof t?t:{}},h(Q,t,Z),t}_handleSwipe(){const t=Math.abs(this.touchDeltaX);if(t<=40)return;const e=t/this.touchDeltaX;this.touchDeltaX=0,e&&this._slide(e>0?it:et)}_addEventListeners(){this._config.keyboard&&$.on(this._element,\"keydown.bs.carousel\",(t=>this._keydown(t))),\"hover\"===this._config.pause&&($.on(this._element,\"mouseenter.bs.carousel\",(t=>this.pause(t))),$.on(this._element,\"mouseleave.bs.carousel\",(t=>this.cycle(t)))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const t=t=>this._pointerEvent&&(\"pen\"===t.pointerType||\"touch\"===t.pointerType),e=e=>{t(e)?this.touchStartX=e.clientX:this._pointerEvent||(this.touchStartX=e.touches[0].clientX)},i=t=>{this.touchDeltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this.touchStartX},s=e=>{t(e)&&(this.touchDeltaX=e.clientX-this.touchStartX),this._handleSwipe(),\"hover\"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((t=>this.cycle(t)),500+this._config.interval))};Y.find(\".carousel-item img\",this._element).forEach((t=>{$.on(t,\"dragstart.bs.carousel\",(t=>t.preventDefault()))})),this._pointerEvent?($.on(this._element,\"pointerdown.bs.carousel\",(t=>e(t))),$.on(this._element,\"pointerup.bs.carousel\",(t=>s(t))),this._element.classList.add(\"pointer-event\")):($.on(this._element,\"touchstart.bs.carousel\",(t=>e(t))),$.on(this._element,\"touchmove.bs.carousel\",(t=>i(t))),$.on(this._element,\"touchend.bs.carousel\",(t=>s(t))))}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=st[t.key];e&&(t.preventDefault(),this._slide(e))}_getItemIndex(t){return this._items=t&&t.parentNode?Y.find(\".carousel-item\",t.parentNode):[],this._items.indexOf(t)}_getItemByOrder(t,e){const i=t===J;return w(this._items,e,i,this._config.wrap)}_triggerSlideEvent(t,e){const i=this._getItemIndex(t),s=this._getItemIndex(Y.findOne(rt,this._element));return $.trigger(this._element,\"slide.bs.carousel\",{relatedTarget:t,direction:e,from:s,to:i})}_setActiveIndicatorElement(t){if(this._indicatorsElement){const e=Y.findOne(\".active\",this._indicatorsElement);e.classList.remove(ot),e.removeAttribute(\"aria-current\");const i=Y.find(\"[data-bs-target]\",this._indicatorsElement);for(let e=0;e<i.length;e++)if(Number.parseInt(i[e].getAttribute(\"data-bs-slide-to\"),10)===this._getItemIndex(t)){i[e].classList.add(ot),i[e].setAttribute(\"aria-current\",\"true\");break}}}_updateInterval(){const t=this._activeElement||Y.findOne(rt,this._element);if(!t)return;const e=Number.parseInt(t.getAttribute(\"data-bs-interval\"),10);e?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=e):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(t,e){const i=this._directionToOrder(t),s=Y.findOne(rt,this._element),n=this._getItemIndex(s),o=e||this._getItemByOrder(i,s),r=this._getItemIndex(o),a=Boolean(this._interval),l=i===J,c=l?\"carousel-item-start\":\"carousel-item-end\",h=l?\"carousel-item-next\":\"carousel-item-prev\",d=this._orderToDirection(i);if(o&&o.classList.contains(ot))return void(this._isSliding=!1);if(this._isSliding)return;if(this._triggerSlideEvent(o,d).defaultPrevented)return;if(!s||!o)return;this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(o),this._activeElement=o;const u=()=>{$.trigger(this._element,nt,{relatedTarget:o,direction:d,from:n,to:r})};if(this._element.classList.contains(\"slide\")){o.classList.add(h),f(o),s.classList.add(c),o.classList.add(c);const t=()=>{o.classList.remove(c,h),o.classList.add(ot),s.classList.remove(ot,h,c),this._isSliding=!1,setTimeout(u,0)};this._queueCallback(t,s,!0)}else s.classList.remove(ot),o.classList.add(ot),this._isSliding=!1,u();a&&this.cycle()}_directionToOrder(t){return[it,et].includes(t)?b()?t===et?tt:J:t===et?J:tt:t}_orderToDirection(t){return[J,tt].includes(t)?b()?t===tt?et:it:t===tt?it:et:t}static carouselInterface(t,e){const i=at.getOrCreateInstance(t,e);let{_config:s}=i;\"object\"==typeof e&&(s={...s,...e});const n=\"string\"==typeof e?e:s.slide;if(\"number\"==typeof e)i.to(e);else if(\"string\"==typeof n){if(void 0===i[n])throw new TypeError(`No method named \"${n}\"`);i[n]()}else s.interval&&s.ride&&(i.pause(),i.cycle())}static jQueryInterface(t){return this.each((function(){at.carouselInterface(this,t)}))}static dataApiClickHandler(t){const e=r(this);if(!e||!e.classList.contains(\"carousel\"))return;const i={...X.getDataAttributes(e),...X.getDataAttributes(this)},s=this.getAttribute(\"data-bs-slide-to\");s&&(i.interval=!1),at.carouselInterface(e,i),s&&at.getInstance(e).to(s),t.preventDefault()}}$.on(document,\"click.bs.carousel.data-api\",\"[data-bs-slide], [data-bs-slide-to]\",at.dataApiClickHandler),$.on(window,\"load.bs.carousel.data-api\",(()=>{const t=Y.find('[data-bs-ride=\"carousel\"]');for(let e=0,i=t.length;e<i;e++)at.carouselInterface(t[e],at.getInstance(t[e]))})),v(at);const lt=\"collapse\",ct={toggle:!0,parent:null},ht={toggle:\"boolean\",parent:\"(null|element)\"},dt=\"show\",ut=\"collapse\",gt=\"collapsing\",_t=\"collapsed\",ft=\":scope .collapse .collapse\",pt='[data-bs-toggle=\"collapse\"]';class mt extends R{constructor(t,e){super(t),this._isTransitioning=!1,this._config=this._getConfig(e),this._triggerArray=[];const i=Y.find(pt);for(let t=0,e=i.length;t<e;t++){const e=i[t],s=o(e),n=Y.find(s).filter((t=>t===this._element));null!==s&&n.length&&(this._selector=s,this._triggerArray.push(e))}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ct}static get NAME(){return lt}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t,e=[];if(this._config.parent){const t=Y.find(ft,this._config.parent);e=Y.find(\".collapse.show, .collapse.collapsing\",this._config.parent).filter((e=>!t.includes(e)))}const i=Y.findOne(this._selector);if(e.length){const s=e.find((t=>i!==t));if(t=s?mt.getInstance(s):null,t&&t._isTransitioning)return}if($.trigger(this._element,\"show.bs.collapse\").defaultPrevented)return;e.forEach((e=>{i!==e&&mt.getOrCreateInstance(e,{toggle:!1}).hide(),t||z.set(e,\"bs.collapse\",null)}));const s=this._getDimension();this._element.classList.remove(ut),this._element.classList.add(gt),this._element.style[s]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${s[0].toUpperCase()+s.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(gt),this._element.classList.add(ut,dt),this._element.style[s]=\"\",$.trigger(this._element,\"shown.bs.collapse\")}),this._element,!0),this._element.style[s]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if($.trigger(this._element,\"hide.bs.collapse\").defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,f(this._element),this._element.classList.add(gt),this._element.classList.remove(ut,dt);const e=this._triggerArray.length;for(let t=0;t<e;t++){const e=this._triggerArray[t],i=r(e);i&&!this._isShown(i)&&this._addAriaAndCollapsedClass([e],!1)}this._isTransitioning=!0,this._element.style[t]=\"\",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(gt),this._element.classList.add(ut),$.trigger(this._element,\"hidden.bs.collapse\")}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(dt)}_getConfig(t){return(t={...ct,...X.getDataAttributes(this._element),...t}).toggle=Boolean(t.toggle),t.parent=c(t.parent),h(lt,t,ht),t}_getDimension(){return this._element.classList.contains(\"collapse-horizontal\")?\"width\":\"height\"}_initializeChildren(){if(!this._config.parent)return;const t=Y.find(ft,this._config.parent);Y.find(pt,this._config.parent).filter((e=>!t.includes(e))).forEach((t=>{const e=r(t);e&&this._addAriaAndCollapsedClass([t],this._isShown(e))}))}_addAriaAndCollapsedClass(t,e){t.length&&t.forEach((t=>{e?t.classList.remove(_t):t.classList.add(_t),t.setAttribute(\"aria-expanded\",e)}))}static jQueryInterface(t){return this.each((function(){const e={};\"string\"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1);const i=mt.getOrCreateInstance(this,e);if(\"string\"==typeof t){if(void 0===i[t])throw new TypeError(`No method named \"${t}\"`);i[t]()}}))}}$.on(document,\"click.bs.collapse.data-api\",pt,(function(t){(\"A\"===t.target.tagName||t.delegateTarget&&\"A\"===t.delegateTarget.tagName)&&t.preventDefault();const e=o(this);Y.find(e).forEach((t=>{mt.getOrCreateInstance(t,{toggle:!1}).toggle()}))})),v(mt);const bt=\"dropdown\",vt=\"Escape\",yt=\"Space\",Et=\"ArrowUp\",wt=\"ArrowDown\",At=new RegExp(\"ArrowUp|ArrowDown|Escape\"),Tt=\"click.bs.dropdown.data-api\",Ct=\"keydown.bs.dropdown.data-api\",kt=\"show\",Lt='[data-bs-toggle=\"dropdown\"]',St=\".dropdown-menu\",Ot=b()?\"top-end\":\"top-start\",Nt=b()?\"top-start\":\"top-end\",Dt=b()?\"bottom-end\":\"bottom-start\",It=b()?\"bottom-start\":\"bottom-end\",Pt=b()?\"left-start\":\"right-start\",xt=b()?\"right-start\":\"left-start\",Mt={offset:[0,2],boundary:\"clippingParents\",reference:\"toggle\",display:\"dynamic\",popperConfig:null,autoClose:!0},jt={offset:\"(array|string|function)\",boundary:\"(string|element)\",reference:\"(string|element|object)\",display:\"string\",popperConfig:\"(null|object|function)\",autoClose:\"(boolean|string)\"};class Ht extends R{constructor(t,e){super(t),this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar()}static get Default(){return Mt}static get DefaultType(){return jt}static get NAME(){return bt}toggle(){return this._isShown()?this.hide():this.show()}show(){if(u(this._element)||this._isShown(this._menu))return;const t={relatedTarget:this._element};if($.trigger(this._element,\"show.bs.dropdown\",t).defaultPrevented)return;const e=Ht.getParentFromElement(this._element);this._inNavbar?X.setDataAttribute(this._menu,\"popper\",\"none\"):this._createPopper(e),\"ontouchstart\"in document.documentElement&&!e.closest(\".navbar-nav\")&&[].concat(...document.body.children).forEach((t=>$.on(t,\"mouseover\",_))),this._element.focus(),this._element.setAttribute(\"aria-expanded\",!0),this._menu.classList.add(kt),this._element.classList.add(kt),$.trigger(this._element,\"shown.bs.dropdown\",t)}hide(){if(u(this._element)||!this._isShown(this._menu))return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){$.trigger(this._element,\"hide.bs.dropdown\",t).defaultPrevented||(\"ontouchstart\"in document.documentElement&&[].concat(...document.body.children).forEach((t=>$.off(t,\"mouseover\",_))),this._popper&&this._popper.destroy(),this._menu.classList.remove(kt),this._element.classList.remove(kt),this._element.setAttribute(\"aria-expanded\",\"false\"),X.removeDataAttribute(this._menu,\"popper\"),$.trigger(this._element,\"hidden.bs.dropdown\",t))}_getConfig(t){if(t={...this.constructor.Default,...X.getDataAttributes(this._element),...t},h(bt,t,this.constructor.DefaultType),\"object\"==typeof t.reference&&!l(t.reference)&&\"function\"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${bt.toUpperCase()}: Option \"reference\" provided type \"object\" without a required \"getBoundingClientRect\" method.`);return t}_createPopper(t){if(void 0===i)throw new TypeError(\"Bootstrap's dropdowns require Popper (https://popper.js.org)\");let e=this._element;\"parent\"===this._config.reference?e=t:l(this._config.reference)?e=c(this._config.reference):\"object\"==typeof this._config.reference&&(e=this._config.reference);const s=this._getPopperConfig(),n=s.modifiers.find((t=>\"applyStyles\"===t.name&&!1===t.enabled));this._popper=i.createPopper(e,this._menu,s),n&&X.setDataAttribute(this._menu,\"popper\",\"static\")}_isShown(t=this._element){return t.classList.contains(kt)}_getMenuElement(){return Y.next(this._element,St)[0]}_getPlacement(){const t=this._element.parentNode;if(t.classList.contains(\"dropend\"))return Pt;if(t.classList.contains(\"dropstart\"))return xt;const e=\"end\"===getComputedStyle(this._menu).getPropertyValue(\"--bs-position\").trim();return t.classList.contains(\"dropup\")?e?Nt:Ot:e?It:Dt}_detectNavbar(){return null!==this._element.closest(\".navbar\")}_getOffset(){const{offset:t}=this._config;return\"string\"==typeof t?t.split(\",\").map((t=>Number.parseInt(t,10))):\"function\"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:\"preventOverflow\",options:{boundary:this._config.boundary}},{name:\"offset\",options:{offset:this._getOffset()}}]};return\"static\"===this._config.display&&(t.modifiers=[{name:\"applyStyles\",enabled:!1}]),{...t,...\"function\"==typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const i=Y.find(\".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)\",this._menu).filter(d);i.length&&w(i,e,t===wt,!i.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=Ht.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===e[t])throw new TypeError(`No method named \"${t}\"`);e[t]()}}))}static clearMenus(t){if(t&&(2===t.button||\"keyup\"===t.type&&\"Tab\"!==t.key))return;const e=Y.find(Lt);for(let i=0,s=e.length;i<s;i++){const s=Ht.getInstance(e[i]);if(!s||!1===s._config.autoClose)continue;if(!s._isShown())continue;const n={relatedTarget:s._element};if(t){const e=t.composedPath(),i=e.includes(s._menu);if(e.includes(s._element)||\"inside\"===s._config.autoClose&&!i||\"outside\"===s._config.autoClose&&i)continue;if(s._menu.contains(t.target)&&(\"keyup\"===t.type&&\"Tab\"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;\"click\"===t.type&&(n.clickEvent=t)}s._completeHide(n)}}static getParentFromElement(t){return r(t)||t.parentNode}static dataApiKeydownHandler(t){if(/input|textarea/i.test(t.target.tagName)?t.key===yt||t.key!==vt&&(t.key!==wt&&t.key!==Et||t.target.closest(St)):!At.test(t.key))return;const e=this.classList.contains(kt);if(!e&&t.key===vt)return;if(t.preventDefault(),t.stopPropagation(),u(this))return;const i=this.matches(Lt)?this:Y.prev(this,Lt)[0],s=Ht.getOrCreateInstance(i);if(t.key!==vt)return t.key===Et||t.key===wt?(e||s.show(),void s._selectMenuItem(t)):void(e&&t.key!==yt||Ht.clearMenus());s.hide()}}$.on(document,Ct,Lt,Ht.dataApiKeydownHandler),$.on(document,Ct,St,Ht.dataApiKeydownHandler),$.on(document,Tt,Ht.clearMenus),$.on(document,\"keyup.bs.dropdown.data-api\",Ht.clearMenus),$.on(document,Tt,Lt,(function(t){t.preventDefault(),Ht.getOrCreateInstance(this).toggle()})),v(Ht);const $t=\".fixed-top, .fixed-bottom, .is-fixed, .sticky-top\",Bt=\".sticky-top\";class zt{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,\"paddingRight\",(e=>e+t)),this._setElementAttributes($t,\"paddingRight\",(e=>e+t)),this._setElementAttributes(Bt,\"marginRight\",(e=>e-t))}_disableOverFlow(){this._saveInitialAttribute(this._element,\"overflow\"),this._element.style.overflow=\"hidden\"}_setElementAttributes(t,e,i){const s=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+s)return;this._saveInitialAttribute(t,e);const n=window.getComputedStyle(t)[e];t.style[e]=`${i(Number.parseFloat(n))}px`}))}reset(){this._resetElementAttributes(this._element,\"overflow\"),this._resetElementAttributes(this._element,\"paddingRight\"),this._resetElementAttributes($t,\"paddingRight\"),this._resetElementAttributes(Bt,\"marginRight\")}_saveInitialAttribute(t,e){const i=t.style[e];i&&X.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const i=X.getDataAttribute(t,e);void 0===i?t.style.removeProperty(e):(X.removeDataAttribute(t,e),t.style[e]=i)}))}_applyManipulationCallback(t,e){l(t)?e(t):Y.find(t,this._element).forEach(e)}isOverflowing(){return this.getWidth()>0}}const Rt={className:\"modal-backdrop\",isVisible:!0,isAnimated:!1,rootElement:\"body\",clickCallback:null},Ft={className:\"string\",isVisible:\"boolean\",isAnimated:\"boolean\",rootElement:\"(element|string)\",clickCallback:\"(function|null)\"},qt=\"show\",Wt=\"mousedown.bs.backdrop\";class Ut{constructor(t){this._config=this._getConfig(t),this._isAppended=!1,this._element=null}show(t){this._config.isVisible?(this._append(),this._config.isAnimated&&f(this._getElement()),this._getElement().classList.add(qt),this._emulateAnimation((()=>{y(t)}))):y(t)}hide(t){this._config.isVisible?(this._getElement().classList.remove(qt),this._emulateAnimation((()=>{this.dispose(),y(t)}))):y(t)}_getElement(){if(!this._element){const t=document.createElement(\"div\");t.className=this._config.className,this._config.isAnimated&&t.classList.add(\"fade\"),this._element=t}return this._element}_getConfig(t){return(t={...Rt,...\"object\"==typeof t?t:{}}).rootElement=c(t.rootElement),h(\"backdrop\",t,Ft),t}_append(){this._isAppended||(this._config.rootElement.append(this._getElement()),$.on(this._getElement(),Wt,(()=>{y(this._config.clickCallback)})),this._isAppended=!0)}dispose(){this._isAppended&&($.off(this._element,Wt),this._element.remove(),this._isAppended=!1)}_emulateAnimation(t){E(t,this._getElement(),this._config.isAnimated)}}const Kt={trapElement:null,autofocus:!0},Vt={trapElement:\"element\",autofocus:\"boolean\"},Xt=\".bs.focustrap\",Yt=\"backward\";class Qt{constructor(t){this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}activate(){const{trapElement:t,autofocus:e}=this._config;this._isActive||(e&&t.focus(),$.off(document,Xt),$.on(document,\"focusin.bs.focustrap\",(t=>this._handleFocusin(t))),$.on(document,\"keydown.tab.bs.focustrap\",(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,$.off(document,Xt))}_handleFocusin(t){const{target:e}=t,{trapElement:i}=this._config;if(e===document||e===i||i.contains(e))return;const s=Y.focusableChildren(i);0===s.length?i.focus():this._lastTabNavDirection===Yt?s[s.length-1].focus():s[0].focus()}_handleKeydown(t){\"Tab\"===t.key&&(this._lastTabNavDirection=t.shiftKey?Yt:\"forward\")}_getConfig(t){return t={...Kt,...\"object\"==typeof t?t:{}},h(\"focustrap\",t,Vt),t}}const Gt=\"modal\",Zt=\"Escape\",Jt={backdrop:!0,keyboard:!0,focus:!0},te={backdrop:\"(boolean|string)\",keyboard:\"boolean\",focus:\"boolean\"},ee=\"hidden.bs.modal\",ie=\"show.bs.modal\",se=\"resize.bs.modal\",ne=\"click.dismiss.bs.modal\",oe=\"keydown.dismiss.bs.modal\",re=\"mousedown.dismiss.bs.modal\",ae=\"modal-open\",le=\"show\",ce=\"modal-static\";class he extends R{constructor(t,e){super(t),this._config=this._getConfig(e),this._dialog=Y.findOne(\".modal-dialog\",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollBar=new zt}static get Default(){return Jt}static get NAME(){return Gt}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||$.trigger(this._element,ie,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isAnimated()&&(this._isTransitioning=!0),this._scrollBar.hide(),document.body.classList.add(ae),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),$.on(this._dialog,re,(()=>{$.one(this._element,\"mouseup.dismiss.bs.modal\",(t=>{t.target===this._element&&(this._ignoreBackdropClick=!0)}))})),this._showBackdrop((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;if($.trigger(this._element,\"hide.bs.modal\").defaultPrevented)return;this._isShown=!1;const t=this._isAnimated();t&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),this._focustrap.deactivate(),this._element.classList.remove(le),$.off(this._element,ne),$.off(this._dialog,re),this._queueCallback((()=>this._hideModal()),this._element,t)}dispose(){[window,this._dialog].forEach((t=>$.off(t,\".bs.modal\"))),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ut({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Qt({trapElement:this._element})}_getConfig(t){return t={...Jt,...X.getDataAttributes(this._element),...\"object\"==typeof t?t:{}},h(Gt,t,te),t}_showElement(t){const e=this._isAnimated(),i=Y.findOne(\".modal-body\",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.append(this._element),this._element.style.display=\"block\",this._element.removeAttribute(\"aria-hidden\"),this._element.setAttribute(\"aria-modal\",!0),this._element.setAttribute(\"role\",\"dialog\"),this._element.scrollTop=0,i&&(i.scrollTop=0),e&&f(this._element),this._element.classList.add(le),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,$.trigger(this._element,\"shown.bs.modal\",{relatedTarget:t})}),this._dialog,e)}_setEscapeEvent(){this._isShown?$.on(this._element,oe,(t=>{this._config.keyboard&&t.key===Zt?(t.preventDefault(),this.hide()):this._config.keyboard||t.key!==Zt||this._triggerBackdropTransition()})):$.off(this._element,oe)}_setResizeEvent(){this._isShown?$.on(window,se,(()=>this._adjustDialog())):$.off(window,se)}_hideModal(){this._element.style.display=\"none\",this._element.setAttribute(\"aria-hidden\",!0),this._element.removeAttribute(\"aria-modal\"),this._element.removeAttribute(\"role\"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(ae),this._resetAdjustments(),this._scrollBar.reset(),$.trigger(this._element,ee)}))}_showBackdrop(t){$.on(this._element,ne,(t=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:t.target===t.currentTarget&&(!0===this._config.backdrop?this.hide():\"static\"===this._config.backdrop&&this._triggerBackdropTransition())})),this._backdrop.show(t)}_isAnimated(){return this._element.classList.contains(\"fade\")}_triggerBackdropTransition(){if($.trigger(this._element,\"hidePrevented.bs.modal\").defaultPrevented)return;const{classList:t,scrollHeight:e,style:i}=this._element,s=e>document.documentElement.clientHeight;!s&&\"hidden\"===i.overflowY||t.contains(ce)||(s||(i.overflowY=\"hidden\"),t.add(ce),this._queueCallback((()=>{t.remove(ce),s||this._queueCallback((()=>{i.overflowY=\"\"}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;(!i&&t&&!b()||i&&!t&&b())&&(this._element.style.paddingLeft=`${e}px`),(i&&!t&&!b()||!i&&t&&b())&&(this._element.style.paddingRight=`${e}px`)}_resetAdjustments(){this._element.style.paddingLeft=\"\",this._element.style.paddingRight=\"\"}static jQueryInterface(t,e){return this.each((function(){const i=he.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===i[t])throw new TypeError(`No method named \"${t}\"`);i[t](e)}}))}}$.on(document,\"click.bs.modal.data-api\",'[data-bs-toggle=\"modal\"]',(function(t){const e=r(this);[\"A\",\"AREA\"].includes(this.tagName)&&t.preventDefault(),$.one(e,ie,(t=>{t.defaultPrevented||$.one(e,ee,(()=>{d(this)&&this.focus()}))}));const i=Y.findOne(\".modal.show\");i&&he.getInstance(i).hide(),he.getOrCreateInstance(e).toggle(this)})),F(he),v(he);const de=\"offcanvas\",ue={backdrop:!0,keyboard:!0,scroll:!1},ge={backdrop:\"boolean\",keyboard:\"boolean\",scroll:\"boolean\"},_e=\"show\",fe=\".offcanvas.show\",pe=\"hidden.bs.offcanvas\";class me extends R{constructor(t,e){super(t),this._config=this._getConfig(e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get NAME(){return de}static get Default(){return ue}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||$.trigger(this._element,\"show.bs.offcanvas\",{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._element.style.visibility=\"visible\",this._backdrop.show(),this._config.scroll||(new zt).hide(),this._element.removeAttribute(\"aria-hidden\"),this._element.setAttribute(\"aria-modal\",!0),this._element.setAttribute(\"role\",\"dialog\"),this._element.classList.add(_e),this._queueCallback((()=>{this._config.scroll||this._focustrap.activate(),$.trigger(this._element,\"shown.bs.offcanvas\",{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&($.trigger(this._element,\"hide.bs.offcanvas\").defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.remove(_e),this._backdrop.hide(),this._queueCallback((()=>{this._element.setAttribute(\"aria-hidden\",!0),this._element.removeAttribute(\"aria-modal\"),this._element.removeAttribute(\"role\"),this._element.style.visibility=\"hidden\",this._config.scroll||(new zt).reset(),$.trigger(this._element,pe)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_getConfig(t){return t={...ue,...X.getDataAttributes(this._element),...\"object\"==typeof t?t:{}},h(de,t,ge),t}_initializeBackDrop(){return new Ut({className:\"offcanvas-backdrop\",isVisible:this._config.backdrop,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:()=>this.hide()})}_initializeFocusTrap(){return new Qt({trapElement:this._element})}_addEventListeners(){$.on(this._element,\"keydown.dismiss.bs.offcanvas\",(t=>{this._config.keyboard&&\"Escape\"===t.key&&this.hide()}))}static jQueryInterface(t){return this.each((function(){const e=me.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===e[t]||t.startsWith(\"_\")||\"constructor\"===t)throw new TypeError(`No method named \"${t}\"`);e[t](this)}}))}}$.on(document,\"click.bs.offcanvas.data-api\",'[data-bs-toggle=\"offcanvas\"]',(function(t){const e=r(this);if([\"A\",\"AREA\"].includes(this.tagName)&&t.preventDefault(),u(this))return;$.one(e,pe,(()=>{d(this)&&this.focus()}));const i=Y.findOne(fe);i&&i!==e&&me.getInstance(i).hide(),me.getOrCreateInstance(e).toggle(this)})),$.on(window,\"load.bs.offcanvas.data-api\",(()=>Y.find(fe).forEach((t=>me.getOrCreateInstance(t).show())))),F(me),v(me);const be=new Set([\"background\",\"cite\",\"href\",\"itemtype\",\"longdesc\",\"poster\",\"src\",\"xlink:href\"]),ve=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,ye=/^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[\\d+/a-z]+=*$/i,Ee=(t,e)=>{const i=t.nodeName.toLowerCase();if(e.includes(i))return!be.has(i)||Boolean(ve.test(t.nodeValue)||ye.test(t.nodeValue));const s=e.filter((t=>t instanceof RegExp));for(let t=0,e=s.length;t<e;t++)if(s[t].test(i))return!0;return!1};function we(t,e,i){if(!t.length)return t;if(i&&\"function\"==typeof i)return i(t);const s=(new window.DOMParser).parseFromString(t,\"text/html\"),n=[].concat(...s.body.querySelectorAll(\"*\"));for(let t=0,i=n.length;t<i;t++){const i=n[t],s=i.nodeName.toLowerCase();if(!Object.keys(e).includes(s)){i.remove();continue}const o=[].concat(...i.attributes),r=[].concat(e[\"*\"]||[],e[s]||[]);o.forEach((t=>{Ee(t,r)||i.removeAttribute(t.nodeName)}))}return s.body.innerHTML}const Ae=\"tooltip\",Te=new Set([\"sanitize\",\"allowList\",\"sanitizeFn\"]),Ce={animation:\"boolean\",template:\"string\",title:\"(string|element|function)\",trigger:\"string\",delay:\"(number|object)\",html:\"boolean\",selector:\"(string|boolean)\",placement:\"(string|function)\",offset:\"(array|string|function)\",container:\"(string|element|boolean)\",fallbackPlacements:\"array\",boundary:\"(string|element)\",customClass:\"(string|function)\",sanitize:\"boolean\",sanitizeFn:\"(null|function)\",allowList:\"object\",popperConfig:\"(null|object|function)\"},ke={AUTO:\"auto\",TOP:\"top\",RIGHT:b()?\"left\":\"right\",BOTTOM:\"bottom\",LEFT:b()?\"right\":\"left\"},Le={animation:!0,template:'<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',trigger:\"hover focus\",title:\"\",delay:0,html:!1,selector:!1,placement:\"top\",offset:[0,0],container:!1,fallbackPlacements:[\"top\",\"right\",\"bottom\",\"left\"],boundary:\"clippingParents\",customClass:\"\",sanitize:!0,sanitizeFn:null,allowList:{\"*\":[\"class\",\"dir\",\"id\",\"lang\",\"role\",/^aria-[\\w-]*$/i],a:[\"target\",\"href\",\"title\",\"rel\"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:[\"src\",\"srcset\",\"alt\",\"title\",\"width\",\"height\"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},popperConfig:null},Se={HIDE:\"hide.bs.tooltip\",HIDDEN:\"hidden.bs.tooltip\",SHOW:\"show.bs.tooltip\",SHOWN:\"shown.bs.tooltip\",INSERTED:\"inserted.bs.tooltip\",CLICK:\"click.bs.tooltip\",FOCUSIN:\"focusin.bs.tooltip\",FOCUSOUT:\"focusout.bs.tooltip\",MOUSEENTER:\"mouseenter.bs.tooltip\",MOUSELEAVE:\"mouseleave.bs.tooltip\"},Oe=\"fade\",Ne=\"show\",De=\"show\",Ie=\"out\",Pe=\".tooltip-inner\",xe=\".modal\",Me=\"hide.bs.modal\",je=\"hover\",He=\"focus\";class $e extends R{constructor(t,e){if(void 0===i)throw new TypeError(\"Bootstrap's tooltips require Popper (https://popper.js.org)\");super(t),this._isEnabled=!0,this._timeout=0,this._hoverState=\"\",this._activeTrigger={},this._popper=null,this._config=this._getConfig(e),this.tip=null,this._setListeners()}static get Default(){return Le}static get NAME(){return Ae}static get Event(){return Se}static get DefaultType(){return Ce}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled)if(t){const e=this._initializeOnDelegatedTarget(t);e._activeTrigger.click=!e._activeTrigger.click,e._isWithActiveTrigger()?e._enter(null,e):e._leave(null,e)}else{if(this.getTipElement().classList.contains(Ne))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),$.off(this._element.closest(xe),Me,this._hideModalHandler),this.tip&&this.tip.remove(),this._disposePopper(),super.dispose()}show(){if(\"none\"===this._element.style.display)throw new Error(\"Please use show on visible elements\");if(!this.isWithContent()||!this._isEnabled)return;const t=$.trigger(this._element,this.constructor.Event.SHOW),e=g(this._element),s=null===e?this._element.ownerDocument.documentElement.contains(this._element):e.contains(this._element);if(t.defaultPrevented||!s)return;\"tooltip\"===this.constructor.NAME&&this.tip&&this.getTitle()!==this.tip.querySelector(Pe).innerHTML&&(this._disposePopper(),this.tip.remove(),this.tip=null);const n=this.getTipElement(),o=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME);n.setAttribute(\"id\",o),this._element.setAttribute(\"aria-describedby\",o),this._config.animation&&n.classList.add(Oe);const r=\"function\"==typeof this._config.placement?this._config.placement.call(this,n,this._element):this._config.placement,a=this._getAttachment(r);this._addAttachmentClass(a);const{container:l}=this._config;z.set(n,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(l.append(n),$.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=i.createPopper(this._element,n,this._getPopperConfig(a)),n.classList.add(Ne);const c=this._resolvePossibleFunction(this._config.customClass);c&&n.classList.add(...c.split(\" \")),\"ontouchstart\"in document.documentElement&&[].concat(...document.body.children).forEach((t=>{$.on(t,\"mouseover\",_)}));const h=this.tip.classList.contains(Oe);this._queueCallback((()=>{const t=this._hoverState;this._hoverState=null,$.trigger(this._element,this.constructor.Event.SHOWN),t===Ie&&this._leave(null,this)}),this.tip,h)}hide(){if(!this._popper)return;const t=this.getTipElement();if($.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;t.classList.remove(Ne),\"ontouchstart\"in document.documentElement&&[].concat(...document.body.children).forEach((t=>$.off(t,\"mouseover\",_))),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const e=this.tip.classList.contains(Oe);this._queueCallback((()=>{this._isWithActiveTrigger()||(this._hoverState!==De&&t.remove(),this._cleanTipClass(),this._element.removeAttribute(\"aria-describedby\"),$.trigger(this._element,this.constructor.Event.HIDDEN),this._disposePopper())}),this.tip,e),this._hoverState=\"\"}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const t=document.createElement(\"div\");t.innerHTML=this._config.template;const e=t.children[0];return this.setContent(e),e.classList.remove(Oe,Ne),this.tip=e,this.tip}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),Pe)}_sanitizeAndSetContent(t,e,i){const s=Y.findOne(i,t);e||!s?this.setElementContent(s,e):s.remove()}setElementContent(t,e){if(null!==t)return l(e)?(e=c(e),void(this._config.html?e.parentNode!==t&&(t.innerHTML=\"\",t.append(e)):t.textContent=e.textContent)):void(this._config.html?(this._config.sanitize&&(e=we(e,this._config.allowList,this._config.sanitizeFn)),t.innerHTML=e):t.textContent=e)}getTitle(){const t=this._element.getAttribute(\"data-bs-original-title\")||this._config.title;return this._resolvePossibleFunction(t)}updateAttachment(t){return\"right\"===t?\"end\":\"left\"===t?\"start\":t}_initializeOnDelegatedTarget(t,e){return e||this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_getOffset(){const{offset:t}=this._config;return\"string\"==typeof t?t.split(\",\").map((t=>Number.parseInt(t,10))):\"function\"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return\"function\"==typeof t?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:\"flip\",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:\"offset\",options:{offset:this._getOffset()}},{name:\"preventOverflow\",options:{boundary:this._config.boundary}},{name:\"arrow\",options:{element:`.${this.constructor.NAME}-arrow`}},{name:\"onChange\",enabled:!0,phase:\"afterWrite\",fn:t=>this._handlePopperPlacementChange(t)}],onFirstUpdate:t=>{t.options.placement!==t.placement&&this._handlePopperPlacementChange(t)}};return{...e,...\"function\"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_addAttachmentClass(t){this.getTipElement().classList.add(`${this._getBasicClassPrefix()}-${this.updateAttachment(t)}`)}_getAttachment(t){return ke[t.toUpperCase()]}_setListeners(){this._config.trigger.split(\" \").forEach((t=>{if(\"click\"===t)$.on(this._element,this.constructor.Event.CLICK,this._config.selector,(t=>this.toggle(t)));else if(\"manual\"!==t){const e=t===je?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,i=t===je?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;$.on(this._element,e,this._config.selector,(t=>this._enter(t))),$.on(this._element,i,this._config.selector,(t=>this._leave(t)))}})),this._hideModalHandler=()=>{this._element&&this.hide()},$.on(this._element.closest(xe),Me,this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:\"manual\",selector:\"\"}:this._fixTitle()}_fixTitle(){const t=this._element.getAttribute(\"title\"),e=typeof this._element.getAttribute(\"data-bs-original-title\");(t||\"string\"!==e)&&(this._element.setAttribute(\"data-bs-original-title\",t||\"\"),!t||this._element.getAttribute(\"aria-label\")||this._element.textContent||this._element.setAttribute(\"aria-label\",t),this._element.setAttribute(\"title\",\"\"))}_enter(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger[\"focusin\"===t.type?He:je]=!0),e.getTipElement().classList.contains(Ne)||e._hoverState===De?e._hoverState=De:(clearTimeout(e._timeout),e._hoverState=De,e._config.delay&&e._config.delay.show?e._timeout=setTimeout((()=>{e._hoverState===De&&e.show()}),e._config.delay.show):e.show())}_leave(t,e){e=this._initializeOnDelegatedTarget(t,e),t&&(e._activeTrigger[\"focusout\"===t.type?He:je]=e._element.contains(t.relatedTarget)),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=Ie,e._config.delay&&e._config.delay.hide?e._timeout=setTimeout((()=>{e._hoverState===Ie&&e.hide()}),e._config.delay.hide):e.hide())}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){const e=X.getDataAttributes(this._element);return Object.keys(e).forEach((t=>{Te.has(t)&&delete e[t]})),(t={...this.constructor.Default,...e,...\"object\"==typeof t&&t?t:{}}).container=!1===t.container?document.body:c(t.container),\"number\"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),\"number\"==typeof t.title&&(t.title=t.title.toString()),\"number\"==typeof t.content&&(t.content=t.content.toString()),h(Ae,t,this.constructor.DefaultType),t.sanitize&&(t.template=we(t.template,t.allowList,t.sanitizeFn)),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t}_cleanTipClass(){const t=this.getTipElement(),e=new RegExp(`(^|\\\\s)${this._getBasicClassPrefix()}\\\\S+`,\"g\"),i=t.getAttribute(\"class\").match(e);null!==i&&i.length>0&&i.map((t=>t.trim())).forEach((e=>t.classList.remove(e)))}_getBasicClassPrefix(){return\"bs-tooltip\"}_handlePopperPlacementChange(t){const{state:e}=t;e&&(this.tip=e.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(e.placement)))}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null)}static jQueryInterface(t){return this.each((function(){const e=$e.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===e[t])throw new TypeError(`No method named \"${t}\"`);e[t]()}}))}}v($e);const Be={...$e.Default,placement:\"right\",offset:[0,8],trigger:\"click\",content:\"\",template:'<div class=\"popover\" role=\"tooltip\"><div class=\"popover-arrow\"></div><h3 class=\"popover-header\"></h3><div class=\"popover-body\"></div></div>'},ze={...$e.DefaultType,content:\"(string|element|function)\"},Re={HIDE:\"hide.bs.popover\",HIDDEN:\"hidden.bs.popover\",SHOW:\"show.bs.popover\",SHOWN:\"shown.bs.popover\",INSERTED:\"inserted.bs.popover\",CLICK:\"click.bs.popover\",FOCUSIN:\"focusin.bs.popover\",FOCUSOUT:\"focusout.bs.popover\",MOUSEENTER:\"mouseenter.bs.popover\",MOUSELEAVE:\"mouseleave.bs.popover\"};class Fe extends $e{static get Default(){return Be}static get NAME(){return\"popover\"}static get Event(){return Re}static get DefaultType(){return ze}isWithContent(){return this.getTitle()||this._getContent()}setContent(t){this._sanitizeAndSetContent(t,this.getTitle(),\".popover-header\"),this._sanitizeAndSetContent(t,this._getContent(),\".popover-body\")}_getContent(){return this._resolvePossibleFunction(this._config.content)}_getBasicClassPrefix(){return\"bs-popover\"}static jQueryInterface(t){return this.each((function(){const e=Fe.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===e[t])throw new TypeError(`No method named \"${t}\"`);e[t]()}}))}}v(Fe);const qe=\"scrollspy\",We={offset:10,method:\"auto\",target:\"\"},Ue={offset:\"number\",method:\"string\",target:\"(string|element)\"},Ke=\"active\",Ve=\".nav-link, .list-group-item, .dropdown-item\",Xe=\"position\";class Ye extends R{constructor(t,e){super(t),this._scrollElement=\"BODY\"===this._element.tagName?window:this._element,this._config=this._getConfig(e),this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,$.on(this._scrollElement,\"scroll.bs.scrollspy\",(()=>this._process())),this.refresh(),this._process()}static get Default(){return We}static get NAME(){return qe}refresh(){const t=this._scrollElement===this._scrollElement.window?\"offset\":Xe,e=\"auto\"===this._config.method?t:this._config.method,i=e===Xe?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),Y.find(Ve,this._config.target).map((t=>{const s=o(t),n=s?Y.findOne(s):null;if(n){const t=n.getBoundingClientRect();if(t.width||t.height)return[X[e](n).top+i,s]}return null})).filter((t=>t)).sort(((t,e)=>t[0]-e[0])).forEach((t=>{this._offsets.push(t[0]),this._targets.push(t[1])}))}dispose(){$.off(this._scrollElement,\".bs.scrollspy\"),super.dispose()}_getConfig(t){return(t={...We,...X.getDataAttributes(this._element),...\"object\"==typeof t&&t?t:{}}).target=c(t.target)||document.documentElement,h(qe,t,Ue),t}_getScrollTop(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop}_getScrollHeight(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}_getOffsetHeight(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height}_process(){const t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=i){const t=this._targets[this._targets.length-1];this._activeTarget!==t&&this._activate(t)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(let e=this._offsets.length;e--;)this._activeTarget!==this._targets[e]&&t>=this._offsets[e]&&(void 0===this._offsets[e+1]||t<this._offsets[e+1])&&this._activate(this._targets[e])}}_activate(t){this._activeTarget=t,this._clear();const e=Ve.split(\",\").map((e=>`${e}[data-bs-target=\"${t}\"],${e}[href=\"${t}\"]`)),i=Y.findOne(e.join(\",\"),this._config.target);i.classList.add(Ke),i.classList.contains(\"dropdown-item\")?Y.findOne(\".dropdown-toggle\",i.closest(\".dropdown\")).classList.add(Ke):Y.parents(i,\".nav, .list-group\").forEach((t=>{Y.prev(t,\".nav-link, .list-group-item\").forEach((t=>t.classList.add(Ke))),Y.prev(t,\".nav-item\").forEach((t=>{Y.children(t,\".nav-link\").forEach((t=>t.classList.add(Ke)))}))})),$.trigger(this._scrollElement,\"activate.bs.scrollspy\",{relatedTarget:t})}_clear(){Y.find(Ve,this._config.target).filter((t=>t.classList.contains(Ke))).forEach((t=>t.classList.remove(Ke)))}static jQueryInterface(t){return this.each((function(){const e=Ye.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===e[t])throw new TypeError(`No method named \"${t}\"`);e[t]()}}))}}$.on(window,\"load.bs.scrollspy.data-api\",(()=>{Y.find('[data-bs-spy=\"scroll\"]').forEach((t=>new Ye(t)))})),v(Ye);const Qe=\"active\",Ge=\"fade\",Ze=\"show\",Je=\".active\",ti=\":scope > li > .active\";class ei extends R{static get NAME(){return\"tab\"}show(){if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&this._element.classList.contains(Qe))return;let t;const e=r(this._element),i=this._element.closest(\".nav, .list-group\");if(i){const e=\"UL\"===i.nodeName||\"OL\"===i.nodeName?ti:Je;t=Y.find(e,i),t=t[t.length-1]}const s=t?$.trigger(t,\"hide.bs.tab\",{relatedTarget:this._element}):null;if($.trigger(this._element,\"show.bs.tab\",{relatedTarget:t}).defaultPrevented||null!==s&&s.defaultPrevented)return;this._activate(this._element,i);const n=()=>{$.trigger(t,\"hidden.bs.tab\",{relatedTarget:this._element}),$.trigger(this._element,\"shown.bs.tab\",{relatedTarget:t})};e?this._activate(e,e.parentNode,n):n()}_activate(t,e,i){const s=(!e||\"UL\"!==e.nodeName&&\"OL\"!==e.nodeName?Y.children(e,Je):Y.find(ti,e))[0],n=i&&s&&s.classList.contains(Ge),o=()=>this._transitionComplete(t,s,i);s&&n?(s.classList.remove(Ze),this._queueCallback(o,t,!0)):o()}_transitionComplete(t,e,i){if(e){e.classList.remove(Qe);const t=Y.findOne(\":scope > .dropdown-menu .active\",e.parentNode);t&&t.classList.remove(Qe),\"tab\"===e.getAttribute(\"role\")&&e.setAttribute(\"aria-selected\",!1)}t.classList.add(Qe),\"tab\"===t.getAttribute(\"role\")&&t.setAttribute(\"aria-selected\",!0),f(t),t.classList.contains(Ge)&&t.classList.add(Ze);let s=t.parentNode;if(s&&\"LI\"===s.nodeName&&(s=s.parentNode),s&&s.classList.contains(\"dropdown-menu\")){const e=t.closest(\".dropdown\");e&&Y.find(\".dropdown-toggle\",e).forEach((t=>t.classList.add(Qe))),t.setAttribute(\"aria-expanded\",!0)}i&&i()}static jQueryInterface(t){return this.each((function(){const e=ei.getOrCreateInstance(this);if(\"string\"==typeof t){if(void 0===e[t])throw new TypeError(`No method named \"${t}\"`);e[t]()}}))}}$.on(document,\"click.bs.tab.data-api\",'[data-bs-toggle=\"tab\"], [data-bs-toggle=\"pill\"], [data-bs-toggle=\"list\"]',(function(t){[\"A\",\"AREA\"].includes(this.tagName)&&t.preventDefault(),u(this)||ei.getOrCreateInstance(this).show()})),v(ei);const ii=\"toast\",si=\"hide\",ni=\"show\",oi=\"showing\",ri={animation:\"boolean\",autohide:\"boolean\",delay:\"number\"},ai={animation:!0,autohide:!0,delay:5e3};class li extends R{constructor(t,e){super(t),this._config=this._getConfig(e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get DefaultType(){return ri}static get Default(){return ai}static get NAME(){return ii}show(){$.trigger(this._element,\"show.bs.toast\").defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add(\"fade\"),this._element.classList.remove(si),f(this._element),this._element.classList.add(ni),this._element.classList.add(oi),this._queueCallback((()=>{this._element.classList.remove(oi),$.trigger(this._element,\"shown.bs.toast\"),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this._element.classList.contains(ni)&&($.trigger(this._element,\"hide.bs.toast\").defaultPrevented||(this._element.classList.add(oi),this._queueCallback((()=>{this._element.classList.add(si),this._element.classList.remove(oi),this._element.classList.remove(ni),$.trigger(this._element,\"hidden.bs.toast\")}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this._element.classList.contains(ni)&&this._element.classList.remove(ni),super.dispose()}_getConfig(t){return t={...ai,...X.getDataAttributes(this._element),...\"object\"==typeof t&&t?t:{}},h(ii,t,this.constructor.DefaultType),t}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case\"mouseover\":case\"mouseout\":this._hasMouseInteraction=e;break;case\"focusin\":case\"focusout\":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){$.on(this._element,\"mouseover.bs.toast\",(t=>this._onInteraction(t,!0))),$.on(this._element,\"mouseout.bs.toast\",(t=>this._onInteraction(t,!1))),$.on(this._element,\"focusin.bs.toast\",(t=>this._onInteraction(t,!0))),$.on(this._element,\"focusout.bs.toast\",(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=li.getOrCreateInstance(this,t);if(\"string\"==typeof t){if(void 0===e[t])throw new TypeError(`No method named \"${t}\"`);e[t](this)}}))}}return F(li),v(li),{Alert:q,Button:U,Carousel:at,Collapse:mt,Dropdown:Ht,Modal:he,Offcanvas:me,Popover:Fe,ScrollSpy:Ye,Tab:ei,Toast:li,Tooltip:$e}}));\n//# sourceMappingURL=bootstrap.min.js.map","!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).adapter=e()}}(function(){return function(){function e(t,r,n){function i(o,s){if(!r[o]){if(!t[o]){var c=\"function\"==typeof require&&require;if(!s&&c)return c(o,!0);if(a)return a(o,!0);var d=new Error(\"Cannot find module '\"+o+\"'\");throw d.code=\"MODULE_NOT_FOUND\",d}var p=r[o]={exports:{}};t[o][0].call(p.exports,function(e){return i(t[o][1][e]||e)},p,p.exports,e,t,r,n)}return r[o].exports}for(var a=\"function\"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}return e}()({1:[function(e,t,r){\"use strict\";var n=(0,e(\"./adapter_factory.js\").adapterFactory)({window:window});t.exports=n},{\"./adapter_factory.js\":2}],2:[function(e,t,r){\"use strict\";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}Object.defineProperty(r,\"__esModule\",{value:!0}),r.adapterFactory=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},r=i.log,n=i.detectBrowser(e),p={browserDetails:n,commonShim:d,extractVersion:i.extractVersion,disableLog:i.disableLog,disableWarnings:i.disableWarnings};switch(n.browser){case\"chrome\":if(!a||!a.shimPeerConnection||!t.shimChrome)return r(\"Chrome shim is not included in this adapter release.\"),p;r(\"adapter.js shimming chrome.\"),p.browserShim=a,a.shimGetUserMedia(e),a.shimMediaStream(e),a.shimPeerConnection(e),a.shimOnTrack(e),a.shimAddTrackRemoveTrack(e),a.shimGetSendersWithDtmf(e),a.shimGetStats(e),a.shimSenderReceiverGetStats(e),a.fixNegotiationNeeded(e),d.shimRTCIceCandidate(e),d.shimConnectionState(e),d.shimMaxMessageSize(e),d.shimSendThrowTypeError(e),d.removeAllowExtmapMixed(e);break;case\"firefox\":if(!s||!s.shimPeerConnection||!t.shimFirefox)return r(\"Firefox shim is not included in this adapter release.\"),p;r(\"adapter.js shimming firefox.\"),p.browserShim=s,s.shimGetUserMedia(e),s.shimPeerConnection(e),s.shimOnTrack(e),s.shimRemoveStream(e),s.shimSenderGetStats(e),s.shimReceiverGetStats(e),s.shimRTCDataChannel(e),d.shimRTCIceCandidate(e),d.shimConnectionState(e),d.shimMaxMessageSize(e),d.shimSendThrowTypeError(e);break;case\"edge\":if(!o||!o.shimPeerConnection||!t.shimEdge)return r(\"MS edge shim is not included in this adapter release.\"),p;r(\"adapter.js shimming edge.\"),p.browserShim=o,o.shimGetUserMedia(e),o.shimGetDisplayMedia(e),o.shimPeerConnection(e),o.shimReplaceTrack(e),d.shimMaxMessageSize(e),d.shimSendThrowTypeError(e);break;case\"safari\":if(!c||!t.shimSafari)return r(\"Safari shim is not included in this adapter release.\"),p;r(\"adapter.js shimming safari.\"),p.browserShim=c,c.shimRTCIceServerUrls(e),c.shimCreateOfferLegacy(e),c.shimCallbacksAPI(e),c.shimLocalStreamsAPI(e),c.shimRemoteStreamsAPI(e),c.shimTrackEventTransceiver(e),c.shimGetUserMedia(e),d.shimRTCIceCandidate(e),d.shimMaxMessageSize(e),d.shimSendThrowTypeError(e),d.removeAllowExtmapMixed(e);break;default:r(\"Unsupported browser!\")}return p};var i=n(e(\"./utils\")),a=n(e(\"./chrome/chrome_shim\")),o=n(e(\"./edge/edge_shim\")),s=n(e(\"./firefox/firefox_shim\")),c=n(e(\"./safari/safari_shim\")),d=n(e(\"./common_shim\"))},{\"./chrome/chrome_shim\":3,\"./common_shim\":6,\"./edge/edge_shim\":7,\"./firefox/firefox_shim\":11,\"./safari/safari_shim\":14,\"./utils\":15}],3:[function(e,t,r){\"use strict\";function n(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(t){return e._shimmedLocalStreams[t][0]})};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){if(!r)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var n=t.apply(this,arguments);return this._shimmedLocalStreams[r.id]?-1===this._shimmedLocalStreams[r.id].indexOf(n)&&this._shimmedLocalStreams[r.id].push(n):this._shimmedLocalStreams[r.id]=[r,n],n};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach(function(e){if(t.getSenders().find(function(t){return t.track===e}))throw new DOMException(\"Track already exists.\",\"InvalidAccessError\")});var n=this.getSenders();r.apply(this,arguments);var i=this.getSenders().filter(function(e){return-1===n.indexOf(e)});this._shimmedLocalStreams[e.id]=[e].concat(i)};var n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],n.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach(function(r){var n=t._shimmedLocalStreams[r].indexOf(e);-1!==n&&t._shimmedLocalStreams[r].splice(n,1),1===t._shimmedLocalStreams[r].length&&delete t._shimmedLocalStreams[r]}),i.apply(this,arguments)}}Object.defineProperty(r,\"__esModule\",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},a=e(\"./getusermedia\");Object.defineProperty(r,\"shimGetUserMedia\",{enumerable:!0,get:function(){return a.shimGetUserMedia}});var o=e(\"./getdisplaymedia\");Object.defineProperty(r,\"shimGetDisplayMedia\",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),r.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},r.shimOnTrack=function(e){if(\"object\"!==(void 0===e?\"undefined\":i(e))||!e.RTCPeerConnection||\"ontrack\"in e.RTCPeerConnection.prototype)s.wrapPeerConnectionEvent(e,\"track\",function(e){return e.transceiver||Object.defineProperty(e,\"transceiver\",{value:{receiver:e.receiver}}),e});else{Object.defineProperty(e.RTCPeerConnection.prototype,\"ontrack\",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener(\"track\",this._ontrack),this.addEventListener(\"track\",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var r=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener(\"addtrack\",function(n){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.track.id}):{track:n.track};var a=new Event(\"track\");a.track=n.track,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],r.dispatchEvent(a)}),t.stream.getTracks().forEach(function(n){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?r.getReceivers().find(function(e){return e.track&&e.track.id===n.id}):{track:n};var a=new Event(\"track\");a.track=n,a.receiver=i,a.transceiver={receiver:i},a.streams=[t.stream],r.dispatchEvent(a)})},this.addEventListener(\"addstream\",this._ontrackpoly)),t.apply(this,arguments)}}},r.shimGetSendersWithDtmf=function(e){if(\"object\"===(void 0===e?\"undefined\":i(e))&&e.RTCPeerConnection&&!(\"getSenders\"in e.RTCPeerConnection.prototype)&&\"createDTMFSender\"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&(\"audio\"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var r=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){var i=r.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){n.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var a=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach(function(e){r._senders.push(t(r,e))})};var o=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach(function(e){var r=t._senders.find(function(t){return t.track===e});r&&t._senders.splice(t._senders.indexOf(r),1)})}}else if(\"object\"===(void 0===e?\"undefined\":i(e))&&e.RTCPeerConnection&&\"getSenders\"in e.RTCPeerConnection.prototype&&\"createDTMFSender\"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!(\"dtmf\"in e.RTCRtpSender.prototype)){var s=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=s.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t},Object.defineProperty(e.RTCRtpSender.prototype,\"dtmf\",{get:function(){return void 0===this._dtmf&&(\"audio\"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},r.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,n){var i=this,a=arguments;if(arguments.length>0&&\"function\"==typeof e)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||\"function\"!=typeof arguments[0]))return t.apply(this,[]);var o=function(e){var t={};return e.result().forEach(function(e){var r={id:e.id,timestamp:e.timestamp,type:{localcandidate:\"local-candidate\",remotecandidate:\"remote-candidate\"}[e.type]||e.type};e.names().forEach(function(t){r[t]=e.stat(t)}),t[r.id]=r}),t},s=function(e){return new Map(Object.keys(e).map(function(t){return[t,e[t]]}))};if(arguments.length>=2){var c=function(e){a[1](s(o(e)))};return t.apply(this,[c,arguments[0]])}return new Promise(function(e,r){t.apply(i,[function(t){e(s(o(t)))},r])}).then(r,n)}}},r.shimSenderReceiverGetStats=function(e){if(\"object\"===(void 0===e?\"undefined\":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!(\"getStats\"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return s.filterStats(t,e.track,!0)})}}if(!(\"getStats\"in e.RTCRtpReceiver.prototype)){var n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=n.apply(this,[]);return t.forEach(function(t){return t._pc=e}),t}),s.wrapPeerConnectionEvent(e,\"track\",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then(function(t){return s.filterStats(t,e.track,!1)})}}if(\"getStats\"in e.RTCRtpSender.prototype&&\"getStats\"in e.RTCRtpReceiver.prototype){var a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],r=void 0,n=void 0,i=void 0;return this.getSenders().forEach(function(e){e.track===t&&(r?i=!0:r=e)}),this.getReceivers().forEach(function(e){return e.track===t&&(n?i=!0:n=e),e.track===t}),i||r&&n?Promise.reject(new DOMException(\"There are more than one sender or receiver for the track.\",\"InvalidAccessError\")):r?r.getStats():n?n.getStats():Promise.reject(new DOMException(\"There is no sender or receiver for the track.\",\"InvalidAccessError\"))}return a.apply(this,arguments)}}}},r.shimAddTrackRemoveTrackWithNative=n,r.shimAddTrackRemoveTrack=function(e){function t(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(i.id,\"g\"),n.id)}),new RTCSessionDescription({type:t.type,sdp:r})}function r(e,t){var r=t.sdp;return Object.keys(e._reverseStreams||[]).forEach(function(t){var n=e._reverseStreams[t],i=e._streams[n.id];r=r.replace(new RegExp(n.id,\"g\"),i.id)}),new RTCSessionDescription({type:t.type,sdp:r})}if(e.RTCPeerConnection){var i=s.detectBrowser(e);if(e.RTCPeerConnection.prototype.addTrack&&i.version>=65)return n(e);var a=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=a.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map(function(t){return e._reverseStreams[t.id]})};var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var r=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach(function(e){if(r.getSenders().find(function(t){return t.track===e}))throw new DOMException(\"Track already exists.\",\"InvalidAccessError\")}),!this._reverseStreams[t.id]){var n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}o.apply(this,[t])};var c=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,r){var n=this;if(\"closed\"===this.signalingState)throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\",\"InvalidStateError\");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find(function(e){return e===t}))throw new DOMException(\"The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.\",\"NotSupportedError\");if(this.getSenders().find(function(e){return e.track===t}))throw new DOMException(\"Track already exists.\",\"InvalidAccessError\");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var a=this._streams[r.id];if(a)a.addTrack(t),Promise.resolve().then(function(){n.dispatchEvent(new Event(\"negotiationneeded\"))});else{var o=new e.MediaStream([t]);this._streams[r.id]=o,this._reverseStreams[o.id]=r,this.addStream(o)}return this.getSenders().find(function(e){return e.track===t})},[\"createOffer\",\"createAnswer\"].forEach(function(r){var n=e.RTCPeerConnection.prototype[r];e.RTCPeerConnection.prototype[r]=function(){var e=this,r=arguments;return arguments.length&&\"function\"==typeof arguments[0]?n.apply(this,[function(n){var i=t(e,n);r[0].apply(null,[i])},function(e){r[1]&&r[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then(function(r){return t(e,r)})}});var d=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=r(this,arguments[0]),d.apply(this,arguments)):d.apply(this,arguments)};var p=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,\"localDescription\");Object.defineProperty(e.RTCPeerConnection.prototype,\"localDescription\",{get:function(){var e=p.get.apply(this);return\"\"===e.type?e:t(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if(\"closed\"===this.signalingState)throw new DOMException(\"The RTCPeerConnection's signalingState is 'closed'.\",\"InvalidStateError\");if(!e._pc)throw new DOMException(\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\",\"TypeError\");if(e._pc!==this)throw new DOMException(\"Sender was not created by this connection.\",\"InvalidAccessError\");this._streams=this._streams||{};var r=void 0;Object.keys(this._streams).forEach(function(n){t._streams[n].getTracks().find(function(t){return e.track===t})&&(r=t._streams[n])}),r&&(1===r.getTracks().length?this.removeStream(this._reverseStreams[r.id]):r.removeTrack(e.track),this.dispatchEvent(new Event(\"negotiationneeded\")))}}},r.shimPeerConnection=function(e){if(!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection){[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new(\"addIceCandidate\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}});var t=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},r.fixNegotiationNeeded=function(e){s.wrapPeerConnectionEvent(e,\"negotiationneeded\",function(e){if(\"stable\"===e.target.signalingState)return e})};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e(\"../utils.js\"))},{\"../utils.js\":15,\"./getdisplaymedia\":4,\"./getusermedia\":5}],4:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&\"getDisplayMedia\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(\"function\"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(function(t){var n=r.video&&r.video.width,i=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:\"desktop\",chromeMediaSourceId:t,maxFrameRate:a||3}},n&&(r.video.mandatory.maxWidth=n),i&&(r.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(r)})}:console.error(\"shimGetDisplayMedia: getSourceId argument is not a function\"))}},{}],5:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};r.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices){var r=i.detectBrowser(e),o=function(e){if(\"object\"!==(void 0===e?\"undefined\":n(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(r){if(\"require\"!==r&&\"advanced\"!==r&&\"mediaSource\"!==r){var i=\"object\"===n(e[r])?e[r]:{ideal:e[r]};void 0!==i.exact&&\"number\"==typeof i.exact&&(i.min=i.max=i.exact);var a=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):\"deviceId\"===t?\"sourceId\":t};if(void 0!==i.ideal){t.optional=t.optional||[];var o={};\"number\"==typeof i.ideal?(o[a(\"min\",r)]=i.ideal,t.optional.push(o),(o={})[a(\"max\",r)]=i.ideal,t.optional.push(o)):(o[a(\"\",r)]=i.ideal,t.optional.push(o))}void 0!==i.exact&&\"number\"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[a(\"\",r)]=i.exact):[\"min\",\"max\"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[a(e,r)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,i){if(r.version>=61)return i(e);if((e=JSON.parse(JSON.stringify(e)))&&\"object\"===n(e.audio)){var s=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])};s((e=JSON.parse(JSON.stringify(e))).audio,\"autoGainControl\",\"googAutoGainControl\"),s(e.audio,\"noiseSuppression\",\"googNoiseSuppression\"),e.audio=o(e.audio)}if(e&&\"object\"===n(e.video)){var c=e.video.facingMode;c=c&&(\"object\"===(void 0===c?\"undefined\":n(c))?c:{ideal:c});var d=r.version<66;if(c&&(\"user\"===c.exact||\"environment\"===c.exact||\"user\"===c.ideal||\"environment\"===c.ideal)&&(!t.mediaDevices.getSupportedConstraints||!t.mediaDevices.getSupportedConstraints().facingMode||d)){delete e.video.facingMode;var p=void 0;if(\"environment\"===c.exact||\"environment\"===c.ideal?p=[\"back\",\"rear\"]:\"user\"!==c.exact&&\"user\"!==c.ideal||(p=[\"front\"]),p)return t.mediaDevices.enumerateDevices().then(function(t){var r=(t=t.filter(function(e){return\"videoinput\"===e.kind})).find(function(e){return p.some(function(t){return e.label.toLowerCase().includes(t)})});return!r&&t.length&&p.includes(\"back\")&&(r=t[t.length-1]),r&&(e.video.deviceId=c.exact?{exact:r.deviceId}:{ideal:r.deviceId}),e.video=o(e.video),a(\"chrome: \"+JSON.stringify(e)),i(e)})}e.video=o(e.video)}return a(\"chrome: \"+JSON.stringify(e)),i(e)},c=function(e){return r.version>=64?e:{name:{PermissionDeniedError:\"NotAllowedError\",PermissionDismissedError:\"NotAllowedError\",InvalidStateError:\"NotAllowedError\",DevicesNotFoundError:\"NotFoundError\",ConstraintNotSatisfiedError:\"OverconstrainedError\",TrackStartError:\"NotReadableError\",MediaDeviceFailedDueToShutdown:\"NotAllowedError\",MediaDeviceKillSwitchOn:\"NotAllowedError\",TabCaptureError:\"AbortError\",ScreenCaptureError:\"AbortError\",DeviceCaptureError:\"AbortError\"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&\": \")+this.message}}};if(t.getUserMedia=function(e,r,n){s(e,function(e){t.webkitGetUserMedia(e,r,function(e){n&&n(c(e))})})}.bind(t),t.mediaDevices.getUserMedia){var d=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return s(e,function(e){return d(e).then(function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach(function(e){e.stop()}),new DOMException(\"\",\"NotFoundError\");return t},function(e){return Promise.reject(c(e))})})}}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e(\"../utils.js\")),a=i.log},{\"../utils.js\":15}],6:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};r.shimRTCIceCandidate=function(e){if(e.RTCIceCandidate&&!(e.RTCIceCandidate&&\"foundation\"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if(\"object\"===(void 0===e?\"undefined\":n(e))&&e.candidate&&0===e.candidate.indexOf(\"a=\")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var r=new t(e),a=i.default.parseCandidate(e.candidate),o=Object.assign(r,a);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,a.wrapPeerConnectionEvent(e,\"icecandidate\",function(t){return t.candidate&&Object.defineProperty(t,\"candidate\",{value:new e.RTCIceCandidate(t.candidate),writable:\"false\"}),t})}},r.shimMaxMessageSize=function(e){if(!e.RTCSctpTransport&&e.RTCPeerConnection){var t=a.detectBrowser(e);\"sctp\"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,\"sctp\",{get:function(){return void 0===this._sctp?null:this._sctp}});var r=function(e){if(!e||!e.sdp)return!1;var t=i.default.splitSections(e.sdp);return t.shift(),t.some(function(e){var t=i.default.parseMLine(e);return t&&\"application\"===t.kind&&-1!==t.protocol.indexOf(\"SCTP\")})},n=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);if(null===t||t.length<2)return-1;var r=parseInt(t[1],10);return r!==r?-1:r},o=function(e){var r=65536;return\"firefox\"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r},s=function(e,r){var n=65536;\"firefox\"===t.browser&&57===t.version&&(n=65535);var a=i.default.matchPrefix(e.sdp,\"a=max-message-size:\");return a.length>0?n=parseInt(a[0].substr(19),10):\"firefox\"===t.browser&&-1!==r&&(n=2147483637),n},c=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,r(arguments[0])){var e=n(arguments[0]),t=o(e),i=s(arguments[0],e),a=void 0;a=0===t&&0===i?Number.POSITIVE_INFINITY:0===t||0===i?Math.max(t,i):Math.min(t,i);var d={};Object.defineProperty(d,\"maxMessageSize\",{get:function(){return a}}),this._sctp=d}return c.apply(this,arguments)}}},r.shimSendThrowTypeError=function(e){function t(e,t){var r=e.send;e.send=function(){var n=arguments[0],i=n.length||n.size||n.byteLength;if(\"open\"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError(\"Message too large (can send a maximum of \"+t.sctp.maxMessageSize+\" bytes)\");return r.apply(e,arguments)}}if(e.RTCPeerConnection&&\"createDataChannel\"in e.RTCPeerConnection.prototype){var r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=r.apply(this,arguments);return t(e,this),e},a.wrapPeerConnectionEvent(e,\"datachannel\",function(e){return t(e.channel,e.target),e})}},r.shimConnectionState=function(e){if(e.RTCPeerConnection&&!(\"connectionState\"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,\"connectionState\",{get:function(){return{completed:\"connected\",checking:\"connecting\"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"onconnectionstatechange\",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener(\"connectionstatechange\",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener(\"connectionstatechange\",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),[\"setLocalDescription\",\"setRemoteDescription\"].forEach(function(e){var r=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var r=new Event(\"connectionstatechange\",e);t.dispatchEvent(r)}return e},this.addEventListener(\"iceconnectionstatechange\",this._connectionstatechangepoly)),r.apply(this,arguments)}})}},r.removeAllowExtmapMixed=function(e){if(e.RTCPeerConnection){var t=a.detectBrowser(e);if(!(\"chrome\"===t.browser&&t.version>=71||\"safari\"===t.browser&&t.version>=605)){var r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(e){return e&&e.sdp&&-1!==e.sdp.indexOf(\"\\na=extmap-allow-mixed\")&&(e.sdp=e.sdp.split(\"\\n\").filter(function(e){return\"a=extmap-allow-mixed\"!==e.trim()}).join(\"\\n\")),r.apply(this,arguments)}}}};var i=function(e){return e&&e.__esModule?e:{default:e}}(e(\"sdp\")),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e(\"./utils\"))},{\"./utils\":15,sdp:17}],7:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var n=e(\"./getusermedia\");Object.defineProperty(r,\"shimGetUserMedia\",{enumerable:!0,get:function(){return n.shimGetUserMedia}});var i=e(\"./getdisplaymedia\");Object.defineProperty(r,\"shimGetDisplayMedia\",{enumerable:!0,get:function(){return i.shimGetDisplayMedia}}),r.shimPeerConnection=function(e){var t=a.detectBrowser(e);if(e.RTCIceGatherer&&(e.RTCIceCandidate||(e.RTCIceCandidate=function(e){return e}),e.RTCSessionDescription||(e.RTCSessionDescription=function(e){return e}),t.version<15025)){var r=Object.getOwnPropertyDescriptor(e.MediaStreamTrack.prototype,\"enabled\");Object.defineProperty(e.MediaStreamTrack.prototype,\"enabled\",{set:function(e){r.set.call(this,e);var t=new Event(\"enabled\");t.enabled=e,this.dispatchEvent(t)}})}!e.RTCRtpSender||\"dtmf\"in e.RTCRtpSender.prototype||Object.defineProperty(e.RTCRtpSender.prototype,\"dtmf\",{get:function(){return void 0===this._dtmf&&(\"audio\"===this.track.kind?this._dtmf=new e.RTCDtmfSender(this):\"video\"===this.track.kind&&(this._dtmf=null)),this._dtmf}}),e.RTCDtmfSender&&!e.RTCDTMFSender&&(e.RTCDTMFSender=e.RTCDtmfSender);var n=(0,s.default)(e,t.version);e.RTCPeerConnection=function(e){return e&&e.iceServers&&(e.iceServers=(0,o.filterIceServers)(e.iceServers,t.version),a.log(\"ICE servers after filtering:\",e.iceServers)),new n(e)},e.RTCPeerConnection.prototype=n.prototype},r.shimReplaceTrack=function(e){!e.RTCRtpSender||\"replaceTrack\"in e.RTCRtpSender.prototype||(e.RTCRtpSender.prototype.replaceTrack=e.RTCRtpSender.prototype.setTrack)};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e(\"../utils\")),o=e(\"./filtericeservers\"),s=function(e){return e&&e.__esModule?e:{default:e}}(e(\"rtcpeerconnection-shim\"))},{\"../utils\":15,\"./filtericeservers\":8,\"./getdisplaymedia\":9,\"./getusermedia\":10,\"rtcpeerconnection-shim\":16}],8:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.filterIceServers=function(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var t=e.urls||e.url;e.url&&!e.urls&&n.deprecated(\"RTCIceServer.url\",\"RTCIceServer.urls\");var i=\"string\"==typeof t;return i&&(t=[t]),t=t.filter(function(e){if(0===e.indexOf(\"stun:\"))return!1;var t=e.startsWith(\"turn\")&&!e.startsWith(\"turn:[\")&&e.includes(\"transport=udp\");return t&&!r?(r=!0,!0):t&&!r}),delete e.url,e.urls=i?t[0]:t,!!t.length}})};var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e(\"../utils\"))},{\"../utils\":15}],9:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.shimGetDisplayMedia=function(e){\"getDisplayMedia\"in e.navigator&&e.navigator.mediaDevices&&(e.navigator.mediaDevices&&\"getDisplayMedia\"in e.navigator.mediaDevices||(e.navigator.mediaDevices.getDisplayMedia=e.navigator.getDisplayMedia.bind(e.navigator)))}},{}],10:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.shimGetUserMedia=function(e){var t=e&&e.navigator,r=function(e){return{name:{PermissionDeniedError:\"NotAllowedError\"}[e.name]||e.name,message:e.message,constraint:e.constraint,toString:function(){return this.name}}},n=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(e){return n(e).catch(function(e){return Promise.reject(r(e))})}}},{}],11:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.shimGetDisplayMedia=r.shimGetUserMedia=void 0;var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},i=e(\"./getusermedia\");Object.defineProperty(r,\"shimGetUserMedia\",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var a=e(\"./getdisplaymedia\");Object.defineProperty(r,\"shimGetDisplayMedia\",{enumerable:!0,get:function(){return a.shimGetDisplayMedia}}),r.shimOnTrack=function(e){\"object\"===(void 0===e?\"undefined\":n(e))&&e.RTCTrackEvent&&\"receiver\"in e.RTCTrackEvent.prototype&&!(\"transceiver\"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,\"transceiver\",{get:function(){return{receiver:this.receiver}}})},r.shimPeerConnection=function(e){var t=o.detectBrowser(e);if(\"object\"===(void 0===e?\"undefined\":n(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"].forEach(function(t){var r=e.RTCPeerConnection.prototype[t];e.RTCPeerConnection.prototype[t]=function(){return arguments[0]=new(\"addIceCandidate\"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}});var r=e.RTCPeerConnection.prototype.addIceCandidate;e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())};var i={inboundrtp:\"inbound-rtp\",outboundrtp:\"outbound-rtp\",candidatepair:\"candidate-pair\",localcandidate:\"local-candidate\",remotecandidate:\"remote-candidate\"},a=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(e,r,n){return a.apply(this,[e||null]).then(function(e){if(t.version<53&&!r)try{e.forEach(function(e){e.type=i[e.type]||e.type})}catch(t){if(\"TypeError\"!==t.name)throw t;e.forEach(function(t,r){e.set(r,Object.assign({},t,{type:i[t.type]||t.type}))})}return e}).then(r,n)}}},r.shimSenderGetStats=function(e){if(\"object\"===(void 0===e?\"undefined\":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&\"getStats\"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e}),r});var r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=r.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},r.shimReceiverGetStats=function(e){if(\"object\"===(void 0===e?\"undefined\":n(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&!(e.RTCRtpSender&&\"getStats\"in e.RTCRtpReceiver.prototype)){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,r=t.apply(this,[]);return r.forEach(function(t){return t._pc=e}),r}),o.wrapPeerConnectionEvent(e,\"track\",function(e){return e.receiver._pc=e.srcElement,e}),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},r.shimRemoveStream=function(e){!e.RTCPeerConnection||\"removeStream\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;o.deprecated(\"removeStream\",\"removeTrack\"),this.getSenders().forEach(function(r){r.track&&e.getTracks().includes(r.track)&&t.removeTrack(r)})})},r.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e(\"../utils\"))},{\"../utils\":15,\"./getdisplaymedia\":12,\"./getusermedia\":13}],12:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0}),r.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&\"getDisplayMedia\"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!r||!r.video){var n=new DOMException(\"getDisplayMedia without video constraints is undefined\");return n.name=\"NotFoundError\",n.code=8,Promise.reject(n)}return!0===r.video?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}},{}],13:[function(e,t,r){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};r.shimGetUserMedia=function(e){var t=i.detectBrowser(e),r=e&&e.navigator,a=e&&e.MediaStreamTrack;if(r.getUserMedia=function(e,t,n){i.deprecated(\"navigator.getUserMedia\",\"navigator.mediaDevices.getUserMedia\"),r.mediaDevices.getUserMedia(e).then(t,n)},!(t.version>55&&\"autoGainControl\"in r.mediaDevices.getSupportedConstraints())){var o=function(e,t,r){t in e&&!(r in e)&&(e[r]=e[t],delete e[t])},s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(e){return\"object\"===(void 0===e?\"undefined\":n(e))&&\"object\"===n(e.audio)&&(e=JSON.parse(JSON.stringify(e)),o(e.audio,\"autoGainControl\",\"mozAutoGainControl\"),o(e.audio,\"noiseSuppression\",\"mozNoiseSuppression\")),s(e)},a&&a.prototype.getSettings){var c=a.prototype.getSettings;a.prototype.getSettings=function(){var e=c.apply(this,arguments);return o(e,\"mozAutoGainControl\",\"autoGainControl\"),o(e,\"mozNoiseSuppression\",\"noiseSuppression\"),e}}if(a&&a.prototype.applyConstraints){var d=a.prototype.applyConstraints;a.prototype.applyConstraints=function(e){return\"audio\"===this.kind&&\"object\"===(void 0===e?\"undefined\":n(e))&&(e=JSON.parse(JSON.stringify(e)),o(e,\"autoGainControl\",\"mozAutoGainControl\"),o(e,\"noiseSuppression\",\"mozNoiseSuppression\")),d.apply(this,[e])}}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e(\"../utils\"))},{\"../utils\":15}],14:[function(e,t,r){\"use strict\";function n(e){return e&&void 0!==e.video?Object.assign({},e,{video:a.compactObject(e.video)}):e}Object.defineProperty(r,\"__esModule\",{value:!0});var i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};r.shimLocalStreamsAPI=function(e){if(\"object\"===(void 0===e?\"undefined\":i(e))&&e.RTCPeerConnection){if(\"getLocalStreams\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!(\"addStream\"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var r=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getTracks().forEach(function(n){return t.call(r,n,e)})},e.RTCPeerConnection.prototype.addTrack=function(e,r){return r&&(this._localStreams?this._localStreams.includes(r)||this._localStreams.push(r):this._localStreams=[r]),t.call(this,e,r)}}\"removeStream\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var r=this._localStreams.indexOf(e);if(-1!==r){this._localStreams.splice(r,1);var n=e.getTracks();this.getSenders().forEach(function(e){n.includes(e.track)&&t.removeTrack(e)})}})}},r.shimRemoteStreamsAPI=function(e){if(\"object\"===(void 0===e?\"undefined\":i(e))&&e.RTCPeerConnection&&(\"getRemoteStreams\"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!(\"onaddstream\"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,\"onaddstream\",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener(\"addstream\",this._onaddstream),this.removeEventListener(\"track\",this._onaddstreampoly)),this.addEventListener(\"addstream\",this._onaddstream=e),this.addEventListener(\"track\",this._onaddstreampoly=function(e){e.streams.forEach(function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var r=new Event(\"addstream\");r.stream=e,t.dispatchEvent(r)}})})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener(\"track\",this._onaddstreampoly=function(t){t.streams.forEach(function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var r=new Event(\"addstream\");r.stream=t,e.dispatchEvent(r)}})}),t.apply(e,arguments)}}},r.shimCallbacksAPI=function(e){if(\"object\"===(void 0===e?\"undefined\":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,r=t.createOffer,n=t.createAnswer,a=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i};var c=function(e,t,r){var n=a.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n};t.setLocalDescription=c,c=function(e,t,r){var n=o.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.setRemoteDescription=c,c=function(e,t,r){var n=s.apply(this,[e]);return r?(n.then(t,r),Promise.resolve()):n},t.addIceCandidate=c}},r.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var r=t.mediaDevices,i=r.getUserMedia.bind(r);t.mediaDevices.getUserMedia=function(e){return i(n(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,r,n){t.mediaDevices.getUserMedia(e).then(r,n)}.bind(t))},r.shimConstraints=n,r.shimRTCIceServerUrls=function(e){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,r){if(e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var o=e.iceServers[i];!o.hasOwnProperty(\"urls\")&&o.hasOwnProperty(\"url\")?(a.deprecated(\"RTCIceServer.url\",\"RTCIceServer.urls\"),(o=JSON.parse(JSON.stringify(o))).urls=o.url,delete o.url,n.push(o)):n.push(e.iceServers[i])}e.iceServers=n}return new t(e,r)},e.RTCPeerConnection.prototype=t.prototype,\"generateCertificate\"in e.RTCPeerConnection&&Object.defineProperty(e.RTCPeerConnection,\"generateCertificate\",{get:function(){return t.generateCertificate}})},r.shimTrackEventTransceiver=function(e){\"object\"===(void 0===e?\"undefined\":i(e))&&e.RTCPeerConnection&&\"receiver\"in e.RTCTrackEvent.prototype&&!e.RTCTransceiver&&Object.defineProperty(e.RTCTrackEvent.prototype,\"transceiver\",{get:function(){return{receiver:this.receiver}}})},r.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var r=this.getTransceivers().find(function(e){return\"audio\"===e.receiver.track.kind});!1===e.offerToReceiveAudio&&r?\"sendrecv\"===r.direction?r.setDirection?r.setDirection(\"sendonly\"):r.direction=\"sendonly\":\"recvonly\"===r.direction&&(r.setDirection?r.setDirection(\"inactive\"):r.direction=\"inactive\"):!0!==e.offerToReceiveAudio||r||this.addTransceiver(\"audio\"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var n=this.getTransceivers().find(function(e){return\"video\"===e.receiver.track.kind});!1===e.offerToReceiveVideo&&n?\"sendrecv\"===n.direction?n.setDirection?n.setDirection(\"sendonly\"):n.direction=\"sendonly\":\"recvonly\"===n.direction&&(n.setDirection?n.setDirection(\"inactive\"):n.direction=\"inactive\"):!0!==e.offerToReceiveVideo||n||this.addTransceiver(\"video\")}return t.apply(this,arguments)}};var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(e(\"../utils\"))},{\"../utils\":15}],15:[function(e,t,r){\"use strict\";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t,r){var n=e.match(t);return n&&n.length>=r&&parseInt(n[r],10)}function a(e){return\"object\"!==(void 0===e?\"undefined\":s(e))?e:Object.keys(e).reduce(function(t,r){var i=\"object\"===s(e[r]),o=i?a(e[r]):e[r],c=i&&!Object.keys(o).length;return void 0===o||c?t:Object.assign(t,n({},r,o))},{})}function o(e,t,r){t&&!r.has(t.id)&&(r.set(t.id,t),Object.keys(t).forEach(function(n){n.endsWith(\"Id\")?o(e,e.get(t[n]),r):n.endsWith(\"Ids\")&&t[n].forEach(function(t){o(e,e.get(t),r)})}))}Object.defineProperty(r,\"__esModule\",{value:!0});var s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};r.extractVersion=i,r.wrapPeerConnectionEvent=function(e,t,r){if(e.RTCPeerConnection){var n=e.RTCPeerConnection.prototype,i=n.addEventListener;n.addEventListener=function(e,n){if(e!==t)return i.apply(this,arguments);var a=function(e){var t=r(e);t&&n(t)};return this._eventMap=this._eventMap||{},this._eventMap[n]=a,i.apply(this,[e,a])};var a=n.removeEventListener;n.removeEventListener=function(e,r){if(e!==t||!this._eventMap||!this._eventMap[r])return a.apply(this,arguments);var n=this._eventMap[r];return delete this._eventMap[r],a.apply(this,[e,n])},Object.defineProperty(n,\"on\"+t,{get:function(){return this[\"_on\"+t]},set:function(e){this[\"_on\"+t]&&(this.removeEventListener(t,this[\"_on\"+t]),delete this[\"_on\"+t]),e&&this.addEventListener(t,this[\"_on\"+t]=e)},enumerable:!0,configurable:!0})}},r.disableLog=function(e){return\"boolean\"!=typeof e?new Error(\"Argument type: \"+(void 0===e?\"undefined\":s(e))+\". Please use a boolean.\"):(c=e,e?\"adapter.js logging disabled\":\"adapter.js logging enabled\")},r.disableWarnings=function(e){return\"boolean\"!=typeof e?new Error(\"Argument type: \"+(void 0===e?\"undefined\":s(e))+\". Please use a boolean.\"):(d=!e,\"adapter.js deprecation warnings \"+(e?\"disabled\":\"enabled\"))},r.log=function(){if(\"object\"===(\"undefined\"==typeof window?\"undefined\":s(window))){if(c)return;\"undefined\"!=typeof console&&\"function\"==typeof console.log&&console.log.apply(console,arguments)}},r.deprecated=function(e,t){d&&console.warn(e+\" is deprecated, please use \"+t+\" instead.\")},r.detectBrowser=function(e){var t=e.navigator,r={browser:null,version:null};if(void 0===e||!e.navigator)return r.browser=\"Not a browser.\",r;if(t.mozGetUserMedia)r.browser=\"firefox\",r.version=i(t.userAgent,/Firefox\\/(\\d+)\\./,1);else if(t.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)r.browser=\"chrome\",r.version=i(t.userAgent,/Chrom(e|ium)\\/(\\d+)\\./,2);else if(t.mediaDevices&&t.userAgent.match(/Edge\\/(\\d+).(\\d+)$/))r.browser=\"edge\",r.version=i(t.userAgent,/Edge\\/(\\d+).(\\d+)$/,2);else{if(!e.RTCPeerConnection||!t.userAgent.match(/AppleWebKit\\/(\\d+)\\./))return r.browser=\"Not a supported browser.\",r;r.browser=\"safari\",r.version=i(t.userAgent,/AppleWebKit\\/(\\d+)\\./,1)}return r},r.compactObject=a,r.walkStats=o,r.filterStats=function(e,t,r){var n=r?\"outbound-rtp\":\"inbound-rtp\",i=new Map;if(null===t)return i;var a=[];return e.forEach(function(e){\"track\"===e.type&&e.trackIdentifier===t.id&&a.push(e)}),a.forEach(function(t){e.forEach(function(r){r.type===n&&r.trackId===t.id&&o(e,r,i)})}),i};var c=!0,d=!0},{}],16:[function(e,t,r){\"use strict\";function n(e){return{inboundrtp:\"inbound-rtp\",outboundrtp:\"outbound-rtp\",candidatepair:\"candidate-pair\",localcandidate:\"local-candidate\",remotecandidate:\"remote-candidate\"}[e.type]||e.type}function i(e,t,r,n,i){var a=p.writeRtpDescription(e.kind,t);if(a+=p.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=p.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),\"offer\"===r?\"actpass\":i||\"active\"),a+=\"a=mid:\"+e.mid+\"\\r\\n\",e.rtpSender&&e.rtpReceiver?a+=\"a=sendrecv\\r\\n\":e.rtpSender?a+=\"a=sendonly\\r\\n\":e.rtpReceiver?a+=\"a=recvonly\\r\\n\":a+=\"a=inactive\\r\\n\",e.rtpSender){var o=e.rtpSender._initialTrackId||e.rtpSender.track.id;e.rtpSender._initialTrackId=o;var s=\"msid:\"+(n?n.id:\"-\")+\" \"+o+\"\\r\\n\";a+=\"a=\"+s,a+=\"a=ssrc:\"+e.sendEncodingParameters[0].ssrc+\" \"+s,e.sendEncodingParameters[0].rtx&&(a+=\"a=ssrc:\"+e.sendEncodingParameters[0].rtx.ssrc+\" \"+s,a+=\"a=ssrc-group:FID \"+e.sendEncodingParameters[0].ssrc+\" \"+e.sendEncodingParameters[0].rtx.ssrc+\"\\r\\n\")}return a+=\"a=ssrc:\"+e.sendEncodingParameters[0].ssrc+\" cname:\"+p.localCName+\"\\r\\n\",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+=\"a=ssrc:\"+e.sendEncodingParameters[0].rtx.ssrc+\" cname:\"+p.localCName+\"\\r\\n\"),a}function a(e,t){var r=!1;return(e=JSON.parse(JSON.stringify(e))).filter(function(e){if(e&&(e.urls||e.url)){var n=e.urls||e.url;e.url&&!e.urls&&console.warn(\"RTCIceServer.url is deprecated! Use urls instead.\");var i=\"string\"==typeof n;return i&&(n=[n]),n=n.filter(function(e){return 0===e.indexOf(\"turn:\")&&-1!==e.indexOf(\"transport=udp\")&&-1===e.indexOf(\"turn:[\")&&!r?(r=!0,!0):0===e.indexOf(\"stun:\")&&t>=14393&&-1===e.indexOf(\"?transport=udp\")}),delete e.url,e.urls=i?n[0]:n,!!n.length}})}function o(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=function(e,t){e=parseInt(e,10);for(var r=0;r<t.length;r++)if(t[r].payloadType===e||t[r].preferredPayloadType===e)return t[r]},i=function(e,t,r,i){var a=n(e.parameters.apt,r),o=n(t.parameters.apt,i);return a&&o&&a.name.toLowerCase()===o.name.toLowerCase()};return e.codecs.forEach(function(n){for(var a=0;a<t.codecs.length;a++){var o=t.codecs[a];if(n.name.toLowerCase()===o.name.toLowerCase()&&n.clockRate===o.clockRate){if(\"rtx\"===n.name.toLowerCase()&&n.parameters&&o.parameters.apt&&!i(n,o,e.codecs,t.codecs))continue;(o=JSON.parse(JSON.stringify(o))).numChannels=Math.min(n.numChannels,o.numChannels),r.codecs.push(o),o.rtcpFeedback=o.rtcpFeedback.filter(function(e){for(var t=0;t<n.rtcpFeedback.length;t++)if(n.rtcpFeedback[t].type===e.type&&n.rtcpFeedback[t].parameter===e.parameter)return!0;return!1});break}}}),e.headerExtensions.forEach(function(e){for(var n=0;n<t.headerExtensions.length;n++){var i=t.headerExtensions[n];if(e.uri===i.uri){r.headerExtensions.push(i);break}}}),r}function s(e,t,r){return-1!=={offer:{setLocalDescription:[\"stable\",\"have-local-offer\"],setRemoteDescription:[\"stable\",\"have-remote-offer\"]},answer:{setLocalDescription:[\"have-remote-offer\",\"have-local-pranswer\"],setRemoteDescription:[\"have-local-offer\",\"have-remote-pranswer\"]}}[t][e].indexOf(r)}function c(e,t){var r=e.getRemoteCandidates().find(function(e){return t.foundation===e.foundation&&t.ip===e.ip&&t.port===e.port&&t.priority===e.priority&&t.protocol===e.protocol&&t.type===e.type});return r||e.addRemoteCandidate(t),!r}function d(e,t){var r=new Error(t);return r.name=e,r.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[e],r}var p=e(\"sdp\");t.exports=function(e,t){function r(t,r){r.addTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent(\"addtrack\",{track:t}))}function u(t,r){r.removeTrack(t),r.dispatchEvent(new e.MediaStreamTrackEvent(\"removetrack\",{track:t}))}function f(t,r,n,i){var a=new Event(\"track\");a.track=r,a.receiver=n,a.transceiver={receiver:n},a.streams=i,e.setTimeout(function(){t._dispatchEvent(\"track\",a)})}var l=function(r){var n=this,i=document.createDocumentFragment();if([\"addEventListener\",\"removeEventListener\",\"dispatchEvent\"].forEach(function(e){n[e]=i[e].bind(i)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState=\"stable\",this.iceConnectionState=\"new\",this.connectionState=\"new\",this.iceGatheringState=\"new\",r=JSON.parse(JSON.stringify(r||{})),this.usingBundle=\"max-bundle\"===r.bundlePolicy,\"negotiate\"===r.rtcpMuxPolicy)throw d(\"NotSupportedError\",\"rtcpMuxPolicy 'negotiate' is not supported\");switch(r.rtcpMuxPolicy||(r.rtcpMuxPolicy=\"require\"),r.iceTransportPolicy){case\"all\":case\"relay\":break;default:r.iceTransportPolicy=\"all\"}switch(r.bundlePolicy){case\"balanced\":case\"max-compat\":case\"max-bundle\":break;default:r.bundlePolicy=\"balanced\"}if(r.iceServers=a(r.iceServers||[],t),this._iceGatherers=[],r.iceCandidatePoolSize)for(var o=r.iceCandidatePoolSize;o>0;o--)this._iceGatherers.push(new e.RTCIceGatherer({iceServers:r.iceServers,gatherPolicy:r.iceTransportPolicy}));else r.iceCandidatePoolSize=0;this._config=r,this.transceivers=[],this._sdpSessionId=p.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(l.prototype,\"localDescription\",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(l.prototype,\"remoteDescription\",{configurable:!0,get:function(){return this._remoteDescription}}),l.prototype.onicecandidate=null,l.prototype.onaddstream=null,l.prototype.ontrack=null,l.prototype.onremovestream=null,l.prototype.onsignalingstatechange=null,l.prototype.oniceconnectionstatechange=null,l.prototype.onconnectionstatechange=null,l.prototype.onicegatheringstatechange=null,l.prototype.onnegotiationneeded=null,l.prototype.ondatachannel=null,l.prototype._dispatchEvent=function(e,t){this._isClosed||(this.dispatchEvent(t),\"function\"==typeof this[\"on\"+e]&&this[\"on\"+e](t))},l.prototype._emitGatheringStateChange=function(){var e=new Event(\"icegatheringstatechange\");this._dispatchEvent(\"icegatheringstatechange\",e)},l.prototype.getConfiguration=function(){return this._config},l.prototype.getLocalStreams=function(){return this.localStreams},l.prototype.getRemoteStreams=function(){return this.remoteStreams},l.prototype._createTransceiver=function(e,t){var r=this.transceivers.length>0,n={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:e,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&r)n.iceTransport=this.transceivers[0].iceTransport,n.dtlsTransport=this.transceivers[0].dtlsTransport;else{var i=this._createIceAndDtlsTransports();n.iceTransport=i.iceTransport,n.dtlsTransport=i.dtlsTransport}return t||this.transceivers.push(n),n},l.prototype.addTrack=function(t,r){if(this._isClosed)throw d(\"InvalidStateError\",\"Attempted to call addTrack on a closed peerconnection.\");if(this.transceivers.find(function(e){return e.track===t}))throw d(\"InvalidAccessError\",\"Track already exists.\");for(var n,i=0;i<this.transceivers.length;i++)this.transceivers[i].track||this.transceivers[i].kind!==t.kind||(n=this.transceivers[i]);return n||(n=this._createTransceiver(t.kind)),this._maybeFireNegotiationNeeded(),-1===this.localStreams.indexOf(r)&&this.localStreams.push(r),n.track=t,n.stream=r,n.rtpSender=new e.RTCRtpSender(t,n.dtlsTransport),n.rtpSender},l.prototype.addStream=function(e){var r=this;if(t>=15025)e.getTracks().forEach(function(t){r.addTrack(t,e)});else{var n=e.clone();e.getTracks().forEach(function(e,t){var r=n.getTracks()[t];e.addEventListener(\"enabled\",function(e){r.enabled=e.enabled})}),n.getTracks().forEach(function(e){r.addTrack(e,n)})}},l.prototype.removeTrack=function(t){if(this._isClosed)throw d(\"InvalidStateError\",\"Attempted to call removeTrack on a closed peerconnection.\");if(!(t instanceof e.RTCRtpSender))throw new TypeError(\"Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.\");var r=this.transceivers.find(function(e){return e.rtpSender===t});if(!r)throw d(\"InvalidAccessError\",\"Sender was not created by this connection.\");var n=r.stream;r.rtpSender.stop(),r.rtpSender=null,r.track=null,r.stream=null,-1===this.transceivers.map(function(e){return e.stream}).indexOf(n)&&this.localStreams.indexOf(n)>-1&&this.localStreams.splice(this.localStreams.indexOf(n),1),this._maybeFireNegotiationNeeded()},l.prototype.removeStream=function(e){var t=this;e.getTracks().forEach(function(e){var r=t.getSenders().find(function(t){return t.track===e});r&&t.removeTrack(r)})},l.prototype.getSenders=function(){return this.transceivers.filter(function(e){return!!e.rtpSender}).map(function(e){return e.rtpSender})},l.prototype.getReceivers=function(){return this.transceivers.filter(function(e){return!!e.rtpReceiver}).map(function(e){return e.rtpReceiver})},l.prototype._createIceGatherer=function(t,r){var n=this;if(r&&t>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var i=new e.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(i,\"state\",{value:\"new\",writable:!0}),this.transceivers[t].bufferedCandidateEvents=[],this.transceivers[t].bufferCandidates=function(e){var r=!e.candidate||0===Object.keys(e.candidate).length;i.state=r?\"completed\":\"gathering\",null!==n.transceivers[t].bufferedCandidateEvents&&n.transceivers[t].bufferedCandidateEvents.push(e)},i.addEventListener(\"localcandidate\",this.transceivers[t].bufferCandidates),i},l.prototype._gather=function(t,r){var n=this,i=this.transceivers[r].iceGatherer;if(!i.onlocalcandidate){var a=this.transceivers[r].bufferedCandidateEvents;this.transceivers[r].bufferedCandidateEvents=null,i.removeEventListener(\"localcandidate\",this.transceivers[r].bufferCandidates),i.onlocalcandidate=function(e){if(!(n.usingBundle&&r>0)){var a=new Event(\"icecandidate\");a.candidate={sdpMid:t,sdpMLineIndex:r};var o=e.candidate,s=!o||0===Object.keys(o).length;if(s)\"new\"!==i.state&&\"gathering\"!==i.state||(i.state=\"completed\");else{\"new\"===i.state&&(i.state=\"gathering\"),o.component=1,o.ufrag=i.getLocalParameters().usernameFragment;var c=p.writeCandidate(o);a.candidate=Object.assign(a.candidate,p.parseCandidate(c)),a.candidate.candidate=c,a.candidate.toJSON=function(){return{candidate:a.candidate.candidate,sdpMid:a.candidate.sdpMid,sdpMLineIndex:a.candidate.sdpMLineIndex,usernameFragment:a.candidate.usernameFragment}}}var d=p.getMediaSections(n._localDescription.sdp);d[a.candidate.sdpMLineIndex]+=s?\"a=end-of-candidates\\r\\n\":\"a=\"+a.candidate.candidate+\"\\r\\n\",n._localDescription.sdp=p.getDescription(n._localDescription.sdp)+d.join(\"\");var u=n.transceivers.every(function(e){return e.iceGatherer&&\"completed\"===e.iceGatherer.state});\"gathering\"!==n.iceGatheringState&&(n.iceGatheringState=\"gathering\",n._emitGatheringStateChange()),s||n._dispatchEvent(\"icecandidate\",a),u&&(n._dispatchEvent(\"icecandidate\",new Event(\"icecandidate\")),n.iceGatheringState=\"complete\",n._emitGatheringStateChange())}},e.setTimeout(function(){a.forEach(function(e){i.onlocalcandidate(e)})},0)}},l.prototype._createIceAndDtlsTransports=function(){var t=this,r=new e.RTCIceTransport(null);r.onicestatechange=function(){t._updateIceConnectionState(),t._updateConnectionState()};var n=new e.RTCDtlsTransport(r);return n.ondtlsstatechange=function(){t._updateConnectionState()},n.onerror=function(){Object.defineProperty(n,\"state\",{value:\"failed\",writable:!0}),t._updateConnectionState()},{iceTransport:r,dtlsTransport:n}},l.prototype._disposeIceAndDtlsTransports=function(e){var t=this.transceivers[e].iceGatherer;t&&(delete t.onlocalcandidate,delete this.transceivers[e].iceGatherer);var r=this.transceivers[e].iceTransport;r&&(delete r.onicestatechange,delete this.transceivers[e].iceTransport);var n=this.transceivers[e].dtlsTransport;n&&(delete n.ondtlsstatechange,delete n.onerror,delete this.transceivers[e].dtlsTransport)},l.prototype._transceive=function(e,r,n){var i=o(e.localCapabilities,e.remoteCapabilities);r&&e.rtpSender&&(i.encodings=e.sendEncodingParameters,i.rtcp={cname:p.localCName,compound:e.rtcpParameters.compound},e.recvEncodingParameters.length&&(i.rtcp.ssrc=e.recvEncodingParameters[0].ssrc),e.rtpSender.send(i)),n&&e.rtpReceiver&&i.codecs.length>0&&(\"video\"===e.kind&&e.recvEncodingParameters&&t<15019&&e.recvEncodingParameters.forEach(function(e){delete e.rtx}),e.recvEncodingParameters.length?i.encodings=e.recvEncodingParameters:i.encodings=[{}],i.rtcp={compound:e.rtcpParameters.compound},e.rtcpParameters.cname&&(i.rtcp.cname=e.rtcpParameters.cname),e.sendEncodingParameters.length&&(i.rtcp.ssrc=e.sendEncodingParameters[0].ssrc),e.rtpReceiver.receive(i))},l.prototype.setLocalDescription=function(e){var t=this;if(-1===[\"offer\",\"answer\"].indexOf(e.type))return Promise.reject(d(\"TypeError\",'Unsupported type \"'+e.type+'\"'));if(!s(\"setLocalDescription\",e.type,t.signalingState)||t._isClosed)return Promise.reject(d(\"InvalidStateError\",\"Can not set local \"+e.type+\" in state \"+t.signalingState));var r,n;if(\"offer\"===e.type)r=p.splitSections(e.sdp),n=r.shift(),r.forEach(function(e,r){var n=p.parseRtpParameters(e);t.transceivers[r].localCapabilities=n}),t.transceivers.forEach(function(e,r){t._gather(e.mid,r)});else if(\"answer\"===e.type){r=p.splitSections(t._remoteDescription.sdp),n=r.shift();var i=p.matchPrefix(n,\"a=ice-lite\").length>0;r.forEach(function(e,r){var a=t.transceivers[r],s=a.iceGatherer,c=a.iceTransport,d=a.dtlsTransport,u=a.localCapabilities,f=a.remoteCapabilities;if(!(p.isRejected(e)&&0===p.matchPrefix(e,\"a=bundle-only\").length)&&!a.rejected){var l=p.getIceParameters(e,n),m=p.getDtlsParameters(e,n);i&&(m.role=\"server\"),t.usingBundle&&0!==r||(t._gather(a.mid,r),\"new\"===c.state&&c.start(s,l,i?\"controlling\":\"controlled\"),\"new\"===d.state&&d.start(m));var h=o(u,f);t._transceive(a,h.codecs.length>0,!1)}})}return t._localDescription={type:e.type,sdp:e.sdp},\"offer\"===e.type?t._updateSignalingState(\"have-local-offer\"):t._updateSignalingState(\"stable\"),Promise.resolve()},l.prototype.setRemoteDescription=function(n){var i=this;if(-1===[\"offer\",\"answer\"].indexOf(n.type))return Promise.reject(d(\"TypeError\",'Unsupported type \"'+n.type+'\"'));if(!s(\"setRemoteDescription\",n.type,i.signalingState)||i._isClosed)return Promise.reject(d(\"InvalidStateError\",\"Can not set remote \"+n.type+\" in state \"+i.signalingState));var a={};i.remoteStreams.forEach(function(e){a[e.id]=e});var l=[],m=p.splitSections(n.sdp),h=m.shift(),v=p.matchPrefix(h,\"a=ice-lite\").length>0,y=p.matchPrefix(h,\"a=group:BUNDLE \").length>0;i.usingBundle=y;var g=p.matchPrefix(h,\"a=ice-options:\")[0];return i.canTrickleIceCandidates=!!g&&g.substr(14).split(\" \").indexOf(\"trickle\")>=0,m.forEach(function(s,d){var f=p.splitLines(s),m=p.getKind(s),g=p.isRejected(s)&&0===p.matchPrefix(s,\"a=bundle-only\").length,C=f[0].substr(2).split(\" \")[2],S=p.getDirection(s,h),T=p.parseMsid(s),R=p.getMid(s)||p.generateIdentifier();if(g||\"application\"===m&&(\"DTLS/SCTP\"===C||\"UDP/DTLS/SCTP\"===C))i.transceivers[d]={mid:R,kind:m,protocol:C,rejected:!0};else{!g&&i.transceivers[d]&&i.transceivers[d].rejected&&(i.transceivers[d]=i._createTransceiver(m,!0));var P,b,E,_,w,k,M,D,x,O,I,j=p.parseRtpParameters(s);g||(O=p.getIceParameters(s,h),(I=p.getDtlsParameters(s,h)).role=\"client\"),M=p.parseRtpEncodingParameters(s);var L=p.parseRtcpParameters(s),G=p.matchPrefix(s,\"a=end-of-candidates\",h).length>0,A=p.matchPrefix(s,\"a=candidate:\").map(function(e){return p.parseCandidate(e)}).filter(function(e){return 1===e.component});if((\"offer\"===n.type||\"answer\"===n.type)&&!g&&y&&d>0&&i.transceivers[d]&&(i._disposeIceAndDtlsTransports(d),i.transceivers[d].iceGatherer=i.transceivers[0].iceGatherer,i.transceivers[d].iceTransport=i.transceivers[0].iceTransport,i.transceivers[d].dtlsTransport=i.transceivers[0].dtlsTransport,i.transceivers[d].rtpSender&&i.transceivers[d].rtpSender.setTransport(i.transceivers[0].dtlsTransport),i.transceivers[d].rtpReceiver&&i.transceivers[d].rtpReceiver.setTransport(i.transceivers[0].dtlsTransport)),\"offer\"!==n.type||g)\"answer\"!==n.type||g||(b=(P=i.transceivers[d]).iceGatherer,E=P.iceTransport,_=P.dtlsTransport,w=P.rtpReceiver,k=P.sendEncodingParameters,D=P.localCapabilities,i.transceivers[d].recvEncodingParameters=M,i.transceivers[d].remoteCapabilities=j,i.transceivers[d].rtcpParameters=L,A.length&&\"new\"===E.state&&(!v&&!G||y&&0!==d?A.forEach(function(e){c(P.iceTransport,e)}):E.setRemoteCandidates(A)),y&&0!==d||(\"new\"===E.state&&E.start(b,O,\"controlling\"),\"new\"===_.state&&_.start(I)),!o(P.localCapabilities,P.remoteCapabilities).codecs.filter(function(e){return\"rtx\"===e.name.toLowerCase()}).length&&P.sendEncodingParameters[0].rtx&&delete P.sendEncodingParameters[0].rtx,i._transceive(P,\"sendrecv\"===S||\"recvonly\"===S,\"sendrecv\"===S||\"sendonly\"===S),!w||\"sendrecv\"!==S&&\"sendonly\"!==S?delete P.rtpReceiver:(x=w.track,T?(a[T.stream]||(a[T.stream]=new e.MediaStream),r(x,a[T.stream]),l.push([x,w,a[T.stream]])):(a.default||(a.default=new e.MediaStream),r(x,a.default),l.push([x,w,a.default]))));else{(P=i.transceivers[d]||i._createTransceiver(m)).mid=R,P.iceGatherer||(P.iceGatherer=i._createIceGatherer(d,y)),A.length&&\"new\"===P.iceTransport.state&&(!G||y&&0!==d?A.forEach(function(e){c(P.iceTransport,e)}):P.iceTransport.setRemoteCandidates(A)),D=e.RTCRtpReceiver.getCapabilities(m),t<15019&&(D.codecs=D.codecs.filter(function(e){return\"rtx\"!==e.name})),k=P.sendEncodingParameters||[{ssrc:1001*(2*d+2)}];var N=!1;if(\"sendrecv\"===S||\"sendonly\"===S){if(N=!P.rtpReceiver,w=P.rtpReceiver||new e.RTCRtpReceiver(P.dtlsTransport,m),N){var U;x=w.track,T&&\"-\"===T.stream||(T?(a[T.stream]||(a[T.stream]=new e.MediaStream,Object.defineProperty(a[T.stream],\"id\",{get:function(){return T.stream}})),Object.defineProperty(x,\"id\",{get:function(){return T.track}}),U=a[T.stream]):(a.default||(a.default=new e.MediaStream),U=a.default)),U&&(r(x,U),P.associatedRemoteMediaStreams.push(U)),l.push([x,w,U])}}else P.rtpReceiver&&P.rtpReceiver.track&&(P.associatedRemoteMediaStreams.forEach(function(e){var t=e.getTracks().find(function(e){return e.id===P.rtpReceiver.track.id});t&&u(t,e)}),P.associatedRemoteMediaStreams=[]);P.localCapabilities=D,P.remoteCapabilities=j,P.rtpReceiver=w,P.rtcpParameters=L,P.sendEncodingParameters=k,P.recvEncodingParameters=M,i._transceive(i.transceivers[d],!1,N)}}}),void 0===i._dtlsRole&&(i._dtlsRole=\"offer\"===n.type?\"active\":\"passive\"),i._remoteDescription={type:n.type,sdp:n.sdp},\"offer\"===n.type?i._updateSignalingState(\"have-remote-offer\"):i._updateSignalingState(\"stable\"),Object.keys(a).forEach(function(t){var r=a[t];if(r.getTracks().length){if(-1===i.remoteStreams.indexOf(r)){i.remoteStreams.push(r);var n=new Event(\"addstream\");n.stream=r,e.setTimeout(function(){i._dispatchEvent(\"addstream\",n)})}l.forEach(function(e){var t=e[0],n=e[1];r.id===e[2].id&&f(i,t,n,[r])})}}),l.forEach(function(e){e[2]||f(i,e[0],e[1],[])}),e.setTimeout(function(){i&&i.transceivers&&i.transceivers.forEach(function(e){e.iceTransport&&\"new\"===e.iceTransport.state&&e.iceTransport.getRemoteCandidates().length>0&&(console.warn(\"Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification\"),e.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},l.prototype.close=function(){this.transceivers.forEach(function(e){e.iceTransport&&e.iceTransport.stop(),e.dtlsTransport&&e.dtlsTransport.stop(),e.rtpSender&&e.rtpSender.stop(),e.rtpReceiver&&e.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState(\"closed\")},l.prototype._updateSignalingState=function(e){this.signalingState=e;var t=new Event(\"signalingstatechange\");this._dispatchEvent(\"signalingstatechange\",t)},l.prototype._maybeFireNegotiationNeeded=function(){var t=this;\"stable\"===this.signalingState&&!0!==this.needNegotiation&&(this.needNegotiation=!0,e.setTimeout(function(){if(t.needNegotiation){t.needNegotiation=!1;var e=new Event(\"negotiationneeded\");t._dispatchEvent(\"negotiationneeded\",e)}},0))},l.prototype._updateIceConnectionState=function(){var e,t={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&!e.rejected&&t[e.iceTransport.state]++}),e=\"new\",t.failed>0?e=\"failed\":t.checking>0?e=\"checking\":t.disconnected>0?e=\"disconnected\":t.new>0?e=\"new\":t.connected>0?e=\"connected\":t.completed>0&&(e=\"completed\"),e!==this.iceConnectionState){this.iceConnectionState=e;var r=new Event(\"iceconnectionstatechange\");this._dispatchEvent(\"iceconnectionstatechange\",r)}},l.prototype._updateConnectionState=function(){var e,t={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(e){e.iceTransport&&e.dtlsTransport&&!e.rejected&&(t[e.iceTransport.state]++,t[e.dtlsTransport.state]++)}),t.connected+=t.completed,e=\"new\",t.failed>0?e=\"failed\":t.connecting>0?e=\"connecting\":t.disconnected>0?e=\"disconnected\":t.new>0?e=\"new\":t.connected>0&&(e=\"connected\"),e!==this.connectionState){this.connectionState=e;var r=new Event(\"connectionstatechange\");this._dispatchEvent(\"connectionstatechange\",r)}},l.prototype.createOffer=function(){var r=this;if(r._isClosed)return Promise.reject(d(\"InvalidStateError\",\"Can not call createOffer after close\"));var n=r.transceivers.filter(function(e){return\"audio\"===e.kind}).length,a=r.transceivers.filter(function(e){return\"video\"===e.kind}).length,o=arguments[0];if(o){if(o.mandatory||o.optional)throw new TypeError(\"Legacy mandatory/optional constraints not supported.\");void 0!==o.offerToReceiveAudio&&(n=!0===o.offerToReceiveAudio?1:!1===o.offerToReceiveAudio?0:o.offerToReceiveAudio),void 0!==o.offerToReceiveVideo&&(a=!0===o.offerToReceiveVideo?1:!1===o.offerToReceiveVideo?0:o.offerToReceiveVideo)}for(r.transceivers.forEach(function(e){\"audio\"===e.kind?--n<0&&(e.wantReceive=!1):\"video\"===e.kind&&--a<0&&(e.wantReceive=!1)});n>0||a>0;)n>0&&(r._createTransceiver(\"audio\"),n--),a>0&&(r._createTransceiver(\"video\"),a--);var s=p.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.transceivers.forEach(function(n,i){var a=n.track,o=n.kind,s=n.mid||p.generateIdentifier();n.mid=s,n.iceGatherer||(n.iceGatherer=r._createIceGatherer(i,r.usingBundle));var c=e.RTCRtpSender.getCapabilities(o);t<15019&&(c.codecs=c.codecs.filter(function(e){return\"rtx\"!==e.name})),c.codecs.forEach(function(e){\"H264\"===e.name&&void 0===e.parameters[\"level-asymmetry-allowed\"]&&(e.parameters[\"level-asymmetry-allowed\"]=\"1\"),n.remoteCapabilities&&n.remoteCapabilities.codecs&&n.remoteCapabilities.codecs.forEach(function(t){e.name.toLowerCase()===t.name.toLowerCase()&&e.clockRate===t.clockRate&&(e.preferredPayloadType=t.payloadType)})}),c.headerExtensions.forEach(function(e){(n.remoteCapabilities&&n.remoteCapabilities.headerExtensions||[]).forEach(function(t){e.uri===t.uri&&(e.id=t.id)})});var d=n.sendEncodingParameters||[{ssrc:1001*(2*i+1)}];a&&t>=15019&&\"video\"===o&&!d[0].rtx&&(d[0].rtx={ssrc:d[0].ssrc+1}),n.wantReceive&&(n.rtpReceiver=new e.RTCRtpReceiver(n.dtlsTransport,o)),n.localCapabilities=c,n.sendEncodingParameters=d}),\"max-compat\"!==r._config.bundlePolicy&&(s+=\"a=group:BUNDLE \"+r.transceivers.map(function(e){return e.mid}).join(\" \")+\"\\r\\n\"),s+=\"a=ice-options:trickle\\r\\n\",r.transceivers.forEach(function(e,t){s+=i(e,e.localCapabilities,\"offer\",e.stream,r._dtlsRole),s+=\"a=rtcp-rsize\\r\\n\",!e.iceGatherer||\"new\"===r.iceGatheringState||0!==t&&r.usingBundle||(e.iceGatherer.getLocalCandidates().forEach(function(e){e.component=1,s+=\"a=\"+p.writeCandidate(e)+\"\\r\\n\"}),\"completed\"===e.iceGatherer.state&&(s+=\"a=end-of-candidates\\r\\n\"))});var c=new e.RTCSessionDescription({type:\"offer\",sdp:s});return Promise.resolve(c)},l.prototype.createAnswer=function(){var r=this;if(r._isClosed)return Promise.reject(d(\"InvalidStateError\",\"Can not call createAnswer after close\"));if(\"have-remote-offer\"!==r.signalingState&&\"have-local-pranswer\"!==r.signalingState)return Promise.reject(d(\"InvalidStateError\",\"Can not call createAnswer in signalingState \"+r.signalingState));var n=p.writeSessionBoilerplate(r._sdpSessionId,r._sdpSessionVersion++);r.usingBundle&&(n+=\"a=group:BUNDLE \"+r.transceivers.map(function(e){return e.mid}).join(\" \")+\"\\r\\n\"),n+=\"a=ice-options:trickle\\r\\n\";var a=p.getMediaSections(r._remoteDescription.sdp).length;r.transceivers.forEach(function(e,s){if(!(s+1>a)){if(e.rejected)return\"application\"===e.kind?\"DTLS/SCTP\"===e.protocol?n+=\"m=application 0 DTLS/SCTP 5000\\r\\n\":n+=\"m=application 0 \"+e.protocol+\" webrtc-datachannel\\r\\n\":\"audio\"===e.kind?n+=\"m=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\na=rtpmap:0 PCMU/8000\\r\\n\":\"video\"===e.kind&&(n+=\"m=video 0 UDP/TLS/RTP/SAVPF 120\\r\\na=rtpmap:120 VP8/90000\\r\\n\"),void(n+=\"c=IN IP4 0.0.0.0\\r\\na=inactive\\r\\na=mid:\"+e.mid+\"\\r\\n\");if(e.stream){var c;\"audio\"===e.kind?c=e.stream.getAudioTracks()[0]:\"video\"===e.kind&&(c=e.stream.getVideoTracks()[0]),c&&t>=15019&&\"video\"===e.kind&&!e.sendEncodingParameters[0].rtx&&(e.sendEncodingParameters[0].rtx={ssrc:e.sendEncodingParameters[0].ssrc+1})}var d=o(e.localCapabilities,e.remoteCapabilities);!d.codecs.filter(function(e){return\"rtx\"===e.name.toLowerCase()}).length&&e.sendEncodingParameters[0].rtx&&delete e.sendEncodingParameters[0].rtx,n+=i(e,d,\"answer\",e.stream,r._dtlsRole),e.rtcpParameters&&e.rtcpParameters.reducedSize&&(n+=\"a=rtcp-rsize\\r\\n\")}});var s=new e.RTCSessionDescription({type:\"answer\",sdp:n});return Promise.resolve(s)},l.prototype.addIceCandidate=function(e){var t,r=this;return e&&void 0===e.sdpMLineIndex&&!e.sdpMid?Promise.reject(new TypeError(\"sdpMLineIndex or sdpMid required\")):new Promise(function(n,i){if(!r._remoteDescription)return i(d(\"InvalidStateError\",\"Can not add ICE candidate without a remote description\"));if(e&&\"\"!==e.candidate){var a=e.sdpMLineIndex;if(e.sdpMid)for(var o=0;o<r.transceivers.length;o++)if(r.transceivers[o].mid===e.sdpMid){a=o;break}var s=r.transceivers[a];if(!s)return i(d(\"OperationError\",\"Can not add ICE candidate\"));if(s.rejected)return n();var u=Object.keys(e.candidate).length>0?p.parseCandidate(e.candidate):{};if(\"tcp\"===u.protocol&&(0===u.port||9===u.port))return n();if(u.component&&1!==u.component)return n();if((0===a||a>0&&s.iceTransport!==r.transceivers[0].iceTransport)&&!c(s.iceTransport,u))return i(d(\"OperationError\",\"Can not add ICE candidate\"));var f=e.candidate.trim();0===f.indexOf(\"a=\")&&(f=f.substr(2)),(t=p.getMediaSections(r._remoteDescription.sdp))[a]+=\"a=\"+(u.type?f:\"end-of-candidates\")+\"\\r\\n\",r._remoteDescription.sdp=p.getDescription(r._remoteDescription.sdp)+t.join(\"\")}else for(var l=0;l<r.transceivers.length&&(r.transceivers[l].rejected||(r.transceivers[l].iceTransport.addRemoteCandidate({}),t=p.getMediaSections(r._remoteDescription.sdp),t[l]+=\"a=end-of-candidates\\r\\n\",r._remoteDescription.sdp=p.getDescription(r._remoteDescription.sdp)+t.join(\"\"),!r.usingBundle));l++);n()})},l.prototype.getStats=function(t){if(t&&t instanceof e.MediaStreamTrack){var r=null;if(this.transceivers.forEach(function(e){e.rtpSender&&e.rtpSender.track===t?r=e.rtpSender:e.rtpReceiver&&e.rtpReceiver.track===t&&(r=e.rtpReceiver)}),!r)throw d(\"InvalidAccessError\",\"Invalid selector.\");return r.getStats()}var n=[];return this.transceivers.forEach(function(e){[\"rtpSender\",\"rtpReceiver\",\"iceGatherer\",\"iceTransport\",\"dtlsTransport\"].forEach(function(t){e[t]&&n.push(e[t].getStats())})}),Promise.all(n).then(function(e){var t=new Map;return e.forEach(function(e){e.forEach(function(e){t.set(e.id,e)})}),t})},[\"RTCRtpSender\",\"RTCRtpReceiver\",\"RTCIceGatherer\",\"RTCIceTransport\",\"RTCDtlsTransport\"].forEach(function(t){var r=e[t];if(r&&r.prototype&&r.prototype.getStats){var i=r.prototype.getStats;r.prototype.getStats=function(){return i.apply(this).then(function(e){var t=new Map;return Object.keys(e).forEach(function(r){e[r].type=n(e[r]),t.set(r,e[r])}),t})}}});var m=[\"createOffer\",\"createAnswer\"];return m.forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return\"function\"==typeof e[0]||\"function\"==typeof e[1]?t.apply(this,[arguments[2]]).then(function(t){\"function\"==typeof e[0]&&e[0].apply(null,[t])},function(t){\"function\"==typeof e[1]&&e[1].apply(null,[t])}):t.apply(this,arguments)}}),(m=[\"setLocalDescription\",\"setRemoteDescription\",\"addIceCandidate\"]).forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return\"function\"==typeof e[1]||\"function\"==typeof e[2]?t.apply(this,arguments).then(function(){\"function\"==typeof e[1]&&e[1].apply(null)},function(t){\"function\"==typeof e[2]&&e[2].apply(null,[t])}):t.apply(this,arguments)}}),[\"getStats\"].forEach(function(e){var t=l.prototype[e];l.prototype[e]=function(){var e=arguments;return\"function\"==typeof e[1]?t.apply(this,arguments).then(function(){\"function\"==typeof e[1]&&e[1].apply(null)}):t.apply(this,arguments)}}),l}},{sdp:17}],17:[function(e,t,r){\"use strict\";var n={};n.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},n.localCName=n.generateIdentifier(),n.splitLines=function(e){return e.trim().split(\"\\n\").map(function(e){return e.trim()})},n.splitSections=function(e){return e.split(\"\\nm=\").map(function(e,t){return(t>0?\"m=\"+e:e).trim()+\"\\r\\n\"})},n.getDescription=function(e){var t=n.splitSections(e);return t&&t[0]},n.getMediaSections=function(e){var t=n.splitSections(e);return t.shift(),t},n.matchPrefix=function(e,t){return n.splitLines(e).filter(function(e){return 0===e.indexOf(t)})},n.parseCandidate=function(e){for(var t,r={foundation:(t=0===e.indexOf(\"a=candidate:\")?e.substring(12).split(\" \"):e.substring(10).split(\" \"))[0],component:parseInt(t[1],10),protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},n=8;n<t.length;n+=2)switch(t[n]){case\"raddr\":r.relatedAddress=t[n+1];break;case\"rport\":r.relatedPort=parseInt(t[n+1],10);break;case\"tcptype\":r.tcpType=t[n+1];break;case\"ufrag\":r.ufrag=t[n+1],r.usernameFragment=t[n+1];break;default:r[t[n]]=t[n+1]}return r},n.writeCandidate=function(e){var t=[];t.push(e.foundation),t.push(e.component),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push(\"typ\"),t.push(r),\"host\"!==r&&e.relatedAddress&&e.relatedPort&&(t.push(\"raddr\"),t.push(e.relatedAddress),t.push(\"rport\"),t.push(e.relatedPort)),e.tcpType&&\"tcp\"===e.protocol.toLowerCase()&&(t.push(\"tcptype\"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push(\"ufrag\"),t.push(e.usernameFragment||e.ufrag)),\"candidate:\"+t.join(\" \")},n.parseIceOptions=function(e){return e.substr(14).split(\" \")},n.parseRtpMap=function(e){var t=e.substr(9).split(\" \"),r={payloadType:parseInt(t.shift(),10)};return t=t[0].split(\"/\"),r.name=t[0],r.clockRate=parseInt(t[1],10),r.channels=3===t.length?parseInt(t[2],10):1,r.numChannels=r.channels,r},n.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var r=e.channels||e.numChannels||1;return\"a=rtpmap:\"+t+\" \"+e.name+\"/\"+e.clockRate+(1!==r?\"/\"+r:\"\")+\"\\r\\n\"},n.parseExtmap=function(e){var t=e.substr(9).split(\" \");return{id:parseInt(t[0],10),direction:t[0].indexOf(\"/\")>0?t[0].split(\"/\")[1]:\"sendrecv\",uri:t[1]}},n.writeExtmap=function(e){return\"a=extmap:\"+(e.id||e.preferredId)+(e.direction&&\"sendrecv\"!==e.direction?\"/\"+e.direction:\"\")+\" \"+e.uri+\"\\r\\n\"},n.parseFmtp=function(e){for(var t,r={},n=e.substr(e.indexOf(\" \")+1).split(\";\"),i=0;i<n.length;i++)r[(t=n[i].trim().split(\"=\"))[0].trim()]=t[1];return r},n.writeFmtp=function(e){var t=\"\",r=e.payloadType;if(void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var n=[];Object.keys(e.parameters).forEach(function(t){e.parameters[t]?n.push(t+\"=\"+e.parameters[t]):n.push(t)}),t+=\"a=fmtp:\"+r+\" \"+n.join(\";\")+\"\\r\\n\"}return t},n.parseRtcpFb=function(e){var t=e.substr(e.indexOf(\" \")+1).split(\" \");return{type:t.shift(),parameter:t.join(\" \")}},n.writeRtcpFb=function(e){var t=\"\",r=e.payloadType;return void 0!==e.preferredPayloadType&&(r=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach(function(e){t+=\"a=rtcp-fb:\"+r+\" \"+e.type+(e.parameter&&e.parameter.length?\" \"+e.parameter:\"\")+\"\\r\\n\"}),t},n.parseSsrcMedia=function(e){var t=e.indexOf(\" \"),r={ssrc:parseInt(e.substr(7,t-7),10)},n=e.indexOf(\":\",t);return n>-1?(r.attribute=e.substr(t+1,n-t-1),r.value=e.substr(n+1)):r.attribute=e.substr(t+1),r},n.parseSsrcGroup=function(e){var t=e.substr(13).split(\" \");return{semantics:t.shift(),ssrcs:t.map(function(e){return parseInt(e,10)})}},n.getMid=function(e){var t=n.matchPrefix(e,\"a=mid:\")[0];if(t)return t.substr(6)},n.parseFingerprint=function(e){var t=e.substr(14).split(\" \");return{algorithm:t[0].toLowerCase(),value:t[1]}},n.getDtlsParameters=function(e,t){return{role:\"auto\",fingerprints:n.matchPrefix(e+t,\"a=fingerprint:\").map(n.parseFingerprint)}},n.writeDtlsParameters=function(e,t){var r=\"a=setup:\"+t+\"\\r\\n\";return e.fingerprints.forEach(function(e){r+=\"a=fingerprint:\"+e.algorithm+\" \"+e.value+\"\\r\\n\"}),r},n.getIceParameters=function(e,t){var r=n.splitLines(e);return{usernameFragment:(r=r.concat(n.splitLines(t))).filter(function(e){return 0===e.indexOf(\"a=ice-ufrag:\")})[0].substr(12),password:r.filter(function(e){return 0===e.indexOf(\"a=ice-pwd:\")})[0].substr(10)}},n.writeIceParameters=function(e){return\"a=ice-ufrag:\"+e.usernameFragment+\"\\r\\na=ice-pwd:\"+e.password+\"\\r\\n\"},n.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=n.splitLines(e)[0].split(\" \"),i=3;i<r.length;i++){var a=r[i],o=n.matchPrefix(e,\"a=rtpmap:\"+a+\" \")[0];if(o){var s=n.parseRtpMap(o),c=n.matchPrefix(e,\"a=fmtp:\"+a+\" \");switch(s.parameters=c.length?n.parseFmtp(c[0]):{},s.rtcpFeedback=n.matchPrefix(e,\"a=rtcp-fb:\"+a+\" \").map(n.parseRtcpFb),t.codecs.push(s),s.name.toUpperCase()){case\"RED\":case\"ULPFEC\":t.fecMechanisms.push(s.name.toUpperCase())}}}return n.matchPrefix(e,\"a=extmap:\").forEach(function(e){t.headerExtensions.push(n.parseExtmap(e))}),t},n.writeRtpDescription=function(e,t){var r=\"\";r+=\"m=\"+e+\" \",r+=t.codecs.length>0?\"9\":\"0\",r+=\" UDP/TLS/RTP/SAVPF \",r+=t.codecs.map(function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType}).join(\" \")+\"\\r\\n\",r+=\"c=IN IP4 0.0.0.0\\r\\n\",r+=\"a=rtcp:9 IN IP4 0.0.0.0\\r\\n\",t.codecs.forEach(function(e){r+=n.writeRtpMap(e),r+=n.writeFmtp(e),r+=n.writeRtcpFb(e)});var i=0;return t.codecs.forEach(function(e){e.maxptime>i&&(i=e.maxptime)}),i>0&&(r+=\"a=maxptime:\"+i+\"\\r\\n\"),r+=\"a=rtcp-mux\\r\\n\",t.headerExtensions&&t.headerExtensions.forEach(function(e){r+=n.writeExtmap(e)}),r},n.parseRtpEncodingParameters=function(e){var t,r=[],i=n.parseRtpParameters(e),a=-1!==i.fecMechanisms.indexOf(\"RED\"),o=-1!==i.fecMechanisms.indexOf(\"ULPFEC\"),s=n.matchPrefix(e,\"a=ssrc:\").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return\"cname\"===e.attribute}),c=s.length>0&&s[0].ssrc,d=n.matchPrefix(e,\"a=ssrc-group:FID\").map(function(e){return e.substr(17).split(\" \").map(function(e){return parseInt(e,10)})});d.length>0&&d[0].length>1&&d[0][0]===c&&(t=d[0][1]),i.codecs.forEach(function(e){if(\"RTX\"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&t&&(n.rtx={ssrc:t}),r.push(n),a&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:c,mechanism:o?\"red+ulpfec\":\"red\"},r.push(n))}}),0===r.length&&c&&r.push({ssrc:c});var p=n.matchPrefix(e,\"b=\");return p.length&&(p=0===p[0].indexOf(\"b=TIAS:\")?parseInt(p[0].substr(7),10):0===p[0].indexOf(\"b=AS:\")?1e3*parseInt(p[0].substr(5),10)*.95-16e3:void 0,r.forEach(function(e){e.maxBitrate=p})),r},n.parseRtcpParameters=function(e){var t={},r=n.matchPrefix(e,\"a=ssrc:\").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return\"cname\"===e.attribute})[0];r&&(t.cname=r.value,t.ssrc=r.ssrc);var i=n.matchPrefix(e,\"a=rtcp-rsize\");t.reducedSize=i.length>0,t.compound=0===i.length;var a=n.matchPrefix(e,\"a=rtcp-mux\");return t.mux=a.length>0,t},n.parseMsid=function(e){var t,r=n.matchPrefix(e,\"a=msid:\");if(1===r.length)return t=r[0].substr(7).split(\" \"),{stream:t[0],track:t[1]};var i=n.matchPrefix(e,\"a=ssrc:\").map(function(e){return n.parseSsrcMedia(e)}).filter(function(e){return\"msid\"===e.attribute});return i.length>0?(t=i[0].value.split(\" \"),{stream:t[0],track:t[1]}):void 0},n.generateSessionId=function(){return Math.random().toString().substr(2,21)},n.writeSessionBoilerplate=function(e,t,r){var i,a=void 0!==t?t:2;return i=e||n.generateSessionId(),\"v=0\\r\\no=\"+(r||\"thisisadapterortc\")+\" \"+i+\" \"+a+\" IN IP4 127.0.0.1\\r\\ns=-\\r\\nt=0 0\\r\\n\"},n.writeMediaSection=function(e,t,r,i){var a=n.writeRtpDescription(e.kind,t);if(a+=n.writeIceParameters(e.iceGatherer.getLocalParameters()),a+=n.writeDtlsParameters(e.dtlsTransport.getLocalParameters(),\"offer\"===r?\"actpass\":\"active\"),a+=\"a=mid:\"+e.mid+\"\\r\\n\",e.direction?a+=\"a=\"+e.direction+\"\\r\\n\":e.rtpSender&&e.rtpReceiver?a+=\"a=sendrecv\\r\\n\":e.rtpSender?a+=\"a=sendonly\\r\\n\":e.rtpReceiver?a+=\"a=recvonly\\r\\n\":a+=\"a=inactive\\r\\n\",e.rtpSender){var o=\"msid:\"+i.id+\" \"+e.rtpSender.track.id+\"\\r\\n\";a+=\"a=\"+o,a+=\"a=ssrc:\"+e.sendEncodingParameters[0].ssrc+\" \"+o,e.sendEncodingParameters[0].rtx&&(a+=\"a=ssrc:\"+e.sendEncodingParameters[0].rtx.ssrc+\" \"+o,a+=\"a=ssrc-group:FID \"+e.sendEncodingParameters[0].ssrc+\" \"+e.sendEncodingParameters[0].rtx.ssrc+\"\\r\\n\")}return a+=\"a=ssrc:\"+e.sendEncodingParameters[0].ssrc+\" cname:\"+n.localCName+\"\\r\\n\",e.rtpSender&&e.sendEncodingParameters[0].rtx&&(a+=\"a=ssrc:\"+e.sendEncodingParameters[0].rtx.ssrc+\" cname:\"+n.localCName+\"\\r\\n\"),a},n.getDirection=function(e,t){for(var r=n.splitLines(e),i=0;i<r.length;i++)switch(r[i]){case\"a=sendrecv\":case\"a=sendonly\":case\"a=recvonly\":case\"a=inactive\":return r[i].substr(2)}return t?n.getDirection(t):\"sendrecv\"},n.getKind=function(e){return n.splitLines(e)[0].split(\" \")[0].substr(2)},n.isRejected=function(e){return\"0\"===e.split(\" \",2)[1]},n.parseMLine=function(e){var t=n.splitLines(e)[0].substr(2).split(\" \");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(\" \")}},n.parseOLine=function(e){var t=n.matchPrefix(e,\"o=\")[0].substr(2).split(\" \");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},n.isValidSDP=function(e){if(\"string\"!=typeof e||0===e.length)return!1;for(var t=n.splitLines(e),r=0;r<t.length;r++)if(t[r].length<2||\"=\"!==t[r].charAt(1))return!1;return!0},\"object\"==typeof t&&(t.exports=n)},{}]},{},[1])(1)});\n!function(t){\"use strict\";function e(t){if(\"string\"!=typeof t&&(t=String(t)),/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(t))throw new TypeError(\"Invalid character in header field name\");return t.toLowerCase()}function r(t){return\"string\"!=typeof t&&(t=String(t)),t}function o(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return m.iterable&&(e[Symbol.iterator]=function(){return e}),e}function n(t){this.map={},t instanceof n?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function i(t){if(t.bodyUsed)return Promise.reject(new TypeError(\"Already read\"));t.bodyUsed=!0}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function a(t){var e=new FileReader,r=s(e);return e.readAsArrayBuffer(t),r}function u(t){var e=new FileReader,r=s(e);return e.readAsText(t),r}function h(t){for(var e=new Uint8Array(t),r=new Array(e.length),o=0;o<e.length;o++)r[o]=String.fromCharCode(e[o]);return r.join(\"\")}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if(\"string\"==typeof t)this._bodyText=t;else if(m.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(m.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(m.arrayBuffer&&m.blob&&v(t))this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!B(t))throw new Error(\"unsupported BodyInit type\");this._bodyArrayBuffer=f(t)}else this._bodyText=\"\";this.headers.get(\"content-type\")||(\"string\"==typeof t?this.headers.set(\"content-type\",\"text/plain;charset=UTF-8\"):this._bodyBlob&&this._bodyBlob.type?this.headers.set(\"content-type\",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set(\"content-type\",\"application/x-www-form-urlencoded;charset=UTF-8\"))},m.blob&&(this.blob=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error(\"could not read FormData body as blob\");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?i(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=i(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(h(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error(\"could not read FormData body as text\");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function y(t){var e=t.toUpperCase();return _.indexOf(e)>-1?e:t}function l(t,e){var r=(e=e||{}).body;if(t instanceof l){if(t.bodyUsed)throw new TypeError(\"Already read\");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new n(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||\"omit\",!e.headers&&this.headers||(this.headers=new n(e.headers)),this.method=y(e.method||this.method||\"GET\"),this.mode=e.mode||this.mode||null,this.referrer=null,(\"GET\"===this.method||\"HEAD\"===this.method)&&r)throw new TypeError(\"Body not allowed for GET or HEAD requests\");this._initBody(r)}function p(t){var e=new FormData;return t.trim().split(\"&\").forEach(function(t){if(t){var r=t.split(\"=\"),o=r.shift().replace(/\\+/g,\" \"),n=r.join(\"=\").replace(/\\+/g,\" \");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function c(t){var e=new n;return t.split(/\\r?\\n/).forEach(function(t){var r=t.split(\":\"),o=r.shift().trim();if(o){var n=r.join(\":\").trim();e.append(o,n)}}),e}function b(t,e){e||(e={}),this.type=\"default\",this.status=\"status\"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText=\"statusText\"in e?e.statusText:\"OK\",this.headers=new n(e.headers),this.url=e.url||\"\",this._initBody(t)}if(!t.fetch){var m={searchParams:\"URLSearchParams\"in t,iterable:\"Symbol\"in t&&\"iterator\"in Symbol,blob:\"FileReader\"in t&&\"Blob\"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:\"FormData\"in t,arrayBuffer:\"ArrayBuffer\"in t};if(m.arrayBuffer)var w=[\"[object Int8Array]\",\"[object Uint8Array]\",\"[object Uint8ClampedArray]\",\"[object Int16Array]\",\"[object Uint16Array]\",\"[object Int32Array]\",\"[object Uint32Array]\",\"[object Float32Array]\",\"[object Float64Array]\"],v=function(t){return t&&DataView.prototype.isPrototypeOf(t)},B=ArrayBuffer.isView||function(t){return t&&w.indexOf(Object.prototype.toString.call(t))>-1};n.prototype.append=function(t,o){t=e(t),o=r(o);var n=this.map[t];this.map[t]=n?n+\",\"+o:o},n.prototype.delete=function(t){delete this.map[e(t)]},n.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},n.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},n.prototype.set=function(t,o){this.map[e(t)]=r(o)},n.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},n.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),o(t)},n.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),o(t)},n.prototype.entries=function(){var t=[];return this.forEach(function(e,r){t.push([r,e])}),o(t)},m.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var _=[\"DELETE\",\"GET\",\"HEAD\",\"OPTIONS\",\"POST\",\"PUT\"];l.prototype.clone=function(){return new l(this,{body:this._bodyInit})},d.call(l.prototype),d.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},b.error=function(){var t=new b(null,{status:0,statusText:\"\"});return t.type=\"error\",t};var A=[301,302,303,307,308];b.redirect=function(t,e){if(-1===A.indexOf(e))throw new RangeError(\"Invalid status code\");return new b(null,{status:e,headers:{location:t}})},t.Headers=n,t.Request=l,t.Response=b,t.fetch=function(t,e){return new Promise(function(r,o){var n=new l(t,e),i=new XMLHttpRequest;i.onload=function(){var t={status:i.status,statusText:i.statusText,headers:c(i.getAllResponseHeaders()||\"\")};t.url=\"responseURL\"in i?i.responseURL:t.headers.get(\"X-Request-URL\");var e=\"response\"in i?i.response:i.responseText;r(new b(e,t))},i.onerror=function(){o(new TypeError(\"Network request failed\"))},i.ontimeout=function(){o(new TypeError(\"Network request failed\"))},i.open(n.method,n.url,!0),\"include\"===n.credentials&&(i.withCredentials=!0),\"responseType\"in i&&m.blob&&(i.responseType=\"blob\"),n.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===n._bodyInit?null:n._bodyInit)})},t.fetch.polyfill=!0}}(\"undefined\"!=typeof self?self:this);\nvar loadjs={};loadjs=function(){function e(e,n){var t,r,c,i=[],s=(e=e.push?e:[e]).length,o=s;for(t=function(e,t){t.length&&i.push(e),--o||n(i)};s--;)r=e[s],(c=u[r])?t(r,c):(f[r]=f[r]||[]).push(t)}function n(e,n){if(e){var t=f[e];if(u[e]=n,t)for(;t.length;)t[0](e,n),t.splice(0,1)}}function t(e,n){e.call&&(e={success:e}),n.length?(e.error||s)(n):(e.success||s)(e)}function r(e,n,t,c){var i,o,u=document,f=t.async,l=(t.numRetries||0)+1,h=t.before||s,d=e.replace(/^(css|img)!/,\"\"),p=t.reqdelay||0;c=c||0,/(^css!|\\.css$)/.test(e)?(i=!0,(o=u.createElement(\"link\")).rel=\"stylesheet\",o.href=d):/(^img!|\\.(png|gif|jpg|svg)$)/.test(e)?(o=u.createElement(\"img\")).src=d:((o=u.createElement(\"script\")).src=e,o.async=void 0===f||f),o.onload=o.onerror=o.onbeforeload=function(s){var u=s.type[0];if(i&&\"hideFocus\"in o)try{o.sheet.cssText.length||(u=\"e\")}catch(e){u=\"e\"}if(\"e\"==u&&(c+=1)<l)return a=p*c,setTimeout(function(){r(e,n,t,c)},a),void(t.retrycb&&t.retrycb(c,a));n(e,u,s.defaultPrevented)},!1!==h(e,o)&&u.head.appendChild(o)}function c(e,n,t){var c,i,s=(e=e.push?e:[e]).length,o=s,u=[];for(c=function(e,t,r){if(\"e\"==t&&u.push(e),\"b\"==t){if(!r)return;u.push(e)}--s||n(u)},i=0;i<o;i++)r(e[i],c,t)}function i(e,r,i){var s,o;r&&r.trim&&(s=r),c(e,function(e){t(o,e),n(s,e)},o=(s?i:r)||{})}var s=function(){},o={},u={},f={},a=0;return i.ready=function(n,r){return e(n,function(e){t(r,e)}),i},i.done=function(e){n(e,[])},i.reset=function(){o={},u={},f={}},i.isDefined=function(e){return e in o},i}();\n!function(o,e){\"use strict\";var s={};s.load=function(e,s,i){if(\"function\"==typeof define&&define.amd&&\"undefined\"!=typeof requirejs){var r=[],c=e+\"://\"+s.ccsServer+\"/socket.io/v3/socket.io.js\",t={};r.push(\"sio\"),t={sio:c},requirejs.config({shim:{sio:{exports:\"io\"}},wrap:!1,paths:t}),requirejs(r,function(e){o.rtcio=e,i.success()})}else if(void 0!==typeof loadjs&&\"undefined\"==typeof apiRTC_React){var n={async:!0,numRetries:s.extJsLoadingRetryNb||100,reqdelay:s.extJsLoadingRetryDelay||200,success:function(){o.rtcio=io,i.success()},error:function(o){console.error(\"socket.io loading error\"),i.error()},retrycb:function(o,e){console.warn(\"socket.io loading retry :\"+o+\" ,delay before retry :\"+e),i.retrycb()}};void 0!==s.socketioUrl?loadjs([s.socketioUrl],\"socketio\",n):loadjs([e+\"://\"+s.ccsServer+\"/socket.io/v3/socket.io.js\"],\"socketio\",n)}else console.log(\"Else loadjs io\"),o.rtcio=io,i.success()},o.apiRTC_sioLoader=s}(window);\n!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var i=t();for(var a in i)(\"object\"==typeof exports?exports:e)[a]=i[a]}}(self,(function(){return(()=>{var e={8364:(e,t,i)=>{\"use strict\";var a=i(2043),n=i(7987),r=a.getLogger(\"CloudAPI\");n.reg(a),n.apply(r,{format:function(e,t,i){return i+\" - [\"+e+\"] \"+t+\" : \"}}),r.setDefaultLevel(\"error\"),r.setLevel(\"error\");var o=\"/api/v2/media/upload\",s=\"/api/v2/conversation/{convId}/media\",l=\"/api/v2/conferences\",d={updateWebconfTags:{fetchRetryCount:3,fetchRetryDelay:500}},c=null,u=function(){function e(){if(this.cloudUrl=\"https://cloud.apizee.com\",this.fetchRetries=100,this.fetchRetryDelay=200,null!==c)return r.debug(\"Cannot construct multiple CloudAPI, this is a singleton.\"),c;c=this}return e.get=function(){return c=null===c?new e:c},e.prototype.setLogLevel=function(e){r.setLevel(e)},e.prototype.getLogLevel=function(){var e=\"\";switch(r.getLevel()){case 0:e=\"trace\";break;case 1:e=\"debug\";break;case 2:e=\"info\";break;case 3:e=\"warn\";break;case 4:e=\"error\";break;case 5:e=\"silent\"}return e},e.prototype.setCloudURL=function(e){r.debug(\"setCloudURL :\",e),this.cloudUrl=e},e.prototype.setFetchRetries=function(e){r.debug(\"setFetchRetries :\",e),null!=e&&(this.fetchRetries=e)},e.prototype.setFetchRetryDelay=function(e){r.log(\"setFetchRetryDelay :\",e),null!=e&&(this.fetchRetryDelay=e)},e.prototype.request=function(e,t,i,a,n){var o=-1===e.indexOf(this.cloudUrl)?this.cloudUrl+e:e,s=null;return new Promise((function(e,l){var d,c=new XMLHttpRequest;if(c.onreadystatechange=function(t){if(c.readyState===XMLHttpRequest.DONE)if(r.debug(\"request onreadystatechange status :\",c.status),200<=c.status&&c.status<300){if(c.responseText){var i=null;try{i=JSON.parse(c.responseText)}catch(t){i=c.responseText}e(i)}}else{if(i={status:c.status,text:c.statusText},c.responseText)try{i.response=JSON.parse(c.responseText)}catch(t){i.responseText=c.responseText}l(i)}},c.onprogress=function(e){\"function\"==typeof a&&a(e)},c.onerror=function(e){l(e)},\"GET\"===i)0<Object.keys(t).length&&(d=new URLSearchParams(t),r.debug(\"johann\",d,d.toString,t),o+=\"?\"+d.toString());else{s=new FormData;for(var u=0,h=Object.keys(t);u<h.length;u++){var p=h[u];s.append(p,t[p])}}if(c.open(i,o,!0),null!=n)for(var g=0,m=Object.keys(n);g<m.length;g++)p=m[g],c.setRequestHeader(p,n[p]);c.send(s)}))},e.prototype.get=function(e,t,i){return r.log(\"Send HTTP request : GET \"+e),this.request(e,t,\"GET\",null,i)},e.prototype.post=function(e,t,i,a){return r.log(\"Send HTTP request : POST \"+e),this.request(e,t,\"POST\",i,a)},e.prototype.put=function(e,t,i,a){return r.log(\"Send HTTP request : PUT \"+e),(t=null===t||\"object\"!=typeof t?{}:t)._method=\"PUT\",this.request(e,t,\"POST\",i,a)},e.prototype.delete=function(e,t,i){return r.log(\"Send HTTP request : DELETE \"+e),(t=null===t||\"object\"!=typeof t?{}:t)._method=\"DELETE\",this.request(e,t,\"POST\",null,i)},e.prototype.cloudRequest=function(e,t,i,a){var n=this;return void 0===a&&(a={}),new Promise((function(o,s){r.trace(i+\" cloudRequest to \"+c.cloudUrl,t);var l={method:i.toUpperCase()},d=c.cloudUrl+e;if(\"GET\"===l.method)0<Object.keys(t).length&&(d+=\"?\"+new URLSearchParams(t).toString());else{for(var p=new FormData,g=0,m=Object.keys(t);g<m.length;g++){var C=m[g];p.append(C,t[C])}l.body=p}a.hasOwnProperty(\"bearerToken\")&&(l.headers={Authorization:\"Bearer \"+a.bearerToken}),a.hasOwnProperty(\"fetchRetryCount\")?l.retries=a.fetchRetryCount:l.retries=n.fetchRetries,a.hasOwnProperty(\"fetchRetryDelay\")?l.retryDelay=a.fetchRetryDelay:l.retryDelay=n.fetchRetryDelay,function(e,t){r.log(\"fetchRetry\");var i=3,a=1e3,n=[];if(t&&t.retries&&(i=t.retries),t&&t.retryDelay&&(a=t.retryDelay),t&&t.retryOn){if(!(t.retryOn instanceof Array))throw{name:\"ArgumentError\",message:\"retryOn property expects an array\"};n=t.retryOn}return new Promise((function(o,s){function l(i){var a,l;r.log(\"wrappedFetch n:\",i),void 0!==window.fetch?fetch(e,t).then((function(e){-1===n.indexOf(e.status)?o(e):0<i?d(i):s(e)})).catch((function(e){0<i?d(i):s(e)})):(r.debug(\"Cannot use fetch in this browser, using XHR\"),a=u.get(),l={},t.body&&t.body.forEach((function(e,t){return l[t]=e})),a.request(e,l,t.method,null,t.headers).then((function(e){o({gettype:\"cloudApiNoFetch\",response:e})})).catch((function(e){r.error(\"error :\",e),s(e)})))}function d(e){r.error(\"retry n:\",e);var t=i-e+1;r.error(\"retry number is :\",t),setTimeout((function(){l(--e)}),a*t)}l(i)}))}(d,l).then((function(e){var t=null;if(e.status<200||299<e.status){var i=\"cloudRequest - response status Code: \"+e.status;return r.warn(i),s(h(13,i,r,{httpCode:e.status}))}return\"cloudApiNoFetch\"===e.gettype?e.response:(t=e.headers?e.headers.get(\"content-type\"):t)&&-1!==t.indexOf(\"application/json\")?e.json():s(h(3,\"cloudRequest - response is not JSON\",r))})).then(o).catch((function(e){r.error(\"err :\",e),s(h(2,\"cloudRequest - Fetch Error\",r))}))}))},e.prototype.authentication=function(e,t){return r.debug(\"authentication to \"+c.cloudUrl),this.cloudRequest(\"/api/v2/authenticate\",{username:e,password:t},\"POST\")},e.prototype.getConnectedUserInformation=function(e){return r.debug(\"getConnectedUserInformation to \"+c.cloudUrl),this.cloudRequest(\"/api/v2/users/me\",{token:e},\"GET\")},e.prototype.getUserProfile=function(e,t){return r.debug(\"getUserProfile to \"+c.cloudUrl),\"string\"!=typeof e||\"string\"!=typeof t?Promise.reject(\"wrongArguments\"):(e={apiKey:e},this.cloudRequest(\"/api/v2/users/{userId}/profile\".replace(\"{userId}\",t),e,\"GET\"))},e.prototype.getSiteAgents=function(e,t,i){return void 0===i&&(i={}),r.debug(\"getSiteAgents to \"+c.cloudUrl),\"string\"!=typeof e||\"string\"!=typeof t?Promise.reject(\"wrongArguments\"):(e={apiKey:e},i.useAcd&&(e.useAcd=1),i.usePresence&&(e.usePresence=1),i.convId&&(e.convId=i.convId),this.cloudRequest(\"/api/v2/sites/{siteKey}/agents\".replace(\"{siteKey}\",t),e,\"GET\"))},e.prototype.getEnterpriseInformation=function(e){return void 0===e&&(e={}),r.debug(\"getEnterpriseInformation to \"+c.cloudUrl),this.cloudRequest(\"/api/v2/enterpriseInformation\",e,\"GET\")},e.prototype.getPreferredCCS=function(e){return r.debug(\"getPreferredCCS to \"+c.cloudUrl),this.cloudRequest(\"/api/v2/preferredCCS\",{apiKey:e},\"GET\")},e.prototype.checkUserToken=function(e){return r.debug(\"checkUserToken to \"+c.cloudUrl),this.cloudRequest(\"/api/v2/checkToken\",{token:e},\"GET\")},e.prototype.invalidateUserToken=function(e){return r.debug(\"invalidateUserToken to \"+c.cloudUrl),this.cloudRequest(\"/api/v2/invalidateToken\",{token:e},\"POST\")},e.prototype.uploadFile=function(e,t,i){r.debug(\"uploadMedia to \"+c.cloudUrl);var a={token:t,file:e};if(null!=i)for(var n=0,s=Object.keys(i);n<s.length;n++){var l=s[n];a[l]=i[l]}return this.cloudRequest(o,a,\"POST\")},e.prototype.uploadSnapshot=function(e,t,i){void 0===i&&(i={}),r.debug(\"uploadSnapshot to \"+c.cloudUrl);for(var a={token:t,dataUri:1,file:e},n=0,s=Object.keys(i);n<s.length;n++){var l=s[n];a[l]=i[l]}return this.cloudRequest(o,a,\"POST\")},e.prototype.getUserPhotoUrl=function(e){return c.cloudUrl+\"/profile/getImage?userId=\"+e},e.prototype.getEnterpriseUserList=function(e,t){return r.debug(\"getEnterpriseUserList to \"+c.cloudUrl),this.cloudRequest(\"/api/v2/enterprises/{enterpriseId}/users\".replace(\"{enterpriseId}\",e),{token:t,json:!0},\"GET\")},e.prototype.getEnterpriseTagList=function(e,t,i){return void 0===i&&(i={}),r.debug(\"getEnterpriseTagList to \"+c.cloudUrl),t={token:t},i.hasOwnProperty(\"webconfId\")&&(t.conferenceId=i.webconfId),this.cloudRequest(\"/api/v2/enterprises/{enterpriseId}/tags\".replace(\"{enterpriseId}\",e),t,\"GET\")},e.prototype.updateWebconfTags=function(e,t,i,a){return r.debug(\"updateWebconfTags to \"+c.cloudUrl),i={_method:\"PUT\",tags:i.join(\",\")},function(e,t){if(null!==e&&\"object\"==typeof e||(e={}),d.hasOwnProperty(t))for(var i=d[t],a=0,n=[\"fetchRetryCount\",\"fetchRetryDelay\"];a<n.length;a++){var r=n[a];i.hasOwnProperty(r)&&(e[r]=i[r])}}(a={bearerToken:a},\"updateWebconfTags\"),this.cloudRequest(\"/api/enterprises/{enterpriseId}/conferences/{conferenceId}\".replace(\"{enterpriseId}\",e).replace(\"{conferenceId}\",t),i,\"POST\",a)},e.prototype.getConferenceList=function(e){return r.debug(\"getConferenceList to \"+c.cloudUrl),this.cloudRequest(l,{token:e},\"GET\")},e.prototype.getOrCreateConversation=function(e,t,i){return void 0===i&&(i={}),r.debug(\"getOrCreateConversation to \"+c.cloudUrl),null===e||\"object\"!=typeof e||\"string\"!=typeof t?Promise.reject(\"wrongArguments\"):(t={name:e._getTechnicalName(),type:e.getType(),apiKey:t},i.hasOwnProperty(\"token\")&&i.token&&(t.token=i.token),i.hasOwnProperty(\"active\")&&\"boolean\"==typeof i.active&&(t.active=1),this.cloudRequest(\"/api/v2/conversation\",t,\"POST\"))},e.prototype.createConference=function(e,t,i){return void 0===i&&(i={}),r.debug(\"createConference to \"+c.cloudUrl),t={token:e,name:t},i.hasOwnProperty(\"password\")&&(t.password=i.password),this.cloudRequest(l,t,\"POST\")},e.prototype.checkConferenceAccess=function(e,t,i){return void 0===i&&(i={}),r.debug(\"checkConferenceAccess for \"+e+\" to \"+c.cloudUrl),\"string\"!=typeof t?Promise.reject(\"wrongArguments\"):(t={apiKey:t},i.convId&&(t.conv_id=i.convId),i.hasOwnProperty(\"password\")&&(t.password=i.password),i.hasOwnProperty(\"session\")&&\"function\"==typeof i.session.getToken&&null!==i.session.getToken()&&(t.token=i.session.getToken()),this.cloudRequest(\"/api/v2/conferences/{roomname}/checkAccess\".replace(\"{roomname}\",e),t,\"POST\"))},e.prototype.getWebconf=function(e,t){void 0===t&&(t={}),r.debug(\"getWebconf for \"+e+\" to \"+c.cloudUrl);var i={};return t.hasOwnProperty(\"token\")&&t.token&&(i.bearerToken=t.token),this.cloudRequest(\"/api/v2/conferences/{roomname}\".replace(\"{roomname}\",e),{},\"GET\",i)},e.prototype.getWebconfConversation=function(e,t,i){if(void 0===i&&(i={}),r.debug(\"getWebconfConversation for \"+e+\" to \"+c.cloudUrl),\"string\"!=typeof t)return Promise.reject(\"wrongArguments\");var a={};return a.apiKey=t,i.hasOwnProperty(\"token\")&&i.token&&(a.token=i.token),this.cloudRequest(\"/api/v2/conferences/{roomname}/conversation\".replace(\"{roomname}\",e),a,\"GET\")},e.prototype.updateConferencePresence=function(e,t,i){return r.trace(\"updateConferencePresence for \"+e.getName()+\" to \"+c.cloudUrl),i={ccid:t.getId(),name:t.getUserAgent().getUsername(),instanceId:e.getInstanceId(),apiKey:i},null!==t.getToken()&&(i.token=t.getToken()),this.cloudRequest(\"/api/v2/conferences/{roomname}/updatePresence\".replace(\"{roomname}\",e._getTechnicalName()),i,\"POST\")},e.prototype.closeConferenceInstance=function(e,t){return r.debug(\"closeConferenceInstance for \"+e.getName()+\" to \"+c.cloudUrl),t={token:t.getToken(),instanceId:e.getInstanceId()},this.cloudRequest(\"/api/v2/conferences/{roomname}/closeInstance\".replace(\"{roomname}\",e._getTechnicalName()),t,\"POST\")},e.prototype.getConversationMediaList=function(e,t,i){return void 0===i&&(i={}),r.debug(\"getConversationMediaList for \"+e+\" to \"+c.cloudUrl),e&&\"string\"==typeof t?(t={apiKey:t},i.hasOwnProperty(\"token\")&&i.token&&(t.token=i.token),i.hasOwnProperty(\"offset\")&&(t.offset=i.offset),i.hasOwnProperty(\"limit\")&&(t.limit=i.limit),this.cloudRequest(s.replace(\"{convId}\",e.toString()),t,\"GET\")):Promise.reject(\"wrongArguments\")},e.prototype.pushConversationMedia=function(e,t,i,a){return void 0===a&&(a={}),r.debug(\"pushConversationMedia for \"+e+\" to \"+c.cloudUrl),e&&t&&\"string\"==typeof i?(i={media:t,apiKey:i},a.hasOwnProperty(\"token\")&&a.token&&(i.token=a.token),a.hasOwnProperty(\"metadata\")&&a.metadata&&(i.metadata=a.metadata),a.hasOwnProperty(\"asFile\")&&a.asFile&&(i.asFile=a.asFile),a.hasOwnProperty(\"filename\")&&a.filename&&(i.filename=a.filename),!0===a.overwrite&&(i.overwrite=1),\"number\"==typeof a.ttl&&0<a.ttl&&(i.ttl=a.ttl),this.cloudRequest(s.replace(\"{convId}\",e.toString()),i,\"POST\")):Promise.reject(\"wrongArguments\")},e.prototype.setConversationData=function(e,t,i,a){return void 0===a&&(a={}),r.debug(\"setConversationData for \"+e+\" to \"+c.cloudUrl),e&&\"string\"==typeof t&&\"string\"==typeof i?(i={data:t,apiKey:i},a.hasOwnProperty(\"token\")&&a.token&&(i.token=a.token),this.cloudRequest(\"/api/v2/conversation/{convId}/data\".replace(\"{convId}\",e.toString()),i,\"POST\")):Promise.reject(\"wrongArguments\")},e.prototype.getSessionHistory=function(e,t,i){void 0===i&&(i={}),r.debug(\"getSessionHistory to \"+c.cloudUrl);var a={token:t,sessionId:e};if(null!=i)for(var n=0,o=Object.keys(i);n<o.length;n++){var s=o[n];a[s]=i[s]}return this.cloudRequest(\"/api/v2/messages\",a,\"GET\")},e.prototype.getWebSession=function(e,t,i){return r.debug(\"getSessionHistory to \"+c.cloudUrl),\"string\"!=typeof i?Promise.reject(\"wrongArguments\"):(i={destId:t.getId(),apiKey:i},null!==e.getToken()?i.token=e.getToken():i.userId=e.getId(),this.cloudRequest(\"/api/v2/webSession\",i,\"GET\"))},e.prototype.saveNewMessage=function(e,t,i,a,n,o){return r.debug(\"saveNewMessage to \"+c.cloudUrl),e={uuid:n,destId:i,message:a,sessionId:e},null!==t.getToken()?e.token=t.getToken():(e.userId=t.getId(),e.apiKey=o),this.cloudRequest(\"/api/v2/messages\",e,\"POST\")},e.prototype.saveGroupChatMessage=function(e,t,i,a,n,o){return void 0===o&&(o={}),r.debug(\"saveGroupChatMessage to \"+c.cloudUrl),n={apiKey:i,message:a,ccid:t.getId(),name:t.getUserAgent().getUsername(),parent_conv_id:e.getCloudConversationId(),uuid:n,htmlEnable:o.metadata&&o.metadata.htmlEnable||!1},o={},null!==t.getToken()?o.bearerToken=t.getToken():n.userId=t.getId(),this.cloudRequest(\"/api/v2/groupChatMessages\",n,\"POST\",o)},e.prototype.loadGroupChatMessages=function(e,t,i){void 0===i&&(i=\"\"),r.debug(\"loadGroupChatMessages to \"+c.cloudUrl);var a={parent_conv_id:e.getCloudConversationId()};return(e={}).bearerToken=\"\"!==i?i:t.getToken(),this.cloudRequest(\"/api/v2/groupChatMessages\",a,\"GET\",e)},e}();function h(e,t,i,a){return void 0===a&&(a={}),i&&i.error(t),t={code:e,error:t instanceof String?new Error(t):t instanceof Error?t:new Error(String(t))},a.hasOwnProperty(\"httpCode\")&&(t.httpCode=a.httpCode),t}t.Z=u},1254:(e,t,i)=>{\"use strict\";i.d(t,{W:()=>n});var a=i(1549).Y.get(\"ApiCCCoBrowsingClient\"),n=function(e){a.debug(\"apiCC.ApiCCCoBrowsingClient\"),this.createRoom=function(){a.debug(\"createRoom()\"),e.roomMgr.createRoom(\"coBrowsing\")},this.inviteInRoom=function(t,i){a.debug(\"inviteInRoom()\"),e.roomMgr.inviteInRoom(t,i,\"coBrowsing\")},this.answerToRoomInvitation=function(t,i){a.debug(\"answerToRoomInvitation()\"),e.roomMgr.answerToRoomInvitation(t,i,\"coBrowsing\")},this.leaveRoom=function(t){a.debug(\"leaveRoom()\"),e.roomMgr.leaveRoom(t,\"coBrowsing\")}}},128:(e,t,i)=>{\"use strict\";i.d(t,{_:()=>r}),i(2564);var a=i(1549).Y.get(\"ApiCCDataClient\"),n=apiCC.myWebRTC_Event,r=function(e){this.sendData=function(t,i,n){a.info(\"Call sending data function .... to :\"+t+\" message :\"+i);var r,o,s=e.channel.getNewCSeq(),l=null;return r={type:\"dataMessage\",senderId:e.apiCCId,dstRoomId:t,data:i,cSeq:s},o=JSON.stringify(r),a.log(\"C->S: \"+o),void 0!==n?(a.log(\"Ack management activated\"),l=setTimeout((function(){n({reason:\"timeoutReached\",cSeq:s}),null!==apiCC.session&&void 0!==apiCC.session&&delete apiCC.session.messageTimeOutTable[s]}),e.messageTimeOutTimer),a.log(\"timeOutId: \"+l),e.messageTimeOutTable[s]=l,e.channel.socket.emit(\"dataMessage\",o,(function(e){a.log(\"callback on dataMessage\"),a.log(\"callback reason :\"+e.reason),a.log(\"cSeq :\"+e.cSeq),n(e),void 0!==apiCC.session.messageTimeOutTable[s]?(a.log(\"clearing timeOutId: \"+apiCC.session.messageTimeOutTable[s]),clearTimeout(apiCC.session.messageTimeOutTable[s]),null!==apiCC.session&&void 0!==apiCC.session&&delete apiCC.session.messageTimeOutTable[s]):a.warn(\"messageTimeOutTable was already deleted : timeout may have been reached before Ack\")}))):(a.log(\"Ack management not activated\"),e.channel.socket.emit(\"dataMessage\",o)),s},this.sendDataToGroup=function(t,i){a.info(\"[ApiCCDataClient] sendDataToGroup - \"+t);var n,r=e.getConnectedUsersList(t);for(n=0;n<r.length;n++)e.apiCCId!=r[n].userId&&this.sendData(r[n].userId,i)},this.receiveData=function(e){a.info(\"receiveData :\"+e.data),n.createReceiveDataEvent(e.senderId,e.dstRoomId,e.data)}}},6844:(e,t,i)=>{\"use strict\";i.d(t,{U:()=>l}),i(9554),i(4747),i(2564),i(2526),i(1817),i(1539),i(2165),i(6992),i(8783),i(3948);var a=i(1549),n=i(4708),r=i(940);function o(e){return o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o(e)}var s=a.Y.get(\"ApiCCIMClient\"),l=function(e,t){this.convTable=[],this.myWebRTC_Event=apiCC.myWebRTC_Event,this.nickname=e.nickname,this.photoURL=null,this.userDataSetted=!1,this.myWebRTC_Stack=new r.S(e.channel.socket),this.findIMIdWithDestID=function(e){var t,i=this.convTable.length;for(s.log(\"findIMIdWithDestID = \"+e),t=0;t<i;t+=1)if(s.log(\"this.convTable[i].dest_roomId = \"+this.convTable[t].dest_roomId),this.convTable[t].dest_roomId==e)return this.convTable[t].IMId;return s.log(\"Conversation IMId not found\"),0},this.addInConvTable=function(e){s.debug(\"addInConvTable\");var t,i=this.convTable.length;for(t=0;t<i;t+=1)if(s.log(\"this.convTable[i].dest_roomId = \"+this.convTable[t].dest_roomId),this.convTable[t].dest_roomId==e.dest_roomId)return void(this.convTable[t].IMId=e.IMId);s.log(\"Conversation not found in the table, adding ..\"),this.convTable.push(e)},this.sendMessage=function(t,i,a,n){s.info(\"Call sending message function .... from :\"+this.nickname+\" message :\"+i);var r,l=this.findIMIdWithDestID(t),d=null,c=null,u=null,h=e.channel.getNewCSeq();return 0===l?s.log(\"Creation of a new IM conversation\"):s.log(\"Message is for existing conversation with ID : \"+l),s.log(\"IMConvId :\"+l),d={type:\"IMMessage\",IMId:l,senderId:e.apiCCId,nickname:this.nickname,photoURL:this.photoURL,dstRoomId:t,data:i,cSeq:h,convData:n},e.getConnectedUserIdsList().forEach((function(e){e.userId==t&&e.hasOwnProperty(\"userData\")&&null!==e.userData&&o(e.userData.hasOwnProperty(\"isChatbot\"))&&e.userData.isChatbot&&(d.pubSub=\"BotConnector\")})),r=JSON.stringify(d),c=document.createElement(\"message\"),s.log(\"C->S: \"+r),void 0!==a?(s.log(\"Ack management activated\"),u=setTimeout((function(){a({reason:\"timeoutReached\",cSeq:h}),null!==apiCC.session&&void 0!==apiCC.session&&delete apiCC.session.messageTimeOutTable[h]}),e.messageTimeOutTimer),s.log(\"timeOutId: \"+u),e.messageTimeOutTable[h]=u,e.channel.socket.emit(\"IMMessage\",r,(function(e){s.log(\"callback on IMMessage\"),s.log(\"data :\",e),s.log(\"callback reason :\"+e.reason),s.log(\"callback convId :\"+e.convId),s.log(\"cSeq :\"+e.cSeq),a(e),void 0!==apiCC.session.messageTimeOutTable[h]?(s.log(\"clearing timeOutId: \"+apiCC.session.messageTimeOutTable[h]),clearTimeout(apiCC.session.messageTimeOutTable[h]),null!==apiCC.session&&void 0!==apiCC.session&&delete apiCC.session.messageTimeOutTable[h]):s.warn(\"messageTimeOutTable was already deleted : timeout may have been reached before Ack\")}))):(s.log(\"Ack management not activated\"),e.channel.socket.emit(\"IMMessage\",r)),null!==this.conversation&&(c.innerHTML=\"<b>me :</b> \"+n+\"<br>\",this.conversation.appendChild(c),this.conversation.scrollTop=this.conversation.scrollHeight),h},this.newConversationCreated=function(e){s.debug(\"newConversationCreated :\"+e),s.log(\"msg.dstRoomId :\"+e.dstRoomId),s.log(\"msg.IMId :\"+e.IMId);var t={dest_roomId:e.dstRoomId,IMId:e.IMId};this.addInConvTable(t)},this.receiveMessage=function(e){s.info(\"Call receiveMessage message :\"+e);var t,i=null;t={dest_roomId:e.senderId,IMId:e.IMId},this.addInConvTable(t),null!==this.conversation&&((i=document.createElement(\"message\")).innerHTML=\"<b>\"+e.nickname+\":</b> \"+e.data+\"<br>\",this.conversation.appendChild(i),this.conversation.scrollTop=this.conversation.scrollHeight),this.myWebRTC_Event.createReceiveIMMessageEvent(e.senderId,e.nickname,e.photoURL,e.data,e.UUCSeq,e.IMId)},this.createGroupChat=function(t,i){var a,n;s.info(\"createGroupChat with contacts : \"+t+\",\"+i),a={type:\"createGroupChat\",nickname:this.nickname,photoURL:this.photoURL,contactId1:t,contactId2:i},n=JSON.stringify(a),s.log(\"C->S: \"+n),e.channel.socket.emit(\"createGroupChat\",n)},this.groupChatCreation=function(e){s.debug(\"groupChatCreation\"),this.myWebRTC_Event.createGroupChatCreationEvent(e.status,e.groupChatId,e.contactId1,e.invitationSendedToInitialDestId,e.contactId2,e.invitationSendedToNewContactId)},this.joinGroupChat=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.debug(\"joinGroupChat : \"+t);var a=null,n=null;a={type:\"joinGroupChat\",groupChatId:t},i.convId&&(a.data={},a.data.cloudConvId=i.convId),n=JSON.stringify(a),s.log(\"C->S: \"+n),e.channel.socket.emit(\"joinGroupChat\",n)},this.groupChatInvitation=function(e){s.debug(\"groupChatInvitation\"),this.myWebRTC_Event.createGroupChatInvitationEvent(e.groupChatId,e.senderId,e.senderNickname,e.senderPhotoURL,e.contactList)},this.answerToGroupChatInvitation=function(t,i){var a,n;(s.debug(\"answerToGroupChatInvitation: \"+t+\" : \"+i),!0===i||!1===i)?(a={type:\"groupChatInvitationAnswer\",groupChatId:t,senderId:e.apiCCId,nickname:this.nickname,photoURL:this.photoURL,accept:i},n=JSON.stringify(a),s.log(\"C->S: \"+n),e.channel.socket.emit(\"groupChatInvitationAnswer\",n)):s.log(\"accept value is not correct\")},this.groupChatMemberUpdate=function(e){s.info(\"groupChatMemberUpdate\"),this.myWebRTC_Event.createGroupChatMemberUpdateEvent(e.groupChatId,e.contactList,e.status)},this.addUserInGroupChat=function(t,i){var a,n;s.debug(\"addUser : \"+i+\"in Group Chat with Id :\"+t),a={type:\"addUserInGroupChat\",groupChatId:t,nickname:this.nickname,photoURL:this.photoURL,contactId:i},n=JSON.stringify(a),s.log(\"C->S: \"+n),e.channel.socket.emit(\"addUserInGroupChat\",n)},this.addUserInGroupChatAnswer=function(e){s.info(\"addUserInGroupChatAnswer\"),this.myWebRTC_Event.createAddUserInGroupChatEvent(e.invitationSended,e.groupChatId,e.contactId)},this.leaveGroupChat=function(t){var i,a;s.info(\"Leave Group Chat with Id :\"+t),i={type:\"leaveGroupChat\",groupChatId:t,nickname:this.nickname,photoURL:this.photoURL},a=JSON.stringify(i),s.log(\"C->S: \"+a),e.channel.socket.emit(\"leaveGroupChat\",a)},this.sendMessageToGroupChat=function(t,i,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};s.info(\"Call sending message to Group Chat .... from :\"+this.nickname+\" message :\"+i);var o=null,l=null,d=apiCC.session.channel.getNewCSeq();o={type:\"groupChatMessage\",groupChatId:t,senderId:e.apiCCId,nickname:this.nickname,cSeq:d,data:i},(0,n.Ym)(r,\"metadata\",\"object\")&&(o.metadata=r.metadata),l=JSON.stringify(o),null!==a&&\"function\"==typeof a?(apiCC.session.messageTimeOutTable[d]=setTimeout((function(){a({reason:\"timeoutReached\",cSeq:d}),null!==apiCC.session&&void 0!==apiCC.session&&delete apiCC.session.messageTimeOutTable[d]}),apiCC.session.messageTimeOutTimer),s.log(\"C->S: \"+l),e.channel.socket.emit(\"groupChatMessage\",l,(function(e){clearTimeout(apiCC.session.messageTimeOutTable[e.cSeq]),null!==apiCC.session&&void 0!==apiCC.session&&delete apiCC.session.messageTimeOutTable[e.cSeq],a(e)}))):(s.log(\"C->S: \"+l),e.channel.socket.emit(\"groupChatMessage\",l))},this.receiveGroupChatMessage=function(e){s.info(\"receiveGroupChatMessage\"),this.myWebRTC_Event.createReceiveGroupChatMessageEvent(e.groupChatId,e.senderId,e.nickname,e.data,e.metadata)},this.getConversationHistory=function(t){var i,a;s.debug(\"getConversationHistory\"),i={type:\"getConversationHistory\",convId:t},a=JSON.stringify(i),s.log(\"C->S: \"+a),e.channel.socket.emit(\"getConversationHistory\",a)},this.receiveConversationHistory=function(e){s.debug(\"receiveConversationHistory\"),s.log(\"msg.convId :\"+e.convId);var t,i=0,a=[],n=null;if(null!==e.convHistory)for(s.log(\"msg.convHistory.length :\"+e.convHistory.length),i=e.convHistory.length,a=[],t=0;t<i;t+=1)n=JSON.parse(e.convHistory[t]),a.push(n);this.myWebRTC_Event.createReceiveConversationHistoryEvent(e.convId,a,e.status)},this.setUserData=function(t){var i,a;s.info(\"setUserData\"),this.photoURL=t.photoURL,e.photoURL=t.photoURL,s.log(\"photoURL :\"+this.photoURL),i={type:\"setUserData\",nickname:this.nickname,photoURL:this.photoURL},a=JSON.stringify(i),s.log(\"C->S: \"+a),e.channel.socket.emit(\"setUserData\",a),this.userDataSetted=!0},this.getUserData=function(t){var i,a;s.info(\"getUserData\"),i={type:\"getUserData\",contactId:t},a=JSON.stringify(i),s.log(\"C->S: \"+a),e.channel.socket.emit(\"getUserData\",a)},this.receiveUserDataAnswer=function(e){s.info(\"receiveUserDataAnswer\"),this.myWebRTC_Event.createUserDataAnswerEvent(e.userFound,e.contactId,e.nickname,e.photoURL)},this.receiveFetchUserDataAnswer=function(e){s.info(\"receiveFetchUserDataAnswer\"),this.myWebRTC_Event.createFetchUserDataAnswerEvent(e)},this.initialize=function(t){var i,a;this.conversation=document.getElementById(t),null===this.conversation&&(s.log(\"conversationElementId Div Name is not correct : INCORRECT_DIV_NAME_CONVERSATION\"),s.log(\"conversationElementId is null\")),i={type:\"registerIM\",username:this.nickname},a=JSON.stringify(i),s.log(\"C->S: \"+a),e.channel.socket.emit(\"registerIM\",a)},this.initialize(t)}},9213:(e,t,i)=>{\"use strict\";i.d(t,{X:()=>o}),i(2564),i(2526),i(1817),i(1539);var a=i(1549),n=i(4708),r=a.Y.get(\"ApiCCPointerSharingClient\"),o=function e(t){this.roomTable={},this.getRoomIds=function(){var e=[],t=null;for(t in this.roomTable)e.push(t);return e},this.roomExists=function(e){return this.roomTable.hasOwnProperty(e)},this.roomActive=function(t){return this.roomTable.hasOwnProperty(t)&&this.roomTable[t].state===e.STATE_ACTIVE},this.joinRoom=function(t,i){var a=this;r.info(\"ApiCCPointerSharingClient::joinRoom()\"),(0,n.Ym)(i,\"object\")||(i={}),(0,n.ki)(i,\"success\",\"function\")||(i.success=function(){}),(0,n.ki)(i,\"failure\",\"function\")||(i.failure=function(){}),this.roomTable.hasOwnProperty(t)?i.failure(\"room already joined\",t):(this.roomTable[t]={roomId:t,state:e.STATE_JOINING,joinRoomCallbacks:i},this.roomTable[t].joinRoomTimeoutId=setTimeout((function(){delete a.roomTable[t],i.failure(\"timeout\",t)}),15e3),apiCC.session.roomMgr.joinRoom(t,\"pointerSharing\"))},this.leaveRoom=function(e){this.roomTable.hasOwnProperty(e)&&delete this.roomTable[e],apiCC.session.roomMgr.leaveRoom(e,\"pointerSharing\")},this.inviteInRoom=function(e,t,i){r.info(\"ApiCCPointerSharingClient::inviteInRoom()\"),apiCC.session.roomMgr.inviteInRoom(e,t,\"pointerSharing\",i)},this.sendPointerLocation=function(t,i,a,r,o){var s;return!(!this.roomTable.hasOwnProperty(t)||this.roomTable[t].state!==e.STATE_ACTIVE||(s={type:\"pointerLocation\",source:i,x:a,y:r},(0,n.Ym)(o,\"object\")&&(s.data=o),apiCC.session.roomMgr.sendMessageToRoom(t,\"pointerSharing\",s),0))},this.processMessageRoomJoin=function(t){this.roomTable.hasOwnProperty(t.roomId)&&this.roomTable[t.roomId].state===e.STATE_JOINING&&(clearTimeout(this.roomTable[t.roomId].joinRoomTimeoutId),delete this.roomTable[t.roomId].joinRoomTimeoutId,this.roomTable[t.roomId].state=e.STATE_ACTIVE,this.roomTable[t.roomId].joinRoomCallbacks.success(t.roomId),delete this.roomTable[t.roomId].joinRoomCallbacks)},this.stop=function(){for(var e=this.getRoomIds(),t=e.length;--t>=0;)this.leaveRoom(e[t])}};o.STATE_IDLE=Symbol(\"idle\"),o.STATE_JOINING=Symbol(\"joining\"),o.STATE_ACTIVE=Symbol(\"active\"),o.STATE_ERROR=Symbol(\"error\")},3720:(e,t,i)=>{\"use strict\";i.d(t,{K:()=>C}),i(1058),i(8309),i(3710),i(1539),i(9714),i(2564),i(9554),i(4747),i(2772),i(561),i(6699),i(2479),i(2707),i(9601),i(2526),i(1817),i(2165),i(6992),i(8783),i(3948);var a=i(1549),n=a.Y.get(\"RoomManager\"),r=function(e,t){n.debug(\"RoomManager\"),this.myWebRTC_Event=apiCC.myWebRTC_Event,this.createRoom=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n.info(\"RoomManager:createRoom with roomType : \"+t);var a={type:\"createRoom\",roomType:t,nickname:e.nickname,photoURL:e.photoURL};i.convId&&(a.data||(a.data={}),a.data.cloudConvId=i.convId),!0===i.webconf&&(a.data||(a.data={}),a.data.webconf=!0);var r=JSON.stringify(a);n.log(\"C->S: \"+r),e.channel.socket.emit(\"createRoom\",r)},this.roomCreation=function(e){n.info(\"RoomManager:roomCreation\"),this.myWebRTC_Event.createRoomCreationEvent(e.status,e.roomId,e.roomType),t(e)},this.roomJoin=function(e){n.info(\"RoomManager:roomJoin\"),this.myWebRTC_Event.createRoomJoinedEvent(e.status,e.roomId,e.roomType),t(e)},this.inviteInRoom=function(t,i,a,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};n.info(\"RoomManager:inviteInRoom with roomType:\",a);var s={type:\"inviteInRoom\",roomId:t,contactId:i,roomType:a,nickname:e.nickname,photoURL:e.photoURL,context:r};o.convId&&(s.data||(s.data={}),s.data.cloudConvId=o.convId),!0===o.webconf&&(s.data||(s.data={}),s.data.webconf=!0);var l=JSON.stringify(s);n.log(\"C->S: \"+l),e.channel.socket.emit(\"inviteInRoom\",l)},this.inviteInRoomStatus=function(e){n.info(\"inviteInRoomStatus\"),t(e)},this.roomInvitation=function(e){n.info(\"roomInvitation\",e);var i={};e.data&&(e.data.cloudConvId&&(i.cloudConvId=e.data.cloudConvId),!0===e.data.webconf&&(i.webconf=!0)),this.myWebRTC_Event.createRoomInvitationEvent(e.roomId,e.senderId,e.senderNickname,e.senderPhotoURL,e.contactList,e.roomType,i),t(e)},this.requestContactListInRoom=function(t){n.info(\"requestContactListInRoom :\"+t);var i={type:\"requestContactListInRoom\",roomId:t},a=JSON.stringify(i);e.channel.socket.emit(\"requestContactListInRoom\",a)},this.onContactListInRoom=function(e){n.info(\"onContactListInRoom :\"+e),this.myWebRTC_Event.createContactListInRoomEvent(e.roomId,e.contactList,e.roomType),t(e)},this.answerToRoomInvitation=function(t,i,a){if(n.info(\"answerToRoomInvitation:\",t,i),!0===i||!1===i){var r={type:\"roomInvitationAnswer\",roomId:t,senderId:e.apiCCId,nickname:e.nickname,photoURL:e.photoURL,accept:i,roomType:a},o=JSON.stringify(r);n.log(\"C->S: \"+o),e.channel.socket.emit(\"roomInvitationAnswer\",o)}else n.log(\"accept value is not correct\")},this.roomMemberUpdate=function(e){n.info(\"roomMemberUpdate\"),this.myWebRTC_Event.createRoomMemberUpdateEvent(e.roomId,e.contactList,e.status,e.roomType),t(e)},this.sendMessageToRoom=function(t,i,a){n.info(\"Call sending message to Room .... from :\"+e.apiCCId+\" message :\"+a);var r={type:\"roomMessage\",roomId:t,senderId:e.apiCCId,nickname:e.nickname,roomType:i,data:a},o=JSON.stringify(r);n.log(\"C->S: \"+o),e.channel.socket.emit(\"roomMessage\",o)},this.receiveRoomMessage=function(e){n.info(\"receiveRoomMessage\"),this.myWebRTC_Event.createReceiveRoomMessageEvent(e.roomId,e.senderId,e.nickname,e.data,e.roomType),t(e)},this.joinRoom=function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n.info(\"Join Room with Id:\",t);var r={type:\"joinRoom\",roomId:t,nickname:e.nickname,photoURL:e.photoURL,roomType:i};a.convId&&(r.data||(r.data={}),r.data.cloudConvId=a.convId),!0===a.webconf&&(r.data||(r.data={}),r.data.webconf=!0);var o=JSON.stringify(r);n.log(\"C->S: \"+o),e.channel.socket.emit(\"joinRoom\",o)},this.leaveRoom=function(t,i){n.info(\"Leave Room with Id:\",t);var a={type:\"leaveRoom\",roomId:t,nickname:e.nickname,photoURL:e.photoURL,roomType:i},r=JSON.stringify(a);n.log(\"C->S: \"+r),e.channel.socket.emit(\"leaveRoom\",r)}},o=(i(7042),i(1038),i(9753),i(8765)),s=i(5945);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var d=a.Y.get(\"ApiCC_Channel\"),c=function(e){d.debug(\"ApiCC_Channel\"),this.channelReady=!1,this.socket=null,this.channelId=e.apiCCId,this.callURLDestRoom=0,this.myWebRTC_Event=new o.K,this.channelHasBeenDisconnected=!1,this.cSeq=0,this.updatePresenceGroupIsNeeded=!1,this.oldPresenceGroup=null,this.newPresenceGroup=null,this.updateSubscribeToPresenceGroupIsNeeded=!1,this.oldSubscribeToPresenceGroup=null,this.newSubscribeToPresenceGroup=null,this.initialize=function(){d.info(\"ApiCC_Channel::initialize()\"),this.openChannel()},this.getNewCSeq=function(){return this.cSeq=this.cSeq+1,this.cSeq},this.openChannel=function(){var t,i,a,n=\"\",r=null,o=null,l=null,c=null;d.debug(\"openChannel channelId :\"+this.channelId),d.debug(\"session.apiKey :\"+e.apiKey),d.log(\"session.sessionId :\"+e.sessionId),e.xhrPolling=!0,d.log(\"CCSserver used : \"+e.ccsServer),i=void 0!==e.appId?\"&appId=\"+e.appId:\"\",a=void 0!==e.siteId?\"&siteId=\"+e.siteId:\"\",void 0!==e.userData&&(d.log(\"Defined userData : \",e.userData),r=JSON.stringify(e.userData),d.log(\"stringUserData.length :\"+r.length),r.length<=1e3?n=\"&userData=\"+encodeURIComponent(r):d.warn(\"userData length is too long :\"+r.length+\" .Need to be <= 500\")),void 0!==e.presenceGroup&&(d.log(\"Defined presenceGroup : \"+e.presenceGroup),o=JSON.stringify(e.presenceGroup),d.log(\"stringPresenceGroup.length :\"+o.length),o.length<=750?n+=\"&presenceGroup=\"+encodeURIComponent(o):d.warn(\"presenceGroup length is too long :\"+o.length+\" .Need to be <= 750\")),void 0!==e.subscribeToPresenceGroup&&(d.log(\"Defined subscribeToPresenceGroup : \"+e.subscribeToPresenceGroup),l=JSON.stringify(e.subscribeToPresenceGroup),d.log(\"stringsubscribeToPresenceGroup.length :\"+l.length),l.length<=750?n+=\"&subscribeToPresenceGroup=\"+encodeURIComponent(l):d.warn(\"subscribeToPresenceGroup length is too long :\"+l.length+\" .Need to be <= 750\")),void 0!==e.token&&(d.log(\"Defined token : \"+e.token),n+=\"&token=\"+e.token),void 0!==e.conversationSpace&&null!==e.conversationSpace&&(d.log(\"Defined conversationSpace : \"+e.conversationSpace),n+=\"&conversationSpace=\"+e.conversationSpace),n+=\"&apiLibType=apiRTC_JS\",d.log(\"requestOptions on connect :\"+n),d.log(\"session.ccsServer :\"+e.ccsServer),t=\"?channelId=\"+this.channelId+\"&apiKey=\"+e.apiKey+\"&apiVersion=\"+apiCC.version+\"&apiCCSessionId=\"+e.apiCCSessionId+\"&sessionId=\"+e.sessionId+i+a+n,c=\"undefined\"!=typeof apiRTC_React?\"https\":\"http:\"===window.location.protocol?\"http\":\"https\",\"iOS\"!==s.ag.name&&\"Android\"!==s.ag.name||(d.log(s.ag.name+\" detected forcing protocol to https\"),c=\"https\"),d.info(\"CCS Connect, socket url is : \"+c+\"://\"+e.ccsServer+\"/\"+t),this.ccsConnectionRetryNb=e.ccsConnectionRetryNb,this.ccsConnectionRetryDelay=e.ccsConnectionRetryDelay,this.socket=window.rtcio.connect(c+\"://\"+e.ccsServer+\"/\"+t,{forceNew:!0,multiplex:!1,withCredentials:!0,reconnectionAttempts:this.ccsConnectionRetryNb,reconnectionDelay:this.ccsConnectionRetryDelay}),this.socket.on(\"connect\",this.callback(this,\"onChannelOpened\")).on(\"connect_error\",this.callback(this,\"onChannelConnectError\")).on(\"message\",this.callbackWithParams(this,\"onChannelMessage\")).on(\"disconnect\",this.callback(this,\"onChannelDisconnect\")),this.socket.io.on(\"error\",this.callback(this,\"onChannelError\")).on(\"reconnect\",this.callback(this,\"onChannelReconnect\")).on(\"reconnect_attempt\",this.callback(this,\"onChannelReconnectAttempt\")).on(\"reconnect_error\",this.callback(this,\"onChannelReconnectError\")).on(\"reconnect_failed\",this.callback(this,\"onChannelReconnect_failed\"))},this.onWhiteBoardDisconnection=function(){d.info(\"onWhiteBoardDisconnection\"),apiCC.session.closeWhiteBoardClient(\"NETWORK_DISCONNECTION\")},this.onChannelDisconnect=function(e){d.info(\"onChannelDisconnect\");var t=Date();d.debug(\"date :\"+t),apiCC.session.connectedUsersList.splice(0,apiCC.session.connectedUsersList.length),this.myWebRTC_Event.createChannelEvent(\"onChannelDisconnect\",e),this.channelHasBeenDisconnected=!0,null!==apiCC.myApiCCWhiteBoardClient&&(d.log(\"apiCC.myApiCCWhiteBoardClient.roomId :\"+apiCC.myApiCCWhiteBoardClient.roomId),null!==apiCC.myApiCCWhiteBoardClient.roomId?(d.log(\"Disconnection with an ongoing whiteboard\"),d.error(\"Whiteboard disconnectionTimer is set to:\",apiCC.myApiCCWhiteBoardClient.disconnectionTimer),apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId=setTimeout(this.callback(this,\"onWhiteBoardDisconnection\"),apiCC.myApiCCWhiteBoardClient.disconnectionTimer)):d.log(\"Disconnection without an ongoing whiteboard\"))},this.onChannelReconnect_failed=function(){d.info(\"onChannelReconnect_failed\"),this.myWebRTC_Event.createChannelEvent(\"onChannelReconnect_failed\")},this.onChannelReconnect=function(t){d.error(\"onChannelReconnect\",t);var i,a=null,n=0,r=[],o=null,s=null,c=null,u=!1,h=0,p=null,g=null;if(null!==e.conversationSpace&&void 0!==e.conversationSpace?(d.debug(\"conversationSpace is set :\",e.conversationSpace),e.joinConversationSpace(e.conversationSpace)):d.debug(\"no conversationSpace defined\"),void 0!==e.userData&&null!==e.userData&&(d.debug(\"sending userData :\",e.userData),e.setUserData(e.userData,!0)),null!==e.presenceGroup?(d.debug(\"presenceGroup is set :\",e.presenceGroup),e.sendPresenceGroupManagementCommand(\"join\",e.presenceGroup)):d.debug(\"no presenceGroup defined\"),null!==e.subscribeToPresenceGroup?(d.debug(\"subscribeToPresenceGroup is set :\",e.subscribeToPresenceGroup),e.sendPresenceGroupManagementCommand(\"subscribe\",e.subscribeToPresenceGroup)):d.debug(\"no subscribeToPresenceGroup defined\"),null!==apiCC.session.apiCCIMClient?!0===apiCC.session.apiCCIMClient.userDataSetted?(a={photoURL:apiCC.session.apiCCIMClient.photoURL},apiCC.session.apiCCIMClient.setUserData(a)):d.log(\"apiCC.session.apiCCIMClient.userDataSetted !== true\"):d.log(\"apiCC.session.apiCCIMClient === null\"),null!==apiCC.session.apiCCWebRTCClient){if(apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.length>0)for(u=!0,i=0;i<apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.length;i+=1)o={destId:(g=apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable[i]).remoteId,convId:g.userMediaId,callType:g.callType,roomId:g.roomId,data:g.data,meshPublish:!0},r.push(o);if(0!==(n=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length)){for(d.log(\"Reconnecting with calls ongoing\"),i=0;i<n;i+=1)null!==apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[i]&&void 0!==apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[i]?(g=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[i],d.debug(\"call.iceState =\",g.iceState),null!==g.data?\"publish\"!==g.data.type&&\"subscribe\"!==g.data.type?(d.log(\"Call is P2P, updating media\"),g.updateMediaWithRetryManagement(!0),o={destId:g.remoteId,convId:g.callId,callType:g.callType,roomId:g.dest_roomId,data:g.data},r.push(o)):(d.log(\"Call is in an MCU session\"),o={destId:g.remoteId,convId:g.callId,callType:g.callType,roomId:g.dest_roomId,data:g.data},r.push(o)):(d.log(\"Call is P2P, updating media - no data\"),g.updateMediaWithRetryManagement(!0),o={destId:g.remoteId,convId:g.callId,callType:g.callType,roomId:g.dest_roomId,data:g.data},r.push(o))):d.log(\"call no more exist\");u=!0}else d.log(\"Reconnecting without calls ongoing\");for(var m=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs,C=0;C<m.length;C+=1){d.log(\"Reconnecting with an ongoing sessionMCU\");var f=[];f.push(m[C].roomName),apiCC.session.sendPresenceGroupManagementCommand(\"join\",f),apiCC.session.sendPresenceGroupManagementCommand(\"subscribe\",f)}}if(null!==apiCC.myApiCCWhiteBoardClient&&(0!==apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId&&(d.debug(\"clearing whiteBoardDisconnectionTimeoutId\"),clearTimeout(apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId),apiCC.myApiCCWhiteBoardClient.whiteBoardDisconnectionTimeoutId=0),d.log(\"apiCC.myApiCCWhiteBoardClient.roomId :\"+apiCC.myApiCCWhiteBoardClient.roomId),null!==apiCC.myApiCCWhiteBoardClient.roomId?(d.log(\"Reconnection with an ongoing whiteboard\"),h=apiCC.myApiCCWhiteBoardClient.roomId,u=!0,d.debug(\"Reconnection , sending request to get most recent whiteboard data\"),apiCC.myApiCCWhiteBoardClient.paperSheetId=0,apiCC.myApiCCWhiteBoardClient.drawingId=0,apiCC.myApiCCWhiteBoardClient.sendDataToRoom({tool:\"void\",needCatchUp:\"*||-1\"})):d.log(\"Reconnecting without an ongoing whiteboard\")),null!==apiCC.session.apiCCPointerSharingClient&&(p=apiCC.session.apiCCPointerSharingClient.getRoomIds()).length>0&&(u=!0),!0===u){d.log(\"Sending reconnectContext to CCS\"),s={type:\"reconnectContext\",callList:r,whiteBoardRoomId:h},null!==p&&p.length>0&&(s.pointerSharingRoomIds=p);var v=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs;if(v.length>0){s.updateSession=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.createJoinSessionMessage(null),s.updateSession.type=\"updateSession\",s.updateSessions=[];var b,S=function(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}(v);try{for(S.s();!(b=S.n()).done;){var y=b.value,I=apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.createJoinSessionMessage(null,{sessionMCU:y});I.type=\"updateSession\",s.updateSessions.push(I)}}catch(e){S.e(e)}finally{S.f()}}c=JSON.stringify(s),d.log(\"C->S: \"+c),apiCC.session.channel.socket.emit(\"reconnectContext\",c)}r.splice(0,r.length),this.myWebRTC_Event.createChannelEvent(\"onChannelReconnect\",t)},this.onChannelReconnecting=function(e){d.info(\"onChannelReconnecting\",e);var t=Date();d.debug(\"date :\"+t),this.myWebRTC_Event.createChannelEvent(\"onChannelReconnecting\",e)},this.onChannelOpened=function(){d.info(\"Channel opened\"),d.log(\"this.channelId :\"+this.channelId),this.channelReady=!0,!1===this.channelHasBeenDisconnected?e.onChannelOpened():(d.log(\"onChannelOpened after a disconnection, no change on session\"),this.channelHasBeenDisconnected=!1,!1!==e.ApiDBActivated&&void 0!==e.ApiDBActivated&&null!==e.ApiDBActivated&&(d.log(\"apiDB initialisation\"),apiDB.init(e.channel.socket))),!0===this.updatePresenceGroupIsNeeded&&(d.log(\"Updating presence group\"),e.leavePresenceGroup(this.oldPresenceGroup),e.joinPresenceGroup(this.newPresenceGroup)),!0===this.updateSubscribeToPresenceGroupIsNeeded&&(d.log(\"Updating subscribe to presence group\"),e.unsubscribePresenceGroup(this.oldSubscribeToPresenceGroup),e.subscribePresenceGroup(this.newSubscribeToPresenceGroup)),this.myWebRTC_Event.createChannelEvent(\"onChannelOpened\")},this.onChannelMessage=function(t,i){var a,n=null,r=null;try{n=JSON.parse(t)}catch(e){return}(a=\"checkCallStatus\"===n.type||\"apiRTCDataMessage\"===n.type&&n.data&&[\"activeSpeaker\",\"stopSpeaking\"].indexOf(n.data.type)>=0)||d.info(\"onChannelMessage S->C: \"+t),\"IMMessage\"===n.type&&(d.log(\"IMMessage convId :\"+n.IMId),r=n.IMId),void 0!==i&&(d.trace(\"ack on message reception\"),d.trace(\"convId :\"+r),i({reason:\"ack\",convId:r})),e.processSignalingMessage(n,{quiet:a})},this.onChannelConnectError=function(e){d.log(\"onChannelConnectError :\",e),this.myWebRTC_Event.createChannelEvent(\"onChannelConnectError\",e)},this.onChannelReconnectError=function(e){d.log(\"onChannelReconnectError :\",e),this.myWebRTC_Event.createChannelEvent(\"onChannelReconnectError\",e)},this.onChannelReconnectAttempt=function(e){d.log(\"onChannelReconnectAttempt :\",e),this.myWebRTC_Event.createChannelEvent(\"onChannelReconnectAttempt\",e),this.onChannelReconnecting(e)},this.onChannelError=function(e){d.error(\"Channel error :\",e),\"not authorized\"===e&&this.socket.disconnect(),this.myWebRTC_Event.createChannelEvent(\"onChannelError\",e)},this.callback=function(e,t){return this.closureHandler=function(i){return e[t](i)},this.closureHandler},this.callbackWithParams=function(e,t){return this.closureHandler=function(i,a,n){return e[t](i,a,n)},this.closureHandler}},u=i(4708),h=i(940);function p(e){return p=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},p(e)}var g=a.Y.get(\"ApiCCSession\"),m=apiCC.myWebRTC_Event,C=function(e){var t=this;if(this.apiCCId=null,this.apiCCSessionId=apiCC.randomString(22),this.apiKey=null,this.nickname=null,this.photoURL=null,this.apiCCWebRTCClient=null,this.apiCCIMClient=null,this.apiCCDataClient=null,this.apiCCIDSessionStorage=null,this.apiKeySessionStorage=null,this.apiCCIdPersistenceTimeout=5e3,this.channel=null,this.recordActivated=e.recordActivated,this.sessionId=null,this.apiCCPointerSharingClient=null,this.apiCCWhiteBoardClient=null,this.apiCCCoBrowsingClient=null,this.ccsServer=e.ccsServer,this.userData=e.userData,this.apiDBActivated=!0,e.ApiDBActivated=!0,this.webRTCPluginActivated=e.webRTCPluginActivated,this.token=e.token,this.conversationSpace=e.conversationSpace,this.tryAudioCallAfterUserMediaError=e.tryAudioCallAfterUserMediaError,this.deactivateReloadOnCancel=e.deactivateReloadOnCancel,this.connectedUsersList=[],this.messageTimeOutTable=[],this.ccsConnectionRetryNb=e.ccsConnectionRetryNb,this.ccsConnectionRetryDelay=e.ccsConnectionRetryDelay,this.sequentialMessagesStorage={},void 0!==e.messageTimeOutTimer?this.messageTimeOutTimer=e.messageTimeOutTimer:this.messageTimeOutTimer=1e4,g.log(\"messageTimeOutTimer set to : \"+this.messageTimeOutTimer),void 0!==e.presenceGroup?this.presenceGroup=e.presenceGroup:this.presenceGroup=[\"default\"],void 0!==e.subscribeToPresenceGroup?this.subscribeToPresenceGroup=e.subscribeToPresenceGroup:this.subscribeToPresenceGroup=[\"default\"],this.isDeviceWebRTCCompliant=function(){return apiCC.isWebRTCCompliant()},this.isDeviceDTLSCompliant=function(){var e=s.E2.getBrowser(),t=parseInt(e.version,10);return!(\"Chrome\"===e.name&&t<44&&(g.log(\"isDeviceDTLSCompliant FALSE : Chrome V < 44\"),1))},void 0===this.userData||null===this.userData?(this.userData={},this.userData.webRtcCompliant=apiCC.webRTCCompliant,this.userData.dtlsCompliant=this.isDeviceDTLSCompliant()):void 0===this.userData.webRtcCompliant||null===this.userData.webRtcCompliant?(this.userData.webRtcCompliant=apiCC.webRTCCompliant,this.userData.dtlsCompliant=this.isDeviceDTLSCompliant()):g.log(\"userData webRtcCompliant set to :\",this.userData.webRtcCompliant),this.userData.osName=s.BF,this.userData.osVersion=s.MM,this.userData.browser=s.Xh,this.userData.deviceType=s.vO,this.userData.browser_version=s.dc,this.userData.browser_major_version=s.PR,this.userData.apiRTCVersion=apiCC.version,\"Android\"===s.BF&&\"undefined\"!=typeof cordova&&(this.userData.platform=\"Android\"),\"undefined\"!=typeof apiRTC_React&&(this.userData.react=!0),this.roomManagerEventHandler=function(e){if(g.debug(\"roomManagerEventHandler, roomId :\"+e.roomId+\", type :\"+e.type+\", roomType :\"+e.roomType),\"whiteBoard\"===e.roomType){if(null===apiCC.myApiCCWhiteBoardClient||void 0===apiCC.myApiCCWhiteBoardClient)return void g.log(\"No whiteBoard created, leaving msg processing\");\"roomCreation\"===e.type&&(g.log(\"whiteBoard : roomCreation\"),apiCC.myApiCCWhiteBoardClient.roomId=e.roomId,apiCC.myApiCCWhiteBoardClient.paperSheetId++,apiCC.myApiCCWhiteBoardClient.drawingId=0,apiCC.myApiCCWhiteBoardClient.sendDataToRoom({tool:\"void\",needCatchUp:\"*||-1\"})),\"roomInvitation\"===e.type&&(g.log(\"whiteBoard : roomInvitation\"),apiCC.myApiCCWhiteBoardClient.roomId=e.roomId),\"roomMessage\"===e.type&&apiCC.myApiCCWhiteBoardClient.messageProcessing(e.data),\"roomJoin\"===e.type&&(g.log(\"whiteBoard : roomJoin\"),apiCC.myApiCCWhiteBoardClient.roomJoined=!0,apiCC.myApiCCWhiteBoardClient.roomId=e.roomId)}else\"pointerSharing\"===e.roomType?apiCC.session.apiCCPointerSharingClient&&\"roomJoin\"===e.type&&apiCC.session.apiCCPointerSharingClient.processMessageRoomJoin(e):\"coBrowsing\"===e.roomType?\"roomMessage\"===e.type&&g.log(\"coBrowsing : roomMessage :\"+e):g.log(\"roomManagerEventHandler for msg.roomType :\"+e.roomType)},this.callback=function(e,t){return this.closureHandler=function(i){return e[t](i)},this.closureHandler},this.roomMgr=new r(this,this.callback(this,\"roomManagerEventHandler\")),!0===e.xhrPolling?this.xhrPolling=!0:this.xhrPolling=!1,this.getSessionStorage=function(e){var t=sessionStorage.getItem(e);if(null===t)return null;try{var i=JSON.parse(t),a=new Date(i.expiresAt);return new Date>=a?(sessionStorage.removeItem(e),null):i.value}catch(e){g.error(\"Something went wrong when parsing JSON from session storage values\")}},this.generateApiCCID=function(){g.debug(\"apiCCId is not defined by user, checking if apiCCId exist in sessionStorage\"),\"undefined\"==typeof apiRTC_React&&(this.apiCCIDSessionStorage=this.getSessionStorage(\"apiCCId\"),this.apiKeySessionStorage=this.getSessionStorage(\"apiKey\")),null!==this.apiCCIDSessionStorage?(g.log(\"apiCCId exist in sessionStorage : \"+this.apiCCIDSessionStorage),null!==this.apiKeySessionStorage?(g.log(\"apiKey exist in sessionStorage : \"+this.apiKeySessionStorage),this.apiKeySessionStorage===this.apiKey?(g.log(\"apiKey is the same, keeping apiCCId\"),this.apiCCId=this.apiCCIDSessionStorage):(g.log(\"apiKey is not the same, generating an  apiCCId\"),this.apiCCId=Math.floor(1000001*Math.random()).toString(),g.log(\"Creation of new ApiRTC session with Id : \"+this.apiCCId))):this.apiCCId=this.apiCCIDSessionStorage):(g.log(\" No apiCCId found on sessionStorage : generating an apiCCId\"),this.apiCCId=String(1e5+Math.floor(9e5*Math.random())),g.log(\"Creation of new ApiRTC session with Id : \"+this.apiCCId))},this.getNumericIdFromAlpha=function(e){g.log(\"getNumericIdFromAlpha new : \"+e);var t,i=0;if(0===e.length)return i;for(t=0;t<e.length;t++)i=(i<<5)-i+e.charCodeAt(t),i&=i;return g.log(\"getNumericIdFromAlpha returned value: \"+(i>>>0)),i>>>0},void 0!==e.appId&&(this.appId=e.appId),void 0!==e.siteId&&(this.siteId=e.siteId),void 0===e.apiKey)return g.error('Error : Initialisation parameters: \"apikey\" for session creation is not defined'),null;if(g.log(\"Session creation with apiKey : \"+e.apiKey),g.log(\"Session creation with apiCCId : \"+e.apiCCId),this.apiKey=e.apiKey,void 0===e.onReady&&\"undefined\"==typeof apiRTC_React)return g.error('Error : Initialisation parameters: \"onReady\" for session creation is not defined'),null;if(apiCC.addEventListener(\"sessionReady\",e.onReady),\"undefined\"==typeof apiRTC_React&&(this.sessionId=this.getSessionStorage(\"sessionId\")),void 0===e.apiCCId||\"\"===e.apiCCId||null===e.apiCCId)this.generateApiCCID();else if(g.log(\"Session creation with apiCCId defined by user : \"+e.apiCCId),g.debug(\"params.idConversionActivated : \"+e.idConversionActivated),void 0===e.idConversionActivated||!0===e.idConversionActivated)if((0,u._C)(e.apiCCId))this.apiCCId=e.apiCCId.toString();else{g.log(\"Converting this Id in a numeric one\");var i=this.getNumericIdFromAlpha(e.apiCCId);i+=\"\",g.log(\"Numeric Id is : \"+i),(0,u._C)(i)?(g.warn(\"Id has been converted to a numeric one\"),this.apiCCId=i.toString()):(g.warn(\"Error : Defined apiCCId :\"+e.apiCCId+\" is not numeric. ApiCCID is generated\"),this.generateApiCCID())}else g.log(\"String id convertion is deactivated\"),this.apiCCId=e.apiCCId.toString();function a(e){return e instanceof Array?(g.log(\"data instanceof Array\"),!0):(g.log(\"data not instanceof Array\"),!1)}null!==e.apiCCIdPersistenceTimeout&&\"number\"==typeof e.apiCCIdPersistenceTimeout&&e.apiCCIdPersistenceTimeout>=0&&(this.apiCCIdPersistenceTimeout=e.apiCCIdPersistenceTimeout),null!==this.channel&&(g.log(\"this.channel is defined\"),delete this.channel),this.channel=new c(this),this.channel.initialize(),null!==e.nickname&&void 0!==e.nickname?(g.log(\"Nickname is defined :\"+e.nickname),this.nickname=e.nickname):(g.log(\"Nickname is not defined, setting to apiCCId value :\"+this.apiCCId),this.nickname=this.apiCCId),null!==e.photoURL&&void 0!==e.photoURL?(g.log(\"photoURL is defined :\"+e.photoURL),this.photoURL=e.photoURL):(g.log(\"photoURL is not defined\"),this.photoURL=null),this.reOpenChannel=function(e,t){g.info(\"reOpenChannel\"),this.apiCCId=e.toString(),this.apiKey=t,void 0!==this.channel.socket&&null!==this.channel.socket&&this.channel.socket.disconnect(),this.channel.channelReady=!1,this.channel.socket=null,this.channel.channelId=this.apiCCId,this.channel.initialize(),null!==this.apiCCWebRTCClient&&null!==this.apiCCWebRTCClient.webRTCClient&&(this.apiCCWebRTCClient.webRTCClient.socket=this.channel.socket)},this.onChannelOpened=function(){g.debug(\"ApiCCSession onChannelOpened\"),!1!==e.ApiDBActivated&&void 0!==e.ApiDBActivated&&null!==e.ApiDBActivated&&(g.log(\"apiDB initialisation\"),apiDB.init(this.channel.socket)),m.createSessionReadyEvent(apiCC.session.apiCCId)},this.createWebRTCClient=function(e){g.debug(\"createWebRTCClient\");var t={};if(null!=e){this.apiCCWebRTCClient=new apiCC.ApiCCWebRTCClient(this,e.localVideo,e.minilocalVideo,e.remoteVideo,e.status,e.command),apiCC.session.apiCCWebRTCClient.webRTCClient.setGumConfigWithDevicePresent(),t.audioDevicePresent=apiCC.mediaDeviceMgr.audioDevicePresent,t.videoDevicePresent=apiCC.mediaDeviceMgr.videoDevicePresent,apiCC.session.setUserData(t),setTimeout((function(){m.createWebRTCClientCreatedEvent()}));var i=apiCC.getUserMediaStreamIds(),a=i.length;for(g.debug(\"listing accessToLocalMedia \"+a);--a>=0;)if(apiCC.getUserMediaStream(i[a]).accessToLocalMedia()){g.debug(\"setting accessToLocalMedia to true\"),this.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0;break}return this.apiCCWebRTCClient}return g.log(\"Error : Initialisation parameters is null or not defined on WebRTCClient creation\"),null},this.createPointerSharingClient=function(){return null===this.apiCCPointerSharingClient&&(this.apiCCPointerSharingClient=new apiCC.ApiCCPointerSharingClient(this)),this.apiCCPointerSharingClient},this.closePointerSharingClient=function(){null!==this.apiCCPointerSharingClient&&this.apiCCPointerSharingClient instanceof apiCC.ApiCCPointerSharingClient&&(this.apiCCPointerSharingClient.stop(),this.apiCCPointerSharingClient=null)},this.createWhiteBoard=function(e,t,i,a){return g.info(\"createWhiteBoard\"),this.apiCCWhiteBoardClient=apiCC.createWhiteBoard(e,t,i,a),this.apiCCWhiteBoardClient},this.closeWhiteBoardClient=function(e){g.info(\"closeWhiteBoardClient\"),apiCC.closeWhiteBoardClient(e)},this.createCoBrowsing=function(){return g.info(\"createCoBrowsing\"),this.apiCCCoBrowsingClient=new apiCC.ApiCCCoBrowsingClient(this),this.apiCCCoBrowsingClient},this.createIMClient=function(e){return g.debug(\"createIMClient\"),this.apiCCIMClient=new apiCC.ApiCCIMClient(this,e),this.apiCCIMClient},this.createDataClient=function(){return g.info(\"createDataClient\"),this.apiCCDataClient=new apiCC.ApiCCDataClient(this),this.apiCCDataClient},this.updatingQuery=function(e){g.debug(\"updatingQuery\");var t=null,i=null,a=null;return t=(0,u.dD)(e),void 0!==this.userData?(i=JSON.stringify(this.userData),a=encodeURIComponent(i),t.userData=a,(0,u.Wc)(t)):e},this.setUserData=function(e,t){g.debug(\"setUserData in session :\",e);var i,a,n,r=[],o=this.userData;if(void 0!==this.userData){if(this.userData=(0,u.S6)(this.userData,e),g.debug(\"this.userData :\",this.userData),g.debug(\"actualUserData :\",o),g.debug(\"forceSendData :\",t),!0!==t&&JSON.stringify(this.userData)===JSON.stringify(o))return void g.debug(\"userData is not changed, leaving userData processing\")}else this.userData=e;for(i={type:\"setUserData\",userData:e},a=JSON.stringify(i),g.log(\"C->S: \"+a),this.channel.socket.emit(\"setUserData\",a),g.log(\"socket.io 1.X : socket.io.opts.query :\"+this.channel.socket.io.opts.query),this.channel.socket.io.opts.query=this.updatingQuery(this.channel.socket.io.opts.query),g.log(\"socket.io 1.X : after update : socket.io.opts.query :\"+this.channel.socket.io.opts.query),n=0;n<this.connectedUsersList.length;n+=1)this.apiCCId===this.connectedUsersList[n].userId&&(this.connectedUsersList[n].userData=this.userData,r[0]=this.apiCCId,m.createConnectedUsersListUpdateEvent(this.connectedUsersList[n].group,r,\"userDataUpdate\",\"userDataUpdate\"))},this.sendPresenceGroupManagementCommand=function(e,t){g.debug(\"sendPresenceGroupManagementCommand :\"+e+\" for group : \"+t);var i,a,n,r=t.length;if(\"unsubscribe\"===e)for(n=0;n<r;n+=1)this.removeGroupDataFromConnectedUsersList(t[n]);1!==r||\"deactivated\"!==t[0]?(i={type:\"presenceGroupManagement\",command:e,group:t},a=JSON.stringify(i),g.log(\"C->S: \"+a),this.channel.socket.emit(\"presenceGroupManagement\",a)):g.debug(\"leaving sendPresenceGroupManagementCommand for group deactivated\")},this.sendConversationSpaceCommand=function(e,t){var i,a;g.debug(\"sendConversationSpaceCommand :\"+e+\" for conversationSpace : \"+t),i={type:\"conversationSpaceManagement\",command:e,conversationSpace:t},a=JSON.stringify(i),g.log(\"C->S: \"+a),this.channel.socket.emit(\"conversationSpaceManagement\",a)},this.joinPresenceGroup=function(e){var t=this;g.info(\"joinPresenceGroup :\"+e),!0===a(e)?(this.sendPresenceGroupManagementCommand(\"join\",e),e.forEach((function(e){-1===t.presenceGroup.indexOf(e)&&t.presenceGroup.push(e)}))):g.log(\"group parameter value is not correct, need to be a JSON array\"),g.debug(\"this.presenceGroup :\"+this.presenceGroup)},this.leavePresenceGroup=function(e){var t=this;g.info(\"leavePresenceGroup :\"+e),!0===a(e)?(e.forEach((function(e){var i=t.presenceGroup.indexOf(e);-1!==i&&t.presenceGroup.splice(i,1)})),this.sendPresenceGroupManagementCommand(\"leave\",e)):g.log(\"group parameter value is not correct, need to be a JSON array\"),g.debug(\"this.presenceGroup :\"+this.presenceGroup)},this.subscribePresenceGroup=function(e){var t=this;g.info(\"subscribePresenceGroup :\"+e),!0===a(e)?(this.sendPresenceGroupManagementCommand(\"subscribe\",e),e.forEach((function(e){-1===t.subscribeToPresenceGroup.indexOf(e)&&t.subscribeToPresenceGroup.push(e)}))):g.log(\"group parameter value is not correct, need to be a JSON array\"),g.debug(\"this.subscribeToPresenceGroup :\"+this.subscribeToPresenceGroup)},this.unsubscribePresenceGroup=function(e){var t=this;g.info(\"unsubscribePresenceGroup :\"+e),!0===a(e)?(e.forEach((function(e){var i=t.subscribeToPresenceGroup.indexOf(e);-1!==i&&t.subscribeToPresenceGroup.splice(i,1)})),this.sendPresenceGroupManagementCommand(\"unsubscribe\",e)):g.log(\"group parameter value is not correct, need to be a JSON array\"),g.debug(\"this.subscribeToPresenceGroup :\"+this.subscribeToPresenceGroup)},this.joinConversationSpace=function(e){g.info(\"joinConversationSpace :\"+e),this.sendConversationSpaceCommand(\"join\",e),this.conversationSpace=e},this.leaveConversationSpace=function(e){g.info(\"leaveConversationSpace :\"+e),null!=e&&this.conversationSpace===e?(this.sendConversationSpaceCommand(\"leave\",e),this.conversationSpace=null):g.debug(\"socket is not in the conversationSpace, we request to leave\")},this.subscribeToCloudEvent=function(e,t){this.sendCloudEventsCommand(\"subscribe\",e,t)},this.unsubscribeToCloudEvent=function(e,t){this.sendCloudEventsCommand(\"unsubscribe\",e,t)},this.sendCloudEventsCommand=function(e,t,i){if([\"subscribe\",\"unsubscribe\"].includes(e))if(t&&\"string\"==typeof t){if(i){if(\"object\"!==p(i))return void g.error(\"wrong headers format\");for(var a=0,n=Object.values(i);a<n.length;a++){var r=n[a];if(!r||\"string\"!=typeof r)return void g.error(\"wrong headers format\")}}var o={type:\"cloudEvents\",command:e,topic:t};i&&(o.headers=i);var s=JSON.stringify(o);g.log(\"C->S:\",s),this.channel.socket.emit(\"cloudEvents\",s)}else g.error(\"wrong topic format\");else g.error(\"wrong command\")},this.getConversationList=function(e){g.info(\"getConversationList request\");var t,i;i=void 0!==e?{type:\"getConversationList\",lastConversationNb:e}:{type:\"getConversationList\",lastConversationNb:50},t=JSON.stringify(i),g.log(\"C->S: \"+t),this.channel.socket.emit(\"getConversationList\",t)},this.receiveConversationListAnswer=function(e){g.info(\"receiveConversationListAnswer\"),g.log(\"msg.convList.length :\"+e.convList.length);var t,i=e.convList.length,a=[],n=null;for(t=0;t<i;t+=1)g.log(\"i =\"+t),n=JSON.parse(e.convList[t]),a.push(n);m.createReceiveConversationListAnswerEvent(a)},this.getContactOccurrencesFromConversationList=function(e){g.info(\"getContactOccurrencesFromConversationList request\");var t,i;i=void 0!==e?{type:\"getContactOccurrencesFromConversationList\",lastConversationNb:e}:{type:\"getContactOccurrencesFromConversationList\",lastConversationNb:50},t=JSON.stringify(i),g.log(\"C->S: \"+t),this.channel.socket.emit(\"getContactOccurrencesFromConversationList\",t)},this.receiveContactOccurrencesFromConversationListAnswer=function(e){g.info(\"receiveContactOccurrencesFromConversationListAnswer\"),g.log(\"msg.contactOccurrencesTable.length :\"+e.contactOccurrencesTable.length),m.createReceiveContactOccurrencesFromConversationListAnswerEvent(e.contactOccurrencesTable)},this.getConversationDetailReport=function(e){var t,i;g.info(\"getConversationDetailReport for convId :\"+e),t={type:\"getConversationDetailReport\",convId:e},i=JSON.stringify(t),g.log(\"C->S: \"+i),this.channel.socket.emit(\"getConversationDetailReport\",i)},this.receiveConversationDetailReportAnswer=function(e){g.info(\"receiveConversationDetailReportAnswer\"),g.log(\"msg.CDR :\"+e.CDR),m.createReceiveConversationDetailReportAnswerEvent(e.CDR)},this.manageConnectedUsersList=function(e,t,i,a){g.debug(\"manageConnectedUsersList\");var n,r,o,s=!1,l=0,d=!1,c=\"unset\";for(g.trace(\"manageConnectedUsersList.length :\"+e.length),g.trace(\"this.connectedUsersList.length :\"+this.connectedUsersList.length),g.log(\"state :\"+t),g.log(\"group :\"+i),o=0;o<e.length;o+=1)e[o].group=i;if(\"online\"===t)for(g.log(\"state : online\"),n=0;n<e.length;n+=1){if(g.log(\"msgConnectedUsersListWithStatus  :\"+n),s=!1,0===this.connectedUsersList.length){g.log(\"this.connectedUsersList is empty\"),this.connectedUsersList=e,g.log(\"this.connectedUsersList[0].group :\"+this.connectedUsersList[0].group),m.createConnectedUsersListUpdateEvent(i,a,t,\"newConnectionState\");break}for(r=0;r<this.connectedUsersList.length;r+=1)if(d=!1,e[n].userId===this.connectedUsersList[r].userId&&e[n].group===this.connectedUsersList[r].group){s=!0,JSON.stringify(this.connectedUsersList[r].userData)!==JSON.stringify(e[n].userData)&&(g.log(\"userData is updated\"),this.connectedUsersList[r].userData=e[n].userData,d=!0,c=\"userDataUpdate\"),this.connectedUsersList[r].callState!==e[n].callState&&(g.log(\"callState is updated\"),this.connectedUsersList[r].callState=e[n].callState,d=!0,c=\"callState\"),!0===d&&m.createConnectedUsersListUpdateEvent(i,a,t,c);break}if(!1===s){g.log(\"Adding user in connectedUsersList :\"+e[n].userId),this.connectedUsersList.push(e[n]);var u=[];u[0]=e[n].userId,m.createConnectedUsersListUpdateEvent(i,u,t,\"newConnectionState\")}}else for(g.log(\"state : offline\"),n=0;n<e.length;n+=1)for(g.log(\"msgConnectedUsersListWithStatus  :\"+n),l=this.connectedUsersList.length,r=0;r<l;r+=1)if(e[n].userId===this.connectedUsersList[r].userId&&e[n].group===this.connectedUsersList[r].group){g.log(\"Removing user in connectedUsersList :\"+e[n].userId),g.log(\"... in group :\"+e[n].group),this.connectedUsersList.splice(r,1),m.createConnectedUsersListUpdateEvent(i,a,t,\"newConnectionState\");break}},this.removeGroupDataFromConnectedUsersList=function(e){g.debug(\"removeGroupDataFromConnectedUsersList for group :\",e);var t,i=this.connectedUsersList.length,a=[],n=0;for(g.debug(\"this.connectedUsersList.length :\",this.connectedUsersList.length),t=0;t<i;t+=1)g.debug(\"this.connectedUsersList[j].group :\",this.connectedUsersList[t-n].group),g.debug(\"group :\",e),this.connectedUsersList[t-n].group===e&&(g.log(\"Removing user in connectedUsersList :\"+this.connectedUsersList[t-n].userId),a[0]=this.connectedUsersList[t-n].userId,this.connectedUsersList.splice(t-n,1),n+=1,m.createConnectedUsersListUpdateEvent(e,a,\"offline\",\"newConnectionState\"))},this.getConnectedUsersList=function(e){void 0!==e?g.log(\"getConnectedUsersList for group : \"+e):g.log(\"getConnectedUsersList : complete users list\");var t,i=[];if(null==e)return this.connectedUsersList;for(g.log(\"filtering list for group : \"+e),t=0;t<this.connectedUsersList.length;t+=1)this.connectedUsersList[t].group===e&&i.push(this.connectedUsersList[t]);return i},this.isClientWebRtcCompliant=function(e){var t,i,a=null,n=null;if(void 0!==e)for(t=this.getConnectedUsersList(),i=0;i<t.length;i++)t[i].userId===e&&null!=(n=t[i].userData)&&void 0!==n.webRtcCompliant&&(a=n.webRtcCompliant);return a},this.isClientDTLSCompliant=function(e){var t,i,a=!0,n=null;if(void 0!==e)for(t=this.getConnectedUsersList(),i=0;i<t.length;i++)t[i].userId===e&&(n=t[i].userData,g.log(\"userData :\",n),null!=n&&void 0!==n.dtlsCompliant&&(a=n.dtlsCompliant));return a},this.getConnectedUserIdsList=function(e){g.info(\"getConnectedUserIdsList, group :\",e);var t,i,a=[],n=!1,r={},o=[];if(void 0!==e?g.log(\"getConnectedUserIdsList for group : \"+e):g.log(\"getConnectedUserIdsList : complete users list\"),null==e)o=JSON.parse(JSON.stringify(this.connectedUsersList));else for(t=0;t<this.connectedUsersList.length;t+=1)this.connectedUsersList[t].group===e&&o.push(this.connectedUsersList[t]);for(t=0;t<o.length;t+=1){for(n=!1,i=0;i<a.length;i++)if(a[i].userId===o[t].userId){n=!0;break}!1===n&&((r={}).userId=o[t].userId,r.callState=o[t].callState,r.userData=o[t].userData,a.push(r))}return a},this.getGroupsFromConnectedUsersList=function(e){g.info(\"getGroupsFroConnectedUsersList\");var t,i=[],a=!1;for(t=0;t<this.connectedUsersList.length;t+=1)this.connectedUsersList[t].userId===e&&(g.log(\"Matching Entry found :\"+JSON.stringify(this.connectedUsersList[t].group)),a=!0,i.push(this.connectedUsersList[t].group));return!0===a?JSON.stringify(i):\"User_Not_Found\"},this.getConnectedUserInfo=function(e,t){g.info(\"getConnectedUserInfo\"),g.log(\"getConnectedUserInfo userId :\",e),g.log(\"getConnectedUserInfo infoType :\",t);var i,a=null,n=null;switch(t){case\"all\":for(g.log(\"all\"),i=0;i<this.connectedUsersList.length;i+=1)if(this.connectedUsersList[i].userId===e)return g.log(\"Matching Entry found :\"+JSON.stringify(this.connectedUsersList[i])),a=this.getGroupsFromConnectedUsersList(e),(n=JSON.parse(JSON.stringify(this.connectedUsersList[i]))).groups=a,delete n.group,JSON.stringify(n);break;case\"callState\":for(g.log(\"callState\"),i=0;i<this.connectedUsersList.length;i+=1)if(this.connectedUsersList[i].userId===e)return g.log(\"Matching Entry found :\"+JSON.stringify(this.connectedUsersList[i].callState)),this.connectedUsersList[i].callState;break;case\"userData\":for(g.log(\"userData\"),i=0;i<this.connectedUsersList.length;i+=1)if(this.connectedUsersList[i].userId===e)return g.log(\"Matching Entry found :\"+JSON.stringify(this.connectedUsersList[i].userData)),JSON.stringify(this.connectedUsersList[i].userData);break;case\"groups\":return g.log(\"groups\"),this.getGroupsFromConnectedUsersList(e);default:g.log(\"infoType not defined switch case : \"+t)}return\"User_Not_Found\"},this.isConnectedUser=function(e){g.info(\"isConnectedUser\");var t,i=!1;for(t=0;t<this.connectedUsersList.length;t+=1)if(g.log(JSON.stringify(this.connectedUsersList[t])),this.connectedUsersList[t].userId===e)return i=!0,g.log(\"isConnected :\"+i),i;return g.log(\"isConnected :\"+i),i},this.displayConnectedUsersList=function(){var e;for(g.debug(\"displayConnectedUsersList\"),e=0;e<this.connectedUsersList.length;e+=1)g.log(\"User :\"+this.connectedUsersList[e].userId+\" on group :\"+this.connectedUsersList[e].group)},this.updatePresence=function(e){try{g.debug(\"updatePresence : \",JSON.stringify(e))}catch(e){g.debug(e)}g.log(\"updatePresence for group :\"+e.group),this.manageConnectedUsersList(e.connectedUsersListWithStatus,e.state,e.group,e.connectedUsersList),m.createUpdatePresenceEvent(e.connectedUsersList,e.state,e.connectedUsersListWithStatus)},this.processCloudEventOccurred=function(e){g.debug(\"processCloudEventOccurred\",e),m.createCloudEventOccurredEvent(e.event.type,e.event.target)},this.updateUserStatus=function(e){g.info(\"updateUserStatus\"+e),m.createUpdateUserStatusEvent(e)},this.sendDebugCommand=function(e,t,i){g.info(\"sendDebugCommand :\"+e),new h.S(this.channel.socket).sendDebugCommand(\"getClientSocketsInfo\",t,i)},this.processSignalingMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,a=null,n=!1,r=null,o=null,l=!1,d=null;if(\"invite\"===e.type)this.apiCCWebRTCClient?(g.log(\"this.webRTCPluginActivated =\",this.webRTCPluginActivated),(\"IE\"===s.Xh||\"Safari\"===s.Xh&&s.PR<11)&&!0===this.webRTCPluginActivated?(g.log(\"managing call with WebRTC Plugin\"),apiCC.manageWebRTCPlugin((function(){g.log(\"manageWebRTCPlugin cb on Invite\"),apiCC.session.apiCCWebRTCClient.webRTCClient.processInvite(e)}),(function(){g.log(\"actionOnInstallationNeeded\"),g.log(\"sending bye to be done\"),new h.S(apiCC.session.channel.socket).sendBye(e.callId,e.calleeId,e.roomId,e.callerId,\"WebRTC_Plugin_Installation_needed\",e.data)}))):(g.log(\"managing call with browser\"),this.apiCCWebRTCClient.webRTCClient.processInvite(e))):g.warn(\"WebRTCClient is not created\");else if(\"200OK\"===e.type)this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.process200OK(e):g.warn(\"WebRTCClient is not created\");else if(\"candidate\"===e.type)this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processCandidate(e):g.warn(\"WebRTCClient is not created\");else if(\"bye\"===e.type)this.apiCCWebRTCClient?(g.log(\"bye message from:\"+e.clientId+\" for callId : \"+e.callId),this.apiCCWebRTCClient.webRTCClient.onRemoteHangup(e.callId,e.clientId,e.roomId,e.reason,e.confId,e.data)):g.warn(\"WebRTCClient is not created\");else if(\"update\"===e.type)this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processUpdate(e):g.warn(\"WebRTCClient is not created\");else if(\"200update\"===e.type)this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.process200Update(e):g.warn(\"WebRTCClient is not created\");else if(\"newConversationCreated\"===e.type)this.apiCCIMClient?this.apiCCIMClient.newConversationCreated(e):g.warn(\"IMClient is not created\");else if(\"IMMessage\"===e.type)this.apiCCIMClient?this.apiCCIMClient.receiveMessage(e):g.warn(\"IMClient is not created\");else if(\"groupChatCreation\"===e.type)this.apiCCIMClient?this.apiCCIMClient.groupChatCreation(e):g.warn(\"IMClient is not created\");else if(\"groupChatInvitation\"===e.type)this.apiCCIMClient?this.apiCCIMClient.groupChatInvitation(e):g.warn(\"IMClient is not created\");else if(\"groupChatMemberUpdate\"===e.type)this.apiCCIMClient?this.apiCCIMClient.groupChatMemberUpdate(e):g.warn(\"IMClient is not created\");else if(\"addUserInGroupChatAnswer\"===e.type)this.apiCCIMClient?this.apiCCIMClient.addUserInGroupChatAnswer(e):g.warn(\"IMClient is not created\");else if(\"groupChatMessage\"===e.type)this.apiCCIMClient?this.apiCCIMClient.receiveGroupChatMessage(e):g.warn(\"IMClient is not created\");else if(\"conversationHistoryAnswer\"===e.type)this.apiCCIMClient?this.apiCCIMClient.receiveConversationHistory(e):g.warn(\"IMClient is not created\");else if(\"getUserDataAnswer\"===e.type)this.apiCCIMClient?this.apiCCIMClient.receiveUserDataAnswer(e):g.warn(\"IMClient is not created\");else if(\"fetchUserDataAnswer\"===e.type)this.apiCCIMClient?this.apiCCIMClient.receiveFetchUserDataAnswer(e):g.warn(\"IMClient is not created\");else if(\"dataMessage\"===e.type)this.apiCCDataClient?this.apiCCDataClient.receiveData(e):g.warn(\"DataClient is not created\");else if(\"dataAck\"===e.type)this.apiCCWebRTCClient.webRTCClient.processDataAck(e);else if(\"dataEndAck\"===e.type)this.apiCCWebRTCClient.webRTCClient.processDataEndAck(e);else if(\"updateVideoQuality\"===e.type)this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processUpdateVideoQuality(e.callId,e.profile);else if(\"apiRTCDataMessage\"===e.type)if(t.quiet||g.debug(\"apiRTCDataMessage:\",e),(0,u.Ym)(e.data,\"object\"))if(\"joinSessionAnswer\"===e.data.type)if(this.apiCCWebRTCClient){var c={roomName:e.data.roomId};(0,u.ki)(e.data,\"convId\",\"string\")&&(c.convId=e.data.convId),(0,u.ki)(e.data,[\"data\",\"mode\"],\"string\")&&(c.data={mode:e.data.data.mode}),(0,u.ki)(e.data,[\"data\",\"transition\"],\"string\")&&\"mesh2janus\"===e.data.data.transition?this.apiCCWebRTCClient.webRTCClient.MCUClient.changeSessionMode(c,\"mesh2janus\"):this.apiCCWebRTCClient.webRTCClient.MCUClient.updateSessionAnswer(c,{createSession:!0})}else g.warn(\"WebRTCClient is not created\");else if(\"slowLink\"===e.data.type){if(this.apiCCWebRTCClient){var p={};e.data.advice&&(p.advice=e.data.advice),this.apiCCWebRTCClient.webRTCClient.processSlowLink(e.data.callId,p)}}else if(\"videoQualityChanged\"===e.data.type)m.createVideoQualityChangedEvent(e.data.callId,e.data.roomId,e.data.hint,e.data.profile);else if(\"distantIceError\"===e.data.type)this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processDistantIceError(e.data);else if(\"streamTrackChanged\"===e.data.type)this.apiCCWebRTCClient&&e.data.hasOwnProperty(\"mline\")&&e.data.hasOwnProperty(\"muted\")&&this.apiCCWebRTCClient.webRTCClient.processStreamTrackMuteChanged(e.data.callId,e.data.mline,e.data.muted);else if(\"streamTrackStatusChanged\"===e.data.type)this.apiCCWebRTCClient&&e.data.hasOwnProperty(\"mline\")&&e.data.hasOwnProperty(\"change\")&&e.data.hasOwnProperty(e.data.change)&&this.apiCCWebRTCClient.webRTCClient.processStreamTrackStatusChanged(e.data.callId,e.data.mline,e.data[e.data.change]);else if(\"configureEncodings\"===e.data.type)this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processConfigureEncodings(e.data);else if(\"activeSpeaker\"===e.data.type)this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processAudioAmplitude(e.data,!0);else if(\"stopSpeaking\"===e.data.type)this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processAudioAmplitude(e.data,!1);else if(\"updateStream\"===e.data.type)this.apiCCWebRTCClient&&e.data.callId&&e.data.mline&&e.data.direction&&this.apiCCWebRTCClient.webRTCClient.processUpdateStream(e.data.callId,e.data.mline,e.data.direction);else if(\"startRecording\"===e.data.type){if(this.apiCCWebRTCClient)if(\"COMPOSITE\"===e.data.callId)this.apiCCWebRTCClient.webRTCClient.MCUClient.startCompositeRecording(e.data.mediaType,e.data.customIdInFilename,e.data.convId,e.data.data);else{for(d=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--d>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[d].callId===e.data.callId){l=!0;break}l?this.apiCCWebRTCClient.webRTCClient.MCUClient.startRecording(e.data.mediaType,e.data.customIdInFilename,e.data.convId,e.data.callId,e.data.data):g.info(\"cannot start recording (call not found)\")}}else if(\"startStreaming\"===e.data.type){if(this.apiCCWebRTCClient){for(d=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--d>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[d].callId===e.data.callId){l=!0;break}l?this.apiCCWebRTCClient.webRTCClient.MCUClient.startStreaming(e.data.service,e.data.server,e.data.streamKey,e.data.callId):g.info(\"cannot start streaming (call not found)\")}}else if(\"startCallStatsMonitoring\"===e.data.type){if(this.apiCCWebRTCClient){for(g.debug(\"startCallStatsMonitoring\",e.data.callId),d=this.apiCCWebRTCClient.webRTCClient.callsTable.length;--d>=0;)if(this.apiCCWebRTCClient.webRTCClient.callsTable[d].callId===e.data.callId){a=this.apiCCWebRTCClient.webRTCClient.callsTable[d];break}a?[\"chrome\",\"firefox\"].indexOf(u.wL.type)>=0?a.csmIntervalId?g.debug(\"call stats monitoring already started\"):a.csmIntervalId=setInterval(a.callback(a,\"csmHandler\"),a.csmIntervalMs):g.debug(\"call stats are only supported on chrome and firefox\"):g.debug(\"no such call\")}}else\"callOrder\"===e.data.type?(g.log(\"callOrder received\"),this.apiCCWebRTCClient?(this.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector=e.senderId,i=this.apiCCWebRTCClient.webRTCClient.callWithNumber(e.data.caller,!0,{MCUType:\"MCU-Callee\",confId:e.data.confId,convId:e.data.convId},r),this.apiCCWebRTCClient.webRTCClient.myWebRTC_Event.createIncomingCallEvent(this.clientId,e.data.caller,e.data.caller,i,!1,1,!1,\"video\",!0,\"web\",\"media\")):g.warn(\"WebRTCClient is not created\")):\"subscribeOrder\"===e.data.type?(g.log(\"subscribeOrder received\"),this.apiCCWebRTCClient?(this.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector=e.senderId,e.data.data.subscribeOrder=!0,(o=[]).push(e.data.stream),this.apiCCWebRTCClient.webRTCClient.MCUClient.subscribeToStreams(o,\"VIDEO\",e.data.data,r,{noStreamCheck:!0})):g.warn(\"WebRTCClient is not created\")):\"distantCallEstablished\"===e.data.type?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processDistantCallEstablished(e.data):\"simulcastFeedChanged\"===e.data.type?this.apiCCWebRTCClient&&this.apiCCWebRTCClient.webRTCClient.processSimulcastFeedChanged(e.data):g.log(\"msg.data.type is not managed :\"+e.data.type);else g.log(\"msg.data === undefined\");else if(\"conversationListAnswer\"===e.type)this.receiveConversationListAnswer(e);else if(\"contactOccurrencesFromConversationListAnswer\"===e.type)this.receiveContactOccurrencesFromConversationListAnswer(e);else if(\"conversationDetailReport\"===e.type)this.receiveConversationDetailReportAnswer(e);else if(\"updatePresence\"===e.type)g.log(\"updatePresence\"),this.updatePresence(e);else if(\"updateUserStatus\"===e.type)g.log(\"updateUserStatus\"),this.updateUserStatus(e);else if(\"receiveMCUSessionId\"===e.type)g.log(\"receiveMCUSessionId\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionId(e):g.warn(\"WebRTCClient is not created\");else if(\"joinSessionAnswer\"===e.type)g.log(\"joinSessionAnswer\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionAnswer(e):g.warn(\"WebRTCClient is not created\");else if(\"updateSessionAnswer\"===e.type)g.log(\"updateSessionAnswer\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.updateSessionAnswer(e,{updateCalls:!0}):g.warn(\"WebRTCClient is not created\");else if(\"availableStreams\"===e.type)this.apiCCWebRTCClient?(g.log(\"message availableStreams received\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableStream(e.msg,\"regular\",(function(e,t,i){m.createMCUAvailableStreamEvent([t],e)})):g.warn(\"WebRTCClient is not created\")):g.warn(\"WebRTCClient is not created\");else if(\"availableReplay\"===e.type)this.apiCCWebRTCClient?(g.log(\"message availableReplay received\"),this.apiCCWebRTCClient?(n=this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableReplay(e.msg),m.createMCUAvailableReplayEvent(e.msg,n)):g.warn(\"WebRTCClient is not created\")):g.warn(\"WebRTCClient is not created\");else if(\"availableComposite\"===e.type)this.apiCCWebRTCClient?(g.log(\"message availableComposite received\"),this.apiCCWebRTCClient?(n=this.apiCCWebRTCClient.webRTCClient.MCUClient.newAvailableStream(e.msg,\"composite\"),m.createMCUAvailableCompositeEvent(e.msg,n)):g.warn(\"WebRTCClient is not created\")):g.warn(\"WebRTCClient is not created\");else if(\"onRemoveStream\"===e.type)this.apiCCWebRTCClient?(g.log(\"message onRemoveStream received:\",e),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.removeMCUStream(e.callId,e.msg.id,e.msg.reason):g.warn(\"WebRTCClient is not created\")):g.warn(\"WebRTCClient is not created\");else if(\"availableStreamsUpdate\"===e.type)this.apiCCWebRTCClient?(g.log(\"message availableStreamsUpdate received\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.updateAvailableStream(e.msg,\"regular\",(function(e,t,i,a){m.createMCUAvailableStreamUpdateEvent([t],e)})):g.warn(\"WebRTCClient is not created\")):g.warn(\"WebRTCClient is not created\");else if(\"checkCallStatus\"===e.type)this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.processCheckCallStatus(e):g.warn(\"WebRTCClient is not created\");else if(\"MCUSessionInvitation\"===e.type)g.log(\"MCUSessionInvitation\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionInvitation(e):g.warn(\"WebRTCClient is not created\");else if(\"MCUSessionInvitationToGroupChat\"===e.type)g.log(\"MCUSessionInvitationToGroupChat\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.receiveSessionInvitation(e):g.warn(\"WebRTCClient is not created\");else if(\"participantEjected\"===e.type)g.log(\"participantEjected\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.participantEjected(e):g.warn(\"WebRTCClient is not created\");else if(\"recordingStarted\"===e.type)g.log(\"recordingStarted\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStarted(e):g.warn(\"WebRTCClient is not created\");else if(\"recordingStopped\"===e.type)g.log(\"recordingStopped\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStopped(e):g.warn(\"WebRTCClient is not created\");else if(\"recordingStreamAvailable\"===e.type)g.log(\"recordingStreamAvailable\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.recordingStreamAvailable(e):g.warn(\"WebRTCClient is not created\");else if(\"streamingStarted\"===e.type)g.log(\"streamingStarted\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.streamingStarted(e):g.warn(\"WebRTCClient is not created\");else if(\"streamingStopped\"===e.type)g.log(\"streamingStopped\"),this.apiCCWebRTCClient?this.apiCCWebRTCClient.webRTCClient.MCUClient.streamingStopped(e):g.warn(\"WebRTCClient is not created\");else if(\"sessionId\"===e.type)g.log(\"sessionId :\"+e.sessionId),this.sessionId=e.sessionId;else if(\"roomCreation\"===e.type)g.log(\"roomCreation\"),this.roomMgr.roomCreation(e);else if(\"roomJoin\"===e.type)g.log(\"roomJoined\"),this.roomMgr.roomJoin(e);else if(\"inviteInRoomStatus\"===e.type)g.log(\"inviteInRoomStatus\"),this.roomMgr.inviteInRoomStatus(e);else if(\"contactListInRoom\"===e.type)g.log(\"contactListInRoom\"),this.roomMgr.onContactListInRoom(e);else if(\"roomInvitation\"===e.type)g.log(\"roomInvitation\"),this.roomMgr.roomInvitation(e);else if(\"roomMessage\"===e.type)g.log(\"roomMessage\"),this.roomMgr.receiveRoomMessage(e);else if(\"roomMemberUpdate\"===e.type)g.log(\"roomMemberUpdate\"),this.roomMgr.roomMemberUpdate(e);else if(\"agentReconnect\"===e.type){var C=this.apiCCWebRTCClient.webRTCClient.findCallWithCallId(e.callId);null!=C&&C.getUserMediaOnCall()}else\"sequence\"===e.type?(g.log(\"Sequential message\"),this.handleSequentialMessage(e)):\"Ack\"===e.type?g.log(\"Ack received\"):\"error\"===e.type?(g.log(\"error received\"),m.createErrorEvent(e.errorInfo,e.errorCode,e.callId,e.roomId,null,null,e.convId)):\"enterpriseConfig\"===e.type?(g.log(\"enterpriseConfig received\"),this.handleEnterpriseConfigMessage(e)):\"AIEMessage\"===e.type?(g.log(\"AIEMessage received\"),this.handleAIEMessage(e)):\"cloudEventOccurred\"===e.type?this.processCloudEventOccurred(e):g.log(\"Error : No type for this message\")},this.handleSequentialMessage=function(e){if(void 0!==e.id&&void 0!==e.packetNum&&void 0!==e.totalPacketsNum&&void 0!==e.data){g.debug(\"Handle sequential message packet \"+e.packetNum+\"/\"+e.totalPacketsNum,e);var i=[];if(void 0!==t.sequentialMessagesStorage[e.id]&&(i=t.sequentialMessagesStorage[e.id]),i.push(e),t.sequentialMessagesStorage[e.id]=i,i.length===e.totalPacketsNum){i.sort((function(e,t){return e.packetNum-t.packetNum}));var a=\"\";i.forEach((function(e){a+=e.data})),delete t.sequentialMessagesStorage[e.id];var n=null;try{n=JSON.parse(a)}catch(e){return void g.error(\"Error : can't parse sequential message JSON :\",e)}if(!n)return void g.error(\"Error : can't restore sequential message, it's null\");g.debug(\"Restored sequential message :\",a),t.processSignalingMessage(n)}}else g.error(\"Error : sequential message is inconsistent :\",e)},this.handleEnterpriseConfigMessage=function(e){if(g.debug(\"handleEnterpriseConfigMessage :\",e),(0,u.ki)(e,\"sentry\",\"boolean\")&&!0===e.sentry){var i;i=void 0!==window&&void 0!==window.location&&void 0!==window.location.protocol&&\"https:\"!==window.location.protocol?\"http\":\"https\",apiCC.loadSentry(apiCC.initApiKey,i)}if((0,u.ki)(e,\"customJson\",\"string\")&&\"\"!==e.customJson)try{g.debug(\"customJson :\",e.customJson),e.customJson=JSON.parse(e.customJson)}catch(e){g.error(e)}if((0,u.ki)(e,\"iceServers\",\"string\")&&\"\"!==e.iceServers)try{g.debug(\"iceServers :\",e.iceServers),e.iceServers=JSON.parse(e.iceServers),t.apiCCWebRTCClient.setPcConfig(e.iceServers)}catch(e){g.error(e)}(0,u.ki)(e,\"logLevel\",\"string\")&&\"\"!==e.logLevel&&!isNaN(parseInt(e.logLevel))&&apiRTC.setLogLevel(parseInt(e.logLevel)),(0,u.ki)(e,\"ccs\",\"object\")&&(t.ccsInfo=Object.assign({},e.ccs))},this.handleAIEMessage=function(e){switch(g.debug(\"handleAIEMessage :\",e),e.detail){case\"modelLoaded\":if(void 0!==apiCC&&void 0!==e.userMediaStreamId){var t=apiCC.getUserMediaStream(e.userMediaStreamId).mediaFilterManager;for(var i in t.filters)void 0!==t.filters[i]&&null!==t.filters[i].streamAIE&&t.filters[i].streamAIE.modelLoaded(e)}break;case\"unknownModelName\":g.error(\"Unknown model name :\",e.modelName);break;case\"loadModelError\":g.error(\"Error while loading model :\",e.info);break;default:g.debug(\"Unknown detail :\",e.detail)}},this.fetchUserData=function(e){var t,i;g.debug(\"fetchUserData\"),t={type:\"fetchUserData\",id:e.id,apiKey:e.apiKey,timeout:e.timeout},i=JSON.stringify(t),g.log(\"C->S: \"+i),this.channel.socket.emit(\"fetchUserData\",i)}}},7323:(e,t,i)=>{\"use strict\";i.d(t,{q:()=>he}),i(4363),i(9653),i(3710),i(1539),i(9714),i(561),i(2564),i(4812),i(6992),i(9575),i(2472),i(2990),i(8927),i(3105),i(5035),i(4345),i(7174),i(2846),i(4731),i(7209),i(6319),i(8867),i(7789),i(3739),i(9368),i(4483),i(2056),i(3462),i(678),i(7462),i(3824),i(5021),i(2974),i(5016),i(2707),i(7042),i(8309),i(9753),i(9554),i(4747),i(8674),i(1038),i(8783),i(2526),i(1817),i(2165),i(3948);var a=i(1549),n=i(5945),r=i(4708);function o(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}i(2479),i(9070),i(8304),i(489),i(2419),i(8011);var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}var t,i;return t=e,(i=[{key:\"applyFilter\",value:function(e,t){}},{key:\"release\",value:function(){}}])&&o(t.prototype,i),e}();function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=i){var a,n,r=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw n}}return r}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return d(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function c(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){var i;return i=(e/=255)<.09804?.001857/.09804*e:e<.2?.05807/.10196*(e-.09804)+.001857:e<.298?.1267/.09804*(e-.2)+.05993:e<.4?.1564/.10196*(e-.298)+.1866:e<.498?.1539/.09804*(e-.4)+.343:e<.6?.1601/.10196*(e-.498)+.4969:e<.698?.1506/.09804*(e-.6)+.657:e<.8?.1325/.10196*(e-.698)+.8076:e<.898?.05753/.09804*(e-.8)+.9401:.002403/.10196*(e-.898)+.9976,255*Math.pow(i,t)}function h(e,t){return 255*Math.pow(e/255,t)}i(9743),i(7327);var p=function(){function e(t,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.image=t,this.width=i,this.height=a,this.length=this.width*this.height}var t,i;return t=e,i=[{key:\"mean\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0,i=0,a=0;if(e)for(var n=0;n<this.length;n++)t+=Math.pow(this.image.data[4*n+0],2)/(255*this.length),i+=Math.pow(this.image.data[4*n+1],2)/(255*this.length),a+=Math.pow(this.image.data[4*n+2],2)/(255*this.length);else for(var r=0;r<this.length;r++)t+=this.image.data[4*r+0]/this.length,i+=this.image.data[4*r+1]/this.length,a+=this.image.data[4*r+2]/this.length;return[t,i,a]}},{key:\"mad\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.mean(e),i=l(t,3),a=i[0],n=i[1],r=i[2],o=0,s=0,d=0;if(e)for(var c=0;c<this.length;c++)o+=Math.abs(Math.pow(this.image.data[4*c+0],2)/255-a)/this.length,s+=Math.abs(Math.pow(this.image.data[4*c+1],2)/255-n)/this.length,d+=Math.abs(Math.pow(this.image.data[4*c+2],2)/255-r)/this.length;else for(var u=0;u<this.length;u++)o+=Math.abs(this.image.data[4*u+0]-a)/this.length,s+=Math.abs(this.image.data[4*u+1]-n)/this.length,d+=Math.abs(this.image.data[4*u+2]-r)/this.length;return[o,s,d]}},{key:\"std\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.mean(e),i=l(t,3),a=i[0],n=i[1],r=i[2],o=0,s=0,d=0;if(e)for(var c=0;c<this.length;c++)o+=Math.pow(Math.pow(this.image.data[4*c+0],2)/255-a,2)/this.length,s+=Math.pow(Math.pow(this.image.data[4*c+1],2)/255-n,2)/this.length,d+=Math.pow(Math.pow(this.image.data[4*c+2],2)/255-r,2)/this.length;else for(var u=0;u<this.length;u++)o+=Math.pow(this.image.data[4*u+0]-a,2)/this.length,s+=Math.pow(this.image.data[4*u+1]-n,2)/this.length,d+=Math.pow(this.image.data[4*u+2]-r,2)/this.length;return[o=Math.sqrt(o),s=Math.sqrt(s),d=Math.sqrt(d)]}},{key:\"blur\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=new OffscreenCanvas(this.width,this.height),i=t.getContext(\"2d\");t.width=this.width,t.height=this.height,i.putImageData(this.image,0,0),i.filter=\"blur(\"+e+\"px)\",i.drawImage(t,0,0);var a=i.getImageData(0,0,this.width,this.height);return a}},{key:\"threshold\",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=new ImageData(this.image.data,this.width,this.height),o=0;if(n){var s=o;o=a,a=s}for(var l=0;l<this.length;l++)this.image.data[4*l+0]<e?r.data[4*l+0]=o:r.data[4*l+0]=a,this.image.data[4*l+1]<t?r.data[4*l+1]=o:r.data[4*l+1]=a,this.image.data[4*l+2]<i?r.data[4*l+2]=o:r.data[4*l+2]=a;return r}},{key:\"powerFilter\",value:function(e){var t=new Uint8ClampedArray(4*this.length);if(1===e)return this.image;for(var i=0;i<this.length;i++)t[4*i+0]=h(this.image.data[4*i+0],e),t[4*i+1]=h(this.image.data[4*i+1],e),t[4*i+2]=h(this.image.data[4*i+2],e),t[4*i+3]=255;return new ImageData(t,this.width,this.height)}},{key:\"sigmoidFilter\",value:function(e){for(var t=new Uint8ClampedArray(4*this.length),i=0;i<this.length;i++)t[4*i+0]=u(this.image.data[4*i+0],e),t[4*i+1]=u(this.image.data[4*i+1],e),t[4*i+2]=u(this.image.data[4*i+2],e),t[4*i+3]=255;return new ImageData(t,this.width,this.height)}},{key:\"weightedSum\",value:function(e,t){for(var i=new Uint8ClampedArray(4*this.length),a=0;a<this.length;a++)i[4*a+0]=t*this.image.data[4*a+0]+(1-t)*e.data[4*a+0],i[4*a+1]=t*this.image.data[4*a+1]+(1-t)*e.data[4*a+1],i[4*a+2]=t*this.image.data[4*a+2]+(1-t)*e.data[4*a+2],i[4*a+3]=255;return new ImageData(i,this.width,this.height)}},{key:\"weightedSumMask\",value:function(e,t){for(var i=new Uint8ClampedArray(4*this.length),a=0;a<this.length;a++){var n=t.data[4*a]/255;i[4*a+0]=n*this.image.data[4*a+0]+(1-n)*e.data[4*a+0],i[4*a+1]=n*this.image.data[4*a+1]+(1-n)*e.data[4*a+1],i[4*a+2]=n*this.image.data[4*a+2]+(1-n)*e.data[4*a+2],i[4*a+3]=255}return new ImageData(i,this.width,this.height)}}],i&&c(t.prototype,i),e}();function g(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function m(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var C=function(){function e(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;g(this,e),this.blurMask=t,this.smoothBorder=i,this.blurFactor=a,this.smoothingFactor=n,this.maskImage=null,this.net=null}var t,i;return t=e,i=[{key:\"loadModel\",value:function(){var e=this;return new Promise((function(t,i){bodyPix.load({architecture:\"MobileNetV1\",outputStride:16,multiplier:.75,quantBytes:2}).then((function(i){e.net=i,t()}))}))}},{key:\"computeMask\",value:function(e){var t=this;return new Promise((function(i,a){t.net.segmentPerson(e).then((function(e){t.width=e.width,t.height=e.height,t.length=t.width*t.height;for(var a=new Uint8ClampedArray(4*t.length),n=0;n<t.length;n++){var r=255*e.data[n];a[4*n+0]=r,a[4*n+1]=r,a[4*n+2]=r,a[4*n+3]=255}var o=document.createElement(\"canvas\"),s=o.getContext(\"2d\");o.width=t.width,o.height=t.height;var l=new ImageData(a,t.width,t.height);if(s.putImageData(l,0,0),t.blurMask&&(s.filter=\"blur(\"+t.blurFactor+\"px)\"),s.drawImage(o,0,0,t.width,t.height),t.maskImage=s.getImageData(0,0,t.width,t.height),t.blurMask)if(t.smoothBorder){if(-1!==t.smoothingFactor){var d=new p(t.maskImage,t.width,t.height);t.maskImage=d.sigmoidFilter(t.smoothingFactor)}}else{var c=new p(t.maskImage,t.width,t.height);t.maskImage=c.threshold(40,40,40,255,!1)}i(t.maskImage)}))}))}},{key:\"applyTransparency\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=this.maskImage);for(var i=new Uint8ClampedArray(e.width*e.height*4),a=0;a<e.width*e.height;a++)i[4*a+0]=e.data[4*a+0],i[4*a+1]=e.data[4*a+1],i[4*a+2]=e.data[4*a+2],i[4*a+3]=t.data[4*a];var n=new ImageData(i,e.width,e.height);return n}},{key:\"superposeImages\",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;null===a&&(a=this.maskImage);var n=new p(t,e.width,e.height),r=n.weightedSumMask(i,a);return r}},{key:\"setBackground\",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.superposeImages(e,e,t,i)}},{key:\"blurBackground\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=new p(e,e.width,e.height),n=a.blur(t);return this.setBackground(e,n,i)}}],i&&m(t.prototype,i),e}();function f(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function v(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var b=a.Y.get(\"StreamSegmentation\"),S=apiCC.myWebRTC_Event,y=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:480,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:360,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;f(this,e),this.mediaStream=t,this.backgroundMode=\"none\",this.backgroundBlurFactor=10,this.canvasWidth=i,this.canvasHeight=a,this.length=this.canvasWidth*this.canvasHeight,this.userMediaStreamId=n;for(var r=new Uint8ClampedArray(4*this.length),o=0;o<4*this.length;o++)r[o]=255;this.backgroundImage=new ImageData(r,this.canvasWidth,this.canvasHeight);var s=!0,l=!0,d=5,c=-1;this.backSub=new C(s,l,d,c),this.modelLoaded=!1,this.maskStreamLaunched=!1,this.backgroundSubtractionActivated=!1}var t,i;return t=e,i=[{key:\"setBackgroundMode\",value:function(e){this.backgroundMode=e}},{key:\"setBackgroundImage\",value:function(e){this.backgroundImage=e}},{key:\"setBackgroundBlurFactor\",value:function(e){this.backgroundBlurFactor=e}},{key:\"loadModel\",value:function(){b.debug(\"Loading model\");var e=this;return new Promise((function(t,i){e.backSub.loadModel().then((function(i){e.modelLoaded=!0,b.debug(\"Model loaded\"),t()}))}))}},{key:\"getMaskStream\",value:function(){var e=document.createElement(\"video\");e.srcObject=this.mediaStream;var t=document.createElement(\"canvas\"),i=t.getContext(\"2d\");t.width=this.canvasWidth,t.height=this.canvasHeight;var a=document.createElement(\"canvas\"),n=a.getContext(\"2d\");a.width=this.canvasWidth,a.height=this.canvasHeight;var r=this;e.addEventListener(\"loadeddata\",(function(){e.play(),requestAnimationFrame(p),r.modelLoaded?c=!0:r.loadModel().then((function(e){c=!0}))}));for(var o=!0,s=new Uint8ClampedArray(4*this.length),l=0;l<4*this.length;l++)s[l]=255;var d=new ImageData(s,this.canvasWidth,this.canvasHeight);n.putImageData(d,0,0);var c=!1,u=0,h=!0;function p(){i.drawImage(e,0,0,t.width,t.height);var a=i.getImageData(0,0,t.width,t.height);if(r.modelLoaded&&o&&c&&(h||\"none\"!==r.backgroundMode)){h&&(h=!1);var s=new Date;o=!1,r.backSub.computeMask(a).then((function(e){o=!0,1/((new Date-s)/1e3)<1&&++u>=10&&(c=!1,b.error(\"The segmentation process cannot be handled\"),S.createBackgroundSubstractionStopComputeTimeEvent(r.userMediaStreamId))}))}r.modelLoaded&&null!==r.backSub.maskImage&&c?n.putImageData(r.backSub.maskImage,0,0):n.putImageData(d,0,0),r.continueMaskComputation?requestAnimationFrame(p):(b.debug(\"Mask computation stoped\"),r.continueMaskComputation=!0)}return this.continueMaskComputation=!0,this.maskMediaStream=a.captureStream(),this.maskStreamLaunched=!0,this.maskMediaStream}},{key:\"activateBackgroundSubtraction\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!==e&&this.setBackgroundMode(e),this.backgroundSubtractionActivated)return this.processedMediaStream;this.maskStreamLaunched||this.getMaskStream();var t=document.createElement(\"video\");t.srcObject=this.mediaStream;var i=document.createElement(\"video\");i.srcObject=this.maskMediaStream;var a=document.createElement(\"canvas\"),n=a.getContext(\"2d\");a.width=this.canvasWidth,a.height=this.canvasHeight;var r=document.createElement(\"canvas\"),o=r.getContext(\"2d\");r.width=this.canvasWidth,r.height=this.canvasHeight,this.continueBackgroundSubtraction=!0;var s=this;function l(){n.drawImage(t,0,0,a.width,a.height);var e=n.getImageData(0,0,a.width,a.height);if(\"none\"===s.backgroundMode)o.putImageData(e,0,0);else{n.drawImage(i,0,0,a.width,a.height);var r=n.getImageData(0,0,a.width,a.height),d=null;switch(s.backgroundMode){case\"image\":d=s.backSub.setBackground(e,s.backgroundImage,r);break;default:d=s.backSub.blurBackground(e,s.backgroundBlurFactor,r);break;case\"transparent\":d=s.backSub.applyTransparency(e,r)}o.putImageData(d,0,0)}s.continueBackgroundSubtraction?requestAnimationFrame(l):(b.debug(\"Mask application stoped\"),s.continueBackgroundSubtraction=!0)}return t.addEventListener(\"loadeddata\",(function(){t.play(),i.play(),requestAnimationFrame(l)})),this.processedMediaStream=r.captureStream(30),this.backgroundSubtractionActivated=!0,this.processedMediaStream}},{key:\"deactivateBackgroundSubtraction\",value:function(){this.setBackgroundMode(\"none\"),this.processedMediaStream=this.mediaStream,this.backgroundSubtractionActivated=!1,this.continueBackgroundSubtraction=!1,this.maskMediaStream=null,this.maskStreamLaunched=!1,this.continueMaskComputation=!1}}],i&&v(t.prototype,i),e}();function I(e){return I=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},I(e)}function T(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function R(e,t){return R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},R(e,t)}function w(e,t){if(t&&(\"object\"===I(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var M=a.Y.get(\"OldMediaFilterBackgroundSubtraction\"),A=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(o,e);var t,i,a,n,r=(a=o,n=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(a);if(n){var i=E(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return w(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,o),(e=r.call(this)).streamSegmentation=null,e.userMediaStreamId=null,e}return t=o,(i=[{key:\"applyFilter\",value:function(e,t){var i=this;M.debug(\"Apply filter with descriptor:\",t);var a=e.getAudioTracks();a.length>0&&a.forEach((function(t){e.removeTrack(t)}));var n=e.getVideoTracks();if(0===n.length)return Promise.reject(\"MediaStream has no video tracks\");var r=n[0].getSettings();return void 0!==t.options&&void 0!==t.options.userMediaStreamId&&(this.userMediaStreamId=t.options.userMediaStreamId),this.streamSegmentation=new y(e,r.width,r.height,this.userMediaStreamId),this.loadTensorflow().then((function(e){return i.loadTensorflowModel()})).then((function(e){return new Promise((function(e,n){M.debug(\"Model loading...\"),i.streamSegmentation.loadModel().then((function(n){M.debug(\"Model loaded\");var r=null;void 0!==t.options&&void 0!==t.options.backgroundMode&&(\"image\"===t.options.backgroundMode&&t.options.image instanceof ImageData&&i.streamSegmentation.setBackgroundImage(t.options.image),r=t.options.backgroundMode);var o=i.streamSegmentation.activateBackgroundSubtraction(r);a.forEach((function(e){o.addTrack(e)})),e(o)}))}))})).catch((function(e){return Promise.reject(e)}))}},{key:\"release\",value:function(){this.streamSegmentation.deactivateBackgroundSubtraction(),this.streamSegmentation=null}},{key:\"loadTensorflow\",value:function(){return M.debug(\"Tensorflow script loading...\"),new Promise((function(e,t){var i={async:!0,numRetries:20,reqdelay:200,success:function(){M.debug(\"Tensorflow script loaded\"),e()},error:function(e){t(\"Resources loading failed, depsNotFound: \"+e)},retrycb:function(e,t){M.warn(\"Tensorflow loading retry :\"+e+\" ,delay before retry :\"+t)}};apiCC.resourcesLoader.loadjs([\"https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2\"],\"tensorflow\",i)}))}},{key:\"loadTensorflowModel\",value:function(){return M.debug(\"Tensorflow model script loading...\"),new Promise((function(e,t){var i={async:!0,numRetries:20,reqdelay:200,success:function(){M.debug(\"Tensorflow model script loaded\"),e()},error:function(e){t(\"Resources loading failed, depsNotFound: \"+e)},retrycb:function(e,t){M.warn(\"Tensorflow model loading retry :\"+e+\" ,delay before retry :\"+t)}};apiCC.resourcesLoader.loadjs([\"https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0\"],\"tensorflow-model\",i)}))}}])&&T(t.prototype,i),o}(s);function O(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return D(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?D(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function k(e){return(e[2]-e[0])*(e[3]-e[1])}function _(e,t){var i=e[0],a=e[1],n=e[2],r=e[3],o=t[0],s=t[1],l=t[2],d=t[3],c=k([Math.max(i,o),Math.max(a,s),Math.min(n,l),Math.min(r,d)]);return c/(k(e)+k(t)-c)}function U(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.yolo,r={yolo:[]},o=O(n);try{for(o.s();!(t=o.n()).done;){var s=t.value,l=s.objectness;if(l>i)if(null!==a){var d,c=s.bounding_box,u=k(c),h=0,p=null,g=0,m=O(n);try{for(m.s();!(d=m.n()).done;){var C=d.value,f=C.bounding_box,v=_(c,f);1!==v&&v>h&&(h=v,p=C,g=k(C.bounding_box))}}catch(e){m.e(e)}finally{m.f()}(null===p||h<a||g<u)&&r.yolo.push(s)}else r.yolo.push(s)}}catch(e){o.e(e)}finally{o.f()}return r}function N(e,t){var i,a=e.yolo,n={yolo:[]},r=O(t.yolo);try{for(r.s();!(i=r.n()).done;){var o,s=i.value,l=s.class,d=s.bounding_box,c=s.objectness,u=c,h=O(a);try{for(h.s();!(o=h.n()).done;){var p=o.value;if(p.class===l){var g=_(p.bounding_box,d);g>0&&(u=c+.75*(1-c)*g*p.objectness)}}}catch(e){h.e(e)}finally{h.f()}var m={class:l,objectness:u,bounding_box:d};n.yolo.push(m)}}catch(e){r.e(e)}finally{r.f()}return n}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(null!=i){var a,n,r=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw n}}return r}}(e,t)||function(e,t){if(e){if(\"string\"==typeof e)return L(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?L(e,t):void 0}}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function x(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}i(4916),i(3123),i(4723),i(6699),i(2023),i(9720),i(9600),i(1058);var W=a.Y.get(\"StreamAIE\"),V=apiCC.myWebRTC_Event,F=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.mediaStream=t,this.descriptorOptions=i,this.modelName=i.modelName,this.maxBoxes=i.maxBoxes||null,this.scoreThresh=i.scoreThresh||null,this.forceReload=i.forceReload||!1,this.classFilter=this.descriptorOptions.classFilter||\"all\",this.drawingConfig=this.descriptorOptions.drawingConfig||{},this.userMediaStreamId=i.userMediaStreamId,this.clientId=i.clientId;var a=this.mediaStream.getVideoTracks();0===a.length&&(this.mediaSettings=null),this.mediaSettings=a[0].getSettings(),this.canvasWidth=this.mediaSettings.width||480,this.canvasHeight=this.mediaSettings.height||480,this.length=this.canvasWidth*this.canvasHeight,this.snapshot=!1,this.log=!1,this.minSnapshotPeriod=0,this.memoryTime=0,this.lastAnnotations={yolo:[]},this.lastRawAnnotations={yolo:[]},this.objectDetectionActivated=!1,this.drawAnnotationsBool=!1,this.aieUrl=null,this.token=null,this.loadedModel=null,this.promises=[],this.isReleased=!1,this.resinzingSize=416,this.callId=null}var t,i;return t=e,i=[{key:\"activateLogs\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.memoryTime=e,this.log=!0}},{key:\"stopLogs\",value:function(){this.log=!1,this.memoryTime=0}},{key:\"activateSnapshots\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.snapshot=!0,this.minSnapshotPeriod=e}},{key:\"stopSnapshots\",value:function(){this.snapshot=!1,this.minSnapshotPeriod=0}},{key:\"activateAnnotations\",value:function(){this.lastAnnotations={yolo:[]},this.drawAnnotationsBool=!0,this.getAnnotations()}},{key:\"stopAnnotations\",value:function(){this.drawAnnotationsBool=!1}},{key:\"getAnnotations\",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=document.createElement(\"video\");t.srcObject=this.mediaStream;var i=document.createElement(\"canvas\"),a=i.getContext(\"2d\");i.width=this.canvasWidth,i.height=this.canvasHeight;var n=document.createElement(\"canvas\"),r=n.getContext(\"2d\");n.width=this.canvasWidth,n.height=this.canvasHeight;var o=this;function s(e,t){for(var i=e.split(\",\"),a=i[0].match(/:(.*?);/)[1],n=atob(i[1]),r=n.length,o=new Uint8Array(r);r--;)o[r]=n.charCodeAt(r);return new File([o],t,{type:a})}t.addEventListener(\"loadeddata\",(function(){t.play(),requestAnimationFrame((function(){v(o.aieUrl,o.token,o.loadedModel)}))}));var l=!0,d={},c=null,u=new Date;function h(e,t,a){var n=s(i.toDataURL(\"image/jpeg\")),r={pipelineCallId:o.getOrCreatePipeline(),file:n,transferType:\"plugin\",pluginName:\"httpPost\",pluginData:{url:e,headers:{Authorization:\"Token \"+t},formData:{file:\"$DATA\",angled:1,model:a,size:o.resinzingSize}}};apiCC.session.apiCCWebRTCClient.webRTCClient.pushData(null,r,null,{success:function(i){var n=(new Date-c)/1e3,r=1/n;return W.debug(\"Computation time:\",n,\"s ,FPS:\",r),v(e,t,a),void 0!==i.data.error?W.error(\"http post error :\",i.data.error):void 0===i.data.result?W.error(\"An error occured when trying to annotate a snapshot\"):void p(i.data)},failure:function(e,t,i){W.error(\"## pushData:failure\",t,i,e)}})}function p(e){var t=e.result;o.isReleased||(o.lastRawAnnotations=t,void 0!==t.yolo&&m(t),void 0===t.ocr&&void 0===t.codes||g(t))}function g(e){o.lastAnnotations={ocr:e.ocr,codes:e.codes};var t=\"\";if(e.ocr.length>1){t+=\"Words found : \";for(var i=0;i<e.ocr.length;i++)t=t+e.ocr[i].text+\", \"}if(e.codes.length>1){t+=\"Codes found : \";for(var a=0;a<e.codes.length;a++)t=t+e.codes[a].code+\", \"}C(t),f()}function m(t){t.yolo.length>0&&(e&&(t=N(o.lastRawAnnotations,t)),null!==o.scoreThresh&&(t=U(t,o.scoreThresh)));for(var i={yolo:[]},a={},n=o.classFilter.split(\", \"),r=0;r<t.yolo.length;r++){var s=t.yolo[r];(\"all\"===o.classFilter||n.includes(s.class))&&(s.class in a||(a[s.class]=0),a[s.class]+=1,i.yolo.push(s))}if(t=i,o.lastAnnotations=t,o.log||o.snapshot){for(var l=new Date,c=[],u=0,h=Object.entries(a);u<h.length;u++){var p=P(h[u],2),g=p[0],m=p[1];c.push(m+\" \"+g+\"(s) detected.\"),(!(g in d)||l-d[g]>1e3*o.memoryTime)&&(d[g]=l)}var v=c.sort().join(\" \");\"\"!==v&&(C(v),f())}}function C(e){o.log&&V.createAIELogEvent(o.userMediaStreamId,e)}function f(){if(o.snapshot){var e=new Date,t=a.getImageData(0,0,i.width,i.height);if(e-u>1e3*o.minSnapshotPeriod){r.putImageData(t,0,0),o.drawAnnotations(o.lastAnnotations,r,o.drawingConfig);var s=n.toDataURL(\"image/png\"),l=new Image;l.src=s,V.createAIESnapshotEvent(o.userMediaStreamId,l),u=e}}}function v(e,n,r){a.drawImage(t,0,0,i.width,i.height),(l||o.drawAnnotationsBool)&&(l&&(l=!1),c=new Date,h(e,n,r))}}},{key:\"getOrCreatePipeline\",value:function(){if(null!==this.callId)return this.callId;var e=this;return this.callId=apiCC.session.apiCCWebRTCClient.webRTCClient.pushData(null,{transferType:\"pipeline\"},null,{failure:function(t){\"dataChannelClosed\"===t?(W.debug(\"dataChannelClosed : no activity on dataChannel timeout\"),e.callId=null):W.error(\"dataChannel failure\",t)}}),this.callId}},{key:\"drawAnnotations\",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=i.color||\"#ED5131\",n=i.textColor||\"#FFFFFF\",r=i.colorMap||null,o=i.lineWidth||3,s=i.font||\"15px Arial\";if(void 0!==e.yolo&&e.yolo.length>0){null===i&&(i={});for(var l=0;l<e.yolo.length;l++){var d=e.yolo[l],c=d.bounding_box,u=c[0],h=c[1],p=c[2],g=c[3];\"mask_augmented_refined\"===this.modelName&&(p-=u,g-=h);var m=a;null!==r&&d.class in r&&(m=r[d.class]),t.lineWidth=o,t.strokeStyle=m,t.strokeRect(u,h,p,g),t.font=s;var C=parseInt(s,10),f=d.class,v=t.measureText(f).width;t.fillStyle=m,t.fillRect(u-o/2,h-Math.round(4*C/3),v+C+o,Math.round(4*C/3)),t.fillStyle=n,t.fillText(f,u+Math.round(C/2)-o/2,h-Math.round(C/2))}}if(void 0!==e.ocr&&e.ocr.length>0){null===i&&(i={}),s=i.font||\"25px Arial\";for(var b=0;b<e.ocr.length;b++){var S=e.ocr[b],y=S.bounding_box,I=y[0],T=y[1],R=y[2],w=y[3];\"mask_augmented_refined\"===this.modelName&&(R-=I,w-=T),t.lineWidth=o,t.strokeStyle=a,t.strokeRect(I,T,R,w),t.font=s;var E=parseInt(s,10),M=S.text,A=t.measureText(M).width;t.fillStyle=a,t.fillRect(I-o/2,T-Math.round(4*E/3),A+E+o,Math.round(4*E/3)),t.fillStyle=n,t.fillText(M,I+Math.round(E/2)-o/2,T-Math.round(E/2))}}if(void 0!==e.codes&&e.codes.length>0){null===i&&(i={}),s=i.font||\"25px Arial\";for(var O=0;O<e.codes.length;O++){var D=e.codes[O],k=D.bounding_box,_=k[0],U=k[1],N=k[2],P=k[3];\"mask_augmented_refined\"===this.modelName&&(N-=_,P-=U),t.lineWidth=o,t.strokeStyle=a,t.strokeRect(_,U,N,P),t.font=s;var L=parseInt(s,10),x=D.code,W=t.measureText(x).width;t.fillStyle=a,t.fillRect(_-o/2,U-Math.round(4*L/3),W+L+o,Math.round(4*L/3)),t.fillStyle=n,t.fillText(x,_+Math.round(L/2)-o/2,U-Math.round(L/2))}}}},{key:\"activateObjectDetection\",value:function(){if(this.objectDetectionActivated)return this.processedMediaStream;var e=document.createElement(\"video\");e.srcObject=this.mediaStream;var t=document.createElement(\"canvas\"),i=t.getContext(\"2d\");t.width=this.canvasWidth,t.height=this.canvasHeight;var a=document.createElement(\"canvas\"),n=a.getContext(\"2d\");a.width=this.canvasWidth,a.height=this.canvasHeight;var r=this;function o(){i.drawImage(e,0,0,t.width,t.height);var a=i.getImageData(0,0,t.width,t.height);n.putImageData(a,0,0),r.drawAnnotationsBool&&r.drawAnnotations(r.lastAnnotations,n,r.drawingConfig),requestAnimationFrame(o)}return e.addEventListener(\"loadeddata\",(function(){e.play(),requestAnimationFrame(o)})),this.processedMediaStream=a.captureStream(),this.objectDetectionActivated=!0,this.processedMediaStream}},{key:\"loadModel\",value:function(){var e=this;return new Promise((function(t,i){W.debug(\"loading model\");var a={modelName:e.modelName,maxBoxes:e.maxBoxes,scoreThresh:e.scoreThresh,forceReload:e.forceReload};e.sendMessage(a,\"AIELoadModel\",t,i)}))}},{key:\"sendMessage\",value:function(e,t,i,a){var n=setTimeout(a,5e3);this.promises.push({timeout:n,resolve:i}),e.timeout=n,this.sendMessageToCCS(e,t)}},{key:\"sendMessageToCCS\",value:function(e,t){if(e.userMediaStreamId=this.userMediaStreamId,e.clientId=this.clientId,e.data={pubSub:\"AieConnector\"},e.type=t,void 0!==apiCC){var i=apiCC.session.apiCCWebRTCClient.webRTCClient.socket;try{var a=JSON.stringify(e);i.emit(t,a)}catch(e){W.error(\"JSON Stringify error : \",e)}}}},{key:\"modelLoaded\",value:function(e){W.debug(\"Loaded model name :\",e.modelName),this.aieUrl=e.url,this.loadedModel=e.modelName,this.token=e.token;var t=this.activateObjectDetection();this.promises.forEach((function(i){e.timeout===i.timeout&&(clearTimeout(i.timeout),i.resolve(t))}))}},{key:\"release\",value:function(){this.isReleased=!0,this.stopLogs(),this.stopSnapshots(),this.stopAnnotations(),this.sendMessageToCCS({},\"AIELogout\")}}],i&&x(t.prototype,i),e}();function j(e){return j=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},j(e)}function B(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function G(e,t){return G=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},G(e,t)}function q(e,t){if(t&&(\"object\"===j(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var J=a.Y.get(\"MediaFilterAIE\"),Y=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&G(e,t)}(o,e);var t,i,a,n,r=(a=o,n=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(a);if(n){var i=H(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return q(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,o),(e=r.call(this)).userMediaStreamId=null,e.streamAIE=null,e}return t=o,(i=[{key:\"applyFilter\",value:function(e,t){var i=this;return new Promise((function(a,n){if(J.debug(\"Apply filter with descriptor :\",t),void 0===t.options&&n(\"Filter options object required\"),void 0===t.options.modelName)n(\"modelName options required\");else{var r=e.getAudioTracks();r.length>0&&r.forEach((function(t){e.removeTrack(t)})),i.streamAIE=new F(e,t.options),i.streamAIE.loadModel().then((function(e){r.forEach((function(t){e.addTrack(t)})),a(e)})).catch((function(e){n(e)}))}}))}},{key:\"release\",value:function(){this.streamAIE.release()}}])&&B(t.prototype,i),o}(s);function z(e){return z=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},z(e)}function X(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function K(e,t){return K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},K(e,t)}function Q(e,t){if(t&&(\"object\"===z(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function $(e){return $=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},$(e)}var Z=a.Y.get(\"MediaFilterBackgroundSubstraction\"),ee=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(o,e);var t,i,a,n,r=(a=o,n=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(a);if(n){var i=$(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Q(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,o),(e=r.call(this)).mediaStream=null,e.mediaStreamSettings=null,e.processedMediaStream=null,e.net=null,e.lossRatio=null,e.processBackground=!1,e.bgImageData=null,e.videoElement=document.createElement(\"video\"),e.canvas=document.createElement(\"canvas\"),e.canvasContext=e.canvas.getContext(\"2d\"),e}return t=o,(i=[{key:\"applyFilter\",value:function(e,t){var i=this;return new Promise((function(a,n){var r=e.getAudioTracks();r.length>0&&r.forEach((function(t){e.removeTrack(t)})),i.loadTensorflow().then((function(){i.loadTensorflowModel().then((function(){i.videoElement.srcObject=e;var n=i;i.videoElement.addEventListener(\"loadeddata\",(function(){n.videoElement.play(),n.mediaStream=e,n.descriptors=t,n.processedMediaStream=n.canvas.captureStream(),n.mediaStreamSettings=n.mediaStream.getVideoTracks()[0].getSettings(),n.videoElement.height=240,n.lossRatio=n.mediaStreamSettings.height/n.videoElement.height,n.videoElement.width=n.videoElement.height*n.mediaStreamSettings.aspectRatio,n.videoElement.onplaying=function(){n.canvas.height=n.videoElement.videoHeight,n.canvas.width=n.videoElement.videoWidth},n.loadBodyPix().then((function(){r.forEach((function(e){n.processedMediaStream.addTrack(e)})),a(n.processedMediaStream)})).catch((function(e){Z.error(e)}))}))})).catch((function(e){Z.error(e)}))})).catch((function(e){Z.error(e)}))}))}},{key:\"loadTensorflow\",value:function(){return Z.debug(\"Tensorflow script loading...\"),new Promise((function(e,t){var i={async:!0,numRetries:20,reqdelay:200,success:function(){Z.debug(\"Tensorflow script loaded\"),e()},error:function(e){t(\"Resources loading failed, depsNotFound: \"+e)},retrycb:function(e,t){Z.warn(\"Tensorflow loading retry :\"+e+\" ,delay before retry :\"+t)}};apiCC.resourcesLoader.loadjs([\"https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.2\"],\"tensorflow\",i)}))}},{key:\"loadTensorflowModel\",value:function(){return Z.debug(\"Tensorflow model script loading...\"),new Promise((function(e,t){var i={async:!0,numRetries:20,reqdelay:200,success:function(){Z.debug(\"Tensorflow model script loaded\"),e()},error:function(e){t(\"Resources loading failed, depsNotFound: \"+e)},retrycb:function(e,t){Z.warn(\"Tensorflow model loading retry :\"+e+\" ,delay before retry :\"+t)}};apiCC.resourcesLoader.loadjs([\"https://cdn.jsdelivr.net/npm/@tensorflow-models/body-pix@2.0\"],\"tensorflow-model\",i)}))}},{key:\"loadBodyPix\",value:function(){var e=this;return new Promise((function(t,i){bodyPix.load({multiplier:.75,stride:32,quantBytes:4}).then((function(i){e.net=i,e.perform(),t()})).catch((function(e){return i(e)}))}))}},{key:\"perform\",value:function(){if(void 0!==this.descriptors.options&&void 0!==this.descriptors.options.backgroundMode)switch(this.processBackground=!0,this.descriptors.options.backgroundMode){case\"blur\":Z.warn(\"This method is deprecated, please use Stream#blur method now.\"),this.videoElement.height=this.mediaStreamSettings.height,this.videoElement.width=this.mediaStreamSettings.width,this.canvas.height=this.videoElement.height,this.canvas.width=this.videoElement.width,this.blurBackground();break;case\"transparent\":this.noBackground();break;case\"image\":void 0!==this.descriptors.options.image?(this.resizeImageData(this.descriptors.options.image),this.imageBackground()):Z.error(\"image option is required when creating the filter\");break;default:Z.debug(\"The backgroundMode : \",this.descriptors.options.backgroundMode,\" is not implemented. Refer to documentation for accepted values.\"),this.blurBackground()}else Z.error(\"backgroundMode option is required\")}},{key:\"blurBackground\",value:function(){var e=this;this.net.segmentPerson(this.videoElement).then((function(t){e.blurBackground(),bodyPix.drawBokehEffect(e.canvas,e.videoElement,t,9,2,!1)}))}},{key:\"noBackground\",value:function(){var e=this;this.net.segmentPerson(this.videoElement).then((function(t){e.canvasContext.drawImage(e.videoElement,0,0,e.videoElement.width,e.videoElement.height);for(var i=e.canvasContext.getImageData(0,0,e.videoElement.width,e.videoElement.height),a=i.data,n=0;n<a.length;n+=4)0===t.data[n/4]&&(a[n+3]=0);var r=e.scaleImageData(i,e.lossRatio);e.canvasContext.imageSmoothingEnabled=!0,e.canvasContext.putImageData(r,0,0),e.processBackground&&e.noBackground()}))}},{key:\"imageBackground\",value:function(){var e=this;this.net.segmentPerson(this.videoElement).then((function(t){e.canvasContext.putImageData(e.bgImageData,0,0,0,0,e.videoElement.width,e.videoElement.height);var i=e.canvasContext.getImageData(0,0,e.videoElement.width,e.videoElement.height);e.canvasContext.drawImage(e.videoElement,0,0,e.videoElement.width,e.videoElement.height);for(var a=e.canvasContext.getImageData(0,0,e.videoElement.width,e.videoElement.height),n=a.data,r=0;r<n.length;r+=4)0===t.data[r/4]&&(n[r]=i.data[r],n[r+1]=i.data[r+1],n[r+2]=i.data[r+2],n[r+3]=i.data[r+3]);var o=e.scaleImageData(a,e.lossRatio);e.canvasContext.imageSmoothingEnabled=!0,e.canvasContext.putImageData(o,0,0),e.processBackground&&e.imageBackground()}))}},{key:\"resizeImageData\",value:function(e){var t=this.videoElement.width/e.width,i=this.videoElement.height/e.height;this.bgImageData=t>=i?this.scaleImageData(e,t):this.scaleImageData(e,i)}},{key:\"noBackgroundWithFullResolution\",value:function(){var e=this;this.net.segmentPerson(this.videoElement).then((function(t){e.canvasContext.drawImage(e.videoElement,0,0,e.canvas.width,e.canvas.height);for(var i=e.canvasContext.getImageData(0,0,e.canvas.width,e.canvas.height),a=new Uint8ClampedArray(4*t.width*t.height),n=0;n<a.length;n+=4)0!==t.data[n/4]&&(a[n+3]=255);var r=new ImageData(a,t.width,t.height);r=e.scaleImageData(r,e.lossRatio);for(var o=0;o<i.data.length;o+=4)0===r.data[o+3]&&(i.data[o+3]=0);e.canvasContext.imageSmoothingEnabled=!0,e.canvasContext.putImageData(i,0,0),e.processBackground&&e.noBackgroundWithFullResolution()}))}},{key:\"scaleImageData\",value:function(e,t){var i=document.createElement(\"canvas\");i.width=e.width,i.height=e.height,i.getContext(\"2d\").putImageData(e,0,0);var a=document.createElement(\"canvas\");a.width=this.canvas.width,a.height=this.canvas.height;var n=a.getContext(\"2d\");return n.scale(t,t),n.drawImage(i,0,0),n.getImageData(0,0,a.width,a.height)}},{key:\"release\",value:function(){this.processedMediaStream=this.mediaStream,this.processBackground=!1}}])&&X(t.prototype,i),o}(s);function te(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ie=a.Y.get(\"MediaFilterManager\"),ae=apiCC.myWebRTC_Event,ne={oldBackgroundSubtraction:A,AIEFilter:Y,backgroundSubtraction:ee},re=function(){function e(t,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.mediaStream=t,this.descriptors=i,this.userMediaStreamId=a,this.filters={}}var t,i;return t=e,(i=[{key:\"getOrCreateFilter\",value:function(e){if(void 0!==this.filters[e.type])return this.filters[e.type];var t=ne[e.type];if(void 0===t)return ie.error(\"Unknown filter type: \"+e.type),null;var i=new t;return this.filters[i]=i,i}},{key:\"applyFilters\",value:function(){var e=this;if(ie.info(\"Apply filters\",this.descriptors),!Array.isArray(this.descriptors)||0===this.descriptors.length)return ie.error(\"No filter can be applied, filter descriptors have wrong format, it should be an array and contain at least one element\",this.descriptors),Promise.reject(this.mediaStream);var t=Promise.resolve(this.mediaStream);return this.descriptors.forEach((function(i){var a=e.getOrCreateFilter(i);null!==a?(void 0!==i.options&&(i.options.userMediaStreamId=e.userMediaStreamId,i.options.clientId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId),t=t.then((function(e){return a.applyFilter(e,i)}))):ie.error(\"Filter \"+i.type+\" will be skipped. No implemented filter has this type\")})),ie.info(\"Filters attached\"),document.addEventListener(\"visibilitychange\",(function(){e.createBackgroundSubstractionStopVisibilityChangeEvent(e.userMediaStreamId)})),t.catch((function(e){return ie.error(e)})),t}},{key:\"createBackgroundSubstractionStopVisibilityChangeEvent\",value:function(e){document.hidden&&ae.createBackgroundSubstractionStopVisibilityChangeEvent(e)}},{key:\"release\",value:function(){Object.values(this.filters).forEach((function(e){e.release()})),document.removeEventListener(\"visibilitychange\",this.createBackgroundSubstractionStopVisibilityChangeEvent),this.filters=null,this.mediaStream=null}}])&&te(t.prototype,i),e}();function oe(e){return oe=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},oe(e)}function se(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return le(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?le(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var de=a.Y.get(\"ApiCCUserMediaStream\"),ce=apiCC.myWebRTC_Event,ue=\"getUserMediaAccessAllowed\",he=function(){void 0!==Number.MAX_SAFE_INTEGER?this.userMediaStreamId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():this.userMediaStreamId=Math.floor(1000001*Math.random()).toString(),\"Edge\"===n.Xh&&n.PR>=15?this.gum_config={audio:!0,video:!0}:\"Chrome\"===n.Xh&&n.PR<49||\"Firefox\"===n.Xh&&n.PR<50?this.gum_config={audio:{mandatory:{},optional:[]},video:{mandatory:{},optional:[]}}:this.gum_config={audio:{},video:{}},this.inputs={},this.callbacks={},this.callType=null,this.audio=!1,this.audioDeviceLabel=null,this.audioMuted=!1,this.audioSilent=!1,this.video=!1,this.videoDeviceLabel=null,this.videoMuted=!1,this.videoSilent=!1,this.stream=null,this.streamStolen=!1,this.notifyUserMediaSuccess=!0,this.notifyUserMediaStop=!0,null!==apiCC.session&&void 0!==apiCC.session?this.tryAudioCallAfterUserMediaError=apiCC.session.tryAudioCallAfterUserMediaError:this.tryAudioCallAfterUserMediaError=!1,this.callInfoList=[],this.iOSMediaSelectionWorkAroundApplied=!1,this.getUserMediaTimeoutId=null,\"chrome\"===r.wL.type&&r.wL.version>=72&&r.wL.version<=73?this.displayMediaStreamConstraints={video:!0,audio:!1}:this.displayMediaStreamConstraints={video:!0,audio:!0},this.forceExtensionOnChrome=!1,this.filters=null,this.mediaFilterManager=null,this.videoSettings=!1,this.getVideoTrack=function(){if(!this.stream||\"function\"!=typeof this.stream.getVideoTracks)return null;var e=this.stream.getVideoTracks();return e&&1===e.length?e[0]:null},this.release=function(){var e=0,t=null,i=null,a=null;if(de.debug(\"[ApiCCUserMediaStream] release; userMediaStreamId: \"+this.userMediaStreamId),null!==this.mediaFilterManager&&(this.mediaFilterManager.release(),this.mediaFilterManager=null),null!==this.stream){if(this.sourceNode&&this.sourceNode.disconnect(),this.javascriptNode&&(this.javascriptNode.analyser&&this.javascriptNode.analyser.disconnect(),this.javascriptNode.disconnect()),!0!==this.streamStolen)if(\"undefined\"!=typeof cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins.iosrtc)void 0!==cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins.iosrtc&&(de.debug(\"[ApiCCUserMediaStream] release on iosrtc cordova\"),this.stream.onended=null);else if(\"Chrome\"===n.Xh&&n.PR<45||\"Firefox\"===n.Xh&&n.PR<44||\"Opera\"===n.Xh&&n.PR<34||\"Chromium\"===n.Xh&&n.PR<44||\"Chrome WebView\"===n.Xh&&n.PR<45)this.stream.onended=null,this.stream.stop();else for(this.stream.onended=null,e=(t=this.stream.getTracks()).length;--e>=0;)t[e].onended=null,t[e].stop();this.stream=null,this.streamStolen=!1,!0===this.notifyUserMediaStop&&(null!==(a=this.getOwnerCallInfo())&&(i=a.callId),ce.createUserMediaStopEvent(i,this.callType,this.userMediaStreamId)),this.callbacks.release(this)}},this.getUserMedia=function(){var e=this;if(de.debug(\"[ApiCCUserMediaStream] getUserMedia; userMediaStreamId: \"+this.userMediaStreamId),null===this.stream)try{if(\"media\"===this.callType)this.gum_config=apiCC.setAudioSourceIdInConstraint(this.inputs.audioSourceId,this.gum_config),this.gum_config=apiCC.setVideoSourceIdInConstraint(this.inputs.videoSourceId,this.gum_config),this.gum_config=apiCC.setVideoFacingModeInConstraint(this.inputs.facingMode,this.gum_config);else if(\"audio\"===this.callType)this.gum_config=apiCC.setAudioSourceIdInConstraint(this.inputs.audioSourceId,this.gum_config),this.gum_config.video=!1;else{if(\"videoOnly\"!==this.callType)return function(e){for(var t=apiCC.userMediaStreamTable.length;--t>=0;)if(apiCC.userMediaStreamTable[t].userMediaStreamId===e){apiCC.userMediaStreamTable.splice(t,1);break}}(this.userMediaStreamId),void setTimeout(this.callbacks.failure.bind(this,this,\"wrong type\"));this.gum_config.audio=!1,this.gum_config=apiCC.setVideoSourceIdInConstraint(this.inputs.videoSourceId,this.gum_config),this.gum_config=apiCC.setVideoFacingModeInConstraint(this.inputs.facingMode,this.gum_config)}apiCC.checkConstraintDependingOnDevice(this.gum_config),\"IE\"===n.Xh&&n.dc>8?apiCC.getUserMediaWithCB(this.gum_config,this.callback(this,\"onUserMediaSuccess\"),this.callback(this,\"onUserMediaError\")):(\"Chrome\"===n.Xh&&!0===this.isUserMediaAccessAllowed()&&(this.getUserMediaTimeoutId=setTimeout((function(){e.onUserMediaError(\"timeout\")}),1e4)),apiCC.getUserMedia(this.gum_config).then(this.callback(this,\"onUserMediaSuccess\")).catch(this.callback(this,\"onUserMediaError\")))}catch(e){de.error(\"getUserMedia() failed. Is this a WebRTC capable browser?\"),de.log(\"getUserMedia failed with exception: \"+e.message)}},this.onUserMediaSuccess=function(e){var t=this;this.applyFiltersIfNeeded(e).then((function(e){var i=null,a=null,r=!1,o=t.getOwnerCallInfo(),s=t.getCall(o);de.info(\"[ApiCCUserMediaStream] onUserMediaSuccess; userMediaStreamId: \"+t.userMediaStreamId),null!==t.getUserMediaTimeoutId&&(clearTimeout(t.getUserMediaTimeoutId),t.getUserMediaTimeoutId=null),s&&(de.debug(\"call exist\"),a=s.callee?s.callerId:s.calleeId,r=s.restarted),\"screenSharing\"!==t.callType&&\"screenSharingWithAudio\"!==t.callType||(e.onended=t.callback(t,\"stopScreenSharing\"),e.getVideoTracks().length>0&&(e.getVideoTracks()[0].onended=t.callback(t,\"stopScreenSharing\"))),t.updateMediaProperties(e),t.stream=e,\"Chrome\"===n.Xh&&t.setUserMediaAccessAllowed(!0),!0===t.notifyUserMediaSuccess&&(o&&(i=o.callId),ce.createUserMediaSuccessEvent(null!==i,t.audio,t.audioDeviceLabel,t.video,t.videoDeviceLabel,t.callType,i,e,a,r,t.userMediaStreamId));var l,d=function(e){e.onmute=function(i){de.debug(e.kind+\" mute event\"),\"audio\"===e.kind?t.audioSilent=!0:\"video\"===e.kind&&(t.videoSilent=!0),t.notifyMLineMuted(e.kind,!0,\"muted\")},e.onunmute=function(i){de.debug(e.kind+\" unmute event\"),\"audio\"===e.kind?t.audioSilent=!1:\"video\"===e.kind&&(t.videoSilent=!1),t.notifyMLineMuted(e.kind,!1,\"muted\")}},c=se(e.getVideoTracks());try{for(c.s();!(l=c.n()).done;)d(l.value)}catch(e){c.e(e)}finally{c.f()}var u,h=se(e.getAudioTracks());try{for(h.s();!(u=h.n()).done;)d(u.value)}catch(e){h.e(e)}finally{h.f()}de.debug(\"Starting a new getMediaDevices after userMediaSuccess\"),apiCC.mediaDeviceMgr.getMediaDevices(\"updatedAfterGetUserMediaSuccess\"),t.callbacks.success(t)}))},this.updateMediaProperties=function(e){var t=!1,i=\"Unknown\",a=\"Unknown\",n=!1,r=\"Unknown\";e.getAudioTracks().length>0&&(t=!0,e.getAudioTracks()[0].label&&(i=e.getAudioTracks()[0].label,a=e.getAudioTracks()[0].id,this.listenToAudio2(e))),e.getVideoTracks().length>0&&(n=!0,e.getVideoTracks()[0].label&&(r=e.getVideoTracks()[0].label)),this.audio=t,this.audioDeviceLabel=i,this.audioDeviceId=a,this.video=n,this.videoDeviceLabel=r},this.listenToAudio=function(e){de.debug(\"listenToAudio()\");for(var t=apiCC.getAudioContext(),i=this,a=!1,n=[],r=0;r<10;r++)n.push(0);null!=t?(this.javascriptNode=t.createScriptProcessor(2048,1,1),this.sourceNode=t.createMediaStreamSource(e),!0===apiCC.activeSpeakerDetect&&(de.debug(\"activespeakerDetecting\"),this.javascriptNode.connect(t.destination),this.javascriptNode.onaudioprocess=function(){var t,r,o,s=new Uint8Array(this.analyser.frequencyBinCount),l=0;for(this.analyser.getByteFrequencyData(s),r=0;r<s.length;r++)l+=s[r];var d=0;if((o={amplitude:l/s.length,active:e.active}).amplitude>apiCC.activeSpeakerThreshold&&!a){for(t=n.length-3;t<n.length;t++)d+=n[t];d>=2&&(a=!0,i.notifyActiveSpeaker(o.amplitude))}else if(o.amplitude<apiCC.activeSpeakerThreshold&&a){for(t=n.length-3;t<n.length;t++)d+=n[t];0===d&&(a=!1,i.notifyNotActiveSpeaker(o.amplitude))}n.push(0+(o.amplitude>apiCC.activeSpeakerThreshold))},this.javascriptNode.analyser=t.createAnalyser(),this.javascriptNode.analyser.smoothingTimeConstant=.3,this.javascriptNode.analyser.fftSize=1024,this.sourceNode.connect(this.javascriptNode.analyser),this.javascriptNode.analyser.connect(this.javascriptNode))):de.debug(\"listenToAudioSources() - Unable to create audio context\")},this.listenToAudio2=function(e){de.debug(\"listenToAudio2()\");var t=apiCC.getAudioContext(),i=this,a=null,n=!1;null!=t?(this.javascriptNode=t.createScriptProcessor(2048,1,1),this.sourceNode=t.createMediaStreamSource(e),!0===apiCC.activeSpeakerDetect&&(de.debug(\"activeSpeakerDetecting\"),this.javascriptNode.connect(t.destination),this.javascriptNode.onaudioprocess=function(){var e,t,r=new Uint8Array(this.analyser.frequencyBinCount),o=0;for(this.analyser.getByteFrequencyData(r),r.sort((function(e,t){return t-e})),r=r.slice(0,50),t=0;t<r.length;t++)o+=r[t];(e=o/r.length)>apiCC.activeSpeakerThreshold&&(n||(n=!0,i.notifyActiveSpeaker(e)),null!==a&&clearTimeout(a),a=setTimeout((function(){i.notifyNotActiveSpeaker(e),n=!1}),1e3))},this.javascriptNode.analyser=t.createAnalyser(),this.javascriptNode.analyser.smoothingTimeConstant=.5,this.javascriptNode.analyser.fftSize=1024,this.sourceNode.connect(this.javascriptNode.analyser),this.javascriptNode.analyser.connect(this.javascriptNode))):de.debug(\"listenToAudioSources() - Unable to create audio context\")},this.manageFailure=function(e){var t={};\"object\"===oe(e)?(t.message=e.message,t.code=e.code,t.name=e.name):t=e,this.callbacks.failure(this,t)},this.onUserMediaError=function(e){var t=function(e){for(var t=apiCC.userMediaStreamTable.length;--t>=0;)if(apiCC.userMediaStreamTable[t].userMediaStreamId===e){apiCC.userMediaStreamTable.splice(t,1);break}},i=null,a=this.getOwnerCallInfo();if(de.info(\"[ApiCCUserMediaStream] onUserMediaError; userMediaStreamId: \"+this.userMediaStreamId+\", error: \"+e),null!==this.getUserMediaTimeoutId&&(\"timeout\"!==e&&clearTimeout(this.getUserMediaTimeoutId),this.getUserMediaTimeoutId=null),\"electron\"!==n.$6&&\"Chrome\"===n.Xh&&n.PR>47&&\"https:\"!==window.location.protocol&&de.error(\"HTTPS is now mandatory to use getUserMedia()\"),null!==a&&(i=a.callId),\"media\"===this.callType&&\"iOS\"===n.ag.name&&\"Mobile Safari\"===n.Xh&&!1===this.iOSMediaSelectionWorkAroundApplied||ce.createUserMediaErrorEvent(null!==i,this.callType,e,this.userMediaStreamId,i,this.tryAudioCallAfterUserMediaError,this.gum_config),\"timeout\"!==e&&\"media\"===this.callType)if(\"iOS\"===n.ag.name&&\"Mobile Safari\"===n.Xh&&!1===this.iOSMediaSelectionWorkAroundApplied){de.warn(\"try mediaDevice selection workaround on iOS / Mobile Safari - after MediaError\"),this.iOSMediaSelectionWorkAroundApplied=!0,this.gum_config.video={};var r=apiCC.getMediaDeviceLabelFromDeviceid(this.inputs.videoSourceId);de.log(\"getMediaDeviceLabelFromDeviceid :\",r),\"Camra arrire\"===r||\"Back Camera\"===r?(de.log(\"Setting FacingMode to environment :\",r),this.gum_config=apiCC.setVideoFacingModeInConstraint(\"environment\",this.gum_config)):(de.log(\"Setting FacingMode to user :\",r),this.gum_config=apiCC.setVideoFacingModeInConstraint(\"user\",this.gum_config)),this.inputs.videoSourceId=null,this.getUserMedia()}else!0===this.tryAudioCallAfterUserMediaError?(de.warn(\"try AudioCall after UserMediaError is activated\"),this.tryAudioCallAfterUserMediaError=!1,!1!==this.gum_config.video?(de.debug(\"[ApiCCUserMediaStream] Trying to getUserMedia with audioOnly\"),this.inputs.videoSourceId=null,this.gum_config.video=!1,this.getUserMedia()):(t(this.userMediaStreamId),this.manageFailure(e))):(t(this.userMediaStreamId),this.manageFailure(e));else t(this.userMediaStreamId),this.manageFailure(e)},this.getDisplayMediaProcess=function(){var e=this;de.debug(\"using getDisplayMedia with browser :\",n.Xh),de.debug(\"displayMediaStreamConstraints :\",this.displayMediaStreamConstraints),\"object\"===oe(this.displayMediaStreamConstraints)&&!0!==Array.isArray(this.displayMediaStreamConstraints)||(de.warn(\"Defined displayMediaStreamConstraints format is not correct, reinitialization ...\"),\"chrome\"===r.wL.type&&r.wL.version>=72&&r.wL.version<=73?this.displayMediaStreamConstraints={video:!0,audio:!1}:this.displayMediaStreamConstraints={video:!0,audio:!0},de.debug(\"displayMediaStreamConstraints :\",this.displayMediaStreamConstraints)),navigator.getDisplayMedia?(de.debug(\"navigator.getDisplayMedia defined\"),navigator.getDisplayMedia(this.displayMediaStreamConstraints).then((function(t){de.debug(\"getDisplayMedia stream available\"),e.onUserMediaSuccess(t)})).catch((function(t){de.debug(\"getDisplayMedia error :\",t),e.onUserMediaError(t)}))):navigator.mediaDevices.getDisplayMedia?(de.debug(\"navigator.mediaDevices.getDisplayMedia defined\"),navigator.mediaDevices.getDisplayMedia(this.displayMediaStreamConstraints).then((function(t){de.debug(\"getDisplayMedia stream available\"),e.onUserMediaSuccess(t)})).catch((function(t){de.debug(\"getDisplayMedia error :\",t),e.onUserMediaError(t)}))):(de.debug(\"getDisplayMedia not available\"),ce.createDesktopCaptureEvent(\"Browser_Not_Compatible\"))},this.getScreenMedia=function(){if(de.debug(\"[ApiCCUserMediaStream] getScreenMedia; userMediaStreamId: \"+this.userMediaStreamId),null===this.stream)if(\"Chrome\"===n.Xh||\"Firefox\"===n.Xh&&n.PR>=52)if(\"Chrome\"===n.Xh)if(de.log(\"shareScreen on Chrome\"),n.PR>=72&&!1===this.forceExtensionOnChrome)this.getDisplayMediaProcess();else{if(de.debug(\"this.captureSourceType :\",this.captureSourceType),!1===apiCC.apiRTCExtensionInstalled)return apiCC.waitingShareScreenUserMediaStreamId=this.userMediaStreamId,function(e){de.debug(\"[ApiCCUserMediaStream] moveUserMediaEntryInWaitingScreen: \"+e);for(var t=apiCC.userMediaStreamTable.length;--t>=0;)if(apiCC.userMediaStreamTable[t].userMediaStreamId===e){apiCC.waitingShareScreenUserMediaStream=apiCC.userMediaStreamTable.splice(t,1);break}}(this.userMediaStreamId),void apiCC.manageNotInstalledExtension(\"getScreenMedia\",\"getScreenMedia\",this.captureSourceType);void 0!==this.captureSourceType&&null!==this.captureSourceType||(this.captureSourceType=[\"screen\",\"window\",\"tab\"]),!1===Array.isArray(this.captureSourceType)&&(de.warn(\"Defined captureSourceType format is not correct, reinitialization ...\"),this.captureSourceType=[\"screen\",\"window\",\"tab\"],de.debug(\"this.captureSourceType :\",this.captureSourceType)),window.postMessage({command:\"getDesktopId\",callNumber:this.userMediaStreamId,remoteId:\"getScreenMedia\",captureSourceType:this.captureSourceType,browser_major_version:n.PR},\"*\")}else de.log(\"shareScreen on Firefox\"),n.PR>=67?this.getDisplayMediaProcess():(void 0!==this.captureSourceType&&null!==this.captureSourceType||(this.captureSourceType=\"screen\"),\"string\"==typeof this.captureSourceType&&(de.warn(\"Defined captureSourceType format is not correct, reinitialization ...\"),this.captureSourceType=\"screen\",de.debug(\"this.captureSourceType :\",this.captureSourceType)),this.registerScreenMedia(this.captureSourceType));else this.getDisplayMediaProcess()},this.registerScreenMedia=function(e,t){var i=null,a=this.getOwnerCallInfo(),r=this.getCall(a),o=null;if(de.debug(\"[ApiCCUserMediaStream] registerScreenMedia; userMediaStreamId: \"+this.userMediaStreamId),\"mediaError\"===t)null!==r?(o=!0===r.callee?r.callerId:r.calleeId,\"screenSharing\"===r.callType||\"screenSharingWithAudio\"===r.callType?apiCC.session.apiCCWebRTCClient.webRTCClient.removeCallFromTableWithCallIdandRemoteId(r.callId,o,\"Media_Error\"):de.log(\"switch video / screen : call is not removed\"),\"https:\"!==window.location.protocol&&de.log(\"Please connect to your web page using 'HTTPS'. This is mandatory for desktop capture\"),ce.createDesktopCaptureEvent(\"UserMediaError\",r.callId,o)):(de.log(\"Call not found on message EventListener\"),ce.createDesktopCaptureEvent(\"UserMediaError\")),function(e){for(var t=apiCC.userMediaStreamTable.length;--t>=0;)if(apiCC.userMediaStreamTable[t].userMediaStreamId===e){apiCC.userMediaStreamTable.splice(t,1);break}}(this.userMediaStreamId),this.callbacks.failure(this,\"UserMediaError\");else try{if(\"Chrome\"===n.Xh)de.log(\"desktopId: \"+t),i={video:{mandatory:{chromeMediaSource:\"desktop\",chromeMediaSourceId:t}}};else{if(de.log(\"captureSourceType: \"+e),\"screen\"!==e&&\"window\"!==e&&\"application\"!==e)return void de.error(\"captureSourceType value is not correct\");i={video:{mediaSource:e}}}\"IE\"===n.Xh&&n.dc>8?apiCC.getUserMediaWithCB(i,this.callback(this,\"onUserMediaSuccess\"),this.callback(this,\"onUserMediaError\")):apiCC.getUserMedia(i).then(this.callback(this,\"onUserMediaSuccess\")).catch(this.callback(this,\"onUserMediaError\"))}catch(e){de.error(\"getUserMedia() failed. Is this a WebRTC capable browser?\"),de.log(\"getUserMedia failed with exception: \"+e.message)}},this.stopScreenSharing=function(){de.debug(\"[ApiCCUserMediaStream] stopScreenSharing; userMediaStreamId: \"+this.userMediaStreamId);var e=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var t=this.callInfoList.length;--t>=0;)!0===this.callInfoList[t].owner&&(e=!1),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(this.callInfoList[t].callId);!0===e&&this.release()},this.getCall=function(e){var t=null;return e&&apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient&&(\"call\"===e.flavor?t=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(e.callId):\"userMedia\"===e.flavor&&(t=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(e.callId))),t},this.getOwnerCallInfo=function(){for(var e=this.callInfoList.length;--e>=0;)if(!0===this.callInfoList[e].owner)return this.callInfoList[e];return null},this.getCallInfo=function(e){for(var t=this.callInfoList.length;--t>=0;)if(this.callInfoList[t].callId===e)return this.callInfoList[t];return null},this.containsCallInfo=function(e){for(var t=!1,i=this.callInfoList.length;--i>=0;)if(this.callInfoList[i].callId===e){t=!0;break}return t},this.addCallInfo=function(e,t,i){return null!==e&&\"string\"==typeof e&&(\"call\"!==t&&\"userMedia\"!==t&&(t=\"call\"),null!==i&&\"boolean\"==typeof i||(i=!1),!this.containsCallInfo(e))&&(this.callInfoList.push({callId:e,flavor:t,owner:i}),!0)},this.removeCallInfo=function(e){for(var t=!1,i=this.callInfoList.length;--i>=0;)if(this.callInfoList[i].callId===e){this.callInfoList.splice(i,1),t=!0;break}return t},this.accessToLocalMedia=function(){return\"screenSharing\"!==this.callType&&\"screenSharingWithAudio\"!==this.callType&&\"data\"!==this.callType&&null!==this.stream},this.muteAudioOnStreams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"enabled\";return de.debug(\"[ApiCCUserMediaStream] muteAudioOnStreams; userMediaStreamId: \"+this.userMediaStreamId),this.stream.getAudioTracks().forEach((function(e){e.enabled=!1})),\"enabled\"===e?this.audioMuted=!0:\"muted\"===e&&(this.audioSilent=!0),this.notifyMLineMuted(\"audio\",!0,e),{type:\"audio\",muted:!0}},this.unMuteAudioOnStreams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"enabled\";return de.debug(\"[ApiCCUserMediaStream] unMuteAudioOnStreams; userMediaStreamId: \"+this.userMediaStreamId),this.stream.getAudioTracks().forEach((function(e){e.enabled=!0})),\"enabled\"===e?this.audioMuted=!1:\"muted\"===e&&(this.audioSilent=!1),this.notifyMLineMuted(\"audio\",!1,e),{type:\"audio\",muted:!1}},this.muteVideoOnStreams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"enabled\";return de.debug(\"[ApiCCUserMediaStream] muteVideoOnStreams; userMediaStreamId: \"+this.userMediaStreamId),this.stream.getVideoTracks().forEach((function(e){e.enabled=!1})),\"enabled\"===e?this.videoMuted=!0:\"muted\"===e&&(this.videoSilent=!0),this.notifyMLineMuted(\"video\",!0,e),{type:\"video\",muted:!0}},this.unMuteVideoOnStreams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"enabled\";return de.debug(\"[ApiCCUserMediaStream] unMuteVideoOnStreams; userMediaStreamId: \"+this.userMediaStreamId),this.stream.getVideoTracks().forEach((function(e){e.enabled=!0})),\"enabled\"===e?this.videoMuted=!1:\"muted\"===e&&(this.videoSilent=!1),this.notifyMLineMuted(\"video\",!1,e),{type:\"video\",muted:!1}},this.removeVideoTrackOnStreams=function(){var e;return de.debug(\"[ApiCCUserMediaStream] removeVideoTrackOnStreams; userMediaStreamId: \"+this.userMediaStreamId),(e=this.stream.getVideoTracks()).length>0&&this.stream.removeTrack(e[0]),this.video=!1,{type:\"video\",present:!1}},this.notifyMLineMuted=function(e,t,i){var a,n,r=!0,o={eventType:\"muteUnmuteEvent\",source:\"local\",mLine:e},s=function(){de.debug(\"getCallIdAndUsername\");var e=\"\",t=\"\";apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.forEach((function(e){t=e.callId}));var i=apiCC.Session.getActiveSession();if(null!==i){var a=i.getUserAgent();null!=a&&(e=a.username)}var n={callId:t,username:e};return de.debug(\"getCallIdAndUsername result:\",n),n}();if(o.callId=s.callId,o.username=s.username,o.state=t?\"mute\":\"unmute\",o.muteType=\"muted\"===i?\"hardware\":\"applicatif\",apiCC.sendSentryEvent(o),apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var l=this.callInfoList.length;--l>=0;)\"call\"===this.callInfoList[l].flavor?(a=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[l].callId),this.notifyMLineMutedCall(e,t,i,a,null)):\"userMedia\"===this.callInfoList[l].flavor&&(n=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[l].callId),this.notifyMLineMutedCall(e,t,i,null,n)),!0===this.callInfoList[l].owner&&(r=!1);!0===r&&this.notifyMLineMutedCall(e,t,i,null,null)},this.notifyMLineMutedCall=function(e,t,i,a,n){de.debug(\"notifyMLineMutedCall; mline: \"+e+\", muted: \"+t);var r=[];\"enabled\"===i?r=[e+\"IsMuted\"]:\"muted\"===i&&(r=[e+\"IsSilent\"]);var o={available:this.audio,deviceLabel:this.audioDeviceLabel,active:!0,muted:this.audioMuted,silent:this.audioSilent},s={available:this.video,deviceLabel:this.videoDeviceLabel,active:!0,muted:this.videoMuted,silent:this.videoSilent},l=null;a?(\"audio\"===e?a.isLocalAudioMuted=t:\"video\"===e&&(a.isLocalVideoMuted=t),a.belongsToRoom()?(l={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:a.callId,roomId:a.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,mline:e},a.data.mesh&&(l.mesh=a.data.mesh),\"muted\"===i?(l.change=\"silent\",l.silent=t,a.myWebRTC_Stack.sendInfo(\"streamTrackStatusChanged\",l)):\"enabled\"===i&&(l.muted=t,a.myWebRTC_Stack.sendInfo(\"streamTrackChanged\",l))):(l={callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:a.callee?a.callerId:a.calleeId,callId:a.callId,mline:e},\"muted\"===i?(l.type=\"streamTrackStatusChanged\",l.change=\"silent\",l.silent=t):\"enabled\"===i&&(l.type=\"streamTrackChanged\",l.muted=t),a.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,l)),o.active=a.localCallProfile.audioActive,s.active=a.localCallProfile.videoActive,ce.createLocalStreamUpdatedEvent(r,o,s,!0,a.callType,a.callId,this.stream,this.userMediaStreamId,\"userAction\")):n?(l={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:n.userMediaId,roomId:n.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,mline:e},\"muted\"===i?(l.change=\"silent\",l.silent=t,n.myWebRTC_Stack.sendInfo(\"streamTrackStatusChanged\",l)):\"enabled\"===i&&(l.muted=t,n.myWebRTC_Stack.sendInfo(\"streamTrackChanged\",l)),\"inactive\"===n.audioSdpDirection&&(o.active=!1),\"inactive\"===n.videoSdpDirection&&(s.active=!1),ce.createLocalStreamUpdatedEvent(r,o,s,!0,n.callType,n.userMediaId,this.stream,this.userMediaStreamId,\"userAction\")):ce.createLocalStreamUpdatedEvent(r,o,s,!1,null,null,this.stream,this.userMediaStreamId,\"userAction\")},this.notifyActiveSpeaker=function(e){var t,i,a=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var n=this.callInfoList.length;--n>=0;)\"call\"===this.callInfoList[n].flavor?(t=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[n].callId),this.notifyActiveSpeakerCall(e,t,null)):\"userMedia\"===this.callInfoList[n].flavor&&(i=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[n].callId),this.notifyActiveSpeakerCall(e,null,i)),!0===this.callInfoList[n].owner&&(a=!1);!0===a&&this.notifyActiveSpeakerCall(e,null,null)},this.notifyActiveSpeakerCall=function(e,t,i){var a=null;t?(t.belongsToRoom()?(a={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:t.callId,roomId:t.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:e,streamID:this.userMediaStreamId}},t.data.mesh&&(a.mesh=t.data.mesh),t.myWebRTC_Stack.sendInfo(\"activeSpeaker\",a)):(a={type:\"activeSpeaker\",callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:t.callee?t.callerId:t.calleeId,callId:t.callId,descriptor:{audioAmplitude:e,streamID:this.userMediaStreamId}},t.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,a)),ce.createAudioAmplitudeEvent(e,!0,t.callId,this.userMediaStreamId)):i?(a={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:i.userMediaId,roomId:i.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:e,streamID:this.userMediaStreamId}},i.myWebRTC_Stack.sendInfo(\"activeSpeaker\",a),ce.createAudioAmplitudeEvent(e,!0,i.userMediaId,this.userMediaStreamId)):ce.createAudioAmplitudeEvent(e,!0,null,this.userMediaStreamId)},this.notifyNotActiveSpeaker=function(e){var t,i,a=!0;if(apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient)for(var n=this.callInfoList.length;--n>=0;)\"call\"===this.callInfoList[n].flavor?(t=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(this.callInfoList[n].callId),this.notifyNotActiveSpeakerCall(e,t,null)):\"userMedia\"===this.callInfoList[n].flavor&&(i=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(this.callInfoList[n].callId),this.notifyNotActiveSpeakerCall(e,null,i)),!0===this.callInfoList[n].owner&&(a=!1);!0===a&&this.notifyNotActiveSpeakerCall(e,null,null)},this.notifyNotActiveSpeakerCall=function(e,t,i){var a=null;t?(t.belongsToRoom()?(a={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:t.callId,roomId:t.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:e,streamID:this.userMediaStreamId}},t.data.mesh&&(a.mesh=t.data.mesh),t.myWebRTC_Stack.sendInfo(\"stopSpeaking\",a)):(a={type:\"stopSpeaking\",callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,calleeId:t.callee?t.callerId:t.calleeId,callId:t.callId,descriptor:{audioAmplitude:e,streamID:this.userMediaStreamId}},t.myWebRTC_Stack.sendDataMessage(apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,a)),ce.createAudioAmplitudeEvent(e,!1,t.callId,this.userMediaStreamId)):i?(a={clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:i.userMediaId,roomId:i.sessionMCU.roomName,pubSub:apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector,resolve:!0,descriptor:{audioAmplitude:e,streamID:this.userMediaStreamId}},i.myWebRTC_Stack.sendInfo(\"stopSpeaking\",a),ce.createAudioAmplitudeEvent(e,!1,i.userMediaId,this.userMediaStreamId)):ce.createAudioAmplitudeEvent(e,!1,null,this.userMediaStreamId)},this.callback=function(e,t){return this.closureHandler=function(i,a){return e[t](i,a)},this.closureHandler},this.isUserMediaAccessAllowed=function(){return null!==localStorage&&\"object\"===(\"undefined\"==typeof localStorage?\"undefined\":oe(localStorage))&&\"function\"==typeof localStorage.getItem?\"true\"===localStorage.getItem(ue):null},this.setUserMediaAccessAllowed=function(e){return null!==localStorage&&\"object\"===(\"undefined\"==typeof localStorage?\"undefined\":oe(localStorage))&&\"function\"==typeof localStorage.setItem?(localStorage.setItem(ue,e?\"true\":\"false\"),!!e):null},this.applyFiltersIfNeeded=function(e){return null===this.filters?Promise.resolve(e):(this.mediaFilterManager=new re(e,this.filters,this.userMediaStreamId),this.mediaFilterManager.applyFilters())},this.getVideoSettings=function(){if(!1!==this.videoSettings)return this.videoSettings;var e=this.getVideoTrack();if(!e||\"function\"!=typeof e.getSettings)return this.videoSettings=null,this.videoSettings;var t=e.getSettings();return t?(this.videoSettings={},Object.prototype.hasOwnProperty.call(t,\"width\")&&(this.videoSettings.width=t.width),Object.prototype.hasOwnProperty.call(t,\"height\")&&(this.videoSettings.height=t.height),Object.prototype.hasOwnProperty.call(t,\"frameRate\")&&(this.videoSettings.frameRate=t.frameRate),this.videoSettings):(this.videoSettings=null,this.videoSettings)},this.isSimulcastCompliant=function(){return!!this.getVideoSettings()},this.getSimulcastProfile=function(){var e=this.getVideoSettings();if(!e)return null;var t={substream:{high:{active:!0,selectable:!0},medium:{active:!0,selectable:!0},low:{active:!0,selectable:!0}},temporal:{high:{active:!0,selectable:!0},medium:{active:!0,selectable:!0},low:{active:!0,selectable:!0}}};return\"chrome\"===r.wL.type&&((e.width<1280||e.height<720)&&(t.substream.low.selectable=!1),t.temporal.high.active=!1,t.temporal.high.selectable=!1),t}}},5882:(e,t,i)=>{\"use strict\";i.d(t,{D:()=>$}),i(3710),i(1539),i(9714),i(2772),i(8674);var a=i(1549),n=(i(4916),i(5306),i(2564),i(4812),i(561),i(9554),i(4747),i(5735),i(3753),i(4603),i(6755),i(6992),i(8783),i(3948),i(4765),i(9601),i(8309),i(8264),i(9575),i(2472),i(2990),i(8927),i(3105),i(5035),i(4345),i(7174),i(2846),i(4731),i(7209),i(6319),i(8867),i(7789),i(3739),i(9368),i(4483),i(2056),i(3462),i(678),i(7462),i(3824),i(5021),i(2974),i(5016),i(7042),i(7941),i(2526),i(1817),i(2165),i(5945)),r=i(4708),o=i(940);function s(e){return s=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},s(e)}function l(){this.sdp={original:null,global:[],mlines:[]},this.mlines=[]}function d(e){var t=new l,i=e.split(\"\\r\\n\"),a=0,n=null,r=null,o=null,s=null;for(t.sdp.original=e;a<i.length;)if(0!==(n=i[a]).length)if(null!==o)if(n.match(/^m=/))r=null,o=null;else if(n.match(/^a=/)){if(r.push(n),!(s=n.match(/^a=([\\w-]+):(\\d+) (.+)$/))||\"rtpmap\"!==s[1]&&\"rtcp-fb\"!==s[1]&&\"fmtp\"!==s[1]){if(s=n.match(/^a=mid:(\\w+)$/))o.mid=s[1];else if(\"a=sendrecv\"===n)o.direction=\"sendrecv\";else if(\"a=recvonly\"===n)o.direction=\"recvonly\";else if(\"a=sendonly\"===n)o.direction=\"sendonly\";else if(\"a=inactive\"===n)o.direction=\"inactive\";else if(s=n.match(/^a=ssrc-group:SIM (.+)$/)){var d=s[1].split(\" \");o.ssrc_groups.sim.push(d.slice())}else if(s=n.match(/^a=ssrc-group:FID (.+)$/)){var u=s[1].split(\" \");o.ssrc_groups.fid.push(u.slice())}else if(s=n.match(/^a=ssrc:(\\d+) (.+)$/)){var h=o.ssrcs.find((function(e){return e.original===s[1]}));h||(h={original:s[1],ssrc:s[1],content:{}},o.ssrcs.push(h));var p=s[2].match(/^(\\w+):(.+)$/);if(!p)throw new Error(\"cannot parse ssrc parameters (regex failure): \"+s[2]);if(\"cname\"===p[1])h.content.cname=p[2];else if(\"msid\"===p[1])h.content.msid=p[2];else if(\"mslabel\"===p[1])h.content.mslabel=p[2];else{if(\"label\"!==p[1])throw new Error(\"cannot parse ssrc parameters (wrong attribute): \"+p[1]);h.content.label=p[2]}}}else if(\"rtpmap\"===s[1])o.codecs[s[2]].codec=s[3].split(\"/\")[0].toLowerCase(),o.codecs[s[2]].rtpmap=s[3];else if(\"rtcp-fb\"===s[1])o.codecs[s[2]][\"rtcp-fb\"]||(o.codecs[s[2]][\"rtcp-fb\"]=[]),o.codecs[s[2]][\"rtcp-fb\"].push(s[3]);else if(\"fmtp\"===s[1]){o.codecs[s[2]].fmtp=[];for(var g=s[3].split(\";\"),m=0;m<g.length;m+=1){var C=g[m].split(\"=\");2===C.length&&o.codecs[s[2]].fmtp.push(C)}}a+=1}else if(n.match(/^b=/)){if(r.push(n),s=n.match(/^b=AS:(\\d+)$/)){o.bandwidth=parseInt(s[1],10),a+=1;continue}a+=1}else r.push(n),a+=1;else{if(s=n.match(/^m=([a-z]+) (\\d+) ([A-Z/]+) ([0-9 ]+)$/)){r=[],t.sdp.mlines.push(r),r.push(n),o={type:s[1],port:parseInt(s[2],10),proto:s[3],payload_types:[],direction:\"sendrecv\",mid:s[1],bandwidth:0,codecs:{},ssrc_groups:{sim:[],fid:[]},ssrcs:[]};for(var f=s[4].split(\" \"),v=0;v<f.length;v+=1)o.payload_types.push(f[v]),o.codecs[f[v]]={};t.mlines.push(o),a+=1;continue}t.sdp.global.push(n),a+=1}else a+=1;for(t.unifiedPlan=!0,a=t.mlines.length;--a>=0;)\"audio\"!==t.mlines[a].type||t.audio?\"video\"!==t.mlines[a].type||t.video||(t.video=t.mlines[a]):t.audio=t.mlines[a],!0===t.unifiedPlan&&t.mlines[a].mid!==String(a)&&(t.unifiedPlan=!1);return t.isAudioActive=c.bind(null,t,\"audio\"),t.isVideoActive=c.bind(null,t,\"video\"),t}function c(e,t){return!(\"audio\"!==t&&\"video\"!==t||null===e||\"object\"!==s(e)||!Object.prototype.hasOwnProperty.call(e,t)||null===e[t]||\"object\"!==s(e[t])||\"sendrecv\"!==e[t].direction&&\"sendonly\"!==e[t].direction&&\"recvonly\"!==e[t].direction)}i(3123),i(4723),i(9600),i(1058),i(9826),l.prototype.mungeForSimulcasting=function(){if(!0!==this.simulcasting){this.simulcasting=!0;for(var e=0;e<this.mlines.length;e+=1){var t=this.mlines[e];if(\"video\"===t.type){var i=t.ssrcs[0].content.cname,a=t.ssrcs[0].content.msid,n=t.ssrcs[0].content.mslabel,r=t.ssrcs[0].content.label,o=[];o.push(t.ssrcs[0].ssrc);for(var s=2;--s>=0;){var l=Math.floor(4294967295*Math.random());t.ssrcs.push({original:l,ssrc:l,content:{cname:i,msid:a,mslabel:n,label:r}});var d=Math.floor(4294967295*Math.random());t.ssrcs.push({original:d,ssrc:d,content:{cname:i,msid:a,mslabel:n,label:r}}),t.ssrc_groups.fid.push([l,d]),o.push(l)}t.ssrc_groups.sim.push(o)}}}},l.prototype.generate=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[],i=0;i<this.sdp.global.length;i+=1){var a=this.sdp.global[i],n=a.match(/^a=group:BUNDLE([\\w ]+)$/);if(n){t.push(\"a=group:BUNDLE\");for(var r=0;r<this.mlines.length;r+=1)\"inactive\"===this.mlines[r].direction&&!0===e.stripInactiveMLines||(t.push(\" \"),t.push(this.mlines[r].mid));t.push(\"\\r\\n\")}else t.push(a),t.push(\"\\r\\n\")}for(var o=0;o<this.sdp.mlines.length;o+=1){var s=this.mlines[o];if(\"inactive\"!==s.direction||!0!==e.stripInactiveMLines)for(var l=!1,d=this.sdp.mlines[o],c=0;c<d.length;c+=1){var u=d[c];if(u.match(/^m=/))t.push(\"m=\"),t.push(s.type),t.push(\" \"),t.push(s.port),t.push(\" \"),t.push(s.proto),t.push(\" \"),t.push(s.payload_types.join(\" \")),t.push(\"\\r\\n\");else if(u.match(/^a=/)){var h=u.match(/^a=([\\w-]+):(\\d+) (.+)$/);if(h&&(\"rtpmap\"===h[1]||\"rtcp-fb\"===h[1]||\"fmtp\"===h[1])){if(\"rtpmap\"===h[1]){var p=h[2];if(s.codecs[p]){t.push(\"a=rtpmap:\"),t.push(p),t.push(\" \"),t.push(s.codecs[p].rtpmap),t.push(\"\\r\\n\");var g=s.codecs[p][\"rtcp-fb\"];if(g)for(var m=0;m<g.length;m+=1)t.push(\"a=rtcp-fb:\"),t.push(p),t.push(\" \"),t.push(g[m]),t.push(\"\\r\\n\");var C=s.codecs[p].fmtp;if(C){for(var f=[],v=0;v<C.length;v+=1)f.push(C[v].join(\"=\"));f.length>0&&(t.push(\"a=fmtp:\"),t.push(p),t.push(\" \"),t.push(f.join(\";\")),t.push(\"\\r\\n\"))}continue}continue}if(\"rtcp-fb\"===h[1]||\"fmtp\"===h[1])continue;throw new Error(\"internal error\")}if(u.match(/^a=mid:(\\w+)$/))t.push(\"a=mid:\"),t.push(s.mid),t.push(\"\\r\\n\"),s.bandwidth>0&&(t.push(\"b=AS:\"),t.push(s.bandwidth),t.push(\"\\r\\n\"),t.push(\"b=TIAS:\"),t.push(s.bandwidth),t.push(\"000\"),t.push(\"\\r\\n\"));else if(\"a=sendrecv\"!==u&&\"a=recvonly\"!==u&&\"a=sendonly\"!==u&&\"a=inactive\"!==u){if(u.match(/^a=ssrc-group:SIM (.+)$/));else if(!u.match(/^a=ssrc-group:FID (.+)$/)){if(u.match(/^a=ssrc:(\\d+) (.+)$/)){if(l)continue;l=!0;for(var b=0;b<s.ssrc_groups.sim.length;b+=1)t.push(\"a=ssrc-group:SIM \"),t.push(s.ssrc_groups.sim[b].join(\" \")),t.push(\"\\r\\n\");for(var S=0;S<s.ssrc_groups.fid.length;S+=1)t.push(\"a=ssrc-group:FID \"),t.push(s.ssrc_groups.fid[S].join(\" \")),t.push(\"\\r\\n\");for(var y=function(e){var i=s.ssrcs[e];[\"cname\",\"msid\",\"mslabel\",\"label\"].forEach((function(e){Object.prototype.hasOwnProperty.call(i.content,e)&&(t.push(\"a=ssrc:\"),t.push(i.ssrc),t.push(\" \"),t.push(e),t.push(\":\"),t.push(i.content[e]),t.push(\"\\r\\n\"))}))},I=0;I<s.ssrcs.length;I+=1)y(I);continue}t.push(u),t.push(\"\\r\\n\");continue}}else t.push(\"a=\"),t.push(s.direction),t.push(\"\\r\\n\")}else{if(u.match(/^b=/))continue;t.push(u),t.push(\"\\r\\n\")}}}return t.join(\"\")};var u=a.Y.get(\"SDPManager\"),h=function(){u.debug(\"SDPManager\"),this.getSDPLines=function(e){u.debug(\"SDPManager::getSDPLines\");var t,i=e.split(\"\\r\\n\");for(t=0;t<i.length;t+=1)u.log(\"sdpLines[i] : \"+i[t]);return i},this.getAudioMediaDescriptionPart=function(e){u.debug(\"SDPManager::getAudioMediaDescriptionPart\");var t=e.split(\"m=audio\"),i=null;return void 0!==t[1]&&null!==t[1]?(i=t[1].split(\"m=video\"),u.log(\"SDP audio part : \"+i[0]),i[0]):null},this.getVideoMediaDescriptionPart=function(e){u.debug(\"SDPManager::getVideoMediaDescriptionPart\");var t,i=e.split(\"m=video\");for(t=0;t<i.length;t+=1)u.log(\"sdpMediaPart[i] : \"+i[t]);return i[1]},this.searchMediaDescriptionForRecvOnly=function(e){return u.debug(\"searchMediaDescriptionForRecvOnly\"),-1!==e.search(\"a=recvonly\")?(u.log(\"recvonly found in media description\"),!0):(u.log(\"recvonly not found in media description\"),!1)},this.searchSDPForRecvOnly=function(e){return void 0!==e?(u.log(\"sdpPart !== undefined\"),this.searchMediaDescriptionForRecvOnly(e)):(u.log(\"recvonly not found in SDP\"),!1)},this.searchMediaDescriptionForSendOnly=function(e){return u.debug(\"searchMediaDescriptionForSendOnly\"),-1!==e.search(\"a=sendonly\")?(u.log(\"sendonly found in media description\"),!0):(u.log(\"sendonly not found in media description\"),!1)},this.searchSDPForSendOnly=function(e){return void 0!==e?(u.log(\"sdpPart !== undefined\"),this.searchMediaDescriptionForSendOnly(e)):(u.log(\"sendonly not found in SDP\"),!1)},this.searchMediaDescriptionForInactive=function(e){return u.debug(\"searchMediaDescriptionForInactive\"),-1!==e.search(\"a=inactive\")?(u.log(\"inactive found in media description\"),!0):(u.log(\"inactive not found in media description\"),!1)},this.searchSDPForInactive=function(e){return void 0!==e?(u.log(\"sdpPart !== undefined\"),this.searchMediaDescriptionForInactive(e)):(u.log(\"inactive not found in SDP\"),!1)},this.stripAudioMediaDescriptionFromSDP=function(e){u.debug(\"SDPManager::stripAudioMediaDescriptionFromSDP\");var t=this.createGuideline(e);return t.audio?(t.audio.direction=\"inactive\",t.generate({stripInactiveMLines:!0})):e},this.stripVideoMediaDescriptionFromSDP=function(e){u.debug(\"SDPManager::stripVideoMediaDescriptionFromSDP\");var t=this.createGuideline(e);return t.video?(t.video.direction=\"inactive\",t.generate({stripInactiveMLines:!0})):e},this.setAudioBandwidth=function(e,t){return u.info(\"SDPManager::setAudioBandwidth\",t),t?e=e.replace(/a=mid:audio\\r\\n/g,\"a=mid:audio\\r\\nb=AS:\"+t+\"\\r\\n\"):(u.warn(\"No maxAudioBW !\"),e)},this.setVideoBandwidth=function(e,t){if(u.info(\"SDPManager::setVideoBandwidth\",t),!t)return u.warn(\"No maxVideoBW !\"),e;for(var i=[],a=e.split(\"\\r\\n\"),n=0,r=null,o=null;n<a.length;)if(0!==(r=a[n]).length)if(null!==o)r.match(/^m=/)?o=null:r.match(/^a=mid:(\\w+)$/)?(i.push(r),i.push(\"\\r\\n\"),i.push(\"b=AS:\"),i.push(t),i.push(\"\\r\\n\"),i.push(\"b=TIAS:\"),i.push(t),i.push(\"000\"),i.push(\"\\r\\n\"),n+=1):(r.match(/^b=([A-Z]+):(\\w+)$/)||(i.push(r),i.push(\"\\r\\n\")),n+=1);else{var s=r.match(/^m=([a-z]+)(.+)$/);if(s&&\"video\"===s[1]){o=\"video\",i.push(r),i.push(\"\\r\\n\"),n+=1;continue}i.push(r),i.push(\"\\r\\n\"),n+=1}else n+=1;return i.join(\"\")},this.setDataBandwidth=function(e,t){return u.info(\"SDPManager::setDataBandwidth\",t),t?e=e.replace(/a=mid:data\\r\\n/g,\"a=mid:data\\r\\nb=AS:\"+t+\"\\r\\n\"):(u.warn(\"No maxDataBW !\"),e)},this.setSendOnlyForAudio=function(e){u.debug(\"SDPManager::setSendOnlyForAudio\");var t=this.createGuideline(e);return(0,r.ki)(t,\"audio\",\"object\")&&(t.audio.direction=\"sendonly\"),t.generate()},this.setSendOnlyForVideo=function(e){u.debug(\"SDPManager::setSendOnlyForVideo\");var t=this.createGuideline(e);return(0,r.ki)(t,\"video\",\"object\")&&(t.video.direction=\"sendonly\"),t.generate()},this.setSendOnly=function(e){u.debug(\"SDPManager::setSendOnly : global\");var t=this.createGuideline(e);return(0,r.ki)(t,\"audio\",\"object\")&&(t.audio.direction=\"sendonly\"),(0,r.ki)(t,\"video\",\"object\")&&(t.video.direction=\"sendonly\"),t.generate()},this.setRecvOnlyForAudio=function(e){u.debug(\"SDPManager::setRecvOnlyForAudio\");var t=this.createGuideline(e);return t.audio&&\"inactive\"!==t.audio.direction&&(t.audio.direction=\"recvonly\"),t.generate()},this.setRecvOnlyForVideo=function(e){u.debug(\"SDPManager::setRecvOnlyForVideo\");var t=this.createGuideline(e);return t.video&&\"inactive\"!==t.video.direction&&(t.video.direction=\"recvonly\"),t.generate()},this.setRecvOnly=function(e){u.debug(\"SDPManager::setRecvOnly : global\");var t=this.createGuideline(e);return t.audio&&\"inactive\"!==t.audio.direction&&(t.audio.direction=\"recvonly\"),t.video&&\"inactive\"!==t.video.direction&&(t.video.direction=\"recvonly\"),t.generate()},this.updateSDPcodecs=function(e,t,i,a){var n,r,o,s,l,d,c,h,p=!1,g=new RegExp(\"\\r\\n$\"),m=!1,C=null,f=\"\",v=\"\",b=\"\",S=\"\",y=\"\",I=\"\",T=\"\",R=\"\";if(u.log(\"updateSDPcodecs():\\n\\tsdpType = \"+t+\"\\n\\tmediaType = \"+i+\"\\n\\tavailableCodecSet = \"+a+\"\\n\"),\"\"==a)return e;for(o=(o=RTCSessionDescription&&e instanceof RTCSessionDescription?e.sdp:window.SessionDescription&&e instanceof SessionDescription?e.toSdp():e).split(\"\\r\\nm=\"),!1===g.test(o[o.length-2])&&(o[o.length-2]=o[o.length-2]+\"\\r\\n\",m=!0),n=0;n<o.length;n++)if(0===o[n].indexOf(i)){for(C=o[n].split(\"\\r\\n\")[0].split(\" \"),r=3;r<C.length;r++)if(s=!0,!1===isNaN(C[r])){switch(v=\"a=rtpmap:\"+C[r]+\" \",-1!==(l=o[n].indexOf(v))&&(d=o[n].indexOf(\"\\r\\n\",l)),C[r]){case 0:f=\"PCMU/8000\";break;case 8:f=\"PCMA/8000\";break;case 9:f=\"G722/8000\";break;case 13:f=\"CN/8000\";break;case 18:f=\"G729/8000\";break;default:-1!==l&&(f=o[n].substring(l+v.length,d))}\"\"!=f&&-1!==a.indexOf(f)?u.log(\"PT(\"+C[r]+\"): \"+f+\" FOUND in availableCodecSet.\\n\"):(s=!1,u.log(\"PT(\"+C[r]+\"): \"+f+\" NOT FOUND in availableCodecSet.\\n\")),s||(b=v+\".*\\r\\n\",S=\"a=fmtp:\"+C[r]+\" .*\\r\\n\",T=\"a=rtcp-fb:\"+C[r]+\" .*\\r\\n\",y=\" \"+C[r]+\" \",I=\" \"+C[r]+\"\\r\",o[n]=o[n].replace(new RegExp(b,\"g\"),\"\"),o[n]=o[n].replace(new RegExp(S,\"g\"),\"\"),o[n]=o[n].replace(new RegExp(T,\"g\"),\"\"),(h=(c=o[n].split(\"\\n\"))[0].split(\"RTP\"))[1]=h[1].replace(y,\" \"),h[1]=h[1].replace(I,\"\\r\"),c[0]=h.join(\"RTP\"),o[n]=c.join(\"\\n\"),\"video\"===i&&(T=\"a=rtcp-fb:\"+C[r]+\" .*\\r\\n\",o[n]=o[n].replace(new RegExp(T,\"g\"),\"\"),\"\"!=f&&\"rtx/\"===f.substr(0,4)&&(R=\"a=ssrc-group:FID .*\\r\\n\",o[n]=o[n].replace(new RegExp(R,\"g\"),\"\"),(c=o[n].split(\"\\r\\na=\")).splice(c.length-8,4),o[n]=c.join(\"\\r\\na=\"))),p=!0)}break}return m&&(o[o.length-2]=o[o.length-2].substr(0,o[o.length-2].length-2)),o=o.join(\"\\r\\nm=\"),!0===p?(u.log(\"updateSDPcodecs(), SDP has been updated.\"),RTCSessionDescription&&e instanceof RTCSessionDescription?new RTCSessionDescription({type:t,sdp:o}):window.SessionDescription&&e instanceof SessionDescription?new SessionDescription(o):o):(u.log(\"updateSDPcodecs(), SDP has not been updated.\"),e)},this.preferOpus=function(e){var t,i=e.split(\"\\r\\n\"),a=0,n=null;for(t=0;t<i.length;t+=1)if(-1!==i[t].search(\"m=audio\")){a=t;break}if(0===a)return e;for(t=0;t<i.length;t+=1)if(-1!==i[t].search(\"opus/48000\")){(n=this.extractSdp(i[t],/:(\\d+) opus\\/48000/i))&&(i[a]=this.setDefaultCodec(i[a],n));break}return(i=this.removeCN(i,a)).join(\"\\r\\n\")},this.removeCN=function(e,t){var i=0,a=e[t].split(\" \"),n=null,r=0;for(i=e.length-1;i>=0;i--)(n=this.extractSdp(e[i],/a=rtpmap:(\\d+) CN\\/\\d+/i))&&(-1!==(r=a.indexOf(n))&&a.splice(r,1),e.splice(i,1));return e[t]=a.join(\" \"),e},this.extractSdp=function(e,t){var i=e.match(t);return i&&2==i.length?i[1]:null},this.setDefaultCodec=function(e,t){var i=0,a=e.split(\" \"),n=a.slice(0,3);for(n.push(t),i=3;i<a.length;i++)a[i]!==t&&n.push(a[i]);return n.join(\" \")},this.findLineInRange=function(e,t,i,a,n){var r,o=-1!==i?i:e.length;for(r=t;r<o;++r)if(0===e[r].indexOf(a)&&(!n||-1!==e[r].toLowerCase().indexOf(n.toLowerCase())))return r;return null},this.findLine=function(e,t,i){return this.findLineInRange(e,0,-1,t,i)},this.getCodecPayloadType=function(e,t){var i=this.findLine(e,\"a=rtpmap\",t);return i?this.getCodecPayloadTypeFromLine(e[i]):null},this.getCodecPayloadTypeFromLine=function(e){var t=new RegExp(\"a=rtpmap:(\\\\d+) \\\\w+\\\\/\\\\d+\"),i=e.match(t);return i&&2===i.length?i[1]:null},this.findFmtpLine=function(e,t){var i=this.getCodecPayloadType(e,t);return i?this.findLine(e,\"a=fmtp:\"+i.toString()):null},this.writeFmtpLine=function(e){if(!e.hasOwnProperty(\"pt\")||!e.hasOwnProperty(\"params\"))return null;var t=e.pt,i=e.params,a=[],n=0,r=null;for(r in i)a[n]=r+\"=\"+i[r],++n;return 0===n?null:\"a=fmtp:\"+t.toString()+\" \"+a.join(\"; \")},this.setCodecParam=function(e,t,i,a){var n=e.split(\"\\r\\n\"),r=this.findFmtpLine(n,t),o={},s=null,l=null;if(null===r){if(null===(l=this.findLine(n,\"a=rtpmap\",t)))return e;s=this.getCodecPayloadTypeFromLine(n[l]),o.pt=s.toString(),o.params={},o.params[i]=a,n.splice(l+1,0,this.writeFmtpLine(o))}else(o=function(e){var t,i={},a=e.indexOf(\" \"),n=e.substring(a+1).split(\"; \"),r=new RegExp(\"a=fmtp:(\\\\d+)\"),o=e.match(r),s={},l=null;if(!o||2!==o.length)return null;for(i.pt=o[1],t=0;t<n.length;++t)2===(l=n[t].split(\"=\")).length&&(s[l[0]]=l[1]);return i.params=s,i}(n[r])).params[i]=a,n[r]=this.writeFmtpLine(o);return n.join(\"\\r\\n\")},this.maybePreferCodec=function(e,t,i){var a,n,r=t+\" codec\",o=null;return i?(u.log(\"Prefer \"+r+\": \"+i),o=e.split(\"\\r\\n\"),null===(a=this.findLine(o,\"m=\",t))?(u.log(\"mLineIndex === null\"),e):((n=this.getCodecPayloadType(o,i))&&(o[a]=this.setDefaultCodec(o[a],n)),e=o.join(\"\\r\\n\"))):(u.log(\"No preference on \"+r+\".\"),e)},this.createGuideline=d},p=(i(9753),i(1038),i(1249),i(7327),i(3843),function(e,t,i,a,n,r,o,s){this.rawStats={},this.rawStats.connectedPair=[],this.rawStats.audio_send=[],this.rawStats.audio_recv=[],this.rawStats.video_send=[],this.rawStats.video_recv=[],this.instantRTT=0,this.moyRttCP=[0,0,0,0,0,0,0,0,0,0],this.moyRttAS=[0,0,0,0,0,0,0,0,0,0],this.moyRttVS=[0,0,0,0,0,0,0,0,0,0],this.tauxPacketLossAS=[0],this.oldLostAS=this.oldSentAS=0,this.oldLostVS=this.oldLostVS=0,this.cptTaux=0,this.tauxPacketLossVS=[0],this.oldBandwidthAS=0,this.oldBandwidthVS=0,this.oldBandwidthAR=0,this.oldBandwidthVR=0,this.bandwidthAS=[0,0,0,0,0,0,0,0,0,0],this.bandwidthAR=[0,0,0,0,0,0,0,0,0,0],this.bandwidthVS=[0,0,0,0,0,0,0,0,0,0],this.bandwidthVR=[0,0,0,0,0,0,0,0,0,0],this.qosIn=0,this.qosInAverage=0,this.qosInAverageCount=0,this.qosAudioIn=0,this.qosAudioInAverage=0,this.qosAudioInAverageCount=0,this.qosVideoIn=0,this.qosVideoInAverage=0,this.qosVideoInAverageCount=0,this.qosOut=0,this.qosOutAverage=0,this.qosOutAverageCount=0,this.qosAudioOut=0,this.qosAudioOutAverage=0,this.qosAudioOutAverageCount=0,this.qosVideoOut=0,this.qosVideoOutAverage=0,this.qosVideoOutAverageCount=0,this.onQosChange=t,this.onQosAudioChange=i,this.onQosVideoChange=a,this.cpt=0,this.cptRes=5,this.cptDb=60,this.saveStatsFlag=!0,this.tabQosIn=[],this.tabQosAudioIn=[],this.tabQosVideoIn=[],this.tabQosOut=[],this.tabQosAudioOut=[],this.tabQosVideoOut=[],this.tabTimestamp=[],this.tabDelay=[],this.tabJitterBufferAudio=[],this.tabJitterBufferVideo=[],this.tabAudioRtt=[],this.tabVideoRtt=[],this.tabAudioBW=[],this.tabVideoBW=[],this.clientId=o,this.callId=n,this.apiKey=r,this.socket=s,this.interval=e,this.insertStats=function(e,t,i,a){var n,r,o,s=null;for(this.cpt=this.cpt+this.interval,n=0;n<e.length;++n){var l=e[n];switch(l.type){case\"googCandidatePair\":for(s=l.names(),o=0;o<s.length;++o)if(\"googActiveConnection\"==s[o]&&\"true\"==l.stat(s[o]))for(r=0;r<s.length;++r)\"bytesSent\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.connectedPair.bytesSent=l.stat(s[r])),\"bytesReceived\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.connectedPair.bytesReceived=l.stat(s[r])),\"googRtt\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.connectedPair.googRtt=l.stat(s[r]));break;case\"ssrc\":for(s=l.names(),o=0;o<s.length;++o){if(\"audioOutputLevel\"==s[o])for(r=0;r<s.length;++r)\"packetsLost\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.audio_recv.packetsLost=l.stat(s[r])),\"googDecodingPLC\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.audio_recv.googDecodingPLC=l.stat(s[r])),\"googJitterReceived\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.audio_recv.googJitterReceived=l.stat(s[r])),\"googJitterBufferMs\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.audio_recv.googJitterBufferMs=l.stat(s[r])),\"googCurrentDelayMs\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.audio_recv.googCurrentDelayMs=l.stat(s[r])),\"bytesReceived\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.audio_recv.bytesReceived=l.stat(s[r]));if(\"audioInputLevel\"==s[o])for(r=0;r<s.length;++r)\"googRtt\"==s[r]&&void 0!==l.stat(s[r])&&-1!=l.stat(s[r])&&(this.rawStats.audio_send.googRtt=l.stat(s[r])),\"packetsLost\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.audio_send.packetsLost=l.stat(s[r])),\"packetsSent\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.audio_send.packetsSent=l.stat(s[r])),\"bytesSent\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.audio_send.bytesSent=l.stat(s[r])),\"googJitterReceived\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.audio_send.googJitterReceived=l.stat(s[r]));if(\"googFrameHeightReceived\"==s[o])for(r=0;r<s.length;++r)\"googFrameHeightReceived\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_recv.FrameHeight=l.stat(s[r])),\"googFrameWidthReceived\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_recv.FrameWidth=l.stat(s[r])),\"googCurrentDelayMs\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_recv.delay=l.stat(s[r])),\"packetsLost\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_recv.packetsLost=l.stat(s[r])),\"googNacksSent\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_recv.googNacksSent=l.stat(s[r])),\"googJitterBufferMs\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_recv.googJitterBufferMs=l.stat(s[r])),\"bytesReceived\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_recv.bytesReceived=l.stat(s[r])),\"googFrameRateReceived\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_recv.googFrameRateReceived=l.stat(s[r]));if(\"googFrameHeightSent\"==s[o])for(r=0;r<s.length;++r)\"googFrameHeightSent\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_send.FrameHeight=l.stat(s[r])),\"googFrameWidthSent\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_send.FrameWidth=l.stat(s[r])),\"packetsLost\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_send.packetsLost=l.stat(s[r])),\"googNacksReceived\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_send.googNacksReceived=l.stat(s[r])),\"googRtt\"==s[r]&&void 0!==l.stat(s[r])&&-1!=l.stat(s[r])&&(this.rawStats.video_send.googRtt=l.stat(s[r])),\"packetsSent\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_send.packetsSent=l.stat(s[r])),\"bytesSent\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_send.bytesSent=l.stat(s[r])),\"googEncodeUsagePercent\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_send.googEncodeUsagePercent=l.stat(s[r])),\"googCpuLimitedResolution\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_send.googCpuLimitedResolution=l.stat(s[r])),\"googBandwidthLimitedResolution\"==s[r]&&void 0!==l.stat(s[r])&&(this.rawStats.video_send.googBandwidthLimitedResolution=l.stat(s[r]))}}}this.computeStats(t,i,a),this.cpt%this.cptRes==0&&this.saveStatsLocal(),this.cpt%this.cptDb==0&&this.saveStatsToDb(!1)},this.saveStatsLocal=function(){if(this.saveStatsFlag){var e=Date.now();this.tabTimestamp.push(e),this.tabQosIn.push(this.qosIn),this.tabQosAudioIn.push(this.qosAudioIn),0!==this.qosVideoIn&&this.tabQosVideoIn.push(this.qosVideoIn),this.tabQosOut.push(this.qosOut),this.tabQosAudioOut.push(this.qosAudioOut),0!==this.qosVideoOut&&this.tabQosVideoOut.push(this.qosVideoOut),this.tabJitterBufferAudio.push(this.rawStats.audio_recv.googJitterBufferMs),void 0!==this.rawStats.video_recv.googJitterBufferMs&&this.tabJitterBufferVideo.push(this.rawStats.video_recv.googJitterBufferMs),void 0!==this.rawStats.video_send.googRtt&&this.tabVideoRtt.push(this.rawStats.video_send.googRtt),this.tabAudioRtt.push(this.rawStats.audio_send.googRtt),void 0!==this.bandwidthAS&&this.tabVideoBW.push(8*this.Average(this.bandwidthAS)/1024),void 0!==this.bandwidthVS&&this.tabVideoBW.push(8*this.Average(this.bandwidthVS)/1024),void 0!==this.bandwidthAR&&this.tabVideoBW.push(8*this.Average(this.bandwidthAR)/1024),void 0!==this.bandwidthVR&&this.tabVideoBW.push(8*this.Average(this.bandwidthVR)/1024)}},this.saveStatsToDb=function(e){},this.saveStatsToDb=function(e){this.saveStatsFlag=e},this.computeStats=function(e,t,i){var a=0;-1!==this.rawStats.connectedPair.googRtt&&0!==this.rawStats.connectedPair.googRtt&&void 0!==this.rawStats.connectedPair.googRtt&&this.add(this.rawStats.connectedPair.googRtt,this.moyRttCP),-1!==this.rawStats.video_send.googRtt&&0!==this.rawStats.video_send.googRtt&&void 0!==this.rawStats.video_send.googRtt&&(this.add(this.rawStats.video_send.googRtt,this.moyRttVS),this.instantRTT=this.rawStats.video_send.googRtt),-1!==this.rawStats.audio_send.googRtt&&0!==this.rawStats.audio_send.googRtt&&void 0!==this.rawStats.audio_send.googRtt&&this.add(this.rawStats.audio_send.googRtt,this.moyRttAS),-1!==this.rawStats.audio_send.packetsLost&&void 0!==this.rawStats.audio_send.packetsLost&&-1!==this.rawStats.audio_send.packetsSent&&0!==this.rawStats.audio_send.packetsSent&&void 0!==this.rawStats.audio_send.packetsSent&&(a=100*(this.rawStats.audio_send.packetsLost-this.oldLostAS)/(this.rawStats.audio_send.packetsSent-this.oldSentAS),this.oldLostAS=this.rawStats.audio_send.packetsLost,this.oldSentAS=this.rawStats.audio_send.packetsSent,this.add(a,this.tauxPacketLossAS)),-1!==this.rawStats.video_send.packetsLost&&void 0!==this.rawStats.video_send.packetsLost&&-1!==this.rawStats.video_send.packetsSent&&0!==this.rawStats.video_send.packetsSent&&void 0!==this.rawStats.video_send.packetsSent&&(a=100*(this.rawStats.video_send.packetsLost-this.oldLostVS)/(this.rawStats.video_send.packetsSent-this.oldSentVS),this.oldLostVS=this.rawStats.video_send.packetsLost,this.oldSentVS=this.rawStats.video_send.packetsSent,this.add(a,this.tauxPacketLossVS)),-1!==this.rawStats.audio_recv.bytesReceived&&void 0!==this.rawStats.audio_recv.bytesReceived&&(void 0===this.oldBandwidthAR&&(this.oldBandwidthAR=0),this.add((this.rawStats.audio_recv.bytesReceived-this.oldBandwidthAR)/this.interval,this.bandwidthAR),this.oldBandwidthAR=this.rawStats.audio_recv.bytesReceived),-1!==this.rawStats.video_recv.bytesReceived&&void 0!==this.rawStats.video_recv.bytesReceived&&(void 0===this.oldBandwidthVR&&(this.oldBandwidthVR=0),this.add((this.rawStats.video_recv.bytesReceived-this.oldBandwidthVR)/this.interval,this.bandwidthVR),this.oldBandwidthVR=this.rawStats.video_recv.bytesReceived),-1!==this.rawStats.audio_send.bytesSent&&void 0!==this.rawStats.audio_send.bytesSent&&(void 0===this.oldBandwidthAS&&(this.oldBandwidthAS=0),this.add((this.rawStats.audio_send.bytesSent-this.oldBandwidthAS)/this.interval,this.bandwidthAS),this.oldBandwidthAS=this.rawStats.audio_send.bytesSent),-1!==this.rawStats.video_send.bytesSent&&void 0!==this.rawStats.video_send.bytesSent&&(void 0===this.oldBandwidthVS&&(this.oldBandwidthVS=0),this.add((this.rawStats.video_send.bytesSent-this.oldBandwidthVS)/this.interval,this.bandwidthVS),this.oldBandwidthVS=this.rawStats.video_send.bytesSent);var n=0,r=0,o=0,s=0,l=0,d=0,c=0,u=0,h=0,p=0,g=this.getCodecs(t),m=8*this.Average(this.bandwidthAS)/1024;if(m<5?n=1:m>=5&&m<10?n=2:m>=10&&(n=3),null!==g&&g[1]){var C=8*this.Average(this.bandwidthVS)/1024;C<240?s=1:C>=240&&C<330?s=2:C>=330&&(s=3)}this.rawStats.audio_recv.googJitterBufferMs<60?r=3:this.rawStats.audio_recv.googJitterBufferMs>=60&&this.rawStats.audio_recv.googJitterBufferMs<100?r=2:this.rawStats.audio_recv.googJitterBufferMs>=100&&(r=1),this.rawStats.audio_recv.googCurrentDelayMs<100?o=3:this.rawStats.audio_recv.googCurrentDelayMs>=100&&this.rawStats.audio_recv.googCurrentDelayMs<200?o=2:this.rawStats.audio_recv.googCurrentDelayMs>=200&&(o=1),null!==g&&g[1]&&(this.rawStats.video_recv.googJitterBufferMs<100?l=3:this.rawStats.video_recv.googJitterBufferMs>=100&&this.rawStats.video_recv.googJitterBufferMs<200?l=2:this.rawStats.video_recv.googJitterBufferMs>=200&&(l=1));var f=!1,v=!1,b=!1;null!==g&&g[1]?(Math.ceil((n+2*s+l+r+o)/6)!=this.qosIn&&(f=!0),this.qosIn=Math.ceil((n+2*s+l+r+o)/6),this.qosInAverage=(this.qosInAverage*this.qosInAverageCount+this.qosIn)/(this.qosInAverageCount+1),this.qosInAverageCount++,Math.ceil((n+r+o)/3)!=this.qosAudioIn&&(v=!0),this.qosAudioIn=Math.ceil((n+r+o)/3),this.qosAudioInAverage=(this.qosAudioInAverage*this.qosAudioInAverageCount+this.qosAudioIn)/(this.qosAudioInAverageCount+1),this.qosAudioInAverageCount++,Math.ceil((2*s+l)/3)!=this.qosVideoIn&&(b=!0),this.qosVideoIn=Math.ceil((2*s+l)/3),this.qosVideoInAverage=(this.qosVideoInAverage*this.qosVideoInAverageCount+this.qosVideoIn)/(this.qosVideoInAverageCount+1),this.qosVideoInAverageCount++):(Math.ceil((n+r+o)/3)!=this.qosOut&&(f=!0),this.qosIn=Math.ceil((n+r+o)/3),this.qosInAverage=(this.qosInAverage*this.qosInAverageCount+this.qosIn)/(this.qosInAverageCount+1),this.qosInAverageCount++,Math.ceil((n+r+o)/3)!=this.qosAudioIn&&(v=!0),this.qosAudioIn=Math.ceil((n+r+o)/3),this.qosAudioInAverage=(this.qosAudioInAverage*this.qosAudioInAverageCount+this.qosAudioIn)/(this.qosAudioInAverageCount+1),this.qosAudioInAverageCount++),this.RttAverage(this.moyRttAS)<80?c=3:this.RttAverage(this.moyRttAS)>=80&&this.RttAverage(this.moyRttAS)<150?c=2:this.RttAverage(this.moyRttAS)>=150&&(c=1),this.tauxPacketLossAS<=5?d=3:this.tauxPacketLossAS>5&&this.tauxPacketLossAS<10?d=2:this.tauxPacketLossAS>=10&&(d=1),this.rawStats.audio_recv.googJitterReceived<80?u=3:this.rawStats.audio_recv.googJitterReceived>=80&&this.rawStats.audio_recv.googJitterReceived<150?u=2:this.rawStats.audio_recv.googJitterReceived>=150&&(u=1),null!==g&&g[1]&&(this.tauxPacketLossVS<=5?h=3:this.tauxPacketLossVS>5&&this.tauxPacketLossVS<10?h=2:this.tauxPacketLossVS>=10&&(h=1),this.RttAverage(this.moyRttVS)<80?p=3:this.RttAverage(this.moyRttVS)>=80&&this.RttAverage(this.moyRttVS)<150?p=2:this.RttAverage(this.moyRttVS)>=150&&(p=1)),null!==g&&g[1]?(Math.ceil((c+2*d+u+2*h+p)/7)!=this.qosOut&&(f=!0),this.qosOut=Math.ceil((c+2*d+u+2*h+p)/7),this.qosOutAverage=(this.qosOutAverage*this.qosOutAverageCount+this.qosOut)/(this.qosOutAverageCount+1),this.qosOutAverageCount++,Math.ceil((c+2*d+u)/4)!=this.qosAudioOut&&(v=!0),this.qosAudioOut=Math.ceil((c+2*d+u)/4),this.qosAudioOutAverage=(this.qosAudioOutAverage*this.qosAudioOutAverageCount+this.qosAudioOut)/(this.qosAudioOutAverageCount+1),this.qosAudioOutAverageCount++,Math.ceil((2*h+p)/3)!=this.qosVideoOut&&(b=!0),this.qosVideoOut=Math.ceil((2*h+p)/3),this.qosVideoOutAverage=(this.qosVideoOutAverage*this.qosVideoOutAverageCount+this.qosVideoOut)/(this.qosVideoOutAverageCount+1),this.qosVideoOutAverageCount++):(Math.ceil((c+2*d+u)/4)!=this.qosOut&&(f=!0),this.qosOut=Math.ceil((c+2*d+u)/4),this.qosOutAverage=(this.qosOutAverage*this.qosOutAverageCount+this.qosOut)/(this.qosOutAverageCount+1),this.qosOutAverageCount++,Math.ceil((c+2*d+u)/4)!=this.qosAudioOut&&(v=!0),this.qosAudioOut=Math.ceil((c+2*d+u)/4),this.qosAudioOutAverage=(this.qosAudioOutAverage*this.qosAudioOutAverageCount+this.qosAudioOut)/(this.qosAudioOutAverageCount+1),this.qosAudioOutAverageCount++),f&&this.onQosChange(this.qosIn,this.qosOut),v&&this.onQosAudioChange(this.qosAudioIn,this.qosAudioOut),b&&this.onQosVideoChange(this.qosVideoIn,this.qosVideoOut)},this.getCodecs=function(e){var t=!1,i=!1,a=null,n=null;if(null!=e&&void 0!==e.sdp){for(var r=e.sdp.split(\"\\n\"),o=0;o<r.length;o++)-1!=r[o].indexOf(\"a=mid:audio\")&&(t=!0),-1!=r[o].indexOf(\"a=mid:video\")&&(i=!0),t&&-1!=r[o].indexOf(\"a=rtpmap:\")&&(a=r[o],t=!1),i&&-1!=r[o].indexOf(\"a=rtpmap:\")&&(n=r[o],i=!1);return[a,n]}return null},this.getQosScore=function(){return[this.qosIn,this.qosOut,this.qosAudioIn,this.qosAudioOut,this.qosVideoIn,this.qosVideoOut]},this.getStat=function(e){switch(e){case\"AudioOutBandwidth\":return 8*this.Average(this.bandwidthAS)/1024;case\"VideoOutBandwidth\":return 8*this.Average(this.bandwidthVS)/1024;case\"AudioInBandwidth\":return 8*this.Average(this.bandwidthAR)/1024;case\"VideoInBandwidth\":return 8*this.Average(this.bandwidthVR)/1024;case\"AudioInJitterReceived\":return this.rawStats.audio_recv.googJitterReceived;case\"AudioInJitterBufferMs\":return this.rawStats.audio_recv.googJitterBufferMs;case\"AudioInDelay\":return this.rawStats.audio_recv.googCurrentDelayMs;case\"AudioOutLossRate\":return this.tauxPacketLossAS;case\"AudioOutRtt\":return this.RttAverage(this.moyRttAS);case\"AudioOutJitterReceived\":return this.rawStats.audio_send.googJitterReceived;case\"VideoInJitterBufferMs\":return this.rawStats.video_recv.googJitterBufferMs;case\"VideoOutLossRate\":return this.tauxPacketLossVS;case\"VideoOutRtt\":return this.RttAverage(this.moyRttVS)}},this.getAllStats=function(){for(var e={AudioRecv:{},AudioSend:{},VideoRecv:{},VideoSend:{}},t={AudioRecv:\"audio_recv\",VideoRecv:\"video_recv\",AudioSend:\"audio_send\",VideoSend:\"video_send\"},i=Object.keys(t),a=0;a<i.length;a++)for(var n=Object.keys(this.rawStats[t[i[a]]]),r=0;r<n.length;r++)e[i[a]][n[r]]=this.rawStats[t[i[a]]][n[r]];return e.AudioRecv.bandwidth=8*this.Average(this.bandwidthAR)/1024,e.VideoRecv.bandwidth=8*this.Average(this.bandwidthVR)/1024,e.AudioSend.bandwidth=8*this.Average(this.bandwidthAS)/1024,e.VideoSend.bandwidth=8*this.Average(this.bandwidthVS)/1024,e.AudioRecv.jitterReceived=this.rawStats.audio_recv.googJitterReceived,e.AudioRecv.jitterBufferMs=this.rawStats.audio_recv.googJitterBufferMs,e.VideoRecv.jitterBufferMs=this.rawStats.video_recv.googJitterBufferMs,e.AudioRecv.delay=this.rawStats.audio_recv.googCurrentDelayMs,e.AudioSend.rtt=this.RttAverage(this.moyRttAS),e.VideoSend.moyRtt=this.RttAverage(this.moyRttVS),e.VideoSend.rtt=this.instantRTT,e.VideoSend.FrameHeight=this.rawStats.video_send.FrameHeight,e.VideoSend.FrameWidth=this.rawStats.video_send.FrameWidth,e.AudioSend.packetLostRatio=this.tauxPacketLossAS[this.tauxPacketLossAS.length-1],e.VideoSend.packetLostRatio=this.tauxPacketLossVS[this.tauxPacketLossVS.length-1],e.VideoSend.googEncodeUsagePercent=this.rawStats.video_send.googEncodeUsagePercent,e.VideoSend.googCpuLimitedResolution=this.rawStats.video_send.googCpuLimitedResolution,e.VideoSend.googBandwidthLimitedResolution=this.rawStats.video_send.googBandwidthLimitedResolution,delete e.AudioRecv.googCurrentDelayMs,delete e.AudioRecv.googJitterReceived,delete e.AudioRecv.googJitterBufferMs,delete e.VideoRecv.googJitterBufferMs,delete e.AudioSend.googRtt,delete e.VideoSend.googRtt,e},this.displayComputedStats=function(){console.log(\"Audio IN JitterReceived:\"+this.rawStats.audio_recv.googJitterReceived+\" jitterbufferMs:\"+this.rawStats.audio_recv.googJitterBufferMs+\" delay:\"+this.rawStats.audio_recv.googCurrentDelayMs+\" bandwidth :\"+8*this.Average(this.bandwidthAS)/1024+\" kBits/s\"),console.log(\"Audio OUT  lossRate:\"+this.tauxPacketLossAS+\" rtt:\"+this.RttAverage(this.moyRttAS)+\" googJitterReceived:\"+this.rawStats.audio_recv.googJitterReceived),console.log(\"Video IN jitter buffer ms:\"+this.rawStats.video_recv.googJitterBufferMs+\" bandwidth:\"+8*this.Average(this.bandwidthVS)/1024+\" kBits/s\"),console.log(\"Video OUT loss rate:\"+this.tauxPacketLossVS+\" rtt:\"+this.RttAverage(this.moyRttVS))},this.RttAverage=function(e){for(var t=0,i=0,a=0;a<e.length;++a)0!==e[a]&&-1!==e[a]&&void 0!==e[a]&&(t+=parseInt(e[a],10),i++);return parseInt(t/i,10)},this.Average=function(e){for(var t=0,i=0,a=0;a<e.length;++a)-1!=e[a]&&void 0!==e[a]&&(t+=parseInt(e[a],10),i++);return parseInt(t/i,10)},this.add=function(e,t){t.pop(),t.unshift(e)},this.displayTab=function(e){for(var t in e)console.log(t+\" = \"+e[t])}}),g=a.Y.get(\"DataChannelFileSender\"),m=apiCC.myWebRTC_Event,C=1<<17,f=function(e){this.call=e,this.sendChunkNb=0,this.send=function(t,i,a){var n=12e3,o={},s=null,l={},d=!1,c={};if(g.info(\"DataChannelFileSender send\"),g.log(\"data.name :\"+t.name),t.file instanceof Blob?(g.log(\"Blob\"),this.blob=t.file,this.contentType=t.file.type,this.size=t.file.size,this.originalDataType=\"Blob\"):t.file instanceof ArrayBuffer?(g.log(\"ArrayBuffer\"),this.blob=t.file,this.contentType=\"application/octet-stream\",this.size=t.file.byteLength,this.originalDataType=\"ArrayBuffer\"):t.file instanceof String||\"string\"==typeof t.file?(g.log(\"string\"),this.blob=t.file,this.size=t.file.length,this.contentType=\"application/octet-stream\",this.originalDataType=\"String\"):(g.log(\"unknown type\"),this.blob=t.file,this.contentType=\"application/octet-stream\",this.size=t.file.length||t.file.byteLength||t.file.size,this.originalDataType=\"Unknown\"),this.contentType||(this.contentType=\"application/octet-stream\"),0===this.size)return g.log(\"sending done\"),void 0!==a&&(g.log(\"onProgress\"),this.transferDuration=new Date-this.startingDate,a({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:e.callId,uuid:t.uuid,remoteId:e.remoteId,lastPacket:d,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!0})),m.createEvent({eventType:\"onFileProgress\",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:e.callId,uuid:t.uuid,remoteId:e.remoteId,lastPacket:d,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!0}),void m.createEvent({eventType:\"onFileSended\",callId:e.callId,remoteId:e.remoteId,name:t.name,uuid:t.uuid});if(i)if(\"open\"===i.readyState){if(0===this.sendChunkNb&&g.log(\"first packet\"),0===this.sendChunkNb){t.uuid=(Math.random()*(new Date).getTime()).toString(36).replace(/\\./g,\"-\"),l={name:t.name,type:t.type,size:this.size,contentType:this.contentType,uuid:t.uuid},g.log(\"first packet\",l),this.fileSize=this.size,void 0!==a&&(g.log(\"onProgress\"),this.startingDate=new Date,this.transferDuration=0,a({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:e.callId,uuid:t.uuid,remoteId:e.remoteId,lastPacket:d,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}),m.createEvent({eventType:\"onFileProgress\",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:e.callId,uuid:t.uuid,remoteId:e.remoteId,lastPacket:d,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}));try{i.send(JSON.stringify(l))}catch(e){g.warn(\"error detected when sending on datachannel :\",i),g.warn(\"error is :\",e)}m.createEvent({eventType:\"onFileSending\",callId:e.callId,remoteId:e.remoteId,name:t.name,uuid:t.uuid})}else{n<this.size?(g.log(\"sending chunk\"),o=this.blob.slice(0,n)):(g.log(\"sending last chunk\"),o=this.blob.slice(0),d=!0),g.log(\"dataToSend.byteLength =\"+o.byteLength),\"ArrayBuffer\"===this.originalDataType?c.message=r.cw.encode(o):c.message=o,c.messageSize=o.byteLength,c.uuid=t.uuid,c.originalDataType=this.originalDataType,void 0!==a&&(g.log(\"onProgress\"),this.transferDuration=new Date-this.startingDate,a({sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:e.callId,uuid:t.uuid,remoteId:e.remoteId,startingDate:this.startingDate,lastPacket:d,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}),m.createEvent({eventType:\"onFileProgress\",sendChunkNb:this.sendChunkNb,fileSize:this.fileSize,remainingSize:this.size,callId:e.callId,uuid:t.uuid,remoteId:e.remoteId,startingDate:this.startingDate,lastPacket:d,transferDuration:this.transferDuration,percentage:parseInt(100*(this.fileSize-this.size)/this.fileSize,10),transferEnded:!1}));try{i.send(JSON.stringify(c))}catch(e){g.warn(\"error detected when sending on datachannel :\",i),g.warn(\"error is :\",e)}}s=0===this.sendChunkNb?this.blob:this.blob.slice(n),!1===d?this.sendChunkNb++:this.sendChunkNb=0,t.file=s,setTimeout(function(){this.send(t,i,a)}.bind(this))}else g.log(\"Trying to send on a closed channel\");else g.log(\"No data channel to send data\")},this.terminateTransfer=function(){var e=this;g.debug(\"terminateTransfer; terminated: \"+this.terminated),null!==this.channel?!0===this.useBufferedAmount&&this.channel.bufferedAmount>0&&!0!==this.canceled?setTimeout(this.terminateTransfer.bind(this)):!0!==this.terminated&&(this.terminated=!0,this.recvDataEndAckTimeoutId&&(clearTimeout(this.recvDataEndAckTimeoutId),delete this.recvDataEndAckTimeoutId),delete this.call.dcfs,g.debug(\"terminateTransfer; terminating\"),this.call.pipelineCallId?(this.call.pipelineCall&&(delete this.call.pipelineCall.clientCall,delete this.call.pipelineCall,this.call.sendDataChannel=null),this.channel=null):setTimeout((function(){e.channel.close(),e.channel=null})),setTimeout((function(){if(!0===e.canceled)m.createEvent({eventType:\"onFileSended\",callId:e.call.callId,remoteId:e.call.remoteId,name:e.call.data.filename,error:\"canceled\"}),e.call.callbacks.failure(\"canceled\");else if(e.call.failure)m.createEvent({eventType:\"onFileSended\",callId:e.call.callId,remoteId:e.call.remoteId,name:e.call.data.filename,error:e.call.failure}),e.call.callbacks.failure(e.call.failure);else{var t={eventType:\"onFileSended\",callId:e.call.callId,remoteId:e.call.remoteId,name:e.call.data.filename};e.call.success.data&&(t.data=e.call.success.data),m.createEvent(t),e.call.callbacks.success(e.call.success)}apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(e.call.callId)}))):g.warn(\"No data channel to send data, leaving terminateTransfer\")},this.recvDataEndAckTimeout=function(){g.error(\"recvDataEndAckTimeout\"),this.call.failure=\"ackNotReceived\",setTimeout(this.terminateTransfer.bind(this))},this.subsequentTransfer=function(){var e,t=!1;if(g.debug(\"subsequentTransfer; remByteCount: \"+this.remByteCount),!0!==this.canceled)if(null!==this.channel)if(!0===this.useBufferedAmount&&this.channel.bufferedAmount>C)setTimeout(this.subsequentTransfer.bind(this));else try{for(;;){if(!(this.remByteCount>=this.chunkLength)){e=this.data.slice(this.offset,this.offset+this.remByteCount),this.channel.send(e),this.packetsSent+=1,g.debug(\"packetSent \"+this.packetsSent+\" \"+this.remByteCount),this.offset+=this.remByteCount,this.remByteCount-=this.remByteCount,t=!0;break}if(e=this.data.slice(this.offset,this.offset+this.chunkLength),this.channel.send(e),this.packetsSent+=1,g.debug(\"packetSent \"+this.packetsSent+\" \"+this.chunkLength),this.offset+=this.chunkLength,this.remByteCount-=this.chunkLength,this.remByteCount<=0){t=!0;break}if(!0!==this.useBufferedAmount||this.channel.bufferedAmount>C)break}!0===t?(m.createEvent({eventType:\"onFileProgress\",name:this.call.data.filename,sendChunkNb:this.packetsSent,fileSize:this.call.data.size,remainingSize:this.remByteCount,callId:this.call.callId,remoteId:this.call.remoteId,percentage:100}),this.call.callbacks.progress({state:\"complete\",filename:this.call.data.filename,size:this.call.data.size,remBytes:0,progress:100}),this.call.success={state:\"complete\",filename:this.call.data.filename,size:this.call.data.size,mediaURL:this.call.mediaURL,mediaId:this.call.mediaId},this.recvDataEndAckTimeoutId=setTimeout(this.recvDataEndAckTimeout.bind(this),3e4)):(m.createEvent({eventType:\"onFileProgress\",name:this.call.data.filename,sendChunkNb:this.packetsSent,fileSize:this.call.data.size,remainingSize:this.remByteCount,callId:this.call.callId,remoteId:this.call.remoteId,percentage:Math.floor(100*this.offset/this.call.data.size)}),this.call.callbacks.progress({state:\"incomplete\",filename:this.call.data.filename,size:this.call.data.size,remBytes:this.remByteCount,progress:Math.floor(100*this.offset/this.call.data.size)}),setTimeout(this.subsequentTransfer.bind(this)))}catch(e){return g.error(\"transfer: \"+e),this.call.failure=\"dataChannelFailed\",void setTimeout(this.terminateTransfer.bind(this))}else g.warn(\"No data channel to send data, leaving subsequentTransfer\");else setTimeout(this.terminateTransfer.bind(this))},this.transfer=function(t,i,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.hasOwnProperty(\"delay\")?n.delay:100;if(g.info(\"transfer\",i,o),this.call.beginTimeoutId&&(clearTimeout(this.call.beginTimeoutId),delete this.call.beginTimeoutId),this.data=t,this.channel=a,null!==this.channel){\"number\"==typeof this.channel.bufferedAmount&&this.channel.bufferedAmount>=0&&(g.debug(\"browserDetails\",r.wL),\"chrome\"===r.wL.type?r.wL.version>=37&&(this.useBufferedAmount=!0,g.debug(\"useBufferedAmount enabled\")):(this.useBufferedAmount=!0,g.debug(\"useBufferedAmount enabled\"))),this.chunkLength=8192,i>0?(this.offset=Math.floor(i/this.chunkLength)*this.chunkLength,this.remByteCount=this.data.byteLength-this.offset):(this.offset=0,this.remByteCount=this.data.byteLength),this.packetsSent=0;try{var s={chunkLength:this.chunkLength,offset:this.offset,remBytes:this.remByteCount};this.call.pipelineCallId&&(s.pluginName=e.data.pluginName,s.pluginData=e.data.pluginData,e.data.context&&(s.context=e.data.context)),this.channel.send(JSON.stringify(s))}catch(e){return g.error(\"transfer:\",e),this.call.failure=\"dataChannelFailed\",void setTimeout(this.terminateTransfer.bind(this))}m.createEvent({eventType:\"onFileSending\",callId:this.call.callId,remoteId:this.call.remoteId,name:this.call.data.filename}),setTimeout(this.subsequentTransfer.bind(this),o)}else g.warn(\"No data channel to send data, leaving transfer\")}},v=(a.Y.get(\"CallStatsMonitor\"),function(e,t,i,a){this.interval=e,this.browserType=t,this.browserVersion=i,this.flavor=a,this.prevData={},this.prevDataThreshold=10/e,this.prevDataThreshold<2&&(this.prevDataThreshold=2),this.STANDARD_STAT_KEYS={audioReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},videoReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteAudioSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteVideoSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},audioSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},videoSent:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteAudioReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1},remoteVideoReceived:{codecId:!1,id:!1,ssrc:!1,trackId:!1,transportId:!1}},this.refineStats_chrome_proprietary=function(e,t){var i,a;for(i=0;i<t.length;i+=1){var n=t[i],r=null,o=null;if(\"ssrc\"===n.type)if(n.id.indexOf(\"recv\")>=0){if(\"audio\"===n.stat(\"mediaType\"))for(e.audioReceived={timestamp:Math.floor(Date.parse(n.timestamp))/1e3,type:\"inbound-rtp\",isRemote:!1,mediaType:\"audio\",packetsReceived:0,bytesReceived:0},r=n.names(),a=0;a<r.length;a+=1)\"packetsReceived\"===(o=r[a])?e.audioReceived.packetsReceived=parseInt(n.stat(\"packetsReceived\"),10):\"bytesReceived\"===o&&(e.audioReceived.bytesReceived=parseInt(n.stat(\"bytesReceived\"),10));else if(\"video\"===n.stat(\"mediaType\"))for(e.videoReceived={timestamp:Math.floor(Date.parse(n.timestamp))/1e3,type:\"outbound-rtp\",isRemote:!1,mediaType:\"video\",framesDecoded:0,packetsReceived:0,bytesReceived:0},r=n.names(),a=0;a<r.length;a+=1)\"framesDecoded\"===(o=r[a])?e.videoReceived.framesDecoded=parseInt(n.stat(\"framesDecoded\"),10):\"packetsReceived\"===o?e.videoReceived.packetsReceived=parseInt(n.stat(\"packetsReceived\"),10):\"bytesReceived\"===o&&(e.videoReceived.bytesReceived=parseInt(n.stat(\"bytesReceived\"),10))}else if(n.id.indexOf(\"send\")>=0)if(\"audio\"===n.stat(\"mediaType\"))for(e.audioSent={timestamp:Math.floor(Date.parse(n.timestamp))/1e3,type:\"outbound-rtp\",isRemote:!1,mediaType:\"audio\",packetsSent:0,bytesSent:0},r=n.names(),a=0;a<r.length;a+=1)\"packetsSent\"===(o=r[a])?e.audioSent.packetsSent=parseInt(n.stat(\"packetsSent\"),10):\"bytesSent\"===o&&(e.audioSent.bytesSent=parseInt(n.stat(\"bytesSent\"),10));else if(\"video\"===n.stat(\"mediaType\"))for(e.videoSent={timestamp:Math.floor(Date.parse(n.timestamp))/1e3,type:\"outbound-rtp\",isRemote:!1,mediaType:\"video\",framesEncoded:0,packetsSent:0,bytesSent:0},r=n.names(),a=0;a<r.length;a+=1)\"framesEncoded\"===(o=r[a])?e.videoSent.framesEncoded=parseInt(n.stat(\"framesEncoded\"),10):\"packetsSent\"===o?e.videoSent.packetsSent=parseInt(n.stat(\"packetsSent\"),10):\"bytesSent\"===o&&(e.videoSent.bytesSent=parseInt(n.stat(\"bytesSent\"),10))}return!1},this.refineStats_chrome_legacy=function(e,t){var i=!1;return t.forEach((function(t){var a=null,n=null;if(\"ssrc\"===t.type&&t.id.indexOf(\"recv\")>=0){if(\"audio\"===t.mediaType){for(n in e.audioReceived={},a=Math.floor(Date.parse(t.timestamp)/1e3),t)\"timestamp\"===n?e.audioReceived.timestamp=a:e.audioReceived[n]=t[n];i=!0}else if(\"video\"===t.mediaType){for(n in e.videoReceived={},a=Math.floor(Date.parse(t.timestamp)/1e3),t)\"timestamp\"===n?e.videoReceived.timestamp=a:e.videoReceived[n]=t[n];i=!0}}else if(\"ssrc\"===t.type&&t.id.indexOf(\"send\")>=0)if(\"audio\"===t.mediaType){for(n in e.audioSent={},a=Math.floor(Date.parse(t.timestamp)/1e3),t)\"timestamp\"===n?e.audioSent.timestamp=a:e.audioSent[n]=t[n];i=!0}else if(\"video\"===t.mediaType){for(n in e.videoSent={},a=Math.floor(Date.parse(t.timestamp)/1e3),t)\"timestamp\"===n?e.videoSent.timestamp=a:e.videoSent[n]=t[n];i=!0}})),i},this.refineStats_chrome_58=function(e,t){var i=this,a=!1;return t.forEach((function(t){if(\"inbound-rtp\"!==t.type||t.isRemote){if(\"outbound-rtp\"===t.type&&!t.isRemote)if(\"audio\"===t.mediaType){e.audioSent={};var n=Math.floor(t.timestamp/1e3);for(var r in t)!1!==i.STANDARD_STAT_KEYS.audioSent[r]&&(\"timestamp\"===r?e.audioSent.timestamp=n:e.audioSent[r]=t[r]);a=!0}else if(\"video\"===t.mediaType){e.videoSent={};var o=Math.floor(t.timestamp/1e3);for(var s in t)!1!==i.STANDARD_STAT_KEYS.videoSent[s]&&(\"timestamp\"===s?e.videoSent.timestamp=o:e.videoSent[s]=t[s]);a=!0}}else if(\"audio\"===t.mediaType||t.id.indexOf(\"Audio\")>=0){e.audioReceived={};var l=Math.floor(t.timestamp/1e3);for(var d in t)!1!==i.STANDARD_STAT_KEYS.audioReceived[d]&&(\"timestamp\"===d?e.audioReceived.timestamp=l:e.audioReceived[d]=t[d]);a=!0}else if(\"video\"===t.mediaType||t.id.indexOf(\"Video\")>=0){e.videoReceived={};var c=Math.floor(t.timestamp/1e3);for(var u in t)!1!==i.STANDARD_STAT_KEYS.videoReceived[u]&&(\"timestamp\"===u?e.videoReceived.timestamp=c:e.videoReceived[u]=t[u]);a=!0}})),a},this.refineStats_firefox_legacy=function(e,t){var i=!1,a=this;return t.forEach((function(t){var n=null,r=null;if(\"inbound-rtp\"===t.type&&!1===t.isRemote){if(\"audio\"===t.mediaType){for(n in e.audioReceived={packetsReceived:0,bytesReceived:0},r=Math.floor(t.timestamp/1e3),t)!1!==a.STANDARD_STAT_KEYS.audioReceived[n]&&(\"timestamp\"===n?e.audioReceived.timestamp=r:e.audioReceived[n]=t[n]);i=!0}else if(\"video\"===t.mediaType){for(n in e.videoReceived={packetsReceived:0,bytesReceived:0,framesDecoded:0},r=Math.floor(t.timestamp/1e3),t)!1!==a.STANDARD_STAT_KEYS.videoReceived[n]&&(\"timestamp\"===n?e.videoReceived.timestamp=r:e.videoReceived[n]=t[n]);i=!0}}else if(\"outbound-rtp\"===t.type&&!1===t.isRemote)if(\"audio\"===t.mediaType){for(n in e.audioSent={packetsSent:0,bytesSent:0},r=Math.floor(t.timestamp/1e3),t)!1!==a.STANDARD_STAT_KEYS.audioSent[n]&&(\"timestamp\"===n?e.audioSent.timestamp=r:e.audioSent[n]=t[n]);i=!0}else if(\"video\"===t.mediaType){for(n in e.videoSent={packetsSent:0,bytesSent:0,framesEncoded:0},r=Math.floor(t.timestamp/1e3),t)!1!==a.STANDARD_STAT_KEYS.videoSent[n]&&(\"timestamp\"===n?e.videoSent.timestamp=r:e.videoSent[n]=t[n]);i=!0}})),i},this.refineStats_firefox_63=function(e,t){var i=!1,a=this;return t.forEach((function(t){if(\"inbound-rtp\"!==t.type||t.isRemote){if(\"outbound-rtp\"===t.type&&!t.isRemote)if(\"audio\"===t.kind){e.audioSent={packetsSent:0,bytesSent:0};var n=Math.floor(t.timestamp/1e3);for(var r in t)!1!==a.STANDARD_STAT_KEYS.audioSent[r]&&(\"timestamp\"===r?e.audioSent.timestamp=n:e.audioSent[r]=t[r]);i=!0}else if(\"video\"===t.kind){e.videoSent={packetsSent:0,bytesSent:0,framesEncoded:0};var o=Math.floor(t.timestamp/1e3);for(var s in t)!1!==a.STANDARD_STAT_KEYS.videoSent[s]&&(\"timestamp\"===s?e.videoSent.timestamp=o:e.videoSent[s]=t[s]);i=!0}}else if(\"audio\"===t.kind){e.audioReceived={packetsReceived:0,bytesReceived:0};var l=Math.floor(t.timestamp/1e3);for(var d in t)!1!==a.STANDARD_STAT_KEYS.audioReceived[d]&&(\"timestamp\"===d?e.audioReceived.timestamp=l:e.audioReceived[d]=t[d]);i=!0}else if(\"video\"===t.kind){e.videoReceived={packetsReceived:0,bytesReceived:0,framesDecoded:0};var c=Math.floor(t.timestamp/1e3);for(var u in t)!1!==a.STANDARD_STAT_KEYS.videoReceived[u]&&(\"timestamp\"===u?e.videoReceived.timestamp=c:e.videoReceived[u]=t[u]);i=!0}})),i},this.addCallStats=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};if(void 0!==this.refineStats){if(this.refineStats(i,e),void 0!==i.audioReceived){if(void 0!==this.prevData.audioReceived){var a=i.audioReceived.timestamp-this.prevData.audioReceived[0].timestamp;a>0?(void 0===i.audioReceived.packetsReceivedPerSecond&&(i.audioReceived.packetsReceivedPerSecond=Math.floor((i.audioReceived.packetsReceived-this.prevData.audioReceived[0].packetsReceived)/a)),void 0===i.audioReceived.bitsReceivedPerSecond&&(i.audioReceived.bitsReceivedPerSecond=Math.floor(8*(i.audioReceived.bytesReceived-this.prevData.audioReceived[0].bytesReceived)/a)),void 0===i.audioReceived.packetsLostPerSecond&&(i.audioReceived.packetsLostPerSecond=Math.floor((i.audioReceived.packetsLost-this.prevData.audioReceived[0].packetsLost)/a)),void 0===i.audioReceived.packetLossRatio&&(i.audioReceived.packetLossRatio=100*(i.audioReceived.packetsLost-this.prevData.audioReceived[0].packetsLost)/(i.audioReceived.packetsReceived-this.prevData.audioReceived[0].packetsReceived)),i.audioReceived.samplingInterval=a):(void 0===i.audioReceived.packetsReceivedPerSecond&&(i.audioReceived.packetsReceivedPerSecond=0),void 0===i.audioReceived.bitsReceivedPerSecond&&(i.audioReceived.bitsReceivedPerSecond=0),void 0===i.audioReceived.packetsLostPerSecond&&(i.audioReceived.packetsLostPerSecond=0),void 0===i.audioReceived.packetLossRatio&&(i.audioReceived.packetLossRatio=0),i.audioReceived.samplingInterval=0)}else void 0===i.audioReceived.packetsReceivedPerSecond&&(i.audioReceived.packetsReceivedPerSecond=0),void 0===i.audioReceived.bitsReceivedPerSecond&&(i.audioReceived.bitsReceivedPerSecond=0),void 0===i.audioReceived.packetsLostPerSecond&&(i.audioReceived.packetsLostPerSecond=0),void 0===i.audioReceived.packetLossRatio&&(i.audioReceived.packetLossRatio=0),i.audioReceived.samplingInterval=0,this.prevData.audioReceived=[];for(this.prevData.audioReceived.push(i.audioReceived);this.prevData.audioReceived.length>this.prevDataThreshold;)this.prevData.audioReceived.shift()}if(void 0!==i.videoReceived){if(void 0!==this.prevData.videoReceived){var n=i.videoReceived.timestamp-this.prevData.videoReceived[0].timestamp;n>0?(void 0===i.videoReceived.packetsReceivedPerSecond&&(i.videoReceived.packetsReceivedPerSecond=Math.floor((i.videoReceived.packetsReceived-this.prevData.videoReceived[0].packetsReceived)/n)),void 0===i.videoReceived.bitsReceivedPerSecond&&(i.videoReceived.bitsReceivedPerSecond=Math.floor(8*(i.videoReceived.bytesReceived-this.prevData.videoReceived[0].bytesReceived)/n)),void 0===i.videoReceived.packetsLostPerSecond&&(i.videoReceived.packetsLostPerSecond=Math.floor((i.videoReceived.packetsLost-this.prevData.videoReceived[0].packetsLost)/n)),void 0===i.videoReceived.framesDecodedPerSecond&&(i.videoReceived.framesDecodedPerSecond=Math.floor((i.videoReceived.framesDecoded-this.prevData.videoReceived[0].framesDecoded)/n)),void 0===i.videoReceived.packetLossRatio&&(i.videoReceived.packetLossRatio=100*(i.videoReceived.packetsLost-this.prevData.videoReceived[0].packetsLost)/(i.videoReceived.packetsReceived-this.prevData.videoReceived[0].packetsReceived)),i.videoReceived.samplingInterval=n):(void 0===i.videoReceived.packetsReceivedPerSecond&&(i.videoReceived.packetsReceivedPerSecond=0),void 0===i.videoReceived.bitsReceivedPerSecond&&(i.videoReceived.bitsReceivedPerSecond=0),void 0===i.videoReceived.packetsLostPerSecond&&(i.videoReceived.packetsLostPerSecond=0),void 0===i.videoReceived.framesDecodedPerSecond&&(i.videoReceived.framesDecodedPerSecond=0),void 0===i.videoReceived.packetLossRatio&&(i.videoReceived.packetLossRatio=0),i.videoReceived.samplingInterval=0)}else void 0===i.videoReceived.packetsReceivedPerSecond&&(i.videoReceived.packetsReceivedPerSecond=0),void 0===i.videoReceived.bitsReceivedPerSecond&&(i.videoReceived.bitsReceivedPerSecond=0),void 0===i.videoReceived.packetsLostPerSecond&&(i.videoReceived.packetsLostPerSecond=0),void 0===i.videoReceived.framesDecodedPerSecond&&(i.videoReceived.framesDecodedPerSecond=0),void 0===i.videoReceived.packetLossRatio&&(i.videoReceived.packetLossRatio=0),i.videoReceived.samplingInterval=0,this.prevData.videoReceived=[];for(this.prevData.videoReceived.push(i.videoReceived);this.prevData.videoReceived.length>this.prevDataThreshold;)this.prevData.videoReceived.shift()}if(void 0!==i.audioSent){if(void 0!==this.prevData.audioSent){var r=i.audioSent.timestamp-this.prevData.audioSent[0].timestamp;r>0?(void 0===i.audioSent.packetsSentPerSecond&&(i.audioSent.packetsSentPerSecond=Math.floor((i.audioSent.packetsSent-this.prevData.audioSent[0].packetsSent)/r)),void 0===i.audioSent.bitsSentPerSecond&&(i.audioSent.bitsSentPerSecond=Math.floor(8*(i.audioSent.bytesSent-this.prevData.audioSent[0].bytesSent)/r)),i.audioSent.samplingInterval=r):(void 0===i.audioSent.packetsSentPerSecond&&(i.audioSent.packetsSentPerSecond=0),void 0===i.audioSent.bitsSentPerSecond&&(i.audioSent.bitsSentPerSecond=0),i.audioSent.samplingInterval=0)}else void 0===i.audioSent.packetsSentPerSecond&&(i.audioSent.packetsSentPerSecond=0),void 0===i.audioSent.bitsSentPerSecond&&(i.audioSent.bitsSentPerSecond=0),i.audioSent.samplingInterval=0,this.prevData.audioSent=[];for(this.prevData.audioSent.push(i.audioSent);this.prevData.audioSent.length>this.prevDataThreshold;)this.prevData.audioSent.shift()}if(void 0!==i.videoSent){if(void 0!==this.prevData.videoSent){var o=i.videoSent.timestamp-this.prevData.videoSent[0].timestamp;o>0?(void 0===i.videoSent.packetsSentPerSecond&&(i.videoSent.packetsSentPerSecond=Math.floor((i.videoSent.packetsSent-this.prevData.videoSent[0].packetsSent)/o)),void 0===i.videoSent.bitsSentPerSecond&&(i.videoSent.bitsSentPerSecond=Math.floor(8*(i.videoSent.bytesSent-this.prevData.videoSent[0].bytesSent)/o)),void 0===i.videoSent.framesEncodedPerSecond&&(i.videoSent.framesEncodedPerSecond=Math.floor((i.videoSent.framesEncoded-this.prevData.videoSent[0].framesEncoded)/o)),i.videoSent.samplingInterval=o):(void 0===i.videoSent.packetsSentPerSecond&&(i.videoSent.packetsSentPerSecond=0),void 0===i.videoSent.bitsSentPerSecond&&(i.videoSent.bitsSentPerSecond=0),void 0===i.videoSent.framesEncodedPerSecond&&(i.videoSent.framesEncodedPerSecond=0),i.videoSent.samplingInterval=0)}else void 0===i.videoSent.packetsSentPerSecond&&(i.videoSent.packetsSentPerSecond=0),void 0===i.videoSent.bitsSentPerSecond&&(i.videoSent.bitsSentPerSecond=0),void 0===i.videoSent.framesEncodedPerSecond&&(i.videoSent.framesEncodedPerSecond=0),i.videoSent.samplingInterval=0,this.prevData.videoSent=[];for(this.prevData.videoSent.push(i.videoSent);this.prevData.videoSent.length>this.prevDataThreshold;)this.prevData.videoSent.shift()}}return Object.keys(i).length>0&&\"function\"==typeof t.post&&t.post(i),i},\"chrome\"===this.browserType?\"proprietary\"===a?this.refineStats=this.refineStats_chrome_proprietary:this.browserVersion>=58?this.refineStats=this.refineStats_chrome_58:this.refineStats=this.refineStats_chrome_legacy:\"firefox\"===this.browserType?this.browserVersion>=63?this.refineStats=this.refineStats_firefox_63:this.refineStats=this.refineStats_firefox_legacy:\"safari\"===this.browserType&&(this.refineStats=this.refineStats_chrome_58)}),b=(i(658),function(){this.NarrowBandSpeechQuality=function(e,t){var i,a,n=1,r=1+e/10,o=1+e/150,s=(94.769-(i=80+2.5*(65-40*Math.log10(r/o)+6*Math.exp(e*e*-.3)-14)))*(94.769-i)/4+100;return(a=93.193-((94.769-i)/2+Math.sqrt(s)-1)*(1-Math.exp(-e))-(0+t/(t+4.3)*95))<0&&(n=1),a<100&a>0&&(n=1+.035*a+a*(a-60)*(100-a)*7*1e-6),a>100&&(n=4.5),n},this.WideBandspeechQuality=function(e,t){var i,a,n,r=0,o=1;e<100&&(r=.08-e+10),e>=100&&(r=18);var s=1+e/10,l=1+e/150,d=(129-(i=80+3*(65+r-40*Math.log10(s/l)+6*Math.exp(e*e*-.3)-14)))*(129-i)/4+100;return(n=(a=129-((129-i)/2+Math.sqrt(d)-1)*(1-Math.exp(-e))-(0+t/(t+4.3)*95))/1.29)<=0&&(o=1),n<100&n>0&&(o=1+.035*a+a*(a-60)*(100-a)*7*1e-6),n>=100&&(o=4.5),o},this.videoQuality=function(e,t,i,a,n){var r,o,s,l,d,c,u,h,p;return p=t>720?[0,2.77,.009,3.95,460,1.28,2.12,32e-5,1.28,262,1.98,22.84,7.999]:t>576?[0,6.31,.008,3.68,262,1.28,1.97,33e-5,1.24,343,2.76,6.25,6.013]:t>480?[0,6.96,.007,3.58,214,1.2,1.75,63e-5,1.13,171,4.25,7.98,12.001]:t>288?[0,5.61,.01,3.38,182,1.31,2.23,75e-5,1.51,136,4.05,20.16,22.332]:[0,3.988,.013,3.625,89.25,1.125,.713,0,1.542,245.5,3.011,39.31,16.67],c=1+Math.pow(a/p[4],p[5]),r=p[3]-p[3]/c,o=p[1]+p[2]*a,s=p[6]+p[7]*a,u=Math.pow(Math.log(n)-Math.log(o),2),h=2*Math.pow(s,2),l=r*Math.exp(-u/h),d=p[10]+p[11]*Math.exp(-n/p[8])+p[12]*Math.exp(-a/p[9]),1+l*Math.exp(-i/d)},this.audiovisualQuality=function(e,t,i,a){var n,r,o,s,l;return e>0&&t>0?(n=(l=[0,-.6966,-.8127,.4562,3.003,-.1638,.3626,.1291,.5457,-1251e-7,3.763,-.001065,.01465,-.001002,0])[9]*(i+a)+l[10],i>=a&&(r=Math.min(l[11]*(i-a)+l[12],0)),i<a&&(r=Math.min(l[13]*(a-i)+l[14],0)),o=Math.max(n+r,1),l[1]*(s=l[5]*e+l[6]*t+l[7]*e*t+l[8])+l[2]*o+l[3]*s*o+l[4]):\"NoAudiovisualStream\"}});function S(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return y(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?y(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var I=a.Y.get(\"WebRTC_Call\"),T=apiCC.myWebRTC_Event,R=function(e){this.dest_roomId=\"\",this.pc=null,this.callId=0,this.callee=!1,this.callerId=0,this.calleeId=0,this.started=!1,this.localDescriptionSetted=!1,this.remoteDescriptionSetted=!1,this.sendedSdpOfferMessage=null,this.receivedSdpOfferMessage=null,this.myWebRTC_Stack=new o.S(e.socket),this.remoteMediaStreams=[],this.rtpSenders={audio:[],video:[]},this.addingUserMedia=!1,this.myWebRTC_Event=apiCC.myWebRTC_Event,this.dtmfSender=null,this.incomingcandidatesQueue=[],\"Firefox\"===n.Xh?n.PR>43?(this.mediaConstraintsAudioOnly={offerToReceiveAudio:!0,offerToReceiveVideo:!1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):(this.mediaConstraintsAudioOnly={mandatory:{offerToReceiveAudio:!0,offerToReceiveVideo:!1}},this.mediaConstraints={mandatory:{offerToReceiveAudio:!0,offerToReceiveVideo:!0}}):\"Chrome\"===n.Xh?n.PR<55?(this.mediaConstraintsAudioOnly={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},this.mediaConstraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}}):(this.mediaConstraintsAudioOnly={offerToReceiveAudio:1,offerToReceiveVideo:1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):\"Edge\"===n.Xh?(this.mediaConstraintsAudioOnly={offerToReceiveAudio:!0,offerToReceiveVideo:!1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}):(this.mediaConstraintsAudioOnly={offerToReceiveAudio:1,offerToReceiveVideo:1},this.mediaConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1}),\"iOS\"===n.ag.name&&(I.log(\"Defining mediaConstraints for iOS \"),this.mediaConstraints={offerToReceiveAudio:!0,offerToReceiveVideo:!0}),this.trickleIce=e.trickleIce,this.callLocalStream=null,this.generatedLocalStream=!1,this.audioOnly=!1,this.inviteSended=!1,this.sendInviteTrickleIceFalseTimeOutId=0,this.sendInviteTrickleIceFalseTimer=5e3,this.message200OKSended=!1,this.send200OKTrickleIceFalseTimeOutId=0,this.send200OKTrickleIceFalseTimer=5e3,this.message200OKReceived=!1,this.callCancelled=!1,this.screenSharing=!1,this.desktopId=0,this.pc_config=e.pc_config,this.pc_constraints=e.pc_constraints,this.audioFileMediaElement=null,this.videoReceivedWidth=640,this.videoReceivedHeight=480,this.videoSendWidth=640,this.videoSendHeight=480,this.videoReceivedDelay=0,this.audioReceivedDelay=0,this.audioSendDelay=0,this.videoSendDelay=0,this.videoSendPacketLossRatio=0,this.audioSendPacketLossRatio=0,this.getStatsInterval=e.qosInterval,this.qm=null,this.statisticId=null,this.csmIntervalMs=e.csmIntervalMs,this.csmIntervalId=null,this.remoteId=0,this.callType=\"media\",this.localCallProfile={audio:!1,audioActive:!1,video:!1,videoActive:!1},this.remoteCallProfile={audio:!1,audioActive:!1,video:!1,videoActive:!1},this.disconnectionTimeoutId=0,this.disconnectionTimer=4e4,this.disconnectionWarningDelay=9e3,this.disconnectionWarningInterval=0,this.disconnectionWarningTimeout=0,this.disconnectionWarningCount=0,this.checkCandidateTypesTimer=1e4,this.checkCandidateTypesTimeoutId=0,this.checkCandidateTypesTimeoutTable=[],this.data={},this.screenStream=null,this.screenIsDisplayed=!1,this.addingDataChannelOnCallOngoing=!1,this.sendDataChannel=null,this.receiveDataChannel=null,this.receiveChunkNb={},this.firstDataPacket={},this.receivedSize={},this.receiveArrayToStoreChunks={},this.destCallType=\"media\",this.mcuRemoteStream=null,this.userMediaAccessRequired=!0,this.settingUpMode=\"normal\",this.remoteType=\"web\",this.mediaTypeForIncomingCall=e.mediaTypeForIncomingCall,this.mediaTypeForOutgoingCall=e.mediaTypeForOutgoingCall,this.mediaRoutingMode=e.mediaRoutingMode,this.stripAudioSDPActivated=!1,this.stripVideoSDPActivated=!1,this.iceState=\"notdefined\",this.restarted=!1,this.audioSdpDirection=null,this.videoSdpDirection=null,this.isLocalAudioMuted=!1,this.isLocalVideoMuted=!1,this.isRemoteAudioMuted=!1,this.isRemoteVideoMuted=!1,this.isRemoteAudioSilent=!1,this.isRemoteVideoSilent=!1,this.isAccepted=!1,this.accessToMedia=!1,this.callConfiguration=null,this.captureSourceType=null,this.preferH264Codec=!1,this.preferVP8Codec=!1,this.preferVP9Codec=!1,this.candidateNb=0,this.sessionMCU=null,this.instanceId=0,this.retryUpdateMedia=!1,this.updateMediaOngoing=!1,this.setCallTurnServer=function(e){I.info(\"setCallTurnServer :\",e);var t=JSON.stringify(this.pc_config);t=t.replace(/mp1.apizee.com/g,e),this.pc_config=JSON.parse(t)},this.setCallMediaRoutingMode=function(t){I.info(\"setCallMediaRoutingMode :\",t),\"hostOnly\"===t?this.mediaRoutingMode=e.mediaRoutingModeEnum.hostOnly:\"stun\"===t?this.mediaRoutingMode=e.mediaRoutingModeEnum.stun:\"stunOnly\"===t?this.mediaRoutingMode=e.mediaRoutingModeEnum.stunOnly:\"turn\"===t?this.mediaRoutingMode=e.mediaRoutingModeEnum.turn:\"turnOnly\"===t?this.mediaRoutingMode=e.mediaRoutingModeEnum.turnOnly:(I.log(\"parameter error when calling function : setCallMediaRoutingMode()\"),this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setCallMediaRoutingMode()\",\"PARAMETER_ERROR_SETCALLMEDIAROUTINGMODE\"))},this.checkDTLSCompliancy=function(){if(I.debug(\"checkDTLSCompliancy\"),!1===apiCC.session.isDeviceDTLSCompliant())I.log(\"Device not DTLS compliant, setting DtlsSrtpKeyAgreement: false\"),this.pc_constraints={optional:[{DtlsSrtpKeyAgreement:!1}]};else{var e=apiCC.session.isClientDTLSCompliant(this.remoteId);!1!==e&&\"false\"!==e||(I.log(\"Remote Device not DTLS compliant, setting DtlsSrtpKeyAgreement: false\"),this.pc_constraints={optional:[{DtlsSrtpKeyAgreement:!1}]})}},this.sendData=function(e,t){I.info(\"datachannel - sendData\");var i=null,a=null;if(e.file instanceof File)return I.log(\"File\"),this.contentType=e.file.type,this.originalDataType=\"File\",i=new FileReader,a=this,i.onload=function(n){var r=n.target.result||i.result;a.sendData({file:r,name:e.name,type:e.type},t)},void i.readAsArrayBuffer(e.file);new f(this).send(e,this.sendDataChannel,t)},I.log(\"New Call for client with Id :\"+e.clientId),this.generateCallId=function(){this.callId=apiCC.generateCallId(),I.info(\"new call with callId :\"+this.callId)},this.sendInviteTrickleIceFalse=function(){I.log(\"sendInviteTrickleIceFalse\"),I.log(\"sendInvite on candidate timer reached\"),this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,e.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:this.pc.localDescription,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0},this.send200OkTrickleIceFalse=function(){I.log(\"send200OkTrickleIceFalse\"),this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,e.nickname,this.dest_roomId,this.pc.localDescription,this.data),this.message200OKSended=!0},this.onSetLocalDescriptionSuccess=function(){I.info(\"onSetLocalDescriptionSuccess\"),this.localDescriptionSetted=!0,this.asyncCallbacks&&\"subscribe\"===this.asyncCallbacks.type&&delete this.asyncCallbacks,!1===this.trickleIce&&(!0===this.callee?(I.info(\"starting send200OKTrickleIceFalseTimeOutId\"),this.send200OKTrickleIceFalseTimeOutId=setTimeout(this.callback(this,\"send200OkTrickleIceFalse\"),this.send200OKTrickleIceFalseTimer)):(I.info(\"starting sendInviteTrickleIceFalseTimeOutId\"),this.sendInviteTrickleIceFalseTimeOutId=setTimeout(this.callback(this,\"sendInviteTrickleIceFalse\"),this.sendInviteTrickleIceFalseTimer))),e.rtpSenderSetParamatersCapable&&e.evaluateVideoCap(this)},this.onSetLocalDescriptionFailure=function(t){I.warn(\"onSetLocalDescriptionFailure\",t);var i=null,a=null;this.callControl&&(i=this.callControl.roomName,a=this.callControl.type),T.createErrorEvent(\"Set local Description Failure\",\"SET_LOCAL_DESCRIPTION_FAILURE\",this.callId,i,a),e.onHangup(this.callId,\"Local_Description_Failure\")},this.onSetRemoteDescriptionSuccess=function(){I.info(\"onSetRemoteDescriptionSuccess\");var t=null;for(this.remoteDescriptionSetted=!0,!0===this.restarting&&delete this.restarting,this.data&&(this.data.mesh||this.data.subscribeOrder)||T.createCallEstablishedEvent(this.calleeId,this.callType,this.callId,this.destCallType);this.incomingcandidatesQueue.length;)t=this.incomingcandidatesQueue.shift(),this.processCandidateMsg(t);if(void 0!==e.clientIncomingCandidatesQueue[this.callId+\"-\"+this.instanceId]){for(I.debug(\"Restoring candidate from client, this.callId :\"+this.callId+\" , instanceId :\"+this.instanceId);e.clientIncomingCandidatesQueue[this.callId+\"-\"+this.instanceId].length;)t=e.clientIncomingCandidatesQueue[this.callId+\"-\"+this.instanceId].shift(),this.processCandidateMsg(t);delete e.clientIncomingCandidatesQueue[this.callId+\"-\"+this.instanceId]}if(this.asyncCallbacks&&(\"addingUserMedia\"===this.asyncCallbacks.type?(this.asyncCallbacks.resolve(this.callConfiguration.userMediaStreamId),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks):\"updateCallConfiguration\"===this.asyncCallbacks.type&&(this.asyncCallbacks.resolve(),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks)),this.updateMediaOngoing=!1,!0===this.retryUpdateMedia){I.debug(\"an updateMedia was waiting for sig stable state or an other updateMedia end, updating Media now ...\"),this.retryUpdateMedia=!1;var i=this.updateMedia(!1);I.debug(\"Retried updateMediaResult :\",i)}},this.processCandidateMsg=function(e){I.info(\"processCandidateMsg :\",e);var t=null;null!==this.pc?(void 0!==e.completeCandidate?(I.trace(\"new behavior of 2.13.8\"),t=new apiCC.myWebRTC_Adapter.RTCIceCandidate(e.completeCandidate)):(I.log(\"old behavior < 2.13.8\"),t=new apiCC.myWebRTC_Adapter.RTCIceCandidate({sdpMLineIndex:e.label,candidate:e.candidate})),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"addIceCandidate\"),this.pc.addIceCandidate(t,(function(){I.trace(\"addIceCandidate success\")}),(function(e){I.warn(\"addIceCandidate failure: \"+e),e=null}))):(I.log(\"addIceCandidate - Promise version\"),this.pc.addIceCandidate(t).then((function(){I.trace(\"addIceCandidate success\")})).catch((function(e){I.warn(\"addIceCandidate failure: \"+e),e=null})))):I.error(\"Error, call is not null but pc is null\")},this.onSetRemoteDescriptionFailure=function(t){I.warn(\"onSetRemoteDescriptionFailure :\",t);var i=null,a=null;this.callControl&&(i=this.callControl.roomName,a=this.callControl.type),T.createErrorEvent(\"Set remote Description Failure\",\"SET_REMOTE_DESCRIPTION_FAILURE\",this.callId,i,a),e.onHangup(this.callId,\"Remote_Description_Failure\")},this.getUserMediaOnCall=function(){var t=this,i=!1;if(I.info(\"getUserMediaOnCall, audio Only :\"+this.audioOnly),I.info(\"getUserMediaOnCall, screenSharing activated :\"+this.screenSharing),I.log(\"webRTCClient.gum_config :\",e.gum_config),this.callerId===e.clientId){if(I.log(\"outgoing call\"),\"VIDEO\"===this.mediaTypeForOutgoingCall||\"VIDEOONLY\"===this.mediaTypeForOutgoingCall)if(I.log(\"mediaTypeForOutgoingCall :\"+this.mediaTypeForOutgoingCall),\"VIDEOONLY\"===this.mediaTypeForOutgoingCall&&(i=!0),!0!==this.screenSharing){if(!1===apiCC.mediaDeviceMgr.videoDevicePresent){if(!1===apiCC.mediaDeviceMgr.audioDevicePresent)return I.log(\"getUserMediaOnCall without any device, calling without device\"),void this.onUserMediaSuccessOnCall();I.log(\"video is not present :\"+this.callType),\"media\"===this.callType&&(I.log(\"callType is media, but no webcam present, forcing callType to audio\"),this.callType=\"audio\",this.audioOnly=!0)}}else I.log(\"screenSharing, no device checking\");else if(\"AUDIO\"===this.mediaTypeForOutgoingCall)I.log(\"mediaTypeForOutgoingCall is AUDIO, setting call to audioOnly\"),this.callType=\"audio\",this.audioOnly=!0;else if(\"NONE\"===this.mediaTypeForOutgoingCall||\"DATA\"===this.mediaTypeForOutgoingCall)return I.log(\"mediaTypeForOutgoingCall is NONE, call will be recvOnly\"),void this.onUserMediaSuccessOnCall()}else if(I.log(\"incoming call\"),\"VIDEO\"===this.mediaTypeForIncomingCall||\"VIDEOONLY\"===this.mediaTypeForIncomingCall){if(I.log(\"mediaTypeForIncomingCall :\"+this.mediaTypeForIncomingCall),\"VIDEOONLY\"===this.mediaTypeForIncomingCall&&(i=!0),!1===apiCC.mediaDeviceMgr.videoDevicePresent){if(!1===apiCC.mediaDeviceMgr.audioDevicePresent)return I.log(\"getUserMediaOnCall without any device, calling without device\"),void this.onUserMediaSuccessOnCall();I.log(\"video is not present :\"+this.callType),\"media\"===this.callType&&(I.log(\"callType is media, but no webcam present, forcing callType to audio\"),this.callType=\"audio\",this.audioOnly=!0)}}else if(\"AUDIO\"===this.mediaTypeForIncomingCall)I.log(\"mediaTypeForIncomingCall is AUDIO, setting call to audioOnly\"),this.callType=\"audio\",this.audioOnly=!0;else if(\"NONE\"===this.mediaTypeForIncomingCall||\"DATA\"===this.mediaTypeForIncomingCall)return I.log(\"mediaTypeForIncomingCall is NONE, call will be recvOnly\"),void this.onUserMediaSuccessOnCall();e.getUserMediaOnGoing=!0;var a=null,o=null;if(I.log(\"this.screenSharing :\"+this.screenSharing),I.log(\"this.audioOnly :\"+this.audioOnly),!0===this.screenSharing)if(I.log(\"getScreenMedia\"),\"Chrome\"===n.Xh)I.log(\"this.desktopId :\"+this.desktopId),a={video:{mandatory:{chromeMediaSource:\"desktop\",chromeMediaSourceId:this.desktopId}}};else{if(I.log(\"this.captureSourceType :\"+this.captureSourceType),\"screen\"!==this.captureSourceType&&\"window\"!==this.captureSourceType&&\"application\"!==this.captureSourceType)return void I.error(\"captureSourceType value is not correct\");a={video:{mediaSource:this.captureSourceType}}}else!0===this.audioOnly?(I.log(\"this.audioOnly = true\"),e.gum_config=apiCC.setAudioSourceIdInConstraint(e.audioSourceId,e.gum_config),o=JSON.parse(JSON.stringify(e.gum_config)),!1===e.allowAsymetricMediaCalls?o.video=!1:I.log(\"allow AsymetricMediaCalls is activated\"),a=o):(I.log(\"audio and video call\"),a=(0,r.ws)({},e.gum_config),i?a.audio=!1:a=apiCC.setAudioSourceIdInConstraint(e.audioSourceId,a),a=apiCC.setVideoSourceIdInConstraint(e.videoSourceId,a),a=apiCC.setVideoFacingModeInConstraint(e.facingMode,a),\"undefined\"!=typeof apiRTC_React&&(a={audio:!0,video:{mandatory:{minWidth:500,minHeight:300,minFrameRate:30},facingMode:\"user\"}}));apiCC.createUserMediaStream({callId:this.callId,type:this.callType,gum_config:a,success:function(e){I.debug(\"[getUserMediaOnCall] success; userMediaStreamId: \"+e.userMediaStreamId),void 0!==t.callConfiguration&&null!==t.callConfiguration||(t.callConfiguration={}),t.callConfiguration.userMediaStreamId=e.userMediaStreamId,t.onUserMediaSuccessOnCall(e.stream)},failure:function(e,i){I.debug(\"[getUserMediaOnCall] failure; userMediaStreamId: \"+e.userMediaStreamId),t.onUserMediaErrorOnCall(i)}})},this.handleToneChangeEvent=function(e){I.debug(\"handleToneChangeEvent :\",e.tone),\"\"!==e.tone?I.debug(\"Tone played: \"+e.tone):I.debug(\"All tones have played.\")},this.sendTones=function(e,t,i){I.debug(\"sendTones :\"),this.dtmfSender&&(I.debug(\"sendTones : Tones, duration, gap: \",e,t,i),this.dtmfSender.insertDTMF(e,t,i))},this.addStream=function(e){var t,i=null,a=null,o=0,s=!1,l=null,d=[];if(\"undefined\"!=typeof apiRTC_React||\"Firefox\"===n.Xh&&n.PR<51||\"Chrome\"===n.Xh&&n.PR<65||\"Safari\"===n.Xh&&n.dc<12.1||\"Mobile Safari\"===n.Xh&&n.dc<12.1||\"iOS\"===apiRTC.osName&&\"undefined\"!=typeof cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins.iosrtc)I.info(\"using addStream method\"),this.pc.addStream(e),I.debug(\"end addStream method\");else{if(!(\"Firefox\"===n.Xh&&n.PR<59||\"Edge\"===n.Xh)){for(I.info(\"using addTrack/replaceTrack method\"),i=e.getTracks(),t=0;t<i.length;t+=1){for(s=!1,a=this.rtpSenders[i[t].kind],o=0;o<a.length;o+=1)if(null===a[o].track){s=!0;break}if(!0===s)d.push(a[o].replaceTrack(i[t])),I.debug(\"addStream -> replaceTrack\",a[o]);else{if(\"RID\"===this.simulcast&&\"video\"===i[t].kind&&\"chrome\"===r.wL.type){var c=[{rid:\"h\",active:!0,maxBitrate:9e5},{rid:\"m\",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:\"l\",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}];this.callControl.callConfiguration.simulcast&&this.callControl.callConfiguration.simulcast.sendEncodings&&(c=this.callControl.callConfiguration.simulcast.sendEncodings.slice()),l=this.pc.addTransceiver(i[t],{direction:\"sendonly\",streams:[e],sendEncodings:c}).sender}else if(l=this.pc.addTrack(i[t],e),\"RID\"===this.simulcast&&\"video\"===i[t].kind&&\"firefox\"===r.wL.type){var u=l.getParameters();u||(u={}),this.callControl.callConfiguration.simulcast&&this.callControl.callConfiguration.simulcast.sendEncodings?u.encodings=this.callControl.callConfiguration.simulcast.sendEncodings.slice():u.encodings=[{rid:\"h\",active:!0,maxBitrate:9e5},{rid:\"m\",active:!0,maxBitrate:3e5,scaleResolutionDownBy:2},{rid:\"l\",active:!0,maxBitrate:1e5,scaleResolutionDownBy:4}],d.push(l.setParameters(u))}I.debug(\"addStream -> addTrack\",l),this.rtpSenders[i[t].kind].push(l)}}return I.debug(\"end addTrack/replaceTrack method\"),this.rtpSenders.audio.length>0&&(this.dtmfSender=this.rtpSenders.audio[0].dtmf,this.dtmfSender&&(this.dtmfSender.ontonechange=this.handleToneChangeEvent)),new Promise((function(e,t){Promise.all(d).then((function(t){e()})).catch(t)}))}for(I.info(\"using addTrack method\"),i=e.getTracks(),t=0;t<i.length;t+=1)this.pc.addTrack(i[t],e);I.debug(\"end addTrack method\")}return Promise.resolve()},this.removeStream=function(e){var t,i=null,a=[];if(I.info(\"removeStream in call\",e.id),\"Firefox\"===n.Xh&&n.PR<51||\"Chrome\"===n.Xh&&n.PR<65||\"Safari\"===n.Xh&&n.dc<12.1||\"Mobile Safari\"===n.Xh&&n.dc<12.1||\"iOS\"===apiRTC.osName&&\"undefined\"!=typeof cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins.iosrtc)I.info(\"using removeStream method\"),this.pc.removeStream(e),I.debug(\"end removeStream method\");else{if(!(\"Firefox\"===n.Xh&&n.PR<59||\"Edge\"===n.Xh)){for(I.info(\"using replaceTrack method\"),t=0;t<this.rtpSenders.audio.length;t+=1)a.push(this.rtpSenders.audio[t].replaceTrack(null));for(t=0;t<this.rtpSenders.video.length;t+=1)a.push(this.rtpSenders.video[t].replaceTrack(null));return I.debug(\"end replaceTrack method\"),new Promise((function(e,t){Promise.all(a).then((function(t){e()})).catch(t)}))}for(I.info(\"using removeTrack method\"),i=this.pc.getSenders(),I.debug(\"senders :\",i),t=0;t<i.length;t+=1)this.pc.removeTrack(i[t]);I.debug(\"end removeTrack method\")}return Promise.resolve()},this.stopStream=function(e){I.info(\"stopStream in call\");var t,i=null;if(\"Chrome\"===n.Xh&&n.PR<45||\"Firefox\"===n.Xh&&n.PR<44||\"Opera\"===n.Xh&&n.PR<34||\"Chromium\"===n.Xh&&n.PR<44||\"Chrome WebView\"===n.Xh&&n.PR<45)I.log(\"... using MediaStream.stop\"),e.stop();else{for(I.log(\"... using MediaStreamTrack.stop\"),i=e.getTracks(),t=0;t<i.length;t+=1)i[t].stop();I.log(\"... tracks stopped\")}e=null},this.getScreenUserMediaOnCall=function(){I.info(\"getScreenUserMediaOnCall\");try{I.log(\"getScreenMedia\"),navigator.webkitGetUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:\"desktop\",chromeMediaSourceId:this.desktopId,maxWidth:1920,maxHeight:1080,minAspectRatio:1.77}}},this.callback(this,\"onScreenUserMediaSuccessOnCall\"),this.callback(this,\"onScreenUserMediaErrorOnCall\")),I.log(\"Requested access to local media with new syntax.\")}catch(e){I.error(\"getUserMedia() failed. Is this a WebRTC capable browser?\"),I.log(\"getUserMedia failed with exception: \"+e.message)}},this.onScreenUserMediaSuccessOnCall=function(e){I.info(\"onScreenUserMediaSuccessOnCall\");var t,i=\"Unknown\",a=\"Unknown\";e.getAudioTracks().length>0&&(e.getAudioTracks()[0].label&&(i=e.getAudioTracks()[0].label),I.log(\"Using audio device: \"+i)),e.getVideoTracks().length>0&&(e.getVideoTracks()[0].label&&(a=e.getVideoTracks()[0].label),I.log(\"Using video device: \"+a)),I.log(\"Changing video stream with screen\"),this.screenStream=e,this.screenStream.getVideoTracks()[0].onended=this.callback(this,\"stopScreenSharingOnSwitchStream\"),I.log(\"Adding callLocalstream to screen MediaStream\"),t=this.callLocalStream.getAudioTracks()[0].clone(),this.screenStream.addTrack(t),this.switchVideoToScreen()},this.toggleVideoScreen=function(){!0===this.screenIsDisplayed?this.switchScreenToVideo():this.switchVideoToScreen()},this.switchVideoToScreen=function(){var t=this;I.info(\"switchVideoToScreen in call\"),this.removeStream(this.callLocalStream).then((function(){t.addStream(t.screenStream),t.updateMediaWithRetryManagement(!1),e.myWebRTC_Event.createSwitchStreamEvent(t.callId,t.screenStream),t.screenIsDisplayed=!0})).catch((function(i){I.error(\"Failed to switchVideoToScreen\",i);var a=null,n=null;t.callControl&&(a=t.callControl.roomName,n=t.callControl.type),e.myWebRTC_Event.createErrorEvent(\"Failed to switchVideoToScreen\",\"MEDIA_UPDATE_ERROR\",t.callId,a,n)}))},this.switchScreenToVideo=function(){var t=this;I.info(\"switchScreenToVideo in call\"),this.removeStream(this.screenStream).then((function(){t.addStream(t.callLocalStream),t.updateMediaWithRetryManagement(!1),e.myWebRTC_Event.createSwitchStreamEvent(t.callId,t.callLocalStream),t.screenIsDisplayed=!1})).catch((function(i){I.error(\"Failed to switchScreenToVideo\",i);var a=null,n=null;t.callControl&&(a=t.callControl.roomName,n=t.callControl.type),e.myWebRTC_Event.createErrorEvent(\"Failed to switchScreenToVideo\",\"MEDIA_UPDATE_ERROR\",t.callId,a,n)}))},this.onScreenUserMediaErrorOnCall=function(e){I.error(\"Failed to get access to local media. Error code was \"+e.code),I.error(e),e=null},this.addVideoMedia=function(){var t=this;I.info(\"addVideoMedia\");var i=e.gum_config;apiCC.createUserMediaStream({callId:this.callId,type:\"media\",gum_config:i,success:function(i){I.debug(\"[addVideoMedia] success; userMediaStreamId: \"+i.userMediaStreamId);var a=apiCC.getUserMediaStream(t.callConfiguration.userMediaStreamId),n=Promise.resolve();a&&(n=t.removeStream(a.stream).then((function(){e.myWebRTC_Event.createLocalStreamRemovedEvent(t.callType,t.callId,a.stream,t.remoteId,t.destCallType),apiCC.releaseUserMediaStream(a.userMediaStreamId,t.callId)}))),n.then((function(){t.callConfiguration.userMediaStreamId=i.userMediaStreamId,t.callLocalStream=i.stream,t.addStream(i.stream),t.updateMediaWithRetryManagement(!1)})).catch((function(i){I.error(\"Failed to addVideoMedia\",i);var a=null,n=null;t.callControl&&(a=t.callControl.roomName,n=t.callControl.type),e.myWebRTC_Event.createErrorEvent(\"Failed to addVideoMedia\",\"MEDIA_UPDATE_ERROR\",t.callId,a,n)}))},failure:function(e,i){I.debug(\"[addVideoMedia] failure; userMediaStreamId: \"+e.userMediaStreamId),t.onUserMediaErrorOnCall(i)}})},this.stopScreenSharingOnSwitchStream=function(){I.info(\"stopScreenSharingOnSwitchStream detected\"),this.switchScreenToVideo(this.callId),null!==this.screenStream&&(I.log(\"stopping screenStream\"),this.stopStream(this.screenStream),T.createUserMediaStopEvent(this.callId,\"screen\"))},this.stopScreenSharing=function(){I.info(\"stopScreenSharing detected\"),e.removeCallFromTableWithCallIdAndSendBye(this.callId,\"stop_ScreenSharing\")},this.checkingMutingState=function(){var t=this,i=null;I.debug(\"checkingMutingState\");var a=function(){(0,r.ki)(t,\"mcuRemoteStream\",\"object\")||(t.mcuRemoteStream={}),t.mcuRemoteStream.videoMuted=!0},n=function(){(0,r.ki)(t,\"mcuRemoteStream\",\"object\")||(t.mcuRemoteStream={}),t.mcuRemoteStream.audioMuted=!0};(0,r.ki)(this.callConfiguration,\"userMediaStreamId\",\"string\")&&(i=apiCC.getUserMediaStream(this.callConfiguration.userMediaStreamId))&&(i.videoMuted?(a(),this.isLocalVideoMuted=!0):this.isLocalVideoMuted=!1,i.audioMuted?(n(),this.isLocalAudioMuted=!0):this.isLocalAudioMuted=!1);var o=function(){t.isLocalVideoMuted||(i?i.video&&!i.videoMuted&&i.muteVideoOnStreams(\"enabled\"):t.callLocalStream&&(e.muteTracks(t.callLocalStream.getVideoTracks()),t.isLocalVideoMuted=!0),a())},s=function(){t.isLocalAudioMuted||(i?i.audio&&!i.audioMuted&&i.muteAudioOnStreams(\"enabled\"):t.callLocalStream&&(e.muteTracks(t.callLocalStream.getAudioTracks()),t.isLocalAudioMuted=!0),n())};!0===e.isVideoMuted&&(I.log(\"Client is video muted, applying to call\"),o()),!0===e.isAudioMuted&&(I.log(\"Client is audio muted, applying to call\"),s()),(0,r.ki)(this.callConfiguration,\"muted\",\"string\")&&(I.log(\"callConfiguration muted is set :\",this.callConfiguration.muted),\"VIDEO\"===this.callConfiguration.muted&&(o(),s()),\"AUDIOONLY\"===this.callConfiguration.muted&&s(),\"VIDEOONLY\"===this.callConfiguration.muted&&o(),delete this.callConfiguration.muted)},this.onUserMediaSuccessOnCall=function(t){I.info(\"onUserMediaSuccessOnCall\");var i=(0,r.Pj)(),a={};!0===e.userMediaErrorDetected&&(e.userMediaErrorDetected=!1,a.userMediaErrorDetected=e.userMediaErrorDetected,apiCC.session.setUserData(a)),I.log(\"isHTTPS()\"+i),e.getUserMediaOnGoing=!1,I.log(\"User has granted access to local media.\"),e.accessToLocalMedia=!0,e.displayHangUpButtonInCommand(),this.accessToMedia=!0,\"LOCAL\"!==this.calleeId&&(!0===this.callee?e.setStatus(\"You are connected to :\"+this.callerId):e.setStatus(\"You are connected to :\"+this.calleeId)),!0===this.screenSharing?(this.callType=\"screenSharing\",null!=t&&(t.onended=this.callback(this,\"stopScreenSharing\"),t.getVideoTracks().length>0&&(t.getVideoTracks()[0].onended=this.callback(this,\"stopScreenSharing\")))):!0===this.audioOnly&&(this.callType=\"audio\"),!1===this.addingUserMedia?(e.miniVideo&&(I.log(\"webRTCClient.miniVideo.src :\"+e.miniVideo.src),I.log(\"document.URL :\"+document.URL),void 0!==t&&apiCC.attachMediaStream(e.miniVideo,t)),e.localVideo&&(I.log(\"webRTCClient.localVideo.src :\"+e.localVideo.src),I.log(\"document.URL :\"+document.URL),void 0!==t&&apiCC.attachMediaStream(e.localVideo,t),e.localVideo.style.opacity=1)):e.miniVideo&&void 0!==t&&apiCC.attachMediaStream(e.miniVideo,t),void 0!==t&&(this.callLocalStream=t),(0,r.yJ)()?(I.log(\"isHTTP true\"),this.establishCall()):(I.log(\"webRTCClient.userAcceptOnIncomingCall :\"+e.userAcceptOnIncomingCall),I.log(\"this.callee :\"+this.callee),void 0!==this.data&&I.log(\"this.data.MCUType :\"+this.data.MCUType),!0!==e.userAcceptOnIncomingCall||!0!==this.callee&&\"MCU-Callee\"!==this.data.MCUType||!1!==this.isAccepted?\"LOCAL\"!==this.calleeId?this.establishCall():I.log(\"call is not established as this is a LOCAL stream request\"):I.log(\"Stand-by :: wait for establishCall\"))},this.establishCall=function(){var t=this;I.debug(\"establishCall()\"),!0!==this.started||!0!==this.addingUserMedia||!this.belongsToRoom()||\"publish\"!==this.settingUpType||this.data&&this.data.hasOwnProperty(\"MCUType\")||!this.sessionMCU||this.sessionMCU.hasOwnProperty(\"roomMode\")||(this.restarting=!0,this.pc.close(),this.pc=null,this.started=!1,this.localDescriptionSetted=!1,this.remoteDescriptionSetted=!1,this.sendedSdpOfferMessage=null,this.receivedSdpOfferMessage=null,this.rtpSenders={audio:[],video:[]},this.addingUserMedia=!1,this.updateUserMedia=!1,this.updateCause=null,this.incomingcandidatesQueue=[],this.message200OKReceived=!1,this.statisticId&&(clearInterval(this.statisticId),this.statisticId=null),this.csmIntervalId&&(clearInterval(this.csmIntervalId),this.csmIntervalId=null),this.instanceId=apiCC.generateInstanceId(),this.data.instanceId=this.instanceId),!0!==this.dataCall&&this.checkingMutingState(),this.maybeStart();var i=null;this.callee&&!0!==this.addingUserMedia&&!0!==this.updateUserMedia?(i=new apiCC.myWebRTC_Adapter.RTCSessionDescription(this.receivedSdpOfferMessage),I.log(\"Avant setRemote pour le callee :\",i),null!==this.pc?(e.preferSendingH264Codec&&(I.log(\"Modification of SDP to set H264 as prefered sending codec\"),i.sdp=e.mySDPManager.maybePreferCodec(i.sdp,\"video\",\"H264\")),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"establishCall : before setRemoteDescription for callee\"),this.pc.setRemoteDescription(i,this.callback(this,\"onSetRemoteDescriptionSuccess\"),this.callback(this,\"onSetRemoteDescriptionFailure\"))):(I.log(\"establishCall : before setRemoteDescription for callee - Promise version\"),this.pc.setRemoteDescription(i).then(this.callback(this,\"onSetRemoteDescriptionSuccess\")).catch(this.callback(this,\"onSetRemoteDescriptionFailure\")))):I.log(\"Error : PC is null\"),this.doAnswer()):!0===this.addingUserMedia?(I.log(\"Adding local stream 1.\"),null!==this.pc?(null===this.callLocalStream&&null!==e.localStream&&(this.callLocalStream=e.localStream),null!==this.callLocalStream?(I.log(\"Add Stream of callLocalStream\"),this.addStream(this.callLocalStream).then((function(){t.updateMediaWithRetryManagement(!1)})).catch((function(e){I.error(\"failed to add stream\",e)}))):(I.log(\"No Stream to addStream\"),this.updateMediaWithRetryManagement(!1))):I.error(\"Error : PC is null\")):!0===this.updateUserMedia&&this.updateMediaWithRetryManagement(!1),I.log(\"End of establishCall()\")},this.onUserMediaSuccessTestUni=function(){e.getUserMediaOnGoing=!1,I.info(\"onUserMediaSuccessTestUni : User has not granted access to local media.\");var t=null,i={};!0===e.userMediaErrorDetected&&(e.userMediaErrorDetected=!1,i.userMediaErrorDetected=e.userMediaErrorDetected,apiCC.session.setUserData(i)),e.accessToLocalMedia=!0,this.maybeStart(),this.callee&&(t=new apiCC.myWebRTC_Adapter.RTCSessionDescription(this.receivedSdpOfferMessage),e.preferSendingH264Codec&&(I.log(\"Modification of SDP to set H264 as prefered sending codec\"),t.sdp=e.mySDPManager.maybePreferCodec(t.sdp,\"video\",\"H264\")),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"onUserMediaSuccessTestUni : before setRemoteDescription for callee\"),this.pc.setRemoteDescription(t,this.callback(this,\"onSetRemoteDescriptionSuccess\"),this.callback(this,\"onSetRemoteDescriptionFailure\"))):(I.log(\"onUserMediaSuccessTestUni : before setRemoteDescription for callee - Promise version\"),this.pc.setRemoteDescription(t).then(this.callback(this,\"onSetRemoteDescriptionSuccess\")).catch(this.callback(this,\"onSetRemoteDescriptionFailure\"))),this.doAnswer())},this.onUserMediaErrorOnCall=function(t){var i=this;I.log(\"onUserMediaErrorOnCall\");var a={};e.getUserMediaOnGoing=!1,setTimeout((function(){T.createErrorEvent(t,\"USER_MEDIA_ERROR\",i.callId)})),I.error(\"Failed to get access to local media. Error code was \"+t.code),I.error(t),t=null,\"electron\"!==n.$6&&\"Chrome\"===n.Xh&&n.PR>47&&(I.log(\"browser_version > 47\"),\"https:\"!==window.location.protocol&&I.error(\"HTTPS is now mandatory to use getUserMedia()\")),e.setStatus(\"<div>Your phone is registered, you can be reached at this number : \"+e.clientId+\"</div>\"),!0===this.screenSharing&&(this.callType=\"screenSharing\",\"https:\"!==window.location.protocol?(I.log(\"You need to be connected using HTTPS for screenSharing\"),T.createDesktopCaptureEvent(\"UserMediaError_HTTPS_needed\",this.callId,this.remoteId)):(I.log(\"screenSharing UserMediaError\"),T.createDesktopCaptureEvent(\"UserMediaError\",this.callId,this.remoteId))),!0===this.callee?(this.myWebRTC_Stack.sendBye(this.callId,this.calleeId,this.dest_roomId,this.callerId,\"User_Media_Error\",this.data),e.removeCallFromTableWithCallIdandRemoteId(this.callId,this.callerId,\"User_Media_Error\")):(void 0!==this.data&&null!==this.data&&\"MCU-Callee\"===this.data.MCUType&&this.myWebRTC_Stack.sendBye(this.callId,this.callerId,this.dest_roomId,this.calleeId,\"User_Media_Error\",this.data),e.removeCallFromTableWithCallIdandRemoteId(this.callId,this.calleeId,\"User_Media_Error\")),!1===this.screenSharing&&(e.userMediaErrorDetected=!0,a.userMediaErrorDetected=e.userMediaErrorDetected,apiCC.session.setUserData(a))},this.maybeStart=function(){I.debug(\"maybeStart\"),!this.started&&e.channelReady&&(e.accessToLocalMedia||this.dataCall)&&(I.log(\"Creating PeerConnection.\"),this.createPeerConnection(),e.unidirectionelCallOnly||!0===this.screenSharing?!1===this.callee&&(I.log(\"Adding local stream 2.\"),null!==this.callLocalStream?(I.log(\"Add Stream of callLocalStream\"),this.addStream(this.callLocalStream)):null!==e.localStream?(I.log(\"Add Stream of client.localStream\"),this.addStream(e.localStream),this.callLocalStream=e.localStream):I.log(\"No Stream to add\")):this.dataCall||(I.log(\"Adding local stream 3.\"),null!==this.callLocalStream?(I.log(\"Add Stream of callLocalStream\"),this.addStream(this.callLocalStream)):null!==e.localStream?(I.log(\"Add Stream of client.localStream\"),this.addStream(e.localStream),this.callLocalStream=e.localStream):(I.log(\"No Stream to add\"),this.belongsToRoom()||\"safari\"!==r.wL.type||\"function\"!=typeof this.pc.addTransceiver||(I.debug(\"add transceivers\"),this.pc.addTransceiver(\"audio\",{direction:\"recvonly\"}),this.pc.addTransceiver(\"video\",{direction:\"recvonly\"})))),this.started=!0,!1===this.callee&&(I.log(\"Before doCall()\"),this.doCall())),I.log(\"End of maybeStart\")},this.createDataChannel=function(){if(I.info(\"createDataChannel\"),\"Edge\"===n.Xh&&n.PR<79)I.warn(\"Cannot create DataChannel as it is not supported on Edge\");else if(null===this.sendDataChannel)try{this.sendDataChannel=this.pc.createDataChannel(\"apiRTCDataChannel\",{}),this.sendDataChannel.binaryType=\"arraybuffer\",I.log(\"Created data channel\"),I.log(\"Subscribing to dc events\"),this.sendDataChannel.onopen=this.callback(this,\"onSendDataChannelOpen\"),this.sendDataChannel.onclose=this.callback(this,\"onSendDataChannelClose\"),this.sendDataChannel.onmessage=this.callback(this,\"onSendDataChannelMessage\"),this.sendDataChannel.onerror=this.callback(this,\"onSendDataChannelError\")}catch(e){I.log(\"createDataChannel() failed with exception: \"+e.message)}else I.log(\"Datachannel already exist\")},this.createPeerConnection=function(){I.info(\"createPeerConnection\");try{I.log(\"createPeerConnection with pc_config:\",JSON.stringify(this.pc_config)),I.log(\"and pc_constraints:\",JSON.stringify(this.pc_constraints)),\"chrome\"===r.wL.type&&r.wL.version>=72&&r.wL.version<78?(I.debug(\"Chrome 72=+ and 78-, force sdpSemantics plan-b\"),this.pc_config.sdpSemantics=\"plan-b\"):\"iOS\"===apiRTC.osName&&\"undefined\"!=typeof cordova&&void 0!==cordova.plugins&&void 0!==cordova.plugins.iosrtc?(I.debug(\"Cordova, force sdpSemantics plan-b\"),this.pc_config.sdpSemantics=\"plan-b\"):I.debug(\"sdpSemantics unified-plan is being used\"),this.pc=new apiCC.myWebRTC_Adapter.RTCPeerConnection(this.pc_config,this.pc_constraints),this.dataCall&&this.createDataChannel(),this.pc.onicecandidate=this.callback(this,\"onIceCandidate\")}catch(e){return I.log(\"Failed to create PeerConnection, exception: \"+e.message),void I.error(\"Cannot create RTCPeerConnection object; WebRTC is not supported by this browser.\")}\"Firefox\"===n.Xh&&n.PR>=53||\"Edge\"===n.Xh||\"chrome\"===r.wL.type&&r.wL.version>=64?(this.pc.ontrack=this.callback(this,\"onRemoteTrackAdded\"),this.pc.onaddstream=this.callback(this,\"onRemoteStreamAdded\")):\"Safari\"===n.Xh&&n.PR>=12||\"Mobile Safari\"===n.Xh&&n.PR>=12?this.pc.ontrack=this.callback(this,\"onRemoteTrackAdded\"):this.pc.onaddstream=this.callback(this,\"onRemoteStreamAdded\"),this.pc.onremovestream=this.callback(this,\"onRemoteStreamRemoved\"),this.pc.onnegotiationneeded=this.callback(this,\"onNegotiationNeeded\"),this.pc.onsignalingstatechange=this.callback(this,\"onSignalingStateChange\"),this.pc.oniceconnectionstatechange=this.callback(this,\"onIceConnectionStateChange\"),this.pc.ondatachannel=this.callback(this,\"onDataChannel\"),this.pc.onicegatheringstatechange=this.callback(this,\"onIceGatheringStateChange\"),this.pc.onconnectionstatechange=this.callback(this,\"onConnectionStateChange\"),e.qosEnable&&(this.statisticId=setInterval(this.callback(this,\"getStatistics\"),this.getStatsInterval)),e.csmEnable&&(this.csmLastResults={},this.csmIntervalId=setInterval(this.callback(this,\"csmHandler\"),this.csmIntervalMs))},this.onIceGatheringStateChange=function(e){I.log(\"onIceGatheringStateChange\"),null!==this.pc&&(I.info(\"onIceGatheringStateChange, Ice Gathering State is now : \"+this.pc.iceGatheringState),\"complete\"===this.pc.iceGatheringState&&0===this.candidateNb&&I.warn(\"Warning, no candidate where retrieved for this call on client\"))},this.onConnectionStateChange=function(e){I.log(\"onConnectionStateChange event :\",e)},this.onDataChannel=function(e){I.info(\"onDataChannel event\"),this.receiveDataChannel=e.channel,this.receiveDataChannel.binaryType=\"arraybuffer\",null===this.sendDataChannel&&(I.log(\"Setting this.sendDataChannel with receivedDataChannel\"),this.sendDataChannel=e.channel,this.sendDataChannel.onopen=this.callback(this,\"onSendDataChannelOpen\"),this.sendDataChannel.onclose=this.callback(this,\"onSendDataChannelClose\"),this.sendDataChannel.onmessage=this.callback(this,\"onSendDataChannelMessage\"),this.sendDataChannel.onerror=this.callback(this,\"onSendDataChannelError\")),I.log(\"got dataChannel\",e.channel.label),I.log(\"Subscribing to dc events\"),this.receiveDataChannel.onopen=this.callback(this,\"onReceiveDataChannelOpen\"),this.receiveDataChannel.onclose=this.callback(this,\"onReceiveDataChannelClose\"),this.receiveDataChannel.onmessage=this.callback(this,\"onReceiveDataChannelMessage\"),this.receiveDataChannel.onerror=this.callback(this,\"onReceiveDataChannelError\")},this.onSendDataChannelOpen=function(t){I.info(\"onSendDataChannelOpen\"),\"data\"===this.callType&&\"dataChannelConnector\"===this.calleeId&&(this.pushDataStatus&&\"pipeline\"===this.pushDataStatus.type?(this.pushDataStatus.state=\"ready\",setTimeout((function(){e.startNextPushData()}))):!0!==this.transferStarted&&this.startTransfer()),T.createEvent({eventType:\"sendDataChannelOpen\",callId:this.callId,remoteId:this.remoteId,details:t})},this.onSendDataChannelClose=function(e){I.info(\"onSendDataChannelClose\"),this.sendDataChannel=null,null!==T&&T.createEvent({eventType:\"sendDataChannelClose\",callId:this.callId,remoteId:this.remoteId,details:e})},this.processOnDataChannelMessage=function(e){var t,i,a=null,n=null,o=\"\",s=0;if(I.info(\"processOnDataChannelMessage\"),a=JSON.parse(e.data),I.log(\"data.uuid :\"+a.uuid),I.log(\"data.messageSize :\"+a.messageSize),I.log(\"data.originalDataType :\"+a.originalDataType),t=a.uuid,\"ArrayBuffer\"===a.originalDataType&&(I.log(\"ArrayBuffer conversion\"),a.message=r.cw.decode(a.message)),I.log(\"data :\"+a),I.log(\"data.uuid :\"+t),I.log(\"receiveChunkNb[uuid] :\"+this.receiveChunkNb[t]),void 0===this.receiveChunkNb[t])I.log(\"receiving first packet for uuid :\"+t),I.log(\"evt.data.message :\"+e.data),this.firstDataPacket[t]=a,this.receiveChunkNb[t]=1,this.receivedSize[t]=0,this.startingDate=new Date,this.transferDuration=0,T.createEvent({eventType:\"onFileReceiving\",remoteId:this.remoteId,callId:this.callId,name:a.name,uuid:t}),T.createEvent({eventType:\"onFileProgress\",sendChunkNb:this.receiveChunkNb[t],fileSize:this.firstDataPacket[t].size,remainingSize:this.firstDataPacket[t].size,callId:this.callId,uuid:t,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:0,transferEnded:!1});else if(I.log(\"new packet for uuid :\"+t),this.receiveChunkNb[t]+=1,I.log(\"data.messageSize :\"+a.messageSize),I.log(\"data.message.length :\"+a.message.length),s=a.messageSize||a.message.length,I.log(\"receivedSize :\"+s),this.receiveArrayToStoreChunks[t]||(this.receiveArrayToStoreChunks[t]=[]),this.receiveArrayToStoreChunks[t].push(a.message),this.receivedSize[t]+=s,this.transferDuration=new Date-this.startingDate,this.receivedSize[t]===this.firstDataPacket[t].size){if(I.log(\"End of data transfert\"),I.log(\"this.firstDataPacket.type :\"+this.firstDataPacket[t].type),\"image/png-dataUrl\"===this.firstDataPacket[t].type){for(I.log(\"Photo received from a takeSnapshot\"),i=0;i<this.receiveArrayToStoreChunks[t].length;i+=1)o+=this.receiveArrayToStoreChunks[t][i];n=o}else n=new window.Blob(this.receiveArrayToStoreChunks[t]);T.createEvent({eventType:\"onFileProgress\",sendChunkNb:this.receiveChunkNb[t],fileSize:this.firstDataPacket[t].size,remainingSize:0,callId:this.callId,uuid:t,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:100,transferEnded:!0}),T.createEvent({eventType:\"onFileReceived\",callId:this.callId,uuid:t,remoteId:this.remoteId,callerId:this.callerId,calleeId:this.calleeId,data:{file:n,name:this.firstDataPacket[t].name,type:this.firstDataPacket[t].type,uuid:t},details:e}),delete this.receiveArrayToStoreChunks[t],delete this.receivedSize[t],delete this.receiveChunkNb[t],delete this.firstDataPacket[t]}else T.createEvent({eventType:\"onFileProgress\",sendChunkNb:this.receiveChunkNb[t],fileSize:this.firstDataPacket[t].size,remainingSize:this.firstDataPacket[t].size-this.receivedSize[t],callId:this.callId,uuid:t,remoteId:this.remoteId,lastPacket:!1,startingDate:this.startingDate,transferDuration:this.transferDuration,percentage:parseInt(100*this.receivedSize[t]/this.firstDataPacket[t].size,10),transferEnded:!1})},this.onSendDataChannelMessage=function(e){I.info(\"onSendDataChannelMessage :\",e),this.processOnDataChannelMessage(e)},this.onSendDataChannelError=function(e){I.info(\"onSendDataChannelError\"),this.sendDataChannel=null,T.createEvent({eventType:\"sendDataChannelError\",callId:this.callId,remoteId:this.remoteId,details:e})},this.onReceiveDataChannelOpen=function(e){I.info(\"onReceiveChannelOpen\"),T.createEvent({eventType:\"receiveDataChannelOpen\",callId:this.callId,remoteId:this.remoteId,details:e})},this.onReceiveDataChannelClose=function(e){I.info(\"onReceiveDataChannelClose\"),this.receiveDataChannel=null,null!==T&&T.createEvent({eventType:\"receiveDataChannelClose\",callId:this.callId,remoteId:this.remoteId,details:e})},this.onReceiveDataChannelMessage=function(e){I.info(\"onReceiveChannelMessage\"),this.processOnDataChannelMessage(e)},this.onReceiveDataChannelError=function(e){I.info(\"onReceiveChannelError\"),T.createEvent({eventType:\"receiveDataChannelError\",callId:this.callId,remoteId:this.remoteId,details:e})},this.startTransfer=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.hasOwnProperty(\"delay\")?t.delay:100;!0!==this.transferStarted&&(I.info(\"startTransfer\",i),this.transferStarted=!0,setTimeout((function(){e.dcfs||(e.dcfs=new f(e),e.data.offset>0?e.dcfs.transfer(e.fileContent.buffer,e.data.offset,e.sendDataChannel,{delay:i}):e.dcfs.transfer(e.fileContent.buffer,0,e.sendDataChannel,{delay:i}))}),i))},this.statisticsAnswer=function(t){var i=t.result(),a=null;this.qm||(this.qm=new p(this.getStatsInterval/1e3,this.callback(this,\"onQosChange\"),this.callback(this,\"onQosAudioChange\"),this.callback(this,\"onQosVideoChange\"),this.callId,e.apiKey,e.clientId,e.socket)),i&&(this.qm.insertStats(i,this.sendedSdpOfferMessage,this.receivedSdpOfferMessage,e.remoteVideo),a=this.qm.getAllStats(),e.qosEnable&&T.createEvent({eventType:\"onQosStatsUpdate\",callId:this.callId,remoteId:this.remoteId,stats:a}),this.videoReceivedWidth=a.VideoRecv.FrameWidth,this.videoReceivedHeight=a.VideoRecv.FrameHeight,this.videoSendWidth=a.VideoSend.FrameWidth,this.videoSendHeight=a.VideoSend.FrameHeight,this.videoReceivedDelay=a.VideoRecv.delay,this.audioReceivedDelay=a.AudioRecv.delay,this.audioSendDelay=a.AudioSend.rtt,this.videoSendDelay=a.VideoSend.rtt,this.videoSendMoyDelay=a.VideoSend.moyRtt,this.videoSendPacketLossRatio=a.VideoSend.packetLostRatio,this.audioSendPacketLossRatio=a.AudioSend.packetLostRatio,this.videoSendEncodeUsagePercent=a.VideoSend.googEncodeUsagePercent,this.videoSendCpuLimitedResolution=a.VideoSend.googCpuLimitedResolution,this.videoSendBandwidthLimitedResolution=a.VideoSend.googBandwidthLimitedResolution,void 0!==this.videoSendCpuLimitedResolution&&!0===JSON.parse(this.videoSendCpuLimitedResolution)&&T.createEvent({eventType:\"cpuLimited\",callId:this.callId,encodeUsagePercent:this.videoSendEncodeUsagePercent}),void 0!==this.videoSendBandwidthLimitedResolution&&!0===JSON.parse(this.videoSendBandwidthLimitedResolution)&&T.createEvent({eventType:\"bandwidthLimited\",callId:this.callId}))},this.csmGetStatsHandler=function(t){var i,a=this,o=null,s=null,l={};if(this.csm||(this.csm=new v(this.csmIntervalMs/1e3,r.wL.type,r.wL.version,\"standard\"),this.csm.browserInfo={browserAbout:n.Xh+\" \"+n.dc,browserType:r.wL.type,browserVersion:r.wL.version},(0,r.Ym)(this.mcuRemoteStream,\"attributes\",\"object\")&&(!0===this.mcuRemoteStream.replay?(0,r.Ym)(this.mcuRemoteStream.attributes.callerId,\"string\")&&(0,r.Ym)(this.mcuRemoteStream.attributes.callId,\"string\")&&(0,r.Ym)(this.mcuRemoteStream.attributes.recId,\"string\")&&(this.csm.callFeed={clientId:this.mcuRemoteStream.attributes.callerId,callId:this.mcuRemoteStream.attributes.callId,modifier:\"replay\",recId:this.mcuRemoteStream.attributes.recId}):(0,r.Ym)(this.mcuRemoteStream.attributes.callerId,\"string\")&&(0,r.Ym)(this.mcuRemoteStream.attributes.callId,\"string\")&&(this.csm.callFeed={clientId:this.mcuRemoteStream.attributes.callerId,callId:this.mcuRemoteStream.attributes.callId}))),l.post=function(e){a.mos||(a.mos=new b),e.quality={},e.audioReceived?a.isRemoteAudioMuted?e.quality.mosS=\"Muted\":0!==e.audioReceived.bitsReceivedPerSecond?(e.audioReceived.delay=parseInt(a.audioReceivedDelay,10),e.quality.mosS=a.mos.NarrowBandSpeechQuality(e.audioReceived.delay,e.audioReceived.packetLossRatio)):e.quality.mosS=\"NoStream\":e.quality.mosS=\"NoStream\",e.videoReceived?a.isRemoteVideoMuted?e.quality.mosV=\"Muted\":0!==e.videoReceived.bitsReceivedPerSecond?(e.videoReceived.width=a.videoReceivedWidth,e.videoReceived.height=a.videoReceivedHeight,e.videoReceived.delay=parseInt(a.videoReceivedDelay,10),e.quality.mosV=a.mos.videoQuality(e.videoReceived.width,e.videoReceived.height,e.videoReceived.packetLossRatio,Math.floor(e.videoReceived.bitsReceivedPerSecond/1e3),e.videoReceived.framesDecodedPerSecond)):e.quality.mosV=\"NoStream\":e.quality.mosV=\"NoStream\",e.audioReceived&&e.videoReceived&&(e.quality.mosAV=a.mos.audiovisualQuality(e.quality.mosS,e.quality.mosV,e.audioReceived.delay,e.videoReceived.delay)),e.audioSent?a.isLocalAudioMuted?e.quality.mosSS=\"Muted\":0!==e.audioSent.bitsSentPerSecond?(e.audioSent.delay=parseInt(a.audioSendDelay,10),e.audioSent.packetLossRatio=a.audioSendPacketLossRatio,e.quality.mosSS=a.mos.NarrowBandSpeechQuality(e.audioSent.delay,e.audioSent.packetLossRatio)):e.quality.mosSS=\"NoStream\":e.quality.mosSS=\"NoStream\",e.videoSent?a.isLocalVideoMuted?e.quality.mosSV=\"Muted\":0!==e.videoSent.bitsSentPerSecond?(e.videoSent.width=a.videoSendWidth,e.videoSent.height=a.videoSendHeight,e.videoSent.delay=parseInt(a.videoSendDelay,10),e.videoSent.moyDelay=parseInt(a.videoSendMoyDelay,10),e.videoSent.packetLossRatio=a.videoSendPacketLossRatio,e.videoSent.encodeUsagePercent=a.videoSendEncodeUsagePercent,e.videoSent.cpuLimitedResolution=a.videoSendCpuLimitedResolution,e.videoSent.bandwidthLimitedResolution=a.videoSendBandwidthLimitedResolution,e.quality.mosSV=a.mos.videoQuality(e.videoSent.width,e.videoSent.height,e.videoSent.packetLossRatio,Math.floor(e.videoSent.bitsSentPerSecond/1e3),e.videoSent.framesEncodedPerSecond)):e.quality.mosSV=\"NoStream\":e.quality.mosSV=\"NoStream\",e.audioSent&&e.videoSent&&(e.quality.mosSAV=a.mos.audiovisualQuality(e.quality.mosSS,e.quality.mosSV,e.audioSent.delay,e.videoSent.delay))},i=this.csm.addCallStats(t,l),0!==Object.keys(i).length){!i.quality||\"Muted\"===i.quality.mosS&&\"Muted\"===i.quality.mosV&&\"Muted\"===i.quality.mosSS&&\"Muted\"===i.quality.mosSV||e.qualityScoreEnable&&T.createEvent({eventType:\"onCallScoreUpdate\",callId:this.callId,score:i.quality}),this.csmLastResults=i,this.callLocalStream&&\"function\"==typeof this.callLocalStream.getVideoTracks&&(o=this.callLocalStream.getVideoTracks())&&o[0]&&\"function\"==typeof o[0].getSettings&&(s=o[0].getSettings());var d={save:!0,clientId:e.clientId,callId:this.callId,instanceId:this.instanceId,browserInfo:this.csm.browserInfo,stats:i};this.sessionMCU&&(d.roomId=this.sessionMCU.roomName,d.pubSub=e.MCUClient.pubConnector),this.csm.callFeed&&(d.callFeed=this.csm.callFeed),s&&(d.videoSettings=s),this.data.mesh&&(d.mesh=this.data.mesh),this.myWebRTC_Stack.sendInfo(\"callStats\",d),e.csmEnable&&(this.data&&this.data.mesh&&(this.data.mesh.calleeCompositeUserId?this.data.mesh.calleeCompositeUserId===e.compositeClientId:this.data.mesh.calleeId===e.clientId)?T.createEvent({eventType:\"onCallStatsUpdate\",callId:this.data.mesh.calleeCallId,userId:this.data.mesh.callerId,stats:i}):T.createEvent({eventType:\"onCallStatsUpdate\",callId:this.callId,stats:i}))}},this.onQosChange=function(e,t){T.createEvent({eventType:\"onQosChange\",callId:this.callId,remoteId:this.remoteId,qosIn:e,qosOut:t})},this.onQosAudioChange=function(e,t){T.createEvent({eventType:\"onQosAudioChange\",callId:this.callId,remoteId:this.remoteId,qosAudioIn:e,qosAudioOut:t})},this.onQosVideoChange=function(e,t){T.createEvent({eventType:\"onQosVideoChange\",callId:this.callId,remoteId:this.remoteId,qosVideoIn:e,qosVideoOut:t})},this.getStatistics=function(){this.pc&&this.pc.getStats&&\"Firefox\"!==n.Xh&&this.pc.getStats(this.callback(this,\"statisticsAnswer\"))},this.csmHandler=function(){this.statisticId||this.getStatistics(),this.pc&&\"function\"==typeof this.pc.getStats&&this.pc.getStats(null).then(this.callback(this,\"csmGetStatsHandler\")).catch((function(e){I.warn(\"failed to get stats\",e)}))},this.doCall=function(){var e=null;I.log(\"Sending offer to peer\"),this.audioOnly?(I.log(\"audioOnly call :\",this.mediaConstraintsAudioOnly),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"createOffer\"),this.pc.createOffer(this.callback(this,\"setLocalAndSendMessageonOffer\"),this.callback(this,\"onCreateOfferFailure\"),this.mediaConstraintsAudioOnly)):(I.log(\"createOffer - Promise version\"),this.pc.createOffer(this.mediaConstraintsAudioOnly).then(this.callback(this,\"setLocalAndSendMessageonOffer\")).catch(this.callback(this,\"onCreateOfferFailure\")))):!0===this.screenSharing?(I.log(\"screenSharing call : one way media :\",e),e={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"createOffer\"),this.pc.createOffer(this.callback(this,\"setLocalAndSendMessageonOffer\"),this.callback(this,\"onCreateOfferFailure\"),e)):(I.log(\"createOffer - Promise version\"),this.pc.createOffer(e).then(this.callback(this,\"setLocalAndSendMessageonOffer\")).catch(this.callback(this,\"onCreateOfferFailure\")))):!0===this.dataCall?(I.log(\"call is data only :\",e),e=\"Firefox\"===n.Xh&&n.PR>43?{offerToReceiveAudio:!1,offerToReceiveVideo:!1}:{mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"createOffer\"),this.pc.createOffer(this.callback(this,\"setLocalAndSendMessageonOffer\"),this.callback(this,\"onCreateOfferFailure\"),e)):(I.log(\"createOffer - Promise version\"),this.pc.createOffer(e).then(this.callback(this,\"setLocalAndSendMessageonOffer\")).catch(this.callback(this,\"onCreateOfferFailure\")))):(I.log(\"call is audio & video :\",this.mediaConstraints),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"createOffer\"),this.pc.createOffer(this.callback(this,\"setLocalAndSendMessageonOffer\"),this.callback(this,\"onCreateOfferFailure\"),this.mediaConstraints)):(I.log(\"createOffer - Promise version\"),this.pc.createOffer(this.mediaConstraints).then(this.callback(this,\"setLocalAndSendMessageonOffer\")).catch(this.callback(this,\"onCreateOfferFailure\"))))},this.doAnswer=function(){I.info(\"doAnswer\");var e=null;this.audioOnly?(I.log(\"audioOnly call\"),e=this.mediaConstraintsAudioOnly):e=this.mediaConstraints,\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"createAnswer\"),this.pc.createAnswer(this.callback(this,\"setLocalAndSendMessage\"),this.callback(this,\"onCreateAnswerFailure\"),e)):(I.log(\"createAnswer - Promise version\"),this.pc.createAnswer(e).then(this.callback(this,\"setLocalAndSendMessage\")).catch(this.callback(this,\"onCreateAnswerFailure\")))},this.doUpdateAnswer=function(){I.info(\"doUpdateAnswer\");var e=null;this.audioOnly?(I.log(\"audioOnly call\"),e=this.mediaConstraintsAudioOnly):e=this.mediaConstraints,\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"createAnswer\"),this.pc.createAnswer(this.callback(this,\"setLocalAndSendMessageUpdate\"),this.callback(this,\"onCreateAnswerFailure\"),e)):(I.log(\"createAnswer - Promise version\"),this.pc.createAnswer(e).then(this.callback(this,\"setLocalAndSendMessageUpdate\")).catch(this.callback(this,\"onCreateAnswerFailure\")))},this.updateMediaWithRetryManagement=function(e){I.debug(\"updateMediaWithRetryManagement\");var t=this.updateMedia(e);I.debug(\"updateMediaResult :\",t),\"Sig_state_not_stable\"!==t.reason&&\"Update_already_ongoing\"!==t.reason||(I.debug(\"updateMedia will be retried later for reason :\",t.reason),this.retryUpdateMedia=!0)},this.updateMedia=function(e){return I.debug(\"updateMedia, callId :\",this.callId),I.log(\"iceRestartActivated :\",e),null===this.pc?(I.log(\"updateMedia, pc no more exist\"),{status:\"Not_Done\",reason:\"PC_Not_Exit\"}):!0===this.updateMediaOngoing?(I.log(\"updateMedia, already ongoing\"),{status:\"Not_Done\",reason:\"Update_already_ongoing\"}):(this.updateMediaOngoing=!0,\"stable\"!==this.pc.signalingState?{status:\"Not_Done\",reason:\"Sig_state_not_stable\"}:(I.log(\"Sending Update offer to peer.\"),this.audioOnly?(I.log(\"audioOnly call :\",this.mediaConstraintsAudioOnly),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"createOffer\"),void 0!==this.mediaConstraintsAudioOnly.mandatory?this.mediaConstraintsAudioOnly.mandatory.IceRestart=!0:this.mediaConstraintsAudioOnly.iceRestart=!0,I.log(\"this.mediaConstraints :\",this.mediaConstraintsAudioOnly),this.pc.createOffer(this.callback(this,\"setLocalAndSendMessageonOfferUpdate\"),this.callback(this,\"onCreateOfferFailure\"),this.mediaConstraintsAudioOnly)):(I.log(\"createOffer - Promise version\"),!0===e&&(this.mediaConstraintsAudioOnly.iceRestart=!0),I.log(\"this.mediaConstraints :\",this.mediaConstraintsAudioOnly),this.pc.createOffer(this.mediaConstraintsAudioOnly).then(this.callback(this,\"setLocalAndSendMessageonOfferUpdate\")).catch(this.callback(this,\"onCreateOfferFailure\")))):\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"createOffer\"),!0===e&&(void 0!==this.mediaConstraints.mandatory?this.mediaConstraints.mandatory.IceRestart=!0:this.mediaConstraints.iceRestart=!0),I.log(\"this.mediaConstraints :\",this.mediaConstraints),this.pc.createOffer(this.callback(this,\"setLocalAndSendMessageonOfferUpdate\"),this.callback(this,\"onCreateOfferFailure\"),this.mediaConstraints)):(I.log(\"createOffer - Promise version\"),!0===e&&(this.mediaConstraints.iceRestart=!0),I.log(\"this.mediaConstraints :\",this.mediaConstraints),this.pc.createOffer(this.mediaConstraints).then(this.callback(this,\"setLocalAndSendMessageonOfferUpdate\")).catch(this.callback(this,\"onCreateOfferFailure\"))),{status:\"OnGoing\",reason:\"OK\"}))},this.manipulateSDP=function(t,i){var a=null,n=!1;return I.log(\"manipulateSDP with type :\",i),!0===e.receiveMediaDeactivated&&(I.log(\"setting receiveMediaDeactivated in SDP :\"+e.receiveMediaDeactivated),t.sdp=e.mySDPManager.setSendOnly(t.sdp)),!0===e.RTPMedia&&(t.sdp=t.sdp.replace(/RTP\\/SAVPF/g,\"RTP/SF\")),null!==e.audioBandwidth&&(I.log(\"setting audioBandwidth in SDP :\"+e.audioBandwidth),t.sdp=e.mySDPManager.setAudioBandwidth(t.sdp,e.audioBandwidth)),null!==e.videoBandwidth&&(I.log(\"setting videoBandwidth in SDP :\"+e.videoBandwidth),t.sdp=e.mySDPManager.setVideoBandwidth(t.sdp,e.videoBandwidth)),null!==e.dataBandwidth&&(I.log(\"setting dataBandwidth in SDP :\"+e.dataBandwidth),t.sdp=e.mySDPManager.setDataBandwidth(t.sdp,e.dataBandwidth)),!0===e.preferOpusCodec&&(I.log(\"setting preferOpusCodec\"),t.sdp=e.mySDPManager.preferOpus(t.sdp)),!0!==e.preferVP9Codec&&!0!==this.preferVP9Codec||(I.log(\"Call prefer VP9 Codec\"),t.sdp=e.mySDPManager.maybePreferCodec(t.sdp,\"video\",\"VP9\")),!0!==e.preferH264Codec&&!0!==this.preferH264Codec||(I.log(\"Call prefer H264 Codec\"),t.sdp=e.mySDPManager.maybePreferCodec(t.sdp,\"video\",\"H264\")),!0===this.preferVP8Codec&&(I.log(\"Call prefer VP8 Codec\"),t.sdp=e.mySDPManager.maybePreferCodec(t.sdp,\"video\",\"VP8\")),!0===e.setStereo&&(I.log(\"Set Stereo\"),t.sdp=e.mySDPManager.setCodecParam(t.sdp,\"opus/48000\",\"stereo\",\"1\")),t=e.mySDPManager.updateSDPcodecs(t,t.type,\"audio\",e.allowedAudioCodecs),t=e.mySDPManager.updateSDPcodecs(t,t.type,\"video\",e.allowedVideoCodecs),\"OFFER\"===i?\"publish\"===this.settingUpType&&\"NONE\"===this.mediaTypeForIncomingCall?(a=e.mySDPManager.createGuideline(t.sdp),\"VIDEO\"===this.mediaTypeForOutgoingCall?((0,r.ki)(a,\"audio\",\"object\")&&\"sendonly\"!==a.audio.direction&&(a.audio.direction=\"sendonly\",n=!0),(0,r.ki)(a,\"video\",\"object\")&&\"sendonly\"!==a.video.direction&&(a.video.direction=\"sendonly\",n=!0)):\"AUDIO\"===this.mediaTypeForOutgoingCall?((0,r.ki)(a,\"audio\",\"object\")&&\"sendonly\"!==a.audio.direction&&(a.audio.direction=\"sendonly\",n=!0),(0,r.ki)(a,\"video\",\"object\")&&\"inactive\"!==a.video.direction&&(a.video.direction=\"inactive\",n=!0)):\"VIDEOONLY\"===this.mediaTypeForOutgoingCall&&((0,r.ki)(a,\"audio\",\"object\")&&\"inactive\"!==a.audio.direction&&(a.audio.direction=\"inactive\",n=!0),(0,r.ki)(a,\"video\",\"object\")&&\"sendonly\"!==a.video.direction&&(a.video.direction=\"sendonly\",n=!0)),!0===n&&(t.sdp=a.generate())):\"VIDEO\"===this.mediaTypeForOutgoingCall?I.log(\"mediaTypeForOutgoingCall is VIDEO\"):\"AUDIO\"===this.mediaTypeForOutgoingCall||!0===this.audioOnly?(I.log(\"mediaTypeForOutgoingCall is AUDIO\"),t.sdp=e.mySDPManager.setRecvOnlyForVideo(t.sdp)):\"VIDEOONLY\"===this.mediaTypeForOutgoingCall?(I.log(\"mediaTypeForOutgoingCall is VIDEOONLY\"),t.sdp=e.mySDPManager.setRecvOnlyForAudio(t.sdp)):\"NONE\"===this.mediaTypeForOutgoingCall&&(I.log(\"mediaTypeForOutgoingCall is NONE\"),t.sdp=e.mySDPManager.setRecvOnly(t.sdp)):\"ANSWER\"===i&&(\"VIDEO\"===this.mediaTypeForIncomingCall?I.log(\"mediaTypeForIncomingCall is VIDEO\"):\"AUDIO\"===this.mediaTypeForIncomingCall||!0===this.audioOnly?(I.log(\"mediaTypeForIncomingCall is AUDIO\"),t.sdp=e.mySDPManager.setRecvOnlyForVideo(t.sdp)):\"VIDEOONLY\"===this.mediaTypeForIncomingCall?(I.log(\"mediaTypeForIncomingCall is VIDEOONLY\"),t.sdp=e.mySDPManager.setRecvOnlyForAudio(t.sdp)):\"NONE\"===this.mediaTypeForIncomingCall&&(I.log(\"mediaTypeForIncomingCall is NONE\"),t.sdp=e.mySDPManager.setRecvOnly(t.sdp))),\"SDP\"===this.simulcast&&\"OFFER\"===i&&\"publish\"===this.settingUpType&&((a=e.mySDPManager.createGuideline(t.sdp)).mungeForSimulcasting(),t.sdp=a.generate()),t},this.setLocalAndSendMessageonOffer=function(t){I.info(\"setLocalAndSendMessageonOffer\"),I.log(\"sessionDescription = \",t),I.log(\"sessionDescription.sdp = \",t.sdp);var i=null;t.sdp=this.manipulateSDP(t,\"OFFER\").sdp,I.log(\"manipulated sessionDescription.sdp = \",t.sdp),!0===this.stripAudioSDPActivated&&(t.sdp=e.mySDPManager.stripAudioMediaDescriptionFromSDP(t.sdp)),!0===this.stripVideoSDPActivated&&(t.sdp=e.mySDPManager.stripVideoMediaDescriptionFromSDP(t.sdp)),this.setLocalCallProfile(e.evalCallProfileWithSdp(t.sdp,\"local\",\"send\")),this.sendedSdpOfferMessage=t,!0===this.dataCall&&(I.log(\"setLocalAndSendMessageonOffer : data Call\"),this.callType=\"data\"),!1===this.callCancelled?!1===e.NtoNConf?(I.log(\"Conf N to 1\"),!0===this.screenSharing&&(i=e.mySDPManager.getAudioMediaDescriptionPart(this.sendedSdpOfferMessage.sdp),this.callType=null!=i?\"screenSharingWithAudio\":\"screenSharing\"),!0===this.trickleIce&&(this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,e.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:t,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"setLocalAndSendMessageonOffer : before setLocalDescription\"),this.pc.setLocalDescription(this.sendedSdpOfferMessage,this.callback(this,\"onSetLocalDescriptionSuccess\"),this.callback(this,\"onSetLocalDescriptionFailure\"))):(I.log(\"setLocalAndSendMessageonOffer : before setLocalDescription - Promise version\"),this.pc.setLocalDescription(this.sendedSdpOfferMessage).then(this.callback(this,\"onSetLocalDescriptionSuccess\")).catch(this.callback(this,\"onSetLocalDescriptionFailure\")))):(I.log(\"Conf N to N\"),this.myWebRTC_Stack.sendInviteBroadcast(this.callId,this.callerId,e.nickname,this.dest_roomId,this.dest_roomId,t),this.inviteSended=!0):(I.warn(\"Invite is not sent has call has been canceled\"),e.removeCallFromTableWithCallIdandRemoteId(this.callId,this.calleeId,\"Call_Cancelled\"),0===e.callsTable.length&&(I.log(\"No more established calls for client\"),e.initMediaElementState(),e.displayCallButtonInCommand()))},this.setLocalAndSendMessageonOfferUpdate=function(t){var i,a=null;I.info(\"setLocalAndSendMessageonOfferUpdate, sessionDescription :\"+t),this.sendedSdpOfferMessage=t,I.log(\"sessionDescription.sdp = \",t.sdp),((0,r.Ym)(this.audioSdpDirection,\"string\")||(0,r.Ym)(this.videoSdpDirection,\"string\"))&&(a=e.mySDPManager.createGuideline(t.sdp),(0,r.ki)(a,\"audio\",\"object\")&&(0,r.Ym)(this.audioSdpDirection,\"string\")&&(a.audio.direction=this.audioSdpDirection),(0,r.ki)(a,\"video\",\"object\")&&(0,r.Ym)(this.videoSdpDirection,\"string\")&&(a.video.direction=this.videoSdpDirection),t.sdp=a.generate()),this.setLocalCallProfile(e.evalCallProfileWithSdp(t.sdp,\"local\",\"send\"),!0),i=this.callee?this.callerId:this.calleeId,!0===this.trickleIce?(this.myWebRTC_Stack.sendUpdate(this.callId,this.callerId,this.calleeId,this.dest_roomId,i,t,this.callType,this.data),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"setLocalAndSendMessageonOfferUpdate : before setLocalDescription\"),this.pc.setLocalDescription(t,this.callback(this,\"onSetLocalDescriptionSuccess\"),this.callback(this,\"onSetLocalDescriptionFailure\"))):(I.log(\"setLocalAndSendMessageonOfferUpdate : before setLocalDescription - Promise version\"),this.pc.setLocalDescription(t).then(this.callback(this,\"onSetLocalDescriptionSuccess\")).catch(this.callback(this,\"onSetLocalDescriptionFailure\")))):(I.log(\"Updating PC offer and answer after switch Stream\"),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"setLocalAndSendMessageonOfferUpdate : before setLocalDescription\"),this.pc.setLocalDescription(t,this.callback(this,\"onSetLocalDescriptionSuccess\"),this.callback(this,\"onSetLocalDescriptionFailure\"))):(I.log(\"setLocalAndSendMessageonOfferUpdate : before setLocalDescription - Promise version\"),this.pc.setLocalDescription(t).then(this.callback(this,\"onSetLocalDescriptionSuccess\")).catch(this.callback(this,\"onSetLocalDescriptionFailure\"))),e.preferSendingH264Codec&&(I.log(\"Modification of SDP to set H264 as prefered sending codec\"),this.pc.remoteDescription.sdp=e.mySDPManager.maybePreferCodec(this.pc.remoteDescription.sdp,\"video\",\"H264\")),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"setLocalAndSendMessageonOfferUpdate : before setRemoteDescription\"),this.pc.setRemoteDescription(this.pc.remoteDescription,this.callback(this,\"onSetRemoteDescriptionSuccess\"),this.callback(this,\"onSetRemoteDescriptionFailure\"))):(I.log(\"setLocalAndSendMessageonOfferUpdate : before setRemoteDescription - Promise version\"),this.pc.setRemoteDescription(this.pc.remoteDescription).then(this.callback(this,\"onSetRemoteDescriptionSuccess\")).catch(this.callback(this,\"onSetRemoteDescriptionFailure\"))))},this.onCreateOfferFailure=function(e){I.info(\"onCreateOfferFailure\"+e),e=null},this.onCreateAnswerFailure=function(e){I.info(\"onCreateAnswerFailure\"+e),e=null},this.setLocalAndSendMessage=function(t){var i;I.info(\"setLocalAndSendMessage\"),I.log(\"sessionDescription.sdp = \",t.sdp),null!==this.pc?(t=this.manipulateSDP(t,\"ANSWER\"),i=e.mySDPManager.createGuideline(t.sdp),this.setLocalCallProfile(e.evalCallProfileWithSdpGuideline(i,t.sdp,\"local\",\"send\")),this.setRemoteCallProfile(e.evalCallProfileWithSdpGuideline(i,t.sdp,\"local\",\"receive\")),I.log(\"manipulated sessionDescription.sdp = \",t.sdp),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"setLocalAndSendMessage : before setLocalDescription\"),this.pc.setLocalDescription(t,this.callback(this,\"onSetLocalDescriptionSuccess\"),this.callback(this,\"onSetLocalDescriptionFailure\"))):(I.log(\"setLocalAndSendMessage : before setLocalDescription - Promise version\"),this.pc.setLocalDescription(t).then(this.callback(this,\"onSetLocalDescriptionSuccess\")).catch(this.callback(this,\"onSetLocalDescriptionFailure\"))),this.sendedSdpOfferMessage=t,!0===this.trickleIce&&this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,e.nickname,this.dest_roomId,t,this.data)):I.log(\"setLocalAndSendMessage, pc no more exist\")},this.setLocalAndSendMessageUpdate=function(t){var i;if(null!==this.pc){\"safari\"===r.wL.type&&(t.sdp=this.manipulateSDP(t,\"OFFER\").sdp),i=e.mySDPManager.createGuideline(t.sdp),\"AUDIOONLY\"===this.mediaType?i.hasOwnProperty(\"video\")&&\"inactive\"!==i.video.direction&&(I.debug(\"Only audio was requested at call setup: deactivating video\"),i.video.direction=\"inactive\",t.sdp=i.generate()):\"VIDEOONLY\"===this.mediaType&&i.hasOwnProperty(\"audio\")&&\"inactive\"!==i.audio.direction&&(I.debug(\"Only video was requested at call setup: deactivating audio\"),i.audio.direction=\"inactive\",t.sdp=i.generate()),this.setLocalCallProfile(e.evalCallProfileWithSdpGuideline(i,t.sdp,\"local\",\"send\"),!0),this.setRemoteCallProfile(e.evalCallProfileWithSdpGuideline(i,t.sdp,\"local\",\"receive\"),!0),this.updateOngoingTimeoutId&&(clearTimeout(this.updateOngoingTimeoutId),delete this.updateOngoingTimeoutId),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh?(I.log(\"setLocalAndSendMessageUpdate : before setLocalDescription\"),this.pc.setLocalDescription(t,this.callback(this,\"onSetLocalDescriptionSuccess\"),this.callback(this,\"onSetLocalDescriptionFailure\"))):(I.log(\"setLocalAndSendMessageUpdate : before setLocalDescription - Promise version\"),this.pc.setLocalDescription(t).then(this.callback(this,\"onSetLocalDescriptionSuccess\")).catch(this.callback(this,\"onSetLocalDescriptionFailure\")));var a;a=this.callee?this.callerId:this.calleeId,this.myWebRTC_Stack.send200Update(this.callId,this.callerId,this.calleeId,this.dest_roomId,a,t,this.data),this.asyncCallbacks&&\"updateMediaType\"===this.asyncCallbacks.type&&(I.debug(\"asyncCallbacks resolve\"),this.asyncCallbacks.resolve(),this.asyncCallbacks.timeoutId&&(clearTimeout(this.asyncCallbacks.timeoutId),delete this.asyncCallbacks.timeoutId),delete this.asyncCallbacks)}else I.log(\"setLocalAndSendMessageUpdate, pc no more exist\")},this.onIceCandidate=function(t){try{I.debug(\"onIceCandidate :\",JSON.stringify(t.candidate))}catch(e){I.error(e)}var i,a=0,n=0;i=this.callee?this.callerId:this.calleeId,null!==this.pc&&(I.debug(\"Ice Connection State is now : \"+this.pc.iceConnectionState),I.debug(\"Ice Gathering State is now : \"+this.pc.iceGatheringState)),t.candidate?(this.candidateNb+=1,!0===this.trickleIce?this.mediaRoutingMode===e.mediaRoutingModeEnum.hostOnly?-1!==(a=t.candidate.candidate.search(\"host\"))?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,i,t.candidate.sdpMLineIndex,t.candidate.sdpMid,t.candidate.candidate,this.data,t.candidate,{volatile:!!this.restarted}):I.log(\"Media routing mode is hostOnly and not a HOST Candidate : ignoring message\"):this.mediaRoutingMode===e.mediaRoutingModeEnum.stun?(a=t.candidate.candidate.search(\"host\"),n=t.candidate.candidate.search(\"srflx\"),-1!==a||-1!==n?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,i,t.candidate.sdpMLineIndex,t.candidate.sdpMid,t.candidate.candidate,this.data,t.candidate,{volatile:!!this.restarted}):I.log(\"Media routing mode is stun and not a HOST or SRFLX Candidate : ignoring message\")):this.mediaRoutingMode===e.mediaRoutingModeEnum.stunOnly?-1!==(a=t.candidate.candidate.search(\"srflx\"))?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,i,t.candidate.sdpMLineIndex,t.candidate.sdpMid,t.candidate.candidate,this.data,t.candidate,{volatile:!!this.restarted}):I.log(\"Media routing mode is stunOnly and not a SRFLX Candidate : ignoring message\"):this.mediaRoutingMode===e.mediaRoutingModeEnum.turn?(I.log(\"Media routing mode is turn : all candidates are considered\"),this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,i,t.candidate.sdpMLineIndex,t.candidate.sdpMid,t.candidate.candidate,this.data,t.candidate,{volatile:!!this.restarted})):this.mediaRoutingMode===e.mediaRoutingModeEnum.turnOnly&&(-1!==(a=t.candidate.candidate.search(\"relay\"))?this.myWebRTC_Stack.sendCandidate(this.callId,this.callerId,this.calleeId,this.dest_roomId,i,t.candidate.sdpMLineIndex,t.candidate.sdpMid,t.candidate.candidate,this.data,t.candidate,{volatile:!!this.restarted}):I.log(\"Media routing mode is TurnOnly and not a RELAY Candidate : ignoring message\")):I.log(\"trickleIce is deactivated : candidates are not sended\")):(I.info(\"End of candidates.\"),!1===this.trickleIce&&(I.log(\"trickleIce === false\"),!0===this.callee?(0!==this.send200OKTrickleIceFalseTimeOutId&&(clearTimeout(this.send200OKTrickleIceFalseTimeOutId),this.send200OKTrickleIceFalseTimeOutId=0),!1===this.message200OKSended?this.myWebRTC_Stack.send200OK(this.callId,this.callerId,this.calleeId,e.nickname,this.dest_roomId,this.pc.localDescription,this.data):I.log(\"200OK already sended\")):null!==this.pc&&(0!==this.sendInviteTrickleIceFalseTimeOutId&&(clearTimeout(this.sendInviteTrickleIceFalseTimeOutId),this.sendInviteTrickleIceFalseTimeOutId=0),!1===this.inviteSended?(I.log(\"sendInvite on end of candidate\"),this.myWebRTC_Stack.sendInvite(this.callId,this.callerId,e.nickname,this.dest_roomId,this.dest_roomId,this.callType,{offer:this.pc.localDescription,data:this.data,stream:this.mcuRemoteStream,volatile:!!this.restarted}),this.inviteSended=!0):I.log(\"Invite already sended\"))))},this.combineRemoteStreams=function(e,t,i,a){var n=e.getTracks(),r=i.getTracks();if(1===n.length&&1===r.length&&(\"audio\"===n[0].kind&&\"video\"===r[0].kind||\"video\"===n[0].kind&&\"audio\"===r[0].kind)){I.debug(\"combineRemoteStreams\");var o=new MediaStream;return o.addTrack(n[0]),o.addTrack(r[0]),\"internal\"===a&&(i.removeTrack(r[0]),this.onRemoteStreamRemoved({stream:i})),\"internal\"===t&&(e.removeTrack(n[0]),this.onRemoteStreamRemoved({stream:e})),this.onRemoteStreamAdded({stream:o}),!0}return!1},this.checkRemoteStreamExists=function(e,t){var i=!1,a=null,n=null,r=null,o=null,s=null;for(t&&Array.isArray(t)&&(o=t.slice(0)),a=this.remoteMediaStreams.length;--a>=0;){if(this.remoteMediaStreams[a].id===e){i=!0;break}if(o)for(r=(n=this.remoteMediaStreams[a].getTracks()).length;--r>=0;)(s=t.indexOf(n[r].id))>=0&&(o[s]=!0)}if(!i&&o){for(s=0,r=o.length;--r>=0;)!0===o[r]&&(s+=1);s===o.length&&(i=!0)}return i},this.onRemoteStreamAdded=function(t){var i,a=this,r=null,o=0;if(I.info(\"onRemoteStreamAdded\",t),this.checkRemoteStreamExists(t.stream.id,t.stream.getTracks().map((function(e){return e.id}))))I.debug(\"onRemoteStreamAdded: ignoring event; stream/track already known\");else if(1!==this.remoteMediaStreams.length||!this.combineRemoteStreams(this.remoteMediaStreams[0],\"internal\",t.stream,\"event\")){I.debug(\"onRemoteStreamAdded adding\",t.stream.id),this.remoteMediaStreams.push(t.stream),I.log(\"CallId is :\"+this.callId),I.log(\"ClientId is :\"+e.clientId),o=this.callee?this.callerId:this.calleeId,\"undefined\"==typeof apiRTC_React&&(!0===e.hideLocalVideoOnCall&&e.localVideo&&(\"Firefox\"===n.Xh?\"\"!==e.localVideo.mozSrcObject&&(e.localVideo.style.opacity=0):\"\"!==e.localVideo.src&&(e.localVideo.style.opacity=0)),e.transitionToActive(),e.remoteVideo&&(e.remoteVideo.style.opacity=1),r=document.createElement(\"video\"),e.remoteVideo&&(e.remoteVideo.appendChild(r),apiCC.attachMediaStream(r,t.stream),r.autoplay=!0,r.id=\"callId_\"+this.callId+\"-\"+this.calleeId),r.oncanplay=e.myWebRTC_Event.createCanPlayRemoteVideoEvent(r.id,this.callType,o),e.remoteVideoDisplayManager()),this.sessionMCU&&\"new\"===this.sessionMCU.modeChangeKind&&e.processRemoteStreamAdded(this,t.stream),!0===this.screenSharing?this.callType=\"screenSharing\":!0===this.audioOnly&&(this.callType=\"audio\");var s,l=function(){I.debug(\"getCallIdAndUsername\");var e=\"\",t=a.callId,i=apiCC.Session.getActiveSession();if(null!==i){var n=i.getUserAgent();null!=n&&(e=n.username)}var r={callId:t,username:e};return I.debug(\"getCallIdAndUsername result:\",r),r},d=function(e){var t={eventType:\"muteUnmuteEvent\",muteType:\"hardware\",source:\"local\",mLine:e.kind};e.onmute=function(i){I.debug(e.kind+\" mute event\");var n=l();t.callId=n.callId,t.username=n.username,t.state=\"mute\",apiCC.sendSentryEvent(t);var r=\"\";\"audio\"===e.kind?r=\"audioIsSilentLocally\":\"video\"===e.kind&&(r=\"videoIsSilentLocally\");var o={},s={},d=[];d.push(r),o.available=a.remoteCallProfile.audio,o.active=a.remoteCallProfile.audioActive,o.muted=a.isRemoteAudioMuted,o.silent=a.isRemoteAudioSilent,s.available=a.remoteCallProfile.video,s.active=a.remoteCallProfile.videoActive,s.muted=a.isRemoteVideoMuted,s.silent=a.isRemoteVideoSilent,a.myWebRTC_Event.createRemoteStreamUpdatedEvent(d,o,s,a.destCallType,a.callId,\"adaptation\")},e.onunmute=function(i){I.debug(e.kind+\" unmute event\");var n=l();t.callId=n.callId,t.username=n.username,t.state=\"unmute\",apiCC.sendSentryEvent(t);var r=\"\";\"audio\"===e.kind?(a.isRemoteAudioSilent=!1,r=\"audioIsSilentLocally\"):\"video\"===e.kind&&(a.isRemoteVideoSilent=!1,r=\"videoIsSilentLocally\");var o={},s={},d=[];d.push(r),o.available=a.remoteCallProfile.audio,o.active=a.remoteCallProfile.audioActive,o.muted=a.isRemoteAudioMuted,o.silent=a.isRemoteAudioSilent,s.available=a.remoteCallProfile.video,s.active=a.remoteCallProfile.videoActive,s.muted=a.isRemoteVideoMuted,s.silent=a.isRemoteVideoSilent,a.callConfiguration&&a.callConfiguration.userMediaStreamId&&a.callConfiguration.userMediaStreamId,a.myWebRTC_Event.createRemoteStreamUpdatedEvent(d,o,s,a.destCallType,a.callId,\"adaptation\")}},c=S(t.stream.getVideoTracks());try{for(c.s();!(s=c.n()).done;){var u=s.value;d(u),this.isRemoteVideoSilent=u.muted}}catch(e){c.e(e)}finally{c.f()}var h,p=S(t.stream.getAudioTracks());try{for(p.s();!(h=p.n()).done;){var g=h.value;d(g),this.isRemoteAudioSilent=g.muted}}catch(e){p.e(e)}finally{p.f()}i={available:this.remoteCallProfile.audio,active:this.remoteCallProfile.audioActive,muted:this.isRemoteAudioMuted,silent:this.isRemoteAudioSilent},r={available:this.remoteCallProfile.video,active:this.remoteCallProfile.videoActive,muted:this.isRemoteVideoMuted,silent:this.isRemoteVideoSilent},null!==this.data?void 0!==this.data.mesh?e.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,t.stream,this.remoteId,this.destCallType,i,r):\"publish\"===this.data.type&&\"passive\"!==this.data.mode?I.warn(\"Filtering Remote stream added event (behavior on Chrome 44), no remote stream on publish calls\"):!0===this.data.subscribeOrder&&void 0!==this.data.pubCallId?(I.debug(\"substitute callId: \"+this.callId+\" -> \"+this.data.pubCallId),e.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.data.pubCallId,t.stream,this.remoteId,this.destCallType,i,r)):e.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,t.stream,this.remoteId,this.destCallType,i,r):e.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,t.stream,this.remoteId,this.destCallType,i,r)}},this.onRemoteTrackAdded=function(t){I.info(\"onRemoteTrackAdded\",t);var i,a=null,r=0;if(void 0!==t.streams[0]&&void 0!==t.track){if(this.checkRemoteStreamExists(t.streams[0].id,[t.track.id]))I.debug(\"onRemoteTrackAdded: ignoring event; stream/track already known\");else if(1!==this.remoteMediaStreams.length||!this.combineRemoteStreams(this.remoteMediaStreams[0],\"internal\",t.streams[0],\"event\")){if(this.belongsToRoom()){if(\"audio\"===this.callType&&\"audio\"!==t.track.kind||\"videoOnly\"===this.callType&&\"video\"!==t.track.kind||\"media\"===this.callType&&\"video\"!==t.track.kind||\"screenSharing\"===this.callType&&\"video\"!==t.track.kind||\"screenSharingWithAudio\"===this.callType&&\"video\"!==t.track.kind)return void I.debug(\"onRemoteTrackAdded: ignoring event; callType: \"+this.callType+\", event.track.kind: \"+t.track.kind)}else if(\"audio\"===this.destCallType&&\"audio\"!==t.track.kind||\"videoOnly\"===this.destCallType&&\"video\"!==t.track.kind||\"media\"===this.destCallType&&\"video\"!==t.track.kind||\"screenSharing\"===this.destCallType&&\"video\"!==t.track.kind||\"screenSharingWithAudio\"===this.destCallType&&\"video\"!==t.track.kind)return I.debug(\"onRemoteTrackAdded: ignoring event; destCallType: \"+this.destCallType+\", event.track.kind: \"+t.track.kind),void(2===this.remoteMediaStreams.length&&this.combineRemoveStreams(this.remoteMediaStreams[0],\"internal\",this.remoteMediaStreams[1],\"internal\"));I.debug(\"onRemoteTrackAdded adding; stream.id: \"+t.streams[0].id),this.remoteMediaStreams.push(t.streams[0]),I.log(\"CallId is :\"+this.callId),I.log(\"ClientId is :\"+e.clientId),I.log(\"this.callType :\"+this.callType),r=this.callee?this.callerId:this.calleeId,!0===e.hideLocalVideoOnCall&&e.localVideo&&(\"Firefox\"===n.Xh?\"\"!==e.localVideo.mozSrcObject&&(e.localVideo.style.opacity=0):\"\"!==e.localVideo.src&&(e.localVideo.style.opacity=0)),e.transitionToActive(),e.remoteVideo&&(e.remoteVideo.style.opacity=1),a=document.createElement(\"video\"),e.remoteVideo&&(e.remoteVideo.appendChild(a),apiCC.attachMediaStream(a,t.streams[0]),a.autoplay=!0,a.id=\"callId_\"+this.callId+\"-\"+this.calleeId),!0===this.screenSharing?this.callType=\"screenSharing\":!0===this.audioOnly&&(this.callType=\"audio\"),a.oncanplay=e.myWebRTC_Event.createCanPlayRemoteVideoEvent(a.id,this.callType,r),e.remoteVideoDisplayManager(),this.sessionMCU&&\"new\"===this.sessionMCU.modeChangeKind&&e.processRemoteStreamAdded(this,t.streams[0]),t.streams[0].onaddtrack=function(e){I.debug(\"onRemoteTrackAdded ontrack.onaddtrack\",e)},t.streams[0].onremovetrack=function(t){var i=null;if(I.debug(\"onRemoteTrackAdded ontrack.onremovetrack\",t),this.updateOngoingTimeoutId)return I.debug(\"onRemoteTrackAdded onremovetrack: update ongoing\"),void I.debug(\"onRemoteTrackAdded onremovetrack: ignoring event\",t.track.kind);if(\"audio\"===this.callType&&\"audio\"!==t.track.kind||\"videoOnly\"===this.callType&&\"video\"!==t.track.kind||\"media\"===this.callType&&\"video\"!==t.track.kind||\"screenSharing\"===this.callType&&\"video\"!==t.track.kind||\"screenSharingWithAudio\"===this.callType&&\"video\"!==t.track.kind)I.debug(\"onRemoteTrackAdded onremovetrack: ignoring event\",t.track.kind);else if(t.target instanceof MediaStream){for(i=this.remoteMediaStreams.length;--i>=0;)if(this.remoteMediaStreams[i].id===t.target.id){I.debug(\"onRemoteTrackAdded onremovetrack removing\",t.target.id),this.remoteMediaStreams.splice(i,1);break}e.myWebRTC_Event.createRemoteStreamRemovedEvent(this.callType,this.callId,t.target,this.remoteId,this.destCallType)}else I.debug(\"onRemoteTrackAdded onremovetrack: ignoring event target not MediaStream\")}.bind(this),i={available:this.remoteCallProfile.audio,active:this.remoteCallProfile.audioActive,muted:this.isRemoteAudioMuted,silent:this.isRemoteAudioSilent},a={available:this.remoteCallProfile.video,active:this.remoteCallProfile.videoActive,muted:this.isRemoteVideoMuted,silent:this.isRemoteVideoSilent},null!==this.data?void 0!==this.data.mesh?(\"audio\"===this.callType&&\"audio\"===t.track.kind||\"videoOnly\"===this.callType&&\"video\"===t.track.kind||\"media\"===this.callType&&\"video\"===t.track.kind||\"screenSharing\"===this.callType&&\"video\"===t.track.kind||\"screenSharingWithAudio\"===this.callType&&\"video\"===t.track.kind)&&e.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,t.streams[0],this.remoteId,this.destCallType,i,a):\"publish\"===this.data.type&&\"passive\"!==this.data.mode?I.warn(\"Filtering Remote stream added event (behavior on Chrome 44), no remote stream on publish calls\"):this.belongsToRoom()?(\"audio\"===this.callType&&\"audio\"===t.track.kind||\"videoOnly\"===this.callType&&\"video\"===t.track.kind||\"media\"===this.callType&&\"video\"===t.track.kind||\"screenSharing\"===this.callType&&\"video\"===t.track.kind||\"screenSharingWithAudio\"===this.callType&&\"video\"===t.track.kind)&&(!0===this.data.subscribeOrder&&void 0!==this.data.pubCallId?(I.debug(\"substitute callId: \"+this.callId+\" -> \"+this.data.pubCallId),e.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.data.pubCallId,t.streams[0],this.remoteId,this.destCallType,i,a)):e.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,t.streams[0],this.remoteId,this.destCallType,i,a)):(\"audio\"===this.destCallType&&\"audio\"===t.track.kind||\"videoOnly\"===this.destCallType&&\"video\"===t.track.kind||\"media\"===this.destCallType&&\"video\"===t.track.kind||\"screenSharing\"===this.destCallType&&\"video\"===t.track.kind||\"screenSharingWithAudio\"===this.destCallType&&\"video\"===t.track.kind)&&e.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,t.streams[0],this.remoteId,this.destCallType,i,a):this.belongsToRoom()?(\"audio\"===this.callType&&\"audio\"===t.track.kind||\"videoOnly\"===this.callType&&\"video\"===t.track.kind||\"media\"===this.callType&&\"video\"===t.track.kind||\"screenSharing\"===this.callType&&\"video\"===t.track.kind||\"screenSharingWithAudio\"===this.callType&&\"video\"===t.track.kind)&&e.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,t.streams[0],this.remoteId,this.destCallType,i,a):(\"audio\"===this.destCallType&&\"audio\"===t.track.kind||\"videoOnly\"===this.destCallType&&\"video\"===t.track.kind||\"media\"===this.destCallType&&\"video\"===t.track.kind||\"screenSharing\"===this.destCallType&&\"video\"===t.track.kind||\"screenSharingWithAudio\"===this.destCallType&&\"video\"===t.track.kind)&&e.myWebRTC_Event.createRemoteStreamAddedEvent(this.callType,this.callId,t.streams[0],this.remoteId,this.destCallType,i,a)}}else I.debug(\"onRemoteTrackAdded: ignoring event; event data are not correct\")},this.onRemoteStreamRemoved=function(t){var i=null;for(I.info(\"onRemoteStreamRemoved\",t),i=this.remoteMediaStreams.length;--i>=0;)if(this.remoteMediaStreams[i].id===t.stream.id){I.debug(\"onRemoteStreamRemoved removing\",t.stream.id),this.remoteMediaStreams.splice(i,1);break}e.myWebRTC_Event.createRemoteStreamRemovedEvent(this.callType,this.callId,t.stream,this.remoteId,this.destCallType),t=null},this.onNegotiationNeeded=function(e){I.debug(\"onNegotiationNeeded\",e),e=null,this.addingDataChannelOnCallOngoing&&(this.updateMediaWithRetryManagement(!1),this.addingDataChannelOnCallOngoing=!1)},this.onSignalingStateChange=function(e){I.debug(\"onSignalingStateChange\",e),e=null},this.onCallDisconnection=function(){I.info(\"onCallDisconnection; callId: \"+this.callId);var t=new Date;I.debug(\"date:\",t),0!==this.disconnectionWarningInterval&&(I.debug(\"date:\",t),I.debug(\"clearing disconnectionWarningInterval\"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0),0!==this.disconnectionWarningTimeout&&(I.debug(\"date:\",t),I.debug(\"clearing disconnectionWarningTimeout\"),clearTimeout(this.disconnectionWarningTimeout),this.disconnectionWarningTimeout=0),this.belongsToRoom()?e.onHangup(this.callId,\"disconnected\"):e.onHangup(this.callId,\"Ice_disconnected\")},this.sendDisconnectionWarning=function(){I.log(\"sendDisconnectionWarning()\");var e=null,t=null;if(this.callControl&&(e=this.callControl.roomName,t=this.callControl.type),this.disconnectionWarningCount++,T.createEvent({eventType:\"disconnectionWarning\",callId:this.callId,remoteId:this.remoteId,tries:this.disconnectionWarningCount,roomName:e,settingUpType:t}),(this.disconnectionWarningCount-1)*this.disconnectionWarningDelay>=this.disconnectionTimer&&0!==this.disconnectionWarningInterval){var i=Date();I.debug(\"date :\"+i),I.debug(\"clearing disconnectionWarningInterval : no more warnings\"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0}},this.createIceErrorDescriptor=function(t,i){var a={};return\"disconnected\"===t?a.iceState=\"disconnected\":\"failed\"===t?(a.iceState=\"failed\",!0===i&&(a.previousIceState=\"disconnected\")):a.iceState=\"unknown\",a.callType=this.callType,this.belongsToRoom()?(a.context=\"conf\",this.data.mesh?(a.mode=\"mesh\",(this.data.mesh.callerCompositeUserId?this.data.mesh.callerCompositeUserId===e.compositeClientId:this.data.mesh.callerId===e.clientId)?(a.type=\"subscribe\",a.clientId=this.data.mesh.callerId,a.remoteId=this.data.mesh.calleeId):(this.data.mesh.calleeCompositeUserId?this.data.mesh.calleeCompositeUserId===e.compositeClientId:this.data.mesh.calleeId===e.clientId)?(a.type=\"publish\",a.clientId=this.data.mesh.calleeId,a.remoteId=this.data.mesh.callerId):a.type=\"unknown\",a.mesh=this.data.mesh):(a.mode=\"sfu\",\"publish\"===this.settingUpType||\"shareScreen\"===this.settingUpType?a.type=\"publish\":\"subscribe\"===this.settingUpType?a.type=\"subscribe\":a.type=\"unknown\",this.callee?(a.clientId=this.calleeId,a.remoteId=this.callerId):(a.clientId=this.callerId,a.remoteId=this.calleeId)),this.mcuRemoteStream&&(a.stream=this.mcuRemoteStream)):(a.context=\"call\",a.mode=\"p2p\",this.callerId===e.clientId?(a.clientId=this.callerId,a.remoteId=this.calleeId):this.calleeId===e.clientId&&(a.clientId=this.calleeId,a.remoteId=this.callerId)),a},this.onIceConnectionStateChange=function(t){I.debug(\"onIceConnectionStateChange: \",t),t=null;var i=0,a=null,n=null,o=null;null!==this.pc?(I.info(\"Ice Connection State is now : \"+this.pc.iceConnectionState),this.iceState=this.pc.iceConnectionState,\"connected\"===this.pc.iceConnectionState||\"completed\"===this.pc.iceConnectionState||\"checking\"===this.pc.iceConnectionState?(I.debug(\"iceConnectionState === connected or completed or checking\"),I.debug(\"this.disconnectionTimeoutId :\"+this.disconnectionTimeoutId),0!==this.disconnectionTimeoutId&&(i=Date(),I.debug(\"date:\",i),I.debug(\"clearing disconnectionTimeout\"),clearTimeout(this.disconnectionTimeoutId),this.disconnectionTimeoutId=0),0!==this.disconnectionWarningInterval&&(i=Date(),I.debug(\"date:\",i),I.debug(\"clearing disconnectionWarningInterval\"),clearInterval(this.disconnectionWarningInterval),this.disconnectionWarningInterval=0),\"checking\"!==this.pc.iceConnectionState&&(this.checkCandidateTypesTimeoutId=setTimeout(this.callback(this,\"checkCandidateTypes\"),this.checkCandidateTypesTimer),this.checkCandidateTypesTimeoutTable.push(this.checkCandidateTypesTimeoutId))):\"disconnected\"===this.pc.iceConnectionState?(this.callControl&&(a=this.callControl.roomName,n=this.callControl.type),\"conf\"===(o=this.createIceErrorDescriptor(\"disconnected\")).context&&this.myWebRTC_Stack.sendInfo(\"iceError\",{clientId:e.clientId,callId:this.callId,roomId:this.sessionMCU.roomName,pubSub:e.MCUClient.pubConnector,descriptor:o}),I.warn(\"disconnection detected\"),T.createErrorEvent(\"iceDisconnection detected\",\"ICE_CONNECTION_STATE_DISCONNECTED\",this.callId,a,n,o),i=new Date,I.debug(\"date:\",i),this.disconnectionTimeoutId=setTimeout(this.callback(this,\"onCallDisconnection\"),this.disconnectionTimer),this.disconnectionWarningCount=0,this.disconnectionWarningTimeout=setTimeout(this.callback(this,\"sendDisconnectionWarning\"),2e3),this.disconnectionWarningInterval=setInterval(this.callback(this,\"sendDisconnectionWarning\"),this.disconnectionWarningDelay)):\"failed\"===this.pc.iceConnectionState&&(this.callControl&&(a=this.callControl.roomName,n=this.callControl.type),\"conf\"===(o=this.createIceErrorDescriptor(\"failed\",0!==this.disconnectionTimeoutId)).context&&this.myWebRTC_Stack.sendInfo(\"iceError\",{clientId:e.clientId,callId:this.callId,roomId:this.sessionMCU.roomName,pubSub:e.MCUClient.pubConnector,descriptor:o}),I.warn(\"iceConnection failed detected\"),T.createErrorEvent(\"iceConnection failed detected\",\"ICE_CONNECTION_STATE_FAILED\",this.callId,a,n,o),0!==this.disconnectionTimeoutId?this.belongsToRoom()&&(clearTimeout(this.disconnectionTimeoutId),this.disconnectionTimeoutId=0,e.onHangup(this.callId,\"disconnected\")):this.belongsToRoom()&&(0,r.ki)(this.callControl,[\"autoRestart\",\"counter\"],\"number\")&&this.callControl.autoRestart.counter>0?e.onHangup(this.callId,\"disconnected\"):(I.warn(\"Removing call with callId: \"+this.callId),e.removeCallFromTableWithCallIdAndSendBye(this.callId,\"Ice_failed\")))):I.log(\"Ice Connection State change with pc is null\")},this.callback=function(e,t){return this.closureHandler=function(i,a){return e[t](i,a)},this.closureHandler},this.onSelectedCandidate=function(t){if(void 0===this.selectedCandidate||null===this.selectedCandidate||this.selectedCandidate.LocalCandidateType!==t.LocalCandidateType||this.selectedCandidate.RemoteCandidateType!==t.RemoteCandidateType||this.selectedCandidate.LocalAddress!==t.LocalAddress||this.selectedCandidate.RemoteAddress!==t.RemoteAddress||this.selectedCandidate.TransportType!==t.TransportType||this.selectedCandidate.LocalTransportType!==t.LocalTransportType){I.debug(\"WebRTC_Call::onSelectedCandidate() :\",t),this.selectedCandidate=t,this.callControl&&this.callControl.autoRestart&&(I.debug(\"selectedCandidate, this.callControl.autoRestart.counter:\",this.callControl.autoRestart.counter),I.debug(\"selectedCandidate, this.callControl.autoRestart.callIdWhenStartingTimer:\",this.callControl.autoRestart.callIdWhenStartingTimer),this.callControl.autoRestart.counter&&(I.debug(\"Reinit of autoRestart.counter\"),this.callControl.autoRestart.counter=0,void 0!==this.callControl.autoRestart.callIdWhenStartingTimer&&e.stopMaxCallRetriesTimer(this.callControl.autoRestart.callIdWhenStartingTimer))),this.myWebRTC_Event.createSelectedICECandidateEvent(this.callId,t.LocalCandidateType,t.RemoteCandidateType,t.LocalAddress,t.RemoteAddress,t.TransportType,t.LocalTransportType);var i=t;i.callId=this.callId,i.clientId=e.clientId,i.roomId=this.dest_roomId,void 0!==this.data.pubSub&&(i.pubSub=this.data.pubSub),void 0!==this.data.confId&&(i.confId=this.data.confId),void 0!==this.data.mesh&&(i.mesh=this.data.mesh),void 0!==this.data.instanceId&&(i.instanceId=this.data.instanceId),this.myWebRTC_Stack.sendInfo(\"callSelectedCandidate\",i)}else I.debug(\"filtering duplicate candidate\")},this.checkCandidateTypes=function(){I.debug(\"WebRTC_Call::checkCandidatesTypes()\");var e=this,t={LocalCandidateType:\"unknow\",RemoteCandidateType:\"unknow\",LocalAddress:\"unknow\",RemoteAddress:\"unknow\",TransportType:\"unknow\",LocalTransportType:\"unknow\"},i=[\"googLocalAddress\",\"googLocalCandidateType\",\"googRemoteAddress\",\"googRemoteCandidateType\",\"googTransportType\"];null===this.pc?(I.warn(\"Peer connection is null : no candidates\"),e.myWebRTC_Event.createICECandidateTypeUpdateEvent(e.callId,t.LocalCandidateType,t.RemoteCandidateType),e.onSelectedCandidate(t)):\"undefined\"!=typeof apiRTC_React?(I.warn(\"apiRTC_React : no info on candidates\"),e.myWebRTC_Event.createICECandidateTypeUpdateEvent(e.callId,t.LocalCandidateType,t.RemoteCandidateType),e.onSelectedCandidate(t)):\"chrome\"===r.wL.type?(I.debug(\"WebRTC_Call::checkCandidatesTypes() chrome\"),this.pc.getStats((function(a){var n=a.result().filter((function(e){return 0===e.id.indexOf(\"Conn-\")&&\"true\"===e.stat(\"googActiveConnection\")}))[0];n?(i.forEach((function(e){t[e.replace(\"goog\",\"\")]=n.stat(e)})),e.myWebRTC_Event.createICECandidateTypeUpdateEvent(e.callId,t.LocalCandidateType,t.RemoteCandidateType),e.onSelectedCandidate(t)):(e.myWebRTC_Event.createICECandidateTypeUpdateEvent(e.callId,t.LocalCandidateType,t.RemoteCandidateType),e.onSelectedCandidate(t))}))):\"firefox\"===r.wL.type?(I.debug(\"WebRTC_Call::checkCandidatesTypes() firefox\"),this.pc.getStats(null).then((function(i){var a=null;if(i.forEach((function(e){!0===e.selected&&(null!==a&&I.warn(\"multiple selected candidate-pairs\"),a=e)})),null!==a){var n=i.get(a.localCandidateId),r=i.get(a.remoteCandidateId);t.LocalCandidateType=n.candidateType,t.RemoteCandidateType=r.candidateType,n.address&&n.port?t.LocalAddress=n.address+\":\"+n.port:t.LocalAddress=n.ipAddress+\":\"+n.portNumber,r.address&&r.port?t.RemoteAddress=r.address+\":\"+r.port:t.RemoteAddress=r.ipAddress+\":\"+r.portNumber,t.TransportType=n.transport,t.LocalTransportType=n.mozLocalTransport,e.myWebRTC_Event.createICECandidateTypeUpdateEvent(e.callId,t.LocalCandidateType,t.RemoteCandidateType),e.onSelectedCandidate(t)}})).catch((function(e){I.warn(\"failed to get stats\",e)}))):(I.debug(\"checkCandidateTypes not Chrome or Firefox\"),e.myWebRTC_Event.createICECandidateTypeUpdateEvent(e.callId,t.LocalCandidateType,t.RemoteCandidateType),e.onSelectedCandidate(t))},this.belongsToRoom=function(){return!!(0,r.ki)(this.sessionMCU,\"roomName\",\"string\")&&((0,r.ki)(this.data,\"MCUType\",\"string\")&&(\"MCU-Caller\"===this.data.MCUType||\"MCU-Callee\"===this.data.MCUType)&&(0,r.ki)(this.data,\"confId\",\"string\")?this.data.confId===this.sessionMCU.roomName:this.dest_roomId===this.sessionMCU.roomName)},this.setLocalCallProfile=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[],a={},n={},r=null,o=null,s=\"adaptation\";!0!==this.dataCall&&\"subscribe\"!==this.settingUpType&&(this.localCallProfile.audioActive!==e.audioActive&&i.push(\"audioIsActive\"),this.localCallProfile.videoActive!==e.videoActive&&i.push(\"videoIsActive\"),this.localCallProfile=e,!0===this.screenSharing?!0===this.localCallProfile.audioActive&&!0===this.localCallProfile.videoActive?\"screenSharingWithAudio\"!==this.callType&&(this.callType=\"screenSharingWithAudio\",i.push(\"callType\")):!0===this.localCallProfile.audioActive?\"audio\"!==this.callType&&(this.callType=\"audio\",i.push(\"callType\")):!0===this.localCallProfile.videoActive?\"screenSharing\"!==this.callType&&(this.callType=\"screenSharing\",i.push(\"callType\")):\"inactive\"!==this.callType&&(this.callType=\"inactive\",i.push(\"callType\")):!0===this.localCallProfile.audioActive&&!0===this.localCallProfile.videoActive?\"media\"!==this.callType&&(this.callType=\"media\",i.push(\"callType\")):!0===this.localCallProfile.audioActive?\"audio\"!==this.callType&&(this.callType=\"audio\",i.push(\"callType\")):!0===this.localCallProfile.videoActive?\"videoOnly\"!==this.callType&&(this.callType=\"videoOnly\",i.push(\"callType\")):\"inactive\"!==this.callType&&(this.callType=\"inactive\",i.push(\"callType\")),!0===t&&i.length>0&&(a.available=this.localCallProfile.audio,a.active=this.localCallProfile.audioActive,a.muted=this.isLocalAudioMuted,a.silent=this.isRemoteAudioSilent,n.available=this.localCallProfile.video,n.active=this.localCallProfile.videoActive,n.muted=this.isLocalVideoMuted,n.silent=this.isRemoteVideoSilent,this.callConfiguration&&this.callConfiguration.userMediaStreamId&&(r=this.callConfiguration.userMediaStreamId,(o=apiCC.getUserMediaStream(r))&&(a.deviceLabel=o.audioDeviceLabel,n.deviceLabel=o.videoDeviceLabel)),this.updateCause&&(s=this.updateCause),this.myWebRTC_Event.createLocalStreamUpdatedEvent(i,a,n,!0,this.callType,this.callId,this.callLocalStream,r,s)))},this.setRemoteCallProfile=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[],a={},n={},r=\"adaptation\";!0!==this.dataCall&&(this.remoteCallProfile.audioActive!==e.audioActive&&i.push(\"audioIsActive\"),this.remoteCallProfile.videoActive!==e.videoActive&&i.push(\"videoIsActive\"),this.remoteCallProfile=e,\"subscribe\"===this.settingUpType?(!0===this.screenSharing?!0===this.remoteCallProfile.audioActive&&!0===this.remoteCallProfile.videoActive?\"screenSharingWithAudio\"!==this.callType&&(this.callType=\"screenSharingWithAudio\",i.push(\"callType\")):!0===this.remoteCallProfile.audioActive?\"audio\"!==this.callType&&(this.callType=\"audio\",i.push(\"callType\")):!0===this.remoteCallProfile.videoActive?\"screenSharing\"!==this.callType&&(this.callType=\"screenSharing\",i.push(\"callType\")):\"inactive\"!==this.callType&&(this.callType=\"inactive\",i.push(\"callType\")):!0===this.remoteCallProfile.audioActive&&!0===this.remoteCallProfile.videoActive?\"media\"!==this.callType&&(this.callType=\"media\",i.push(\"callType\")):!0===this.remoteCallProfile.audioActive?\"audio\"!==this.callType&&(this.callType=\"audio\",i.push(\"callType\")):!0===this.remoteCallProfile.videoActive?\"videoOnly\"!==this.callType&&(this.callType=\"videoOnly\",i.push(\"callType\")):\"inactive\"!==this.callType&&(this.callType=\"inactive\",i.push(\"callType\")),!0===t&&i.length>0&&(a.available=this.remoteCallProfile.audio,a.active=this.remoteCallProfile.audioActive,a.muted=this.isRemoteAudioMuted,a.silent=this.isRemoteAudioSilent,n.available=this.remoteCallProfile.video,n.active=this.remoteCallProfile.videoActive,n.muted=this.isRemoteVideoMuted,n.silent=this.isRemoteVideoSilent,this.updateCause&&(r=this.updateCause),this.myWebRTC_Event.createRemoteStreamUpdatedEvent(i,a,n,this.callType,this.callId,r))):(!0===this.screenSharing?!0===this.remoteCallProfile.audioActive&&!0===this.remoteCallProfile.videoActive?\"screenSharingWithAudio\"!==this.destCallType&&(this.destCallType=\"screenSharingWithAudio\",i.push(\"callType\")):!0===this.remoteCallProfile.audioActive?\"audio\"!==this.destCallType&&(this.destCallType=\"audio\",i.push(\"callType\")):!0===this.remoteCallProfile.videoActive?\"screenSharing\"!==this.destCallType&&(this.destCallType=\"screenSharing\",i.push(\"callType\")):\"inactive\"!==this.destCallType&&(this.destCallType=\"inactive\",i.push(\"callType\")):\"publish\"!==this.settingUpType&&\"shareScreen\"!==this.settingUpType||(!0===this.remoteCallProfile.audioActive&&!0===this.remoteCallProfile.videoActive?\"media\"!==this.destCallType&&(this.destCallType=\"media\",i.push(\"callType\")):!0===this.remoteCallProfile.audioActive?\"audio\"!==this.destCallType&&(this.destCallType=\"audio\",i.push(\"callType\")):!0===this.remoteCallProfile.videoActive?\"videoOnly\"!==this.destCallType&&(this.destCallType=\"videoOnly\",i.push(\"callType\")):\"inactive\"!==this.destCallType&&(this.destCallType=\"inactive\",i.push(\"callType\"))),!0===t&&i.length>0&&(a.available=this.remoteCallProfile.audio,a.active=this.remoteCallProfile.audioActive,a.muted=this.isRemoteAudioMuted,a.silent=this.isRemoteAudioSilent,n.available=this.remoteCallProfile.video,n.active=this.remoteCallProfile.videoActive,n.muted=this.isRemoteVideoMuted,n.silent=this.isRemoteVideoSilent,this.updateCause&&(r=this.updateCause),this.myWebRTC_Event.createRemoteStreamUpdatedEvent(i,a,n,this.destCallType,this.callId,r))))},this.setMediaConstraintsToSendOnlyOffer=function(){\"firefox\"===r.wL.type?n.PR>43?this.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1}:this.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}}:\"edge\"===r.wL.type?this.mediaConstraints={offerToReceiveAudio:0,offerToReceiveVideo:0}:\"chrome\"===r.wL.type&&r.wL.version<55?this.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}}:this.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1,mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}},this.mediaConstraintsAudioOnly=this.mediaConstraints},this.applyOutgoingBitrate=function(e){var t=this;I.debug(\"applyOutgoingBitrate\",this.callId,e);for(var i=null,a=0;a<this.rtpSenders.video.length;a+=1)if(this.rtpSenders.video[a].track){i=this.rtpSenders.video[a];break}if(i)if(\"function\"==typeof i.getParameters&&\"function\"==typeof i.setParameters){var n=i.getParameters();if(Object.prototype.hasOwnProperty.call(n,\"encodings\")){if(1!==n.encodings.length)return void I.debug(\"encodings cannot be changed\",this.callId,n.encodings.length)}else n.encodings=[{}];if(null!==e&&\"number\"==typeof e){e<50&&(e=50);var r=1e3*e;if(n.encodings[0].maxBitrate===r)return;n.encodings[0].maxBitrate=r}else{if(!Object.prototype.hasOwnProperty.call(n.encodings[0],\"maxBitrate\"))return;delete n.encodings[0].maxBitrate}i.setParameters(n).catch((function(e){I.error(\"applyOutgoingBitrate - setParameters\",t.callId,e)}))}else I.warn(\"no such functions: getParameters/setParameters\",this.callId);else I.warn(\"no such video rtpSender\",this.callId)},this.configureSimulcastEncodings=function(t){var i=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(I.debug(\"configureSimulcastEncodings\",this.callId,t,a.maxBitrate),\"RID\"===this.simulcast){for(var n=null,o=0;o<this.rtpSenders.video.length;o+=1)if(this.rtpSenders.video[o].track){n=this.rtpSenders.video[o];break}if(n)if(\"function\"==typeof n.getParameters&&\"function\"==typeof n.setParameters){var s=n.getParameters();if(Object.prototype.hasOwnProperty.call(s,\"encodings\"))if(3===s.encodings.length){for(var l=null,d=null,c=null,u=s.encodings.length;--u>=0;){var h=s.encodings[u];l||\"h\"!==h.rid?d||\"m\"!==h.rid?c||\"l\"!==h.rid||(c=h):d=h:l=h}if(l&&Object.prototype.hasOwnProperty.call(l,\"maxBitrate\")&&d&&Object.prototype.hasOwnProperty.call(d,\"maxBitrate\")&&c&&Object.prototype.hasOwnProperty.call(c,\"maxBitrate\")){var p=!1,g=Math.floor(c.maxBitrate/1e3),m=!1,C=!1;if(l.active&&l.maxBitrate>1&&(g+=Math.floor(l.maxBitrate/1e3),m=!0),d.active&&d.maxBitrate>1&&(g+=Math.floor(d.maxBitrate/1e3),C=!0),I.debug(\"currentStatus\",g,m,C),\"changeMaxBitrate\"===t){if(!(0,r.ki)(a,\"maxBitrate\",\"number\"))return;var f=a.maxBitrate;g<=f?(C||g+this.callConfiguration.simulcast.encodings.medium.maxBitrate<=f&&(\"chrome\"===r.wL.type?d.active=!0:\"firefox\"===r.wL.type&&(d.maxBitrate=1e3*this.callConfiguration.simulcast.encodings.medium.maxBitrate),this.callConfiguration.simulcast.encodings.medium.active=!0,C=!0,g+=this.callConfiguration.simulcast.encodings.medium.maxBitrate,p=!0),m||g+this.callConfiguration.simulcast.encodings.high.maxBitrate<=f&&(\"chrome\"===r.wL.type?l.active=!0:\"firefox\"===r.wL.type&&(l.maxBitrate=1e3*this.callConfiguration.simulcast.encodings.high.maxBitrate),this.callConfiguration.simulcast.encodings.high.active=!0,m=!0,g+=this.callConfiguration.simulcast.encodings.high.maxBitrate,p=!0)):(m&&(m=!1,this.callConfiguration.simulcast.encodings.high.active=!1,g-=Math.floor(l.maxBitrate/1e3),\"chrome\"===r.wL.type?l.active=!1:\"firefox\"===r.wL.type&&(l.maxBitrate=1),p=!0),g>f&&C&&(C=!1,this.callConfiguration.simulcast.encodings.medium.active=!1,g-=Math.floor(d.maxBitrate/1e3),\"chrome\"===r.wL.type?d.active=!1:\"firefox\"===r.wL.type&&(d.maxBitrate=1),p=!0))}else\"disableEncoding\"===t&&(m?(m=!1,this.callConfiguration.simulcast.encodings.high.active=!1,g-=Math.floor(l.maxBitrate/1e3),\"chrome\"===r.wL.type?l.active=!1:\"firefox\"===r.wL.type&&(l.maxBitrate=1),p=!0):C&&(C=!1,this.callConfiguration.simulcast.encodings.medium.active=!1,g-=Math.floor(d.maxBitrate/1e3),\"chrome\"===r.wL.type?d.active=!1:\"firefox\"===r.wL.type&&(d.maxBitrate=1),p=!0));I.debug(\"applyChanges\",g,m,C,p),p&&(n.setParameters(s).catch((function(e){I.error(\"configureEncodings - setParameters\",i.callId,e)})),this.myWebRTC_Stack.sendInfo(\"configureEncodings\",{pubSub:e.MCUClient.pubConnector,clientId:e.clientId,roomId:this.sessionMCU.roomName,callId:this.callId,instanceId:this.instanceId,hint:\"simulcast\",encodings:this.callConfiguration.simulcast.encodings}))}else I.warn(\"cannot find h/m/l encodings\",this.callId)}else I.warn(\"wrong encodings\",this.callId,s.encodings.length);else I.warn(\"no encodings configured\",this.callId)}else I.warn(\"no such functions: getParameters/setParameters\",this.callId);else I.warn(\"no such video rtpSender\",this.callId)}}},w=(i(4363),i(9653),function(e){this.disconnectionTimer=15e3,void 0!==Number.MAX_SAFE_INTEGER?this.userMediaId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():this.userMediaId=Math.floor(1000001*Math.random()).toString(),this.callType=\"media\",this.audio=!1,this.video=!1,this.audioSdpDirection=null,this.videoSdpDirection=null,this.callConfiguration={},this.sessionMCU=null,this.myWebRTC_Stack=new o.S(e.socket),this.getUserMediaStream=function(){return this.callConfiguration&&this.callConfiguration.userMediaStreamId?apiCC.getUserMediaStream(this.callConfiguration.userMediaStreamId):null},this.releaseUserMediaStream=function(){if(this.callConfiguration&&this.callConfiguration.userMediaStreamId){var e=this.callConfiguration.userMediaStreamId;return delete this.callConfiguration.userMediaStreamId,apiCC.releaseUserMediaStream(e,this.userMediaId)}return!1},this.close=function(){(this.addAck||this.addTimeoutId)&&(delete this.addAck,clearTimeout(this.addTimeoutId),delete this.addTimeoutId)}});function E(e){return E=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},E(e)}function M(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return A(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?A(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var O=a.Y.get(\"ApiCCMCUClient\"),D=apiCC.myWebRTC_Event,k=3e4,_=function(e,t){O.debug(\"ApiCCMCUClient creation\"),this.pubConnector=\"janusConnector\",this.meshModeEnabled=!1,this.sessionMCUs=[],this.distantCalls=[],this.streamList=[],this.disputableStreamList=[],this.publishCallId=null,this.joinSessionReqs=[],this.transitionCount=0,this.browserCapabilities={updateStream:!0,mesh2janusTransition:!0,checkCallStatus:!0},this.receiveSessionId=function(e){O.debug(\"receiveSessionId()\"),D.createMCUSessionCreationEvent(e.sessionId,e.token),this.publish(e.sessionId,e.token)},this.sendSessionInvitation=function(e,i,a){var n,r;(O.debug(\"sendSessionInvitation()\"),null!=i)?(void 0===a&&(a=0),n={type:\"MCUSessionInvitation\",srcId:t,destId:e,sessionId:i,groupChatId:a},r=JSON.stringify(n),O.log(\"C->S: \"+r),apiCC.session.channel.socket.emit(\"MCUSessionInvitation\",r)):O.log(\"Session is null or undefined, MCU Session invitation is not sended\")},this.sendSessionInvitationToGroupChat=function(e,i){if(O.debug(\"sendSessionInvitationToGroupChat()\"),null!=e)if(null!=i){var a,n;a={type:\"MCUSessionInvitationToGroupChat\",srcId:t,groupChatId:e,sessionId:i},n=JSON.stringify(a),O.log(\"C->S: \"+n),apiCC.session.channel.socket.emit(\"MCUSessionInvitationToGroupChat\",n)}else O.log(\"Session is null or undefined, MCU Session invitation is not sended\");else O.log(\"groupChatId is null or undefined, MCU Session invitation is not sended\")},this.receiveSessionInvitation=function(e){O.debug(\"receiveSessionInvitation()\"),O.log(\"msg.sessionId :\"+e.sessionId),O.log(\"msg.token :\"+e.token),O.log(\"msg.groupChatId :\"+e.groupChatId),D.createReceiveMCUSessionInvitationEvent(e.sessionId,e.token,e.groupChatId,e.srcId)},this.acceptSessionInvitation=function(e,t){O.debug(\"acceptSessionInvitation()\"),O.log(\"sessionId :\"+e),O.log(\"token :\"+t),this.publish(e,t)},this.leaveSession=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O.info(\"leaveSession()\");var i=null,a=null,n=null;if(!(n=e?this.getSessionMCU(e):this.getSessionMCU(null,{first:!0})))return new Error(\"leaveSession: session not set\");!0!==t.noHangup&&(apiCC.session.apiCCWebRTCClient.webRTCClient.removeAllCallsFromRoom(n.roomName,\"leaveSession\"),this.meshOnHangup(null,null,{roomId:n.roomName}));var r=[];r.push(n.roomName),apiCC.session.leavePresenceGroup(r),apiCC.session.unsubscribePresenceGroup(r),i={type:\"leaveSession\",roomId:n.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},a=JSON.stringify(i),O.log(\"C->S: \"+a),apiCC.session.channel.socket.emit(\"leaveSession\",a),O.debug(\"leaveSession: distant call clean up\");for(var o=this.distantCalls.length;--o>=0;)this.distantCalls[o].roomId===n.roomName&&(O.debug(\"leaveSession: remove distant call descriptor\",this.distantCalls[o]),this.distantCalls.splice(o,1));apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({multi:!0,roomName:n.roomName});for(var s=this.streamList.length;--s>=0;)this.streamList[s].roomId===n.roomName&&this.streamList.splice(s,1);return this.removeSessionMCU(n),\"OK\"},this.createJoinSessionMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;e||(i=t.hasOwnProperty(\"sessionMCU\")?t.sessionMCU:this.getSessionMCU(null,{first:!0}))&&(e=i.roomName);var a=i&&\"mesh\"===i.roomMode||!0===this.meshModeEnabled||!0===t.meshModeEnabled,o=i&&!0===i.meshOnly||!0===t.meshOnlyEnabled,s={type:\"joinSession\",roomId:e,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector,meshModeEnabled:a,meshOnlyEnabled:o,videoBandwidthSettings:apiCC.session.apiCCWebRTCClient.webRTCClient.videoBandwidthSettings,browserInfo:{browserAbout:n.Xh+\" \"+n.dc,browserType:r.wL.type,browserVersion:r.wL.version,osName:n.BF,osVersion:n.MM,deviceType:n.vO}}};if(t.hasOwnProperty(\"transactionId\")&&(s.transactionId=t.transactionId),t.hasOwnProperty(\"convId\")?s.data.convId=t.convId:i&&i.hasOwnProperty(\"convId\")&&(s.data.convId=i.convId),t.moderationEnabled&&(s.data.moderationEnabled=!0),t.moderator&&(s.data.moderator=!0),t.qualityAdaptationEnabled&&(s.data.qualityAdaptationEnabled=!0),Array.isArray(t.supportedVideoCodecs)){s.data.supportedVideoCodecs=[];var l,d=M(t.supportedVideoCodecs);try{for(d.s();!(l=d.n()).done;){var c=l.value;\"h264\"===c?s.data.supportedVideoCodecs.push({codec:\"h264\",profilelevelid:\"42e01f\"}):\"string\"==typeof c?s.data.supportedVideoCodecs.push({codec:c}):s.data.supportedVideoCodecs.push(c)}}catch(e){d.e(e)}finally{d.f()}}else\"safari\"===r.wL.type&&(\"Safari\"===n.Xh&&n.dc<12.1||\"Mobile Safari\"===n.Xh&&n.dc<12.1)&&(s.data.supportedVideoCodecs=[{codec:\"h264\",profilelevelid:\"42e01f\"}]);return s.data.capabilities=this.browserCapabilities,s},this.createSessionDescriptor=function(e){var t={roomId:e.roomName};return e.convId&&(t.convId=e.convId),e.roomMode&&(t.roomMode=e.roomMode),e.modeChangeKind&&(t.modeChangeKind=e.modeChangeKind),t},this.joinSession=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.getSessionMCU(e))return O.warn(\"joinSession: session already set\"),new Error(\"joinSession: session already set\");if(this.getJoinSessionReq(e))return O.warn(\"joinSession: session already requested\"),new Error(\"joinSession: session already requested\");var i={};i.roomId=e,i.transactionId=apiCC.randomString(12),this.joinSessionReqs.push(i);var a=Object.assign({},t);a.transactionId=i.transactionId,O.info(\"joinSession() on ApiRTC MCU with roomId:\",e);var n=this.createJoinSessionMessage(e,a),r=JSON.stringify(n);return O.log(\"C->S: \"+r),apiCC.session.channel.socket.emit(\"joinSession\",r),\"OK\"},this.joinSessionAnswer=function(e){if(O.debug(\"joinSessionAnswer()\"),this.getSessionMCU(e.roomName))O.warn(\"joinSessionAnswer: session already set\");else{var t=null;if(e.hasOwnProperty(\"transactionId\")&&(t=this.getJoinSessionReq(null,{transactionId:e.transactionId})),t||(t=this.getJoinSessionReq(e.roomName)),t){this.removeJoinSessionReq(t);var i={};if(i.roomID=e.sessionId,i.roomName=e.roomName,e.hasOwnProperty(\"convId\")&&(i.convId=e.convId),i.joinSessionAnswer={},(0,r.ki)(e,\"data\",\"object\")?(!0===e.data.failed?(i.joinSessionAnswer.failed=!0,i.joinSessionAnswer.reason=e.data.reason):i.joinSessionAnswer.failed=!1,e.data.mode&&\"string\"==typeof e.data.mode&&(i.roomMode=e.data.mode,O.debug(\"session joined with mode; roomMode: \"+i.roomMode)),\"mesh\"===i.roomMode&&!0===e.data.meshOnly&&(i.meshOnly=!0,O.debug(\"meshOnly\"))):i.joinSessionAnswer.failed=!1,this.sessionMCUs.push(i),!i.joinSessionAnswer.failed){var a=[];a.push(e.roomName),apiCC.session.joinPresenceGroup(a),apiCC.session.subscribePresenceGroup(a)}D.createJoinMCUSessionAnswerEvent(e.sessionId,e.token,e.groupChatId,e.initiator,i)}else O.debug(\"joinSessionAnswer: no joinSession requested\")}},this.changeSessionMode=function(t,i){var a=this.getSessionMCU(t.roomName);if(a)if(\"mesh\"===a.roomMode){for(var n=0,r=e.userMediaTable.length;--r>=0;)if(e.userMediaTable[r].sessionMCU===a){O.debug(\"changeSessionMode: userMedia\",e.userMediaTable[r]),e.userMediaTable[r].distantCalls=[],n+=1;for(var o=this.distantCalls.length;--o>=0;)O.debug(\"changeSessionMode: distantCall\",this.distantCalls[o]),\"mesh\"===this.distantCalls[o].callMode&&this.distantCalls[o].callFeed.callId===e.userMediaTable[r].userMediaId&&(O.debug(\"changeSessionMode: match\"),e.userMediaTable[r].distantCalls.push(this.distantCalls[o]))}for(var s=0,l=e.callControlTable.length;--l>=0;)\"subscribe\"===e.callControlTable[l].type&&e.callControlTable[l].roomName===a.roomName&&(s+=1,e.callControlTable[l].autoRestart.force=!0);if(D.createMCURoomModeChangedEvent(a.roomName,\"mesh\",\"sfu\",\"ongoing\"),0===n&&0===s)delete a.roomMode,D.createMCURoomModeChangedEvent(a.roomName,\"mesh\",\"sfu\",\"complete\");else{a.modeChangeKind=\"old\";var d={};d.roomID=t.roomName,d.roomName=t.roomName,t.hasOwnProperty(\"convId\")&&(d.convId=t.convId),d.joinSessionAnswer={failed:!1},d.modeChangeKind=\"new\",d.transitionTimeoutId=setTimeout(function(t,i){delete i.transitionTimeoutId,e.finalizeMeshToJanusTransition(t,i,{force:!0})}.bind(this,a,d),3e4),this.sessionMCUs.push(d),this.transitionCount+=1}}else O.warn(\"changeSessionMode: session not using mesh mode\");else O.warn(\"changeSessionMode: no session\")},this.updateSessionAnswer=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};O.debug(\"updateSessionAnswer\");var a=this.getSessionMCU(t.roomName);if(!a){if(!i.createSession)return void O.warn(\"updateSessionAnswer: no such session\",t.roomName);O.debug(\"force session creation; roomName: \"+t.roomName),(a={}).roomID=t.roomName,a.roomName=t.roomName,t.hasOwnProperty(\"convId\")&&(a.convId=t.convId),a.joinSessionAnswer={failed:!1},this.sessionMCUs.push(a);for(var n=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length;--n>=0;){var r=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[n];!r.data||\"MCU-Caller\"!==r.data.MCUType&&\"MCU-Callee\"!==r.data.MCUType||r.data.confId!==a.roomName||(r.sessionMCU=a)}}var o=!1;if(t.data&&\"mesh\"===t.data.mode?(a.roomMode=\"mesh\",!0===t.data.meshOnly&&(a.meshOnly=!0)):(\"mesh\"===a.roomMode&&(o=!0),delete a.roomMode),\"new\"===a.modeChangeKind){O.debug(\"transition already ongoing\");var s=this.getSessionMCU(null,{callback:function(e){return e.roomName===a.roomName&&\"old\"===e.modeChangeKind}});s&&e.finalizeMeshToJanusTransition(s,a,{force:!0})}else if(o){O.debug(\"transition NOT ongoing but should be\"),D.createMCURoomModeChangedEvent(a.roomName,\"mesh\",\"sfu\",\"ongoing\"),a.modeChangeKind=\"old\";var l={};l.roomID=a.roomID,l.roomName=a.roomName,a.hasOwnProperty(\"convId\")&&(l.convId=a.convId),l.joinSessionAnswer={failed:!1},l.modeChangeKind=\"new\",this.sessionMCUs.push(l),this.transitionCount+=1,e.finalizeMeshToJanusTransition(a,l,{force:!0})}if(i.updateCalls)if(O.debug(\"update stream list (prune)\"),this.updateStreamList(t,{prune:!0}),\"mesh\"===a.roomMode){O.debug(\"restart publish/shareScreen calls\");for(var d=e.userMediaTable.slice(),c=d.length;--c>=0;){var u=d[c];u.sessionMCU===a&&e.onHangup(u.userMediaId,\"disconnected\")}}else{O.debug(\"restart publish/shareScreen calls with no PeerConnection\");for(var h=e.callsTable.slice(),p=h.length;--p>=0;){var g=h[p];g.sessionMCU===a&&(\"publish\"!==g.settingUpType&&\"shareScreen\"!==g.settingUpType||g.data&&g.data.mesh||g.pc||e.onHangup(g.callId,\"disconnected\"))}}},this.processCheckCallStatus=function(e){this.updateStreamList(e)},this.updateStreamList=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,r.ki)(e,\"availableStreams\",\"array\")?e.availableStreams.slice():null,a=(0,r.ki)(e,\"availableComposite\",\"array\")?e.availableComposite.slice():null,n=(0,r.ki)(e,\"availableReplay\",\"array\")?e.availableReplay.slice():null,o=this.streamList.length;--o>=0;){var s=this.streamList[o];if(\"regular\"===s.type){if(!i)continue;for(var l=i.length;--l>=0&&i[l].id!==s.streamInfo.id;);if(l>=0){(0,r.ki)(s,\"clearDisputableEntry\",\"function\")&&s.clearDisputableEntry(),i.splice(l,1);continue}!0===t.prune?((0,r.ki)(s,\"clearDisputableEntry\",\"function\")&&s.clearDisputableEntry(),apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:\"subscribe\",stream:s.streamInfo}),D.createMCURemovedStreamEvent(s.streamInfo.id),this.streamList.splice(o,1)):s.disputableTimeoutId||(s.disputableTimeoutId=setTimeout(U.bind(this,s.streamInfo.id),k),s.clearDisputableEntry=N.bind(this,s.streamInfo.id),this.disputableStreamList.push(s))}else if(\"composite\"===s.type){if(!a)continue;for(var d=a.length;--d>=0&&a[d].id!==s.streamInfo.id;);if(d>=0){a.splice(d,1);continue}apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:\"subscribe\",stream:s.streamInfo}),D.createMCURemovedStreamEvent(s.streamInfo.id),this.streamList.splice(o,1)}else if(\"replay\"===s.type){if(!n)continue;for(var c=n.length;--c>=0&&n[c].id!==s.streamInfo.id;);c>=0&&n.splice(c,1)}}if(i)for(var u=0;u<i.length;u+=1){var h=[];h.push(i[u]);var p=this.newAvailableStream(h,\"regular\");D.createMCUAvailableStreamEvent(h,p)}if(a)for(var g=0;g<a.length;g+=1){var m=[];m.push(a[g]);var C=this.newAvailableStream(m,\"composite\");D.createMCUAvailableCompositeEvent(m,C)}if(n)for(var f=0;f<n.length;f+=1){var v=[];v.push(n[f]);var b=this.newAvailableReplay(v);D.createMCUAvailableReplayEvent(v,b)}},this.getStreamList=function(){return O.debug(\"getStreamList :\",this.streamList),this.streamList},this.getStreamFromList=function(e){var t;for(O.debug(\"getStreamFromList() with Id :\",e),O.log(\"this.streamList :\",this.streamList),t=0;t<this.streamList.length;t+=1){if(this.streamList[t].streamInfo.id===e)return O.log(\"stream found\",this.streamList[t].streamInfo),this.streamList[t].streamInfo;O.log(\"not the same stream\",e)}return null},this.getStreamIdOfUser=function(e){var t;for(O.debug(\"getStreamIdOfUser() with Id :\",e),O.log(\"this.streamList :\",this.streamList),t=0;t<this.streamList.length;t+=1)if(\"replay\"!==this.streamList[t].type){if(this.streamList[t].userId===e)return O.log(\"stream found\",this.streamList[t].streamInfo),this.streamList[t].streamInfo.id;O.log(\"not the same userId\",e)}return null},this.getStreamOfUserCall=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=this.streamList.length,n=!1;for((0,r.ki)(i,\"replay\",\"boolean\")&&!0===i.replay&&(n=!0);--a>=0;){if(!0===n){if(\"replay\"!==this.streamList[a].type)continue}else if(\"replay\"===this.streamList[a].type)continue;if(this.streamList[a].userId===e&&this.streamList[a].streamInfo.attributes.callId===t)return this.streamList[a].streamInfo}return null},this.newAvailableStream=function(i,a,n){O.debug(\"newAvailableStream():\",i);var o=!1,s=!1,l=this.getSessionMCU(i[0].room);if(l){i[0].attributes.callerId!==t&&(o=!0);for(var d=e.getCallControls([\"publish\",\"shareScreen\"],{addUserMedia:!0}),c=0;c<i.length;c+=1){for(var u=this.streamList.length;--u>=0&&(\"regular\"!==this.streamList[u].type||i[c].id!==this.streamList[u].streamInfo.id););u>=0?(s=!0,(0,r.ki)(this.streamList[u],\"clearDisputableEntry\",\"function\")?this.streamList[u].clearDisputableEntry():O.debug(\"clearDisputableEntry is not set\")):O.debug(\"streamList is empty\"),o=!Object.prototype.hasOwnProperty.call(d,i[c].attributes.callId);var h={type:a,userId:i[c].attributes.callerId,roomId:l.roomName,isRemoteStream:o,streamInfo:i[c]};if(!0===s?this.streamList[u]=h:this.streamList.push(h),O.log(\"this.streamList :\",this.streamList),!0!==o&&\"mesh\"===l.roomMode){var p=e.findUserMediaById(i[c].attributes.callId);p&&!0===p.addAck&&(delete p.addAck,clearTimeout(p.addTimeoutId),delete p.addTimeoutId,D.createCallEstablishedEvent(l.roomName,p.callType,p.userMediaId,\"none\"))}var g=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:\"subscribe\",stream:i[c]});if(g&&!g.autoRestart.pending){O.info(\"[newAvailableStream] auto subscribing to stream\");var m=!!g.autoRestart.force;delete g.autoRestart.force;var C=g.callId,f=this.subscribeToStreams([i[c]],g.mediaType,g.data,g.callConfiguration,{noStreamCheck:!0,force:m});C&&f[0]&&D.createCallRestartingEvent(g.callType,g.audioOnly,C,f[0],\"subscribe\",apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,g.roomName,g.roomName,i[c].id)}!0!==s&&(0,r.Ym)(n,\"function\")&&n(o,i[c],a)}return o}O.debug(\"newAvailableStream() but client is not in session\")},this.updateAvailableStream=function(e,i,a){O.info(\"updateAvailableStream():\",e);var n=!1;if(this.getSessionMCU(e[0].room)){e[0].attributes.callerId!==t&&(n=!0);for(var o=0;o<e.length;o+=1)for(var s=this.streamList.length;--s>=0;)if(this.streamList[s].streamInfo.id===e[o].id){for(var l=[],d=0,c=[\"audio\",\"audioMuted\",\"video\",\"videoMuted\"];d<c.length;d++){var u=c[d];this.streamList[s].streamInfo[u]!==e[o][u]&&(this.streamList[s].streamInfo[u]=e[o][u],l.push(u))}this.streamList[s].streamInfo.attributes.callType!==e[o].attributes.callType&&(this.streamList[s].streamInfo.attributes.callType=e[o].attributes.callType,l.push(\"callType\")),this.streamList[s].streamInfo.attributes.descriptor&&e[o].attributes.descriptor&&this.streamList[s].streamInfo.attributes.descriptor.priority!==e[o].attributes.descriptor.priority&&(this.streamList[s].streamInfo.attributes.descriptor.priority=e[o].attributes.descriptor.priority,l.push(\"priority\")),l.length>0&&(0,r.Ym)(a,\"function\")&&a(n,e[o],i,l);break}return n}O.log(\"updateAvailableStream() but client is not in session\")},this.newAvailableReplay=function(e){O.info(\"newAvailableReplay() :\",e);var i=!1,a=this.getSessionMCU(e[0].room);if(a){e[0].attributes.callerId!==t&&(i=!0);for(var n=0;n<e.length;n+=1){var r={type:\"replay\",userId:e[n].attributes.callerId,roomId:a.roomName,isRemoteStream:i,streamInfo:e[n]};this.streamList.push(r)}return i}O.log(\"newAvailableReplay() but client is not in session\")},this.subscribeToStreams=function(t,i,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};O.info(\"subscribeToStreams():\",t);var s,l,d=[],c=null,u=null,h=null;for(h in t){if(s=t[h],null===apiCC.session||void 0===apiCC.session)return O.debug(\"no session, leaving subscribeToStreams()\"),d;if(null!==(c=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithStreamId(s.id,{ignoreModeChangeKindOld:!0}))){if(O.debug(\"call already exists\"),!0!==o.force){d[h]=c.callId;continue}O.debug(\"Force is true\")}else O.debug(\"call does not exist\");for(l=this.streamList.length;--l>=0&&this.streamList[l].streamInfo.id!==s.id;);if(l>=0){if(O.debug(\"stream exists\"),this.streamList[l].disputableTimeoutId){O.debug(\"stream temporarily not available\"),d[h]=null,!0===o.autoSub&&((u=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:\"subscribe\",stream:s}))||apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:\"subscribe\",roomName:s.room,mediaType:i,callConfiguration:n,data:a,stream:s}));continue}}else if(O.debug(\"stream does not exist\"),!0!==o.noStreamCheck){d[h]=null,D.createErrorEvent(\"stream not available\",\"STREAM_NOT_AVAILABLE\",null,s.room,null,{stream:s});continue}O.info(\"stream:\",s);var p=this.getSessionMCU(s.room);p&&((u=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallControl({type:\"subscribe\",stream:s}))||(u=apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:\"subscribe\",roomName:p.roomName,mediaType:i,callConfiguration:n,data:a,stream:s})),\"COMPOSITE\"!==s.attributes.callType&&\"janusConnector\"===this.pubConnector?(void 0===a&&(a={}),a.mesh&&delete a.mesh,(0,r.Ym)(n,\"qos\",\"object\")?(a.qos={},!1===n.qos.videoForbidInactive?a.qos.videoForbidInactive=!1:a.qos.videoForbidInactive=!0):(a.qos={},a.qos.videoForbidInactive=!0),(0,r.Ym)(n,\"simulcast\",\"object\")&&(a.simulcast={},n.simulcast.streamQuality&&(\"high\"===n.simulcast.streamQuality?a.simulcast.substream=2:\"medium\"===n.simulcast.streamQuality?a.simulcast.substream=1:\"low\"===n.simulcast.streamQuality&&(a.simulcast.substream=0)),n.simulcast.streamFrameRate&&(\"high\"===n.simulcast.streamFrameRate?a.simulcast.temporal=2:\"medium\"===n.simulcast.streamFrameRate?a.simulcast.temporal=1:\"low\"===n.simulcast.streamFrameRate&&(a.simulcast.temporal=0))),(c=new R(apiCC.session.apiCCWebRTCClient.webRTCClient)).instanceId=apiCC.generateInstanceId(),c.callControl=u,(0,r.ki)(c.callControl.autoRestart,\"counter\",\"number\")?(c.callControl.autoRestart.counter+=1,c.restarted=!0):c.callControl.autoRestart.counter=0,c.settingUpType=\"subscribe\",c.setupTimeoutId=setTimeout((function(){O.warn(\"invite + SDP offer not received -> restart call\"),e.onHangup(c.callId,\"disconnected\")}),15e3),null!=n&&void 0!==n.turnServerAddress&&null!==n.turnServerAddress&&c.setCallTurnServer(n.turnServerAddress),c.generateCallId(),u.callId=c.callId,c.callerId=p.roomName,c.calleeId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,c.callee=!0,c.mcuRemoteStream=s,c.dest_roomId=p.roomName,c.callType=s.attributes.callType,c.callControl.callType=s.attributes.callType,\"audio\"!==s.attributes.callType&&\"AUDIOONLY\"!==i||(c.audioOnly=!0,c.callControl.audioOnly=!0),c.remoteId=s.attributes.callerId,c.remoteMailAddress=s.attributes.mailAddress,c.streamId=s.id,c.mediaType=i,c.sessionMCU=p,O.log(\"call.streamId: \"+c.streamId),(0,r.Ym)(a,\"object\")?c.data=(0,r.ws)({},a):c.data={},c.data.pubSub=\"janusConnector\",c.data.type=\"subscribe\",c.data.mode=\"passive\",c.data.mediaType=i,c.data.capabilities=this.browserCapabilities,c.data.cloudConvId=p.convId,c.data.instanceId=c.instanceId,apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(c),d[h]=c.callId,c.myWebRTC_Stack.sendInvite(c.callId,apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,p.roomName,p.roomName,s.attributes.callType,{mode:\"passive\",data:c.data,stream:s,volatile:!!c.restarted})):((c=new R(apiCC.session.apiCCWebRTCClient.webRTCClient)).instanceId=apiCC.generateInstanceId(),c.callControl=u,(0,r.ki)(c.callControl.autoRestart,\"counter\",\"number\")?(c.callControl.autoRestart.counter+=1,c.restarted=!0):c.callControl.autoRestart.counter=0,c.settingUpType=\"subscribe\",null!=n&&void 0!==n.turnServerAddress&&null!==n.turnServerAddress&&c.setCallTurnServer(n.turnServerAddress),void 0===a&&(a={}),c.data=a,c.data.pubSub=this.pubConnector,c.data.type=\"subscribe\",c.data.capabilities=this.browserCapabilities,c.data.cloudConvId=p.convId,c.data.instanceId=c.instanceId,O.log(\"mediaType: \",i),O.log(\"stream.attributes.callType: \",s.attributes.callType),c.callType=s.attributes.callType,c.callControl.callType=s.attributes.callType,\"COMPOSITE\"===s.attributes.callType&&\"janusConnector\"===this.pubConnector||\"audio\"===s.attributes.callType||\"AUDIOONLY\"===i?(O.log(\"Setting call as audioOnly\"),c.audioOnly=!0,c.callControl.audioOnly=!0,c.stripVideoSDPActivated=!0):\"VIDEOONLY\"===i&&(c.stripAudioSDPActivated=!0,c.callType=\"videoOnly\",c.callControl.callType=\"videoOnly\"),c.mcuRemoteStream=s,c.dest_roomId=p.roomName,c.calleeId=p.roomName,c.generateCallId(),u.callId=c.callId,c.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,c.sessionMCU=p,apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(c),c.createPeerConnection(),c.doCall(),c.started=!0,c.callType=s.attributes.callType,c.remoteId=s.attributes.callerId,c.remoteMailAddress=s.attributes.mailAddress,!0===s.audio?!0===s.video?c.destCallType=\"media\":c.destCallType=\"audio\":!0===s.video&&(c.destCallType=\"videoOnly\"),void 0===s.id&&O.log(\"stream.id is undefined :\",s),c.streamId=s.id,c.mediaType=i,O.log(\"stream.attributes.callType: \",s.attributes.callType),d[h]=c.callId),c.asyncCallbacks={},c.asyncCallbacks.type=\"subscribe\")}return d},this.unsubscribe=function(e){O.info(\"unsubscribe() :\",e);var t=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithStreamId(e);null===t?O.log(\"error call not found on unsubscribe\"):void 0!==t.callId&&apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(t.callId)},this.publish=function(t,i,a,n,o,s){O.info(\"publish roomName :\",t),O.log(\"publish sessionId :\",i),O.log(\"publish token :\",a),O.log(\"publish callConfiguration :\",n);var l=null,d=!1,c=!1,u=null,h=null,p=this.getSessionMCU(t);if(!p)return O.error(\"roomName does not match any sessionMCU\"),null;if(null!==o&&\"object\"===E(o)||(o={}),\"janusConnector\"===this.pubConnector&&!o.mesh&&s&&s.callControl&&s.callControl.callId&&apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(s.callControl.callId))return O.debug(\"call already exists\",s.callControl.callId),s.callControl.callId;if(!0===n||\"true\"===n?(O.log(\"DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly\"),d=!0,n={}):!1===n||\"false\"===n?(O.log(\"DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly\"),n={}):null!==n&&\"object\"===E(n)||(n={}),!0===n.audioOnly&&!0===n.videoOnly)return D.createErrorEvent(\"Cannot publish without audio nor video\",\"PUBLISH_FAILURE\",null,t),null;if(!0===n.audioOnly&&(d=!0),!0===n.videoOnly&&(c=!0),[\"audioOnly\",\"videoOnly\",\"record\",\"private\"].forEach((function(e){n.hasOwnProperty(e)&&((0,r.ki)(o,\"callConfiguration\",\"object\")||(o.callConfiguration={}),o.callConfiguration[e]=n[e])})),p.convId&&(o.cloudConvId=p.convId),(0,r.Ym)(n,\"qos\",\"object\")?(o.qos={},n.qos.videoMinBitrate?o.qos.videoMinBitrate=n.qos.videoMinBitrate:n.qos.videoMinQuality&&[\"excellent\",\"good\",\"medium\",\"bad\"].indexOf(n.qos.videoMinQuality)>=0?o.qos.videoMinQuality=n.qos.videoMinQuality:o.qos.videoMinQuality=\"bad\",n.qos.videoStartBitrate?o.qos.videoStartBitrate=n.qos.videoStartBitrate:n.qos.videoStartQuality&&[\"upper\",\"excellent\",\"good\",\"medium\",\"bad\"].indexOf(n.qos.videoStartQuality)>=0&&(o.qos.videoStartQuality=n.qos.videoStartQuality),!1===n.qos.videoForbidInactive?o.qos.videoForbidInactive=!1:o.qos.videoForbidInactive=!0):o.qos={videoMinQuality:\"bad\",videoForbidInactive:!0},n.simulcast&&(n.userMediaStreamId&&(h=apiCC.getUserMediaStream(n.userMediaStreamId))&&h.isSimulcastCompliant()||delete n.simulcast),function(e){if(!(0,r.ki)(e,\"simulcast\",\"object\"))return delete e.simulcast,!1;if(\"safari\"===r.wL.type&&\"SDP\"!==e.simulcast.mode)return delete e.simulcast,!1;if(delete e.simulcast.sendEncodings,(0,r.ki)(e.simulcast,\"maxBitrate\",\"number\"))if(\"chrome\"===r.wL.type&&r.wL.version>=78&&\"SDP\"!==e.simulcast.mode){if(O.debug(\"configure simulcast RID chrome maxBitrate\"),!x(e.simulcast,e.simulcast.maxBitrate))O.warn(\"cannot configure simulcast\"),delete e.simulcast}else if(\"firefox\"===r.wL.type){if(O.debug(\"configure simulcast RID firefox maxBitrate\"),!x(e.simulcast,e.simulcast.maxBitrate))O.warn(\"cannot configure simulcast\"),delete e.simulcast}else delete e.simulcast.encodings;else if((0,r.ki)(e.simulcast,\"encodings\",\"object\"))if(\"chrome\"===r.wL.type&&r.wL.version>=78&&\"SDP\"!==e.simulcast.mode){if(O.debug(\"configure simulcast RID chrome encodings\"),!L(e.simulcast))O.warn(\"cannot configure simulcast\"),delete e.simulcast}else if(\"firefox\"===r.wL.type){if(O.debug(\"configure simulcast RID firefox encodings\"),!L(e.simulcast))O.warn(\"cannot configure simulcast\"),delete e.simulcast}else delete e.simulcast.encodings;else if(\"chrome\"===r.wL.type&&r.wL.version>=78&&\"SDP\"!==e.simulcast.mode){if(O.debug(\"configure simulcast RID chrome default\"),e.simulcast.encodings={high:{maxBitrate:900},medium:{maxBitrate:300,scaleResolutionDownBy:2},low:{maxBitrate:100,scaleResolutionDownBy:4}},!L(e.simulcast))delete e.simulcast}else if(\"firefox\"===r.wL.type&&(O.debug(\"configure simulcast RID firefox default\"),e.simulcast.encodings={high:{maxBitrate:900},medium:{maxBitrate:300,scaleResolutionDownBy:2},low:{maxBitrate:100,scaleResolutionDownBy:4}},!L(e.simulcast)))delete e.simulcast}(n),n.distributedBroadcastEnabled&&!n.simulcast&&(o.distributedBroadcastEnabled=!0),[\"audioLabels\",\"videoLabels\"].forEach((function(e){(0,r.Ym)(n[e],\"array\")&&(o[e]=[],n[e].forEach((function(t){(0,r.Ym)(t,\"string\")&&o[e].push(t)})))})),(0,r.Ym)(n,\"context\",\"object\"))try{JSON.stringify(n.context),o.context=n.context}catch(e){}if((0,r.Ym)(n,\"profileType\",\"string\")&&(o.profileType=n.profileType),(0,r.Ym)(n,\"priority\",\"number\")&&n.priority>=0&&(o.priority=n.priority),(0,r.Ym)(n,\"downgradeProfileList\",\"array\")&&(o.downgradeProfileList=n.downgradeProfileList),O.debug(\"callConfiguration; audioOnly: \"+d+\", videoOnly: \"+c),s&&!0===s.forceScreenSharingCallType)O.debug(\"publish screenSharing\");else if(!1===apiCC.mediaDeviceMgr.videoDevicePresent){if(!1===apiCC.mediaDeviceMgr.audioDevicePresent)return O.debug(\"publish without any device, leaving publish ...\"),o.publishWithoutMediaDeviceDetected=!0,apiCC.session.setUserData(o),D.createErrorEvent(\"Cannot publish without audio nor video\",\"PUBLISH_FAILURE\",null,t),null;!0!==d&&(O.debug(\"publish video, but no webcam present, forcing callType to audio\"),d=!0)}else!1===apiCC.mediaDeviceMgr.audioDevicePresent&&!0!==c&&(O.debug(\"publish video, but no microphone present, forcing callType to videoOnly\"),c=!0);if(l=new R(apiCC.session.apiCCWebRTCClient.webRTCClient),void 0!==o.mesh&&void 0!==o.instanceId?(O.debug(\"keeping instanceId \"),l.instanceId=o.instanceId):l.instanceId=apiCC.generateInstanceId(),\"janusConnector\"!==this.pubConnector||o.mesh?(l.settingUpType=\"publish\",l.generateCallId()):(l.settingUpType=\"publish\",s&&s.callControl?(l.callControl=s.callControl,l.callControl.autoRestart.counter+=1,l.callId=l.callControl.callId,l.restarted=!0):(l.callControl=apiCC.session.apiCCWebRTCClient.webRTCClient.createCallControl({type:\"publish\",roomName:t,callConfiguration:n,data:o}),l.callControl.sessionId=i,l.callControl.token=a,l.callControl.autoRestart.counter=0,l.generateCallId(),l.callControl.callId=l.callId)),null!=n&&void 0!==n.turnServerAddress&&null!==n.turnServerAddress&&l.setCallTurnServer(n.turnServerAddress),n.userMediaStreamId&&((h=apiCC.getUserMediaStream(n.userMediaStreamId))?(l.callType=h.callType,O.debug(\"Setting callType to \"+l.callType),\"screenSharing\"===l.callType&&(l.screenSharing=!0)):(O.debug(\"callConfiguration.userMediaStreamId is setted but stream is not present\"),delete n.userMediaStreamId)),l.data=o,l.data.instanceId=l.instanceId,\"restarted\"===i&&(l.restarted=!0),l.mediaTypeForIncomingCall=\"NONE\",!0===d?(O.log(\"Setting call as audioOnly\"),l.audioOnly=!0,l.callType=\"audio\",l.mediaTypeForOutgoingCall=\"AUDIO\"):!0===c?(O.log(\"Setting call as videoOnly\"),l.callType=\"videoOnly\",l.mediaTypeForOutgoingCall=\"VIDEOONLY\"):O.log(\"Not Setting call as audioOnly nor videoOnly\"),l.dest_roomId=p.roomName,l.calleeId=p.roomName,l.data.pubSub=this.pubConnector,l.data.type=\"publish\",l.data.capabilities=this.browserCapabilities,l.data.cloudConvId=p.convId,l.callConfiguration=n,l.sessionMCU=p,l.setMediaConstraintsToSendOnlyOffer(),l.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,(0,r.Ym)(n,\"simulcast\",\"object\")){var g=null;h&&(g=h.getSimulcastProfile()),\"chrome\"===r.wL.type&&r.wL.version>=78&&\"SDP\"!==n.simulcast.mode?(O.debug(\"simulcast chrome 78+ -> RID\",n.simulcast),l.simulcast=\"RID\",l.data.simulcast={enabled:!0,mode:\"RID\"},l.data.simulcast.encodings=Object.assign({},n.simulcast.encodings),g&&(l.data.simulcast.profile=g)):\"chrome\"===r.wL.type?(O.debug(\"simulcast chrome -> SDP\",n.simulcast),l.simulcast=\"SDP\",l.data.simulcast={enabled:!0,mode:\"SDP\"}):\"firefox\"===r.wL.type?(O.debug(\"simulcast firefox -> RID\",n.simulcast),l.simulcast=\"RID\",l.data.simulcast={enabled:!0,mode:\"RID\"},l.data.simulcast.encodings=Object.assign({},n.simulcast.encodings),g&&(l.data.simulcast.profile=g)):\"safari\"===r.wL.type&&(O.debug(\"simulcast safari -> SDP\",n.simulcast),l.simulcast=\"SDP\",l.data.simulcast={enabled:!0,mode:\"SDP\"})}return O.log(\"webRTCClient.accessToLocalMedia :\",e.accessToLocalMedia),apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(l),this.publishCallId=l.callId,l.callControl&&l.callControl.autoRestart.stream&&O.debug(\"call.callControl.autoRestart.stream.active :\",l.callControl.autoRestart.stream.active),\"janusConnector\"===this.pubConnector&&l.callControl&&l.callControl.autoRestart.stream&&l.callControl.autoRestart.stream.active?(apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,l.callLocalStream=l.callControl.autoRestart.stream,l.establishCall(),l.callId):(void 0!==o.mesh&&null!==(u=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(o.mesh.calleeCallId))&&u.callConfiguration&&u.callConfiguration.userMediaStreamId&&(l.callType=u.callType,n.userMediaStreamId=u.callConfiguration.userMediaStreamId),n.userMediaStreamId?((h=apiCC.getUserMediaStream(n.userMediaStreamId)).addCallInfo(l.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,\"janusConnector\"===this.pubConnector&&l.callControl&&(l.callControl.autoRestart.stream=h.stream),l.callConfiguration.userMediaStreamId=h.userMediaStreamId,l.callLocalStream=h.stream,l.establishCall(),l.callId):apiCC.userMediaStreamTable.length>0?((h=apiCC.userMediaStreamTable[0]).addCallInfo(l.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,\"janusConnector\"===this.pubConnector&&l.callControl&&(l.callControl.autoRestart.stream=h.stream),l.callConfiguration.userMediaStreamId=h.userMediaStreamId,l.callLocalStream=h.stream,l.establishCall(),l.callId):(apiCC.createUserMediaStream({callId:l.callId,type:l.callType,audioSourceId:e.audioSourceId,videoSourceId:e.videoSourceId,success:function(e){O.debug(\"[publish] success; userMediaStreamId: \"+e.userMediaStreamId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,\"janusConnector\"===apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector&&l.callControl&&(l.callControl.autoRestart.stream=e.stream),l.callConfiguration.userMediaStreamId=e.userMediaStreamId,l.callLocalStream=e.stream,l.establishCall()}}),l.callId))},this.publishScreen=function(e,t,i,a){O.info(\"publishScreen()\");var n=this.getSessionMCU(e);return n?(null==t&&(t={}),null==i&&(i={}),void 0!==i.record&&(void 0!==t.callConfiguration||(t.callConfiguration={}),t.callConfiguration.record=i.record),void 0!==i.private&&(void 0!==t.callConfiguration||(t.callConfiguration={}),t.callConfiguration.private=i.private),t.pubSub=this.pubConnector,t.type=\"publish\",apiCC.session.apiCCWebRTCClient.webRTCClient.shareScreen(n.roomName,t,a,i)):(O.error(\"roomId does not match any sessionMCU\"),null)},this.unpublish=function(e){O.info(\"unpublish call with callId :\",e),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(e),this.publishCallId=null},this.removeMCUStream=function(e,t,i){var a,n=!1;for(\"Broken_by_MCU\"!==i&&\"disconnected\"!==i||(n=!0),O.debug(\"streamId:\",t),O.debug(\"reason:\",i),O.debug(\"quiet:\",n),a=0;a<this.streamList.length;a+=1)if(O.log(\"this.streamList[i].streamInfo.id :\",this.streamList[a].streamInfo.id),this.streamList[a].streamInfo.id===t){!0===n?(O.debug(\"add stream into disputableStreamList: \",t),this.streamList[a].disputableTimeoutId=setTimeout(U.bind(this,this.streamList[a].streamInfo.id),k),this.streamList[a].clearDisputableEntry=N.bind(this,this.streamList[a].streamInfo.id),this.disputableStreamList.push(this.streamList[a])):(O.debug(\"remove stream from streamList:\",t),apiCC.session.apiCCWebRTCClient.webRTCClient.destroyCallControl({type:\"subscribe\",stream:this.streamList[a].streamInfo}),this.streamList.splice(a,1));break}void 0!==e&&apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(e),!0!==n&&D.createMCURemovedStreamEvent(t)},this.startStreaming=function(e,t,i,a){O.info(\"startStreaming\");var n,r,o=null!=e&&e.length>0,s=null!=t&&t.length>0,l={};if(!o&&!s)return!1;if(null==i||0===i.length)return!1;if(void 0===a){if(null===this.publishCallId)return O.log(\"Cannot start streaming as no stream is published\"),!1;a=this.publishCallId}var d=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(a);return d||(d=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(a))?d.sessionMCU?(o||(e=\"custom\"),l.pubSub=this.pubConnector,l.service=e,s&&(l.server=t),l.streamKey=i,O.log(\"startStreaming() on ApiRTC MCU with roomId:\",d.sessionMCU.roomName),n={type:\"startStreaming\",roomId:d.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:a,data:l},r=JSON.stringify(n),O.log(\"C->S: \"+r),apiCC.session.channel.socket.emit(\"startStreaming\",r),!0):(O.error(\"no such sessionMCU\"),!1):(O.error(\"callIdToStream does not match any call\"),!1)},this.stopStreaming=function(e){var t,i;if(O.info(\"stopStreaming\"),void 0===e){if(null===this.publishCallId)return O.log(\"Cannot stop streaming as no stream is published\"),!1;e=this.publishCallId}var a=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(e);if(!a)return O.error(\"callIdToStream does not match any call\"),!1;var n=this.getSessionMCU(a.dest_roomId);return n?(O.log(\"stopStreaming() on ApiRTC MCU with roomId:\",n.roomName),t={type:\"stopStreaming\",roomId:n.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:e,data:{pubSub:this.pubConnector}},i=JSON.stringify(t),O.log(\"C->S: \"+i),apiCC.session.channel.socket.emit(\"stopStreaming\",i),!0):(O.error(\"dest_roomId does not match any sessionMCU\"),!1)},this.startRecording=function(e,t,i,a,n){var r,o;if(O.info(\"startRecording\"),null==a){if(null===this.publishCallId)return void O.log(\"Call recording can not start as stream is not published\");a=this.publishCallId}var s=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(a);return s||(s=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(a))?s.sessionMCU?(\"AUDIO-ONLY\"!==e&&\"VIDEO-ONLY\"!==e&&(e=\"AUDIO-VIDEO\"),null==n&&(n={}),n.pubSub=this.pubConnector,O.log(\"startRecording() on ApiRTC MCU with roomId :\",s.sessionMCU.roomName),r={type:\"startRecording\",roomId:s.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:a,data:n,customIdInFilename:t,mediaType:e,convId:i},o=JSON.stringify(r),O.log(\"C->S: \"+o),void apiCC.session.channel.socket.emit(\"startRecording\",o)):(O.error(\"no such sessionMCU\"),!1):(O.error(\"callIdToRecord does not match any call\"),!1)},this.stopRecording=function(e){var t,i;if(O.info(\"stopRecording\"),void 0===e){if(null===this.publishCallId)return void O.log(\"Call recording can not stop as stream is not published\");e=this.publishCallId}var a=apiCC.session.apiCCWebRTCClient.webRTCClient.findCallWithCallId(e);if(!a)return O.error(\"callIdToRecord does not match any call\"),!1;var n=this.getSessionMCU(a.dest_roomId);if(!n)return O.error(\"dest_roomId does not match any sessionMCU\"),!1;O.log(\"stopRecording() on ApiRTC MCU with roomId :\",n.roomName),t={type:\"stopRecording\",roomId:n.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:e,data:{pubSub:this.pubConnector}},i=JSON.stringify(t),O.log(\"C->S: \"+i),apiCC.session.channel.socket.emit(\"stopRecording\",i)},this.recordingStarted=function(e){O.info(\"recordingStarted:\",e),D.createMCURecordingStartedEvent(e.roomName,e.callId,e.clientId,e.recordType,e.time,e.convId,e.mediaId,e.mediaURL,e.remoteId,e.recordedFileName,e.mediaType,e.descriptor)},this.recordingStopped=function(e){O.info(\"recordingStopped:\",e),D.createMCURecordingStoppedEvent(e.roomName,e.callId,e.clientId,e.recordType,e.time,e.convId,e.mediaId,e.mediaURL,e.remoteId,e.recordedFileName,e.mediaType,e.descriptor)},this.recordingStreamAvailable=function(e){O.info(\"recordingStreamAvailable :\",e),D.createMCURecordedStreamsAvailableEvent(e.roomName,e.callId,e.clientId,e.recordedFileName,e.convId,e.mediaId,e.mediaURL,e.recordType,e.remoteId,e.mediaType,e.descriptor),\"janusConnector\"===this.pubConnector&&e.hasOwnProperty(\"confId\")&&e.hasOwnProperty(\"remoteId\")&&D.createRecordedStreamsAvailableEvent(e.confId,e.clientId,e.remoteId,e.callId,e.convId,e.mediaId,e.mediaURL)},this.streamingStarted=function(e){O.info(\"streamingStarted: \",e),D.createMCUStreamingStartedEvent(e.roomName,e.callId,e.clientId,e.time)},this.streamingStopped=function(e){O.info(\"streamingStopped: \",e),D.createMCUStreamingStoppedEvent(e.roomName,e.callId,e.clientId,e.time)},this.startComposite=function(e){var t,i,a;(a=e?this.getSessionMCU(e):this.getSessionMCU(null,{first:!0}))?(O.log(\"startComposite() on ApiRTC MCU with roomId :\",a.roomName),t={type:\"startComposite\",roomId:a.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},i=JSON.stringify(t),O.log(\"C->S: \"+i),apiCC.session.channel.socket.emit(\"startComposite\",i)):O.log(\"startComposite() but client is not in session\")},this.stopComposite=function(e){var t,i,a;(a=e?this.getSessionMCU(e):this.getSessionMCU(null,{first:!0}))?(O.log(\"stopComposite() on ApiRTC MCU with roomId :\",a.roomName),t={type:\"stopComposite\",roomId:a.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector}},i=JSON.stringify(t),O.log(\"C->S: \"+i),apiCC.session.channel.socket.emit(\"stopComposite\",i)):O.log(\"stopComposite() but client is not in session\")},this.startCompositeRecording=function(e,t,i,a,n){O.info(\"startCompositeRecording with convId :\",i);var o,s,l;(l=n?this.getSessionMCU(n):this.getSessionMCU(null,{first:!0}))?(\"AUDIO-ONLY\"!==e&&\"VIDEO-ONLY\"!==e&&(e=\"AUDIO-VIDEO\"),(a=(0,r.Ym)(a,\"object\")?(0,r.ws)({},a):{}).pubSub=this.pubConnector,[\"complete\",\"efficient\",\"audioOnly\"].indexOf(a.mode)<0&&(a.mode=\"complete\"),a.labelEnabled=!0===a.labelEnabled,(0,r.Ym)(a,\"labels\",\"array\")||(a.labels=[\"microphone\",\"camera\",\"screenSharing\",\"sip\"]),O.log(\"startRecording() on ApiRTC MCU with roomId :\",l.roomName),o={type:\"startRecording\",roomId:l.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:\"COMPOSITE\",data:a,customIdInFilename:t,mediaType:e,convId:i},s=JSON.stringify(o),O.log(\"C->S: \"+s),apiCC.session.channel.socket.emit(\"startRecording\",s)):O.log(\"startCompositeRecording() but client is not in session\")},this.stopCompositeRecording=function(e){O.info(\"stopCompositeRecording\");var t,i,a;(a=e?this.getSessionMCU(e):this.getSessionMCU(null,{first:!0}))?(O.log(\"stopRecording() on ApiRTC MCU with roomId :\",a.roomName),t={type:\"stopRecording\",roomId:a.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:\"COMPOSITE\",data:{pubSub:this.pubConnector}},i=JSON.stringify(t),O.log(\"C->S: \"+i),apiCC.session.channel.socket.emit(\"stopRecording\",i)):O.log(\"stopCompositeRecording() but client is not in session\")},this.enforceMCU=function(e){var t;if(t=e?this.getSessionMCU(e):this.getSessionMCU(null,{first:!0})){var i={type:\"info\",infoType:\"enforceMCU\",data:{clientId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,roomId:t.roomName,pubSub:this.pubConnector}},a=JSON.stringify(i);O.log(\"C->S: \"+a),apiCC.session.channel.socket.emit(\"info\",a)}else O.log(\"enforceMCU() but client is not in session\")},this.meshPublish=function(e,t,i,a,n,o){var s=!1,l=null,d=null,c=this.getSessionMCU(e);if(!c)return O.error(\"meshPublish() - missing sessionMCU\"),null;if(!0===a||!1===a||\"true\"===a||\"false\"===a?(O.log(\"DEPRECATED ... please use callConfiguration JSON parameter : callConfiguration.audioOnly instead of audioOnly\"),s=a,a={}):null!==a&&\"object\"===E(a)||(a={}),null!==n&&\"object\"===E(n)||(n={}),(0,r.Ym)(a,\"profileType\",\"string\")&&(n.profileType=a.profileType),(0,r.Ym)(a,\"priority\",\"number\")&&a.priority>=0&&(n.priority=a.priority),(0,r.Ym)(a,\"downgradeProfileList\",\"array\")&&(n.downgradeProfileList=a.downgradeProfileList),void 0!==a.audioOnly&&(s=a.audioOnly,void 0!==n.callConfiguration||(n.callConfiguration={}),n.callConfiguration.audioOnly=a.audioOnly),(0,r.Ym)(a,\"context\",\"object\"))try{JSON.stringify(a.context),n.context=a.context}catch(e){}return l=new w(apiCC.session.apiCCWebRTCClient.webRTCClient),!0!==s&&\"true\"!==s||(O.log(\"Setting call as audioOnly\"),l.callType=\"audio\"),l.roomId=e,l.sessionId=t,l.token=i,l.callConfiguration=a,l.data=n,l.options=o,l.sessionMCU=c,apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.push(l),a.userMediaStreamId?((d=apiCC.getUserMediaStream(a.userMediaStreamId)).addCallInfo(l.userMediaId,\"userMedia\"),l.callConfiguration.userMediaStreamId=d.userMediaStreamId,l.callType=d.callType,l.audio=d.audio,l.video=d.video,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(l),apiCC.checkMutingStateForUserMedia(a,d)):apiCC.createUserMediaStream({callId:l.userMediaId,callFlavor:\"userMedia\",type:l.callType,audioSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.audioSourceId,videoSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.videoSourceId,success:function(e){O.debug(\"[meshPublish] success; userMediaStreamId: \"+e.userMediaStreamId),l.callConfiguration.userMediaStreamId=e.userMediaStreamId,l.callType=e.callType,l.audio=e.audio,l.video=e.video,apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(l),apiCC.checkMutingStateForUserMedia(a,e)}}),l.userMediaId},this.meshOnUserMediaSuccess=function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=null,n=null;!0===i?((a={}).type=\"streamStatusChanged\",a.callerId=e.clientId,a.roomId=t.roomId,a.streams={},a.streams[t.userMediaId]={eventType:\"modify\",callId:t.userMediaId,callType:t.callType,audio:t.audio,video:t.video},a.data={},a.data.meshPublish=!0,a.data.pubSub=this.pubConnector,n=JSON.stringify(a),O.log(\"C->S: \"+n),apiCC.session.channel.socket.emit(\"streamStatusChanged\",n)):(this.publishCallId=t.userMediaId,t.addAck=!0,t.addTimeoutId=setTimeout((function(){e.onRemoteHangup(t.userMediaId,e.clientId,t.roomId,\"Unable_to_establish\",null,null)}),t.disconnectionTimer),(a={}).type=\"streamStatusChanged\",a.callerId=e.clientId,a.roomId=t.roomId,a.streams={},a.streams[t.userMediaId]={eventType:\"add\",callId:t.userMediaId,callType:t.callType,audio:t.audio,video:t.video},a.data=t.data,a.data.meshPublish=!0,a.data.pubSub=this.pubConnector,n=JSON.stringify(a),O.log(\"C->S: \"+n),apiCC.session.channel.socket.emit(\"streamStatusChanged\",n))},this.meshPublishScreen=function(e,t,i,a,n){var r=null,o=null,s=this.getSessionMCU(e);return s?(null!==i&&\"object\"===E(i)||(i={}),(r=new w(apiCC.session.apiCCWebRTCClient.webRTCClient)).roomId=e,r.data=t,r.callConfiguration=i,r.captureSourceType=a,r.sessionMCU=s,apiCC.session.apiCCWebRTCClient.webRTCClient.userMediaTable.push(r),i.userMediaStreamId?((o=apiCC.getUserMediaStream(i.userMediaStreamId)).addCallInfo(r.userMediaId,\"userMedia\"),r.callConfiguration.userMediaStreamId=o.userMediaStreamId,r.callType=o.callType,r.audio=o.audio,r.video=o.video,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(r)):apiCC.createUserMediaStream({callId:r.userMediaId,callFlavor:\"userMedia\",type:\"screenSharing\",captureSourceType:a,success:function(e){O.debug(\"[meshPublishScreen] success; userMediaStreamId: \"+e.userMediaStreamId),r.callConfiguration.userMediaStreamId=e.userMediaStreamId,r.callType=e.callType,r.audio=e.audio,r.video=e.video,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnScreenMediaSuccess(r)}}),r.userMediaId):(O.error(\"meshPublishScreen() - missing sessionMCU\"),null)},this.meshOnScreenMediaSuccess=function(t){var i,a=null;t.addAck=!0,t.addTimeoutId=setTimeout((function(){e.onRemoteHangup(t.userMediaId,e.clientId,t.roomId,\"Unable_to_establish\",null,null)}),t.disconnectionTimer),(a={}).type=\"streamStatusChanged\",a.callerId=e.clientId,a.roomId=t.roomId,a.streams={},a.streams[t.userMediaId]={eventType:\"add\",callId:t.userMediaId,callType:t.callType,audio:t.audio,video:t.video},a.data={},a.data.pubSub=this.pubConnector,i=JSON.stringify(a),O.log(\"C->S: \"+i),apiCC.session.channel.socket.emit(\"streamStatusChanged\",i)},this.meshOnHangup=function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=0,r=null,o=null,s=null;if(null!==i&&\"object\"===E(i)||(i={}),t){if(null!==(r=e.findUserMediaById(t)))for(r.close(),!0!==r.streamStolen&&(e.myWebRTC_Event.createHangupEvent(\"local\",e.clientId,0,!0,null,r.userMediaId,r.callType),r.releaseUserMediaStream()),(o={}).type=\"streamStatusChanged\",o.callerId=e.clientId,o.roomId=r.roomId,o.streams={},o.streams[r.userMediaId]={eventType:\"remove\",callId:r.userMediaId,callType:r.callType},a.restart&&(o.streams[r.userMediaId].restart=!0),o.data={},o.data.pubSub=this.pubConnector,s=JSON.stringify(o),O.log(\"C->S: \"+s),apiCC.session.channel.socket.emit(\"streamStatusChanged\",s),n=e.userMediaTable.length;--n>=0;)if(e.userMediaTable[n]===r){e.userMediaTable.splice(n,1);break}}else for(n=e.userMediaTable.length;--n>=0;)r=e.userMediaTable[n],a.hasOwnProperty(\"roomId\")&&r.sessionMCU.roomName!==a.roomId||(e.myWebRTC_Event.createHangupEvent(\"local\",e.clientId,0,!0,null,r.userMediaId,r.callType),r.close(),r.releaseUserMediaStream(),(o={}).type=\"streamStatusChanged\",o.callerId=e.clientId,o.roomId=r.roomId,o.streams={},o.streams[r.userMediaId]={eventType:\"remove\",callId:r.userMediaId,callType:r.callType},o.data={},o.data.pubSub=this.pubConnector,s=JSON.stringify(o),O.log(\"C->S: \"+s),apiCC.session.channel.socket.emit(\"streamStatusChanged\",s),e.userMediaTable.splice(n,1))},this.participantEjected=function(t){(0,r.Ym)(t.data,\"clientId\",\"string\")&&e.myWebRTC_Event.createMCUParticipantEjectedEvent(t.roomId,t.data.clientId,t.data.info)},this.ejectParticipant=function(e,t,i){var a;if(a=i?this.getSessionMCU(i):this.getSessionMCU(null,{first:!0})){var n={type:\"ejectParticipant\",roomId:a.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,data:{pubSub:this.pubConnector,clientId:e}};t&&(n.data.info=t);var r=JSON.stringify(n);O.log(\"C->S: \"+r),apiCC.session.channel.socket.emit(\"ejectParticipant\",r)}else O.debug(\"ejectParticipant() - missing sessionMCU\")},this.getJoinSessionReq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;if(!e){if(t.hasOwnProperty(\"transactionId\")){for(var a=this.joinSessionReqs.length;--a>=0;)if(this.joinSessionReqs[a].transactionId===t.transactionId){i=this.joinSessionReqs[a];break}return i}return null}for(var n=this.joinSessionReqs.length;--n>=0;)if(this.joinSessionReqs[n].roomId===e){i=this.joinSessionReqs[n];break}return i},this.removeJoinSessionReq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e){if(!0===t.all)return this.joinSessionReqs.splice(0,this.joinSessionReqs.length),!0;t.hasOwnProperty(\"roomId\")&&(e=this.getJoinSessionReq(t.roomId))}if(!e)return!1;for(var i=this.joinSessionReqs.length;--i>=0&&this.joinSessionReqs[i]!==e;);return i>=0&&(this.joinSessionReqs.splice(i,1),!0)},this.getSessionMCU=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;if(!e){if(!0===t.first)return this.sessionMCUs[0];if((0,r.Ym)(t.callback,\"function\")){O.debug(\"getSessionMCU callback\");for(var a=this.sessionMCUs.length;--a>=0;)if(t.callback(this.sessionMCUs[a])){i=this.sessionMCUs[a];break}}return i}for(var n=this.sessionMCUs.length;--n>=0;)if(this.sessionMCUs[n].roomName===e){i=this.sessionMCUs[n];break}return i},this.removeSessionMCU=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e&&!0===t.all)return this.sessionMCUs.splice(0,this.sessionMCUs.length),!0;if(!e)return!1;for(var i=this.sessionMCUs.length;--i>=0&&this.sessionMCUs[i]!==e;);return i>=0&&(this.sessionMCUs.splice(i,1),!0)},this.callback=function(e,t){return this.closureHandler=function(i){return e[t](i)},this.closureHandler}};function U(e){O.debug(\"disputableEntryTimeout\",e);for(var t=apiCC.session.apiCCWebRTCClient.webRTCClient,i=this.disputableStreamList.length;--i>=0;)if(this.disputableStreamList[i].streamInfo.id===e){this.disputableStreamList.splice(i,1);break}for(var a=null,n=this.streamList.length;--n>=0;)if(this.streamList[n].streamInfo.id===e){a=t.destroyCallControl({type:\"subscribe\",stream:this.streamList[n].streamInfo}),this.streamList.splice(n,1);break}a&&a.callId&&D.createHangupEvent(\"remote\",t.clientId,a.roomName,!1,\"Hangup_From_Callee\",a.callId,a.callType),D.createMCURemovedStreamEvent(e)}function N(e){O.debug(\"clearDisputableEntry\",e);for(var t=this.disputableStreamList.length;--t>=0;)if(this.disputableStreamList[t].streamInfo.id===e){this.disputableStreamList.splice(t,1);break}for(var i=this.streamList.length;--i>=0;)if(this.streamList[i].streamInfo.id===e){this.streamList[i].disputableTimeoutId&&(clearTimeout(this.streamList[i].disputableTimeoutId),delete this.streamList[i].disputableTimeoutId),delete this.streamList[i].clearDisputableEntry;break}}function P(e){var t={};return(0,r.ki)(e,\"maxBitrate\",\"number\")&&(t.maxBitrate=e.maxBitrate),(0,r.ki)(e,\"scaleResolutionDownBy\",\"number\")&&(t.scaleResolutionDownBy=e.scaleResolutionDownBy),t}function L(e){return(0,r.Ym)(e.encodings,\"object\")?(0,r.ki)(e.encodings.high,\"maxBitrate\",\"number\")&&(0,r.ki)(e.encodings.medium,\"maxBitrate\",\"number\")&&(0,r.ki)(e.encodings.low,\"maxBitrate\",\"number\")?(e.encodings.high=Object.assign({active:!0},P(e.encodings.high)),e.encodings.medium=Object.assign({active:!0},P(e.encodings.medium)),e.encodings.low=Object.assign({active:!0},P(e.encodings.low)),e.sendEncodings=[{rid:\"h\",active:!0},{rid:\"m\",active:!0},{rid:\"l\",active:!0}],e.sendEncodings[0].maxBitrate=1e3*e.encodings.high.maxBitrate,e.sendEncodings[1].maxBitrate=1e3*e.encodings.medium.maxBitrate,e.sendEncodings[2].maxBitrate=1e3*e.encodings.low.maxBitrate,(0,r.ki)(e.encodings.medium,\"scaleResolutionDownBy\",\"number\")&&(e.sendEncodings[1].scaleResolutionDownBy=e.encodings.medium.scaleResolutionDownBy),(0,r.ki)(e.encodings.low,\"scaleResolutionDownBy\",\"number\")&&(e.sendEncodings[2].scaleResolutionDownBy=e.encodings.low.scaleResolutionDownBy),!0):(O.warn(\"no such maxBitrate\"),!1):(O.warn(\"no such encodings\"),!1)}function x(e,t){if(t<650)return!1;var i=Math.floor(9*t/13),a=Math.floor(3*t/13),n=t-i-a;return e.encodings={high:{maxBitrate:i},medium:{maxBitrate:a,scaleResolutionDownBy:2},low:{maxBitrate:n,scaleResolutionDownBy:4}},L(e)}a.Y.get(\"CallControl\");var W=function(e){this.type=e.type,e.callId&&(this.callId=e.callId),e.callType?this.callType=e.callType:this.callType=\"media\",Object.prototype.hasOwnProperty.call(e,\"audioOnly\")&&(this.audioOnly=!!e.audioOnly),e.roomName&&(this.roomName=e.roomName),e.mediaType&&(this.mediaType=e.mediaType),e.callConfiguration&&(this.callConfiguration=e.callConfiguration),e.data&&(this.data=e.data),e.stream&&(this.stream=e.stream),this.autoRestart={}},V=function(){var e=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\"];this.a=1,this.b=0,this.c=7,this.d=0,this.update=function(e,t,i){var a=0;for(null==t&&(t=0),null==i&&(i=e.length);a<i;a+=1)this.a=(this.a+e[t+a])%65521,this.b=(this.b+this.a)%65521,this.c=(this.c+3)*(e[t+a]+5)%65521,this.d=(this.d+this.c)%65521},this.digest=function(t){return e[this.d>>12&15]+e[this.d>>8&15]+e[this.d>>4&15]+e[15&this.d]+e[this.c>>12&15]+e[this.c>>8&15]+e[this.c>>4&15]+e[15&this.c]+e[this.b>>12&15]+e[this.b>>8&15]+e[this.b>>4&15]+e[15&this.b]+e[this.a>>12&15]+e[this.a>>8&15]+e[this.a>>4&15]+e[15&this.a]}};function F(e,t){return null==t&&(t={}),\"checksum64\"===e?new V:null}function j(e){return j=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},j(e)}var B=a.Y.get(\"WebRTC_Client\"),G=apiCC.myWebRTC_Event,q=4e4,H=function(e){function t(e,t,i){var a,n=e.width,r=n<<2,o=e.height,s=null,l=0,d=0,c=0,u=0,h=0,p=0,g=0,m=0,C=0,f=0,v=0,b=0,S=0,y=0,I=0,T=0;if(t){for(s=t.data,i<0&&(i=0),m=1-((h=(2.44413*(l=i>=2.5?.98711*i-.9633:i>=.5?3.97156-4.14554*Math.sqrt(1-.26891*i):2*i*(3.97156-4.14554*Math.sqrt(.865545)))+2.85619*(d=l*l)+1.26661*(c=d*l))/(u=1.57825+2.44413*l+1.4281*d+.422205*c))+(p=-(1.4281*d+1.26661*c)/u)+(g=.422205*c/u)),a=0;a<3;a++)for(C=0;C<o;C++){for(v=C*r+(n-1<<2)+a,I=y=S=b=s[f=C*r+a],f=C*r+a;f<=v;f+=4)b=m*s[f]+h*S+p*y+g*I,s[f]=b,I=y,y=S,S=b;for(v=C*r+a,I=y=S=b=s[f=C*r+(n-1<<2)+a],f=C*r+(n-1<<2)+a;f>=v;f-=4)b=m*s[f]+h*S+p*y+g*I,s[f]=b,I=y,y=S,S=b}for(a=0;a<3;a++)for(T=0;T<n;T++){for(v=(o-1)*r+(T<<2)+a,I=y=S=b=s[f=(T<<2)+a],f=(T<<2)+a;f<=v;f+=r)b=m*s[f]+h*S+p*y+g*I,s[f]=b,I=y,y=S,S=b;for(v=(T<<2)+a,I=y=S=b=s[f=(o-1)*r+(T<<2)+a],f=(o-1)*r+(T<<2)+a;f>=v;f-=r)b=m*s[f]+h*S+p*y+g*I,s[f]=b,I=y,y=S,S=b}return t}}this.localVideo=null,this.miniVideo=null,this.remoteVideo=null,this.localStream=null,this.statusDiv=null,this.commandDiv=null,this.remoteStream=null,this.channelReady=!1,this.socket=e.channel.socket,this.clientId=e.apiCCId,this.compositeClientId=e.apiCCId+\"@\"+e.apiCCSessionId,this.apiKey=e.apiKey,this.isVideoMuted=!1,this.isAudioMuted=!1,this.callURLDestRoom=0,this.callControlTable=[],this.userMediaTable=[],this.callsTable=[],this.callsRetriesTable={},this.restartCallDelay=1e3,this.maxCallsRetriesDuration=15e4,this.accessToLocalMedia=!1,this.unidirectionelCallOnly=!1,this.NtoNConf=!1,this.autoAnswer=!1,this.RTPMedia=!1,this.logoAdded=!1,this.preferOpusCodec=!1,this.preferVP9Codec=!1,\"undefined\"!=typeof apiRTC_React&&\"iOS\"===n.BF?(B.log(\"React and iOS : Setting H264 as preferred codec\"),this.preferH264Codec=!0):this.preferH264Codec=!1,this.preferSendingH264Codec=!1,this.setStereo=!1,this.allowedAudioCodecs=\"\",this.allowedVideoCodecs=\"\",this.mediaRoutingModeEnum={hostOnly:1,stun:2,stunOnly:3,turn:4,turnOnly:5},this.mediaRoutingMode=this.mediaRoutingModeEnum.turn,this.myWebRTC_Event=apiCC.myWebRTC_Event,this.getUserMediaOnGoing=!1,this.userAcceptOnIncomingCall=!1,this.userAcceptOnIncomingCallBeforeGetUserMedia=!1,this.userAcceptOnIncomingDataCall=!1,this.userAcceptOnIncomingScreenSharingCall=!1,this.maxWidthRemoteVideo=0,this.maxHeightRemoteVideo=0,this.nickname=e.nickname,this.hideLocalVideoOnCall=!0,this.allowMultipleCalls=!1,this.mySDPManager=new h,this.MCUClient=new _(this,this.clientId),this.audioSourceId=null,this.audioOutputId=null,this.videoSourceId=null,this.facingMode=null,this.apiRTCExtensionInstalled=!1,this.trickleIce=!0,this.waitingShareScreenCallId=0,this.waitingShareScreenDestNumber=0,this.waitingCaptureSourceType=null,this.qosEnable=!1,this.qosInterval=5e3,this.csmEnable=!1,this.qualityScoreEnable=!1,this.qualityScoreIntervalMs=5e3,this.csmIntervalMs=5e3,this.recordedCall=!1,this.audioBandwidth=null,this.videoBandwidth=null,this.videoRemoteBandwidth=null,this.videoBandwidthSettings={},this.dataBandwidth=null,this.pc_config=\"\",this.clientIncomingCandidatesQueue=[],this.cleanStoredCallCandidateTimer=6e4,this.initializeGumConfig=function(){\"Edge\"===n.Xh&&n.PR>=15?this.gum_config={audio:!0,video:!0}:\"Chrome\"===n.Xh&&n.PR<49||\"Firefox\"===n.Xh&&n.PR<50?this.gum_config={audio:{mandatory:{},optional:[]},video:{mandatory:{},optional:[]}}:this.gum_config={audio:{},video:{}}},this.initializeGumConfig(),this.setGumConfigWithDevicePresent=function(){!1===apiCC.mediaDeviceMgr.audioDevicePresent&&(this.gum_config.audio=!1),!1===apiCC.mediaDeviceMgr.videoDevicePresent&&(this.gum_config.video=!1),!1===apiCC.mediaDeviceMgr.audioDevicePresent&&!1===apiCC.mediaDeviceMgr.videoDevicePresent&&(this.unidirectionelCallOnly=!0),B.log(\"this.gum_config:\",this.gum_config)},this.userMediaErrorDetected=!1,this.lastUsedUserMediaConstraint=null,this.mediaTypeForIncomingCall=\"VIDEO\",this.mediaTypeForOutgoingCall=\"VIDEO\",this.allowAsymetricMediaCalls=!1,this.receiveMediaDeactivated=!1,this.configTurnServer=null,apiCC.myWebRTC_Adapter.adaptForIoSCordova(),this.pc_config={iceServers:[{urls:[\"turns:mp1.apizee.com:443?transport=udp\",\"turns:mp1.apizee.com:443?transport=tcp\",\"turn:mp1.apizee.com:443?transport=udp\",\"turn:mp1.apizee.com:443?transport=tcp\",\"turns:mp2.apizee.com:443?transport=udp\",\"turns:mp2.apizee.com:443?transport=tcp\",\"turn:mp2.apizee.com:443?transport=udp\",\"turn:mp2.apizee.com:443?transport=tcp\"],credential:\"password\",username:\"anonymous\"}]},\"Firefox\"===n.Xh&&n.PR<53?(B.log(\"createPeerConnection FIREFOX\"),B.log(\"webrtcDetectedVersion : \"+apiCC.myWebRTC_Adapter.webrtcDetectedVersion),n.PR<38?this.pc_config={iceServers:[{url:\"stun:mp1.apizee.com:443\",credential:\"password\",username:\"anonymous\"},{url:\"turn:mp1.apizee.com:443\",credential:\"password\",username:\"anonymous\"}]}:n.PR>=42?this.pc_config={iceServers:[{urls:[\"turn:mp1.apizee.com:443?transport=udp\",\"turn:mp1.apizee.com:443?transport=tcp\"],credential:\"password\",username:\"anonymous\"}]}:this.pc_config={iceServers:[{urls:\"turn:mp1.apizee.com:443?transport=tcp\",credential:\"password\",username:\"anonymous\"},{url:\"turn:mp1.apizee.com:443?transport=tcp\",credential:\"password\",username:\"anonymous\"}]}):\"IE\"===n.Xh||\"Safari\"===n.Xh&&n.PR<11?(B.log(\"Browser is :\"+n.Xh+\" - using Plugin\"),this.pc_config={iceServers:[{url:\"stun:mp1.apizee.com:443\",credential:\"password\",username:\"anonymous\"},{url:\"turn:mp1.apizee.com:443\",credential:\"password\",username:\"anonymous\"}]}):\"Edge\"===n.Xh&&n.PR<45?(B.log(\"Browser is Edge - removing Turns config\"),this.pc_config={iceServers:[{urls:[\"turn:mp1.apizee.com:443?transport=udp\",\"turn:mp1.apizee.com:443?transport=tcp\",\"turn:mp2.apizee.com:443?transport=udp\",\"turn:mp2.apizee.com:443?transport=tcp\"],credential:\"password\",username:\"anonymous\"}]}):B.log(\"default this.pc_config configuration\"),this.pc_constraints={optional:[]},\"edge\"===r.wL.type?B.debug(\"not data channel capable\"):\"safari\"===r.wL.type?r.wL.version>=11?this.dataChannelCapable=!0:B.debug(\"not data channel capable\"):this.dataChannelCapable=!0,\"chrome\"===r.wL.type&&r.wL.version>=68||\"firefox\"===r.wL.type&&r.wL.version>=64||\"safari\"===r.wL.type&&r.wL.version>=12?(B.debug(\"RTCRtpSender#setParameters is available\"),this.rtpSenderSetParamatersCapable=!0):(B.debug(\"RTCRtpSender#setParameters is NOT available\"),this.rtpSenderSetParamatersCapable=!1),this.initialize=function(e,t,i,a,n){this.localVideo=document.getElementById(e),null===this.localVideo&&B.log(\"localVideo Div Name is not correct : INCORRECT_DIV_NAME_LOCALVIDEO\"),this.miniVideo=document.getElementById(t),null===this.miniVideo&&B.log(\"miniVideo Div Name is not correct : INCORRECT_DIV_NAME_MINIVIDEO\"),this.remoteVideo=document.getElementById(i),null===this.remoteVideo&&B.log(\"remoteVideo Div Name is not correct : INCORRECT_DIV_NAME_REMOTEVIDEO\"),this.statusDiv=document.getElementById(a),null===this.statusDiv&&B.log(\"status Div Name is not correct : INCORRECT_DIV_NAME_STATUS\"),this.commandDiv=document.getElementById(n),null===this.commandDiv?B.log(\"command Div Name is not correct : INCORRECT_DIV_NAME_COMMAND\"):(B.log(\"Command buttons are managed by ApiRTC\"),this.displayCallButtonInCommand()),0!==this.callURLDestRoom&&(B.log(\"callURLDestRoom is not null\"),this.callperURL(this.callURLDestRoom),this.callURLDestRoom=0),this.initMediaElementState(),this.setStatus(\"<div>Your phone is registered, you can be reached at this number : \"+this.clientId+\"</div>\")},this.setClientTurnServer=function(e){B.info(\"setClientTurnServer :\",e);var t=JSON.stringify(this.pc_config);t=t.replace(/mp1.apizee.com/g,e),this.pc_config=JSON.parse(t)},this.activateScreenSharing=function(e){apiCC.activateScreenSharing(e)},this.setGetUserMediaConfig=function(e){if(B.log(\"setGetUserMediaConfig :\",e),null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices.getSupportedConstraints&&void 0!==navigator.mediaDevices.getSupportedConstraints){var t=navigator.mediaDevices.getSupportedConstraints();B.log(\"Supported Constraints :\",t)}void 0!==e.video&&(void 0===e.video.height&&void 0===e.video.width||void 0!==e.optional&&(B.warn(\"contraints with both optional/mandatory and specific or advanced constraints usage : this may failed depending of browsers\"),B.log(\"setGetUserMediaConfig : contraints modification to avoid both optional/mandatory and specific or advanced constraints usage\"),void 0!==e.optional.sourceId&&(B.log(\"sourceId contraints modification to deviceId\"),void 0===e.video.deviceId&&(e.video.deviceId={}),e.video.deviceId.ideal=e.optional.sourceId),delete e.optional)),B.log(\"this.gum_config :\",this.gum_config),this.gum_config=e},this.getUserMedia=function(){try{this.gum_config=apiCC.setAudioSourceIdInConstraint(this.audioSourceId,this.gum_config),this.gum_config=apiCC.setVideoSourceIdInConstraint(this.videoSourceId,this.gum_config),this.lastUsedUserMediaConstraint=this.gum_config,\"IE\"===n.Xh&&n.dc>8?apiCC.getUserMediaWithCB(this.gum_config,this.callback(this,\"onUserMediaSuccess\"),this.callback(this,\"onUserMediaError\")):apiCC.getUserMedia(this.gum_config).then(this.callback(this,\"onUserMediaSuccess\")).catch(this.callback(this,\"onUserMediaError\"))}catch(e){B.error(\"getUserMedia() failed. Is this a WebRTC capable browser?\"),B.log(\"getUserMedia failed with exception: \"+e.message)}},this.onUserMediaSuccess=function(e){B.info(\"onUserMediaSuccess : User has granted access to local media.\"),this.accessToLocalMedia=!0;var t=!1,i=\"Unknown\",a=!1,n=\"Unknown\";this.miniVideo&&apiCC.attachMediaStream(this.miniVideo,e),this.localVideo&&(apiCC.attachMediaStream(this.localVideo,e),this.localVideo.style.opacity=1),this.localStream=e,e.getAudioTracks().length>0&&(t=!0,e.getAudioTracks()[0].label&&(i=e.getAudioTracks()[0].label),B.log(\"Using audio device: \"+i)),e.getVideoTracks().length>0&&(a=!0,e.getVideoTracks()[0].label&&(n=e.getVideoTracks()[0].label),B.log(\"Using video device: \"+n)),this.myWebRTC_Event.createUserMediaSuccessEvent(!1,t,i,a,n,\"media\",null,e,null,!1)},this.onUserMediaError=function(e){B.info(\"onUserMediaError : Failed to get access to local media. Error : \",e),B.error(e),this.accessToLocalMedia=!1,\"electron\"!==n.$6&&\"Chrome\"===n.Xh&&n.PR>47&&(B.log(\"browser_version > 47\"),\"https:\"!==window.location.protocol&&B.error(\"HTTPS is now mandatory to use getUserMedia()\")),this.myWebRTC_Event.createUserMediaErrorEvent(!1,\"media\",e,null,null,null,this.gum_config),e=null,!0===apiCC.session.tryAudioCallAfterUserMediaError?(B.log(\"this.lastUsedUserMediaConstraint :\",this.lastUsedUserMediaConstraint),B.log(\"this.lastUsedUserMediaConstraint.video :\",this.lastUsedUserMediaConstraint.video),!1!==this.lastUsedUserMediaConstraint.video?(B.log(\"this.lastUsedUserMediaConstraint.audio :\",this.lastUsedUserMediaConstraint.audio),B.log(\"UserMediaError, Trying to getUserMedia with audioOnly\"),this.videoSourceId=null,this.gum_config.video=!1,this.getUserMedia()):B.log(\"onUserMediaError without video\")):B.log(\"try AudioCall after UserMediaError is not activated\")},this.evalCallProfileWithSdp=function(e,t,i){return this.evalCallProfileWithSdpGuideline(this.mySDPManager.createGuideline(e),e,t,i)},this.evalCallProfileWithSdpGuideline=function(e,t,i,a){var n={};return e.hasOwnProperty(\"audio\")?(n.audio=!0,n.audioActive=\"local\"===i&&\"send\"===a?\"sendrecv\"===e.audio.direction||\"sendonly\"===e.audio.direction:\"local\"===i&&\"receive\"===a||\"remote\"===i&&\"send\"===a?\"sendrecv\"===e.audio.direction||\"recvonly\"===e.audio.direction:\"remote\"===i&&\"receive\"===a&&(\"sendrecv\"===e.audio.direction||\"sendonly\"===e.audio.direction)):(n.audio=!1,n.audioActive=!1),e.hasOwnProperty(\"video\")?(n.video=!0,n.videoActive=\"local\"===i&&\"send\"===a?\"sendrecv\"===e.video.direction||\"sendonly\"===e.video.direction:\"local\"===i&&\"receive\"===a||\"remote\"===i&&\"send\"===a?\"sendrecv\"===e.video.direction||\"recvonly\"===e.video.direction:\"remote\"===i&&\"receive\"===a&&(\"sendrecv\"===e.video.direction||\"sendonly\"===e.video.direction)):(n.video=!1,n.videoActive=!1),n},this.checkDestCallTypeWithSDP=function(e,t){B.debug(\"checkDestCallTypeWithSDP\");var i=this.mySDPManager.createGuideline(e),a=!1,n=!1;!i.audio||\"sendrecv\"!==i.audio.direction&&\"sendonly\"!==i.audio.direction||(a=!0),!i.video||\"sendrecv\"!==i.video.direction&&\"sendonly\"!==i.video.direction||(n=!0),t.destCallType=!0===a?!0===n?\"media\":\"audio\":!0===n?\"videoOnly\":\"inactive\",B.debug(\"call.destCallType: \"+t.destCallType),!0!==t.callee||i.audio&&\"sendonly\"!==i.audio.direction||i.video&&\"sendonly\"!==i.video.direction||(t.userMediaAccessRequired=!1,t.mediaTypeForOutgoingCall=\"NONE\",B.debug(\"access to user media not required\"))},this.evaluateVideoCap=function(e){delete e.videoCap,e.belongsToRoom()?\"publish\"!==e.settingUpType&&\"shareScreen\"!==e.settingUpType||e.localCallProfile&&e.localCallProfile.video&&e.localCallProfile.videoActive&&this.evalOutgoingVideoBandwithCap(e):(this.rtpSenderSetParamatersCapable||!e.callee)&&e.localCallProfile&&e.localCallProfile.video&&e.localCallProfile.videoActive&&this.evalOutgoingVideoBandwithCap(e)},this.processInvite=function(e){B.info(\"processInvite() - invite received from :\"+e.callerId);var t,i=0,a=null,s=null,l=null,d=null,c=!1,u=null,h=null,p=null,g={};if(void 0!==e.data&&\"publish\"===e.data.type&&void 0!==e.data.mesh){if(B.info(\"received invite publish mesh; mesh: \"+JSON.stringify(e.data.mesh)),null==(a=this.findCallWithCallIdAndInstanceId(e.data.mesh.callerCallId,e.data.instanceId)))return void B.error(\"cannot find call; callId: \"+e.data.mesh.callerCallId);a.userMediaAccessRequired=!1,a.data.mesh=e.data.mesh,a.setupTimeoutId&&(clearTimeout(a.setupTimeoutId),delete a.setupTimeoutId),c=!0}else{if(void 0!==e.data&&\"subscribe\"===e.data.type&&void 0!==e.data.mesh){if(B.debug(\"received invite subscribe mesh; mesh: \",e.data.mesh),null!==(s=this.findUserMediaById(e.data.mesh.calleeCallId)))if(this.MCUClient.distantCalls.push({early:!0,roomId:e.roomId,clientId:e.data.mesh.callerId,callId:e.data.mesh.callerCallId,callMode:\"mesh\",callDirection:\"recvonly\",callFeed:{clientId:e.data.mesh.calleeId,callId:e.data.mesh.calleeCallId}}),setTimeout(function(e,t,i){B.debug(\"early distant call descriptor timeout\");for(var a=this.MCUClient.distantCalls.length;--a>=0;)if(this.MCUClient.distantCalls[a].early&&this.MCUClient.distantCalls[a].roomId===e&&this.MCUClient.distantCalls[a].clientId===t&&this.MCUClient.distantCalls[a].callId===i){B.debug(\"remove early distant call descriptor: timeout\"),this.MCUClient.distantCalls.splice(a,1);break}}.bind(this,e.roomId,e.data.callerId,e.data.callerCallId),3e4),\"screenSharing\"===s.callType||\"screenSharingWithAudio\"===s.callType)g.type=\"publish\",g.mesh=e.data.mesh,g.instanceId=e.data.instanceId,this.MCUClient.publishScreen(e.roomId,g,null,s.captureSourceType);else{var m=(0,r.ws)({},s.callConfiguration);\"AUDIOONLY\"===e.data.mediaType?m.audioOnly=!0:\"VIDEOONLY\"===e.data.mediaType&&(m.videoOnly=!0),(l=apiCC.getUserMediaStream(m.userMediaStreamId))&&(l.audioMuted&&l.videoMuted?m.muted=\"VIDEO\":l.audioMuted?m.muted=\"AUDIOONLY\":l.videoMuted?m.muted=\"VIDEOONLY\":delete m.muted),delete m.distributedBroadcastEnabled,delete m.simulcast,g.type=\"publish\",g.mesh=e.data.mesh,g.instanceId=e.data.instanceId,this.MCUClient.publish(e.roomId,null,null,m,g,null)}else B.debug(\"media not found: sending bye : Call_not_found\"),new o.S(apiCC.session.channel.socket).sendBye(e.callId,e.calleeId,e.roomId,e.callerId,\"Call_not_found\",e.data);return}if(void 0!==e.data&&\"publish\"===e.data.type&&\"passive\"===e.data.mode){if(null==(a=this.findCallWithCallIdAndRemoteIdAndInstanceId(e.callId,e.callerId,e.data.instanceId)))return void B.debug(\"cannot find call; callId: \"+e.callId+\", callerId: \"+e.callerId+\", instanceId: \"+e.data.instanceId);a.userMediaAccessRequired=!1,a.setupTimeoutId&&(clearTimeout(a.setupTimeoutId),delete a.setupTimeoutId),c=!0}else(a=new R(this)).callId=e.callId,a.instanceId=e.data.instanceId,a.callerId=e.callerId,a.calleeId=this.clientId,a.callee=!0,a.remoteId=e.callerId}if(a.dest_roomId=e.roomId,void 0!==a.data&&!0===c)for(p in e.data)e.data.hasOwnProperty(p)&&(a.data[p]=e.data[p]);else a.data=e.data;if(a.data.instanceId=a.instanceId,void 0!==e.data&&\"sipConnector\"===e.data.pubSub&&(a.trickleIce=!1,a.remoteType=\"sip\"),a.checkDTLSCompliancy(),\"Edge\"===n.Xh&&(u=apiCC.session.getConnectedUserInfo(e.callerId,\"userData\"),B.log(\"destUserInfo :\",u),\"User_Not_Found\"!==u&&void 0!==u&&\"Chrome\"===(h=JSON.parse(u)).browser&&\"Android\"===h.osName&&(B.log(\"Browser is Edge and caller is Chrome on Android, setting VP8 as prefered codec for the call\"),a.preferVP8Codec=!0)),void 0!==e.data&&\"publish\"===e.data.type&&\"passive\"===e.data.mode&&void 0!==e.stream&&void 0!==e.stream.id&&(a.streamId=e.stream.id,B.log(\"call.streamId: \"+a.streamId)),i=this.callsTable.length,B.log(\"processInvite() - Actual call Number is :\"+i),\"screenSharing\"===e.callType||\"screenSharingWithAudio\"===e.callType)a.screenSharing=!0,a.callType=e.callType;else if(\"data\"===e.callType);else if(!1===this.allowMultipleCalls){for(B.log(\"processInvite() - Refusing double call checking ...\"),t=0;t<i;t+=1)if(\"screenSharing\"!==this.callsTable[t].callType&&\"screenSharingWithAudio\"!==this.callsTable[t].callType&&\"data\"!==this.callsTable[t].callType)return B.log(\"processInvite() - Refusing double call\"),!1===c?this.callsTable.push(a):B.log(\"callAlreadyExist in table\"),this.myWebRTC_Event.createCallAttemptEvent(this.clientId,e.callerId,e.callerNickname,a.callId),void this.refuseCall(a.callId,\"User_Busy\");B.log(\"NOT Refusing double call\")}!1===c?(i=this.callsTable.push(a),B.log(\"processInvite() - New call Number is :\"+i)):(B.log(\"callAlreadyExist in table\"),B.log(\"processInvite() - call Number is :\"+i)),this.checkDestCallTypeWithSDP(e.sdpoffer.sdp,a);var C=this.mySDPManager.createGuideline(e.sdpoffer.sdp);if(a.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(C,e.sdpoffer.sdp,\"remote\",\"send\")),a.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(C,e.sdpoffer.sdp,\"remote\",\"receive\")),this.rtpSenderSetParamatersCapable||(this.evaluateVideoCap(a),a.videoCap&&(C.video.bandwidth=a.videoCap,e.sdpoffer.sdp=C.generate())),a.receivedSdpOfferMessage=e.sdpoffer,(0,r.ki)(e,\"stream\",\"object\")&&(!0===e.stream.audioMuted&&(a.isRemoteAudioMuted=!0),!0===e.stream.videoMuted&&(a.isRemoteVideoMuted=!0)),!0===this.autoAnswer&&this.displayHangUpButtonInCommand(),\"data\"===e.callType){if(B.log(\"Receiving DATA call\"),a.callType=\"data\",a.dataCall=!0,\"Edge\"===n.Xh&&n.PR<79)return B.warn(\"Cannot create DataChannel as it is not supported on Edge\"),void this.refuseCall(a.callId,\"DataChannel_Not_Supported\");this.setStatus(\"Incoming data Call from ongoing :\"+e.callerId),this.userAcceptOnIncomingDataCall||a.onUserMediaSuccessTestUni(),this.myWebRTC_Event.createIncomingCallEvent(this.clientId,e.callerId,e.callerNickname,a.callId,!1,i,!1,e.callType,!1,a.remoteType,a.destCallType)}else!1===a.userMediaAccessRequired||this.unidirectionelCallOnly||!0===a.screenSharing?(B.log(\"call.userMediaAccessRequired :\",a.userMediaAccessRequired),B.log(\"this.unidirectionelCallOnly :\",this.unidirectionelCallOnly),B.log(\"call.screenSharing :\",a.screenSharing),this.unidirectionelCallOnly&&this.setStatus(\"You are connected to \"+e.callerId+', your audio and video media are not transmitted. <input type=\"button\" id=\"AddMedia\" value=\"Activate Audio & Video\" onclick=\"apiCC.session.apiCCWebRTCClient.addMedia('+a.callId+')\" />'),!0===a.screenSharing?!1===this.userAcceptOnIncomingScreenSharingCall?(this.setStatus(\"Screensharing session activated, accepting unidirectionnel call\"),a.onUserMediaSuccessTestUni()):B.debug(\"userAcceptOnIncomingScreenSharingCall is activated : need user accept\"):!0===c?(B.log(\"processInvite() - callAlreadyExist\"),a.onUserMediaSuccessTestUni()):!0===this.userAcceptOnIncomingCall||!0===this.userAcceptOnIncomingCallBeforeGetUserMedia?B.log(\"processInvite() - Waiting for call accept or refuse from user - 1\"):(B.log(\"processInvite() - userAcceptOnIncomingCall is not activated\"),a.onUserMediaSuccessTestUni()),void 0!==e.data&&!0===e.data.subscribeOrder||!1!==c||this.myWebRTC_Event.createIncomingCallEvent(this.clientId,e.callerId,e.callerNickname,a.callId,!1,i,!1,e.callType,!1,a.remoteType,a.destCallType)):(apiCC.userMediaStreamTable.length>0&&(d=apiCC.userMediaStreamTable[0].userMediaStreamId),!0!==this.accessToLocalMedia&&!d||!0!==this.autoAnswer?(this.setStatus(\"Incoming Call from :\"+e.callerId+'. Click on \"Autoriser\" button to accept.'),!0===a.audioOnly&&!1===apiCC.mediaDeviceMgr.audioDevicePresent?(B.log(\"processInvite() - audio and video media are not transmitted\"),this.setStatus(\"You are connected to \"+e.callerId+', your audio and video media are not transmitted. <input type=\"button\" id=\"AddMedia\" value=\"Activate Audio & Video\" onclick=\"apiCC.session.apiCCWebRTCClient.addMedia('+a.callId+')\" />'),a.onUserMediaSuccessTestUni()):!0===this.userAcceptOnIncomingCallBeforeGetUserMedia?B.log(\"Stand-by :: wait for getUserMediaOnCall && establishCall\"):(B.debug(\"processInvite() - call.getUserMediaOnCall()\"),B.log(\"processInvite() - this.autoAnswer :\"+this.autoAnswer),a.getUserMediaOnCall()),!1===c&&this.myWebRTC_Event.createIncomingCallEvent(this.clientId,e.callerId,e.callerNickname,a.callId,!1,i,a.audioOnly,e.callType,!1,a.remoteType,a.destCallType)):(this.setStatus(\"You are connected to :\"+e.callerId),B.log(\"processInvite() :: User has already granted access to local media and AutoAnswer activated : establishing call\"),!0===this.userAcceptOnIncomingCall||!0===this.userAcceptOnIncomingCallBeforeGetUserMedia?B.log(\"processInvite() - Waiting for call accept or refuse from user - 2\"):d?(B.log(\"using First available stream on apiRTC\"),(l=apiCC.getUserMediaStream(d)).addCallInfo(a.callId),void 0!==a.callConfiguration&&null!==a.callConfiguration||(a.callConfiguration={}),a.callConfiguration.userMediaStreamId=l.userMediaStreamId,a.onUserMediaSuccessOnCall(l.stream)):a.establishCall(),!1===c&&this.myWebRTC_Event.createIncomingCallEvent(this.clientId,e.callerId,e.callerNickname,a.callId,!0,i,a.audioOnly,e.callType,!1,a.remoteType,a.destCallType)))},this.setRemoteDescriptionProcess=function(e,t){this.preferSendingH264Codec&&(B.log(\"Modification of SDP to set H264 as prefered sending codec\"),t.sdp=this.mySDPManager.maybePreferCodec(t.sdp,\"video\",\"H264\")),\"Chrome\"===n.Xh&&n.PR<55||\"Firefox\"===n.Xh&&n.PR<50||\"IE\"===n.Xh||\"undefined\"!=typeof apiRTC_React?null!==e.pc?e.pc.setRemoteDescription(t,e.callback(e,\"onSetRemoteDescriptionSuccess\"),e.callback(e,\"onSetRemoteDescriptionFailure\")):B.debug(\"setRemoteDescriptionProcess - pc is null\"):(B.log(\"before setRemoteDescription - Promise version\"),null!==e.pc?e.pc.setRemoteDescription(t).then(e.callback(e,\"onSetRemoteDescriptionSuccess\")).catch(e.callback(e,\"onSetRemoteDescriptionFailure\")):B.debug(\"setRemoteDescriptionProcess - pc is null\"))},this.process200OK=function(e){var t,i=null,a=null;if(void 0!==e.data&&void 0!==e.data.instanceId?(B.info(\"200OK received from callId :\"+e.calleeId+\", intanceId is :\"+e.data.instanceId),i=this.findCallWithCallIdAndRemoteIdAndInstanceId(e.callId,e.calleeId,e.data.instanceId)):(B.info(\"200OK received from callId :\"+e.calleeId),i=this.findCallWithCallIdAndRemoteId(e.callId,e.calleeId)),null===i)return B.warn(\"200OK received but callId and instanceId are not matching, no process\"),void this.myWebRTC_Event.createErrorEvent(\"200OK received but callId is not matching, no process\",\"NOT_MATCHING_CALLID_ON_200OK\");i.calleeId=e.calleeId,e.sdpanswer&&\"no-answer\"!==e.sdpanswer.type?!1===i.message200OKReceived?(B.debug(\"first 200OK for the call\"),i.message200OKReceived=!0,\"subscribe\"!==i.data.type&&this.checkDestCallTypeWithSDP(e.sdpanswer.sdp,i),t=this.mySDPManager.createGuideline(e.sdpanswer.sdp),i.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(t,e.sdpanswer.sdp,\"remote\",\"send\")),i.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(t,e.sdpanswer.sdp,\"remote\",\"receive\")),this.evaluateVideoCap(i),!this.rtpSenderSetParamatersCapable&&i.videoCap&&(t.video.bandwidth=i.videoCap,e.sdpanswer.sdp=t.generate()),i.receivedSdpOfferMessage=e.sdpanswer,B.log(\"process200OK : before setRemoteDescription\"),a=new apiCC.myWebRTC_Adapter.RTCSessionDescription(e.sdpanswer),this.videoRemoteBandwidth&&(B.log(\"Modification of SDP to set remote video bandwidth\"),a.sdp=this.mySDPManager.setVideoBandwidth(a.sdp,this.videoRemoteBandwidth)),this.setRemoteDescriptionProcess(i,a),this.setStatus(\"You are connected to :\"+e.calleeId),null!==e.data&&void 0!==e.data&&(null!==i.data&&void 0!==i.data?i.data=(0,r.S6)(i.data,e.data):i.data=e.data)):B.debug(\"200OK has already been received for this call, leaving process200OK\"):G.createCallEstablishedEvent(i.calleeId,i.callType,i.callId,i.destCallType)},this.cleanStoredCallCandidate=function(e,t){B.debug(\"cleanStoredCallCandidate from callId :\"+e+\", instanceId is :\"+t),void 0!==this.clientIncomingCandidatesQueue[e+\"-\"+t]&&0!==this.clientIncomingCandidatesQueue[e+\"-\"+t].length&&(this.clientIncomingCandidatesQueue[e+\"-\"+t].splice(0,this.clientIncomingCandidatesQueue[e+\"-\"+t].length),delete this.clientIncomingCandidatesQueue[e+\"-\"+t])},this.processCandidate=function(e){var t=null,i=e.data&&e.data.instanceId?e.data.instanceId:null;B.debug(\"Candidate received from callId :\"+e.callId+\", instanceId is :\"+i),t=e.callerId===this.clientId?i?this.findCallWithCallIdAndRemoteIdAndInstanceId(e.callId,e.calleeId,i):this.findCallWithCallIdAndRemoteId(e.callId,e.calleeId):i?this.findCallWithCallIdAndRemoteIdAndInstanceId(e.callId,e.callerId,i):this.findCallWithCallIdAndRemoteId(e.callId,e.callerId),B.trace(\"msg.label :\"+e.label),B.log(\"msg.candidate :\"+e.candidate),null!==t?t.started&&t.remoteDescriptionSetted?t.processCandidateMsg(e):(B.log(\"Call not started or remoteDescription is not yet setted\"),t.incomingcandidatesQueue.push(e)):i&&(B.debug(\"Call not found, Candidate message is not handled, storing candidate message in client\"),null!==this.clientIncomingCandidatesQueue[e.callId+\"-\"+i]&&void 0!==this.clientIncomingCandidatesQueue[e.callId+\"-\"+i]||(this.clientIncomingCandidatesQueue[e.callId+\"-\"+i]=[],B.debug(\"First candidate for this call, starting a timeout before candidate storage cleaning\"),setTimeout(this.cleanStoredCallCandidate.bind(this),this.cleanStoredCallCandidateTimer,e.callId,i)),this.clientIncomingCandidatesQueue[e.callId+\"-\"+i].push(e))},this.processUpdate=function(e){B.info(\"Update message on:\"+e.roomId);var t,i=null;if(null!==(i=e.callerId===this.clientId?this.findCallWithCallIdAndRemoteIdAndInstanceId(e.callId,e.calleeId,e.data.instanceId):this.findCallWithCallIdAndRemoteIdAndInstanceId(e.callId,e.callerId,e.data.instanceId)))if(e.hasOwnProperty(\"sdpoffer\")&&e.sdpoffer.hasOwnProperty(\"sdp\"))i.setRemoteCallProfile(this.evalCallProfileWithSdp(e.sdpoffer.sdp,\"remote\",\"receive\"),!0),i.updateOngoingTimeoutId=setTimeout((function(){delete i.updateOngoingTimeoutId}),q),this.checkDestCallTypeWithSDP(e.sdpoffer.sdp,i),B.log(\"processUpdate : before setRemoteDescription\"),t=new apiCC.myWebRTC_Adapter.RTCSessionDescription(e.sdpoffer),this.setRemoteDescriptionProcess(i,t),i.doUpdateAnswer();else if((0,r.ki)(e.data,\"mesh\",\"object\")&&(e.data.mesh.calleeCompositeUserId?e.data.mesh.calleeCompositeUserId===this.compositeClientId:e.data.mesh.calleeId===this.clientId)){B.debug(\"mesh update from subscriber\");var a={};\"AUDIOONLY\"===e.data.mediaType?a.audioOnly=!0:\"VIDEOONLY\"===e.data.mediaType&&(a.videoOnly=!0),this.updateCallConfigurationOnCall(e.callId,a).then((function(){B.debug(\"updateCallConfigurationOnCall OK\")})).catch((function(e){B.error(\"updateCallConfigurationOnCall failed\",e)}))}else B.error(\"update without SDP offer\");else this.myWebRTC_Event.createErrorEvent(\"Cannot find call to process Update\",\"CALL_NOT_FOUND_ON_UPDATE\")},this.process200Update=function(e){B.info(\"200 Update received from :\"+e.calleeId),this.setStatus(\"You are connected to :\"+e.calleeId);var t,i=null,a=null;if(null===(i=e.callerId===this.clientId?this.findCallWithCallIdAndRemoteIdAndInstanceId(e.callId,e.calleeId,e.data.instanceId):this.findCallWithCallIdAndRemoteIdAndInstanceId(e.callId,e.callerId,e.data.instanceId)))return B.info(\"Call not found on 200 Update\"),void this.myWebRTC_Event.createErrorEvent(\"Cannot find call to process 200 Update\",\"CALL_NOT_FOUND_ON_200UPDATE\");i.calleeId=e.calleeId,t=this.mySDPManager.createGuideline(e.sdpanswer.sdp),i.setLocalCallProfile(this.evalCallProfileWithSdpGuideline(t,e.sdpanswer.sdp,\"remote\",\"send\"),!0),i.setRemoteCallProfile(this.evalCallProfileWithSdpGuideline(t,e.sdpanswer.sdp,\"remote\",\"receive\"),!0),this.evaluateVideoCap(i),!this.rtpSenderSetParamatersCapable&&i.videoCap&&(t.video.bandwidth=i.videoCap,e.sdpanswer.sdp=t.generate()),B.log(\"process200Update : before setRemoteDescription\"),a=new apiCC.myWebRTC_Adapter.RTCSessionDescription(e.sdpanswer),this.videoBandwidth&&(B.log(\"Modification of SDP to set remote video bandwidth\"),a.sdp=this.mySDPManager.setVideoBandwidth(a.sdp,this.videoBandwidth)),this.setRemoteDescriptionProcess(i,a),B.log(\"msg.sdpanswer.sdp :\",e.sdpanswer.sdp),!0===i.addingUserMedia&&(B.log(\"adding localvideo in mini\"),this.miniVideo&&(this.miniVideo.style.opacity=1),i.addingUserMedia=!1),!0===i.updateUserMedia&&(i.updateUserMedia=!1),i.updateCause&&(i.updateCause=null)},this.processSlowLink=function(e,t){for(var i=this.callsTable.length,a=null;--i>=0;)if(this.callsTable[i].callId===e){a=this.callsTable[i];break}if(null!==a){var n=null;t&&t.advice&&(n=t.advice),this.myWebRTC_Event.createSlowLinkEvent(a.callId,n)}},this.processAudioAmplitude=function(e,t){G.createAudioAmplitudeEvent(e.descriptor.audioAmplitude,t,e.callId,e.descriptor.streamID)},this.processDistantIceError=function(e){\"disconnected\"===e.descriptor.iceState?this.myWebRTC_Event.createErrorEvent(\"distant iceDisconnection detected\",\"DISTANT_ICE_CONNECTION_STATE_DISCONNECTED\",null,e.roomId,null,e.descriptor):\"failed\"===e.descriptor.iceState&&G.createErrorEvent(\"distant iceConnection failed detected\",\"DISTANT_ICE_CONNECTION_STATE_FAILED\",null,e.roomId,null,e.descriptor)},this.processStreamTrackMuteChanged=function(e,t,i){for(var a=this.callsTable.length,n=null,r=[],o={},s={};--a>=0;)if(this.callsTable[a].callId===e){n=this.callsTable[a];break}if(null!==n){\"audio\"===t?(n.isRemoteAudioMuted=i,r.push(\"audioIsMuted\"),o.available=n.remoteCallProfile.audio,o.active=n.remoteCallProfile.audioActive,o.muted=n.isRemoteAudioMuted,o.silent=n.isRemoteAudioSilent,s.available=n.remoteCallProfile.video,s.active=n.remoteCallProfile.videoActive,s.muted=n.isRemoteVideoMuted,s.silent=n.isRemoteVideoSilent):\"video\"===t&&(n.isRemoteVideoMuted=i,r.push(\"videoIsMuted\"),o.available=n.remoteCallProfile.audio,o.active=n.remoteCallProfile.audioActive,o.muted=n.isRemoteAudioMuted,o.silent=n.isRemoteAudioSilent,s.available=n.remoteCallProfile.video,s.active=n.remoteCallProfile.videoActive,s.muted=n.isRemoteVideoMuted,s.silent=n.isRemoteVideoSilent);var l={eventType:\"muteUnmuteEvent\",muteType:\"applicatif\",source:\"remote\",mLine:t,callId:e};l.state=i?\"mute\":\"unmute\";var d=function(){B.debug(\"getCallIdAndUsername\");var e=\"\",t=\"\";apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.forEach((function(e){t=e.callId}));var i=apiCC.Session.getActiveSession();if(null!==i){var a=i.getUserAgent();null!=a&&(e=a.username)}var n={callId:t,username:e};return B.debug(\"getCallIdAndUsername result:\",n),n}();l.callId=d.callId,l.username=d.username,apiRTC.sendSentryEvent(l),r.length>0&&this.myWebRTC_Event.createRemoteStreamUpdatedEvent(r,o,s,n.destCallType,n.callId,\"userAction\")}},this.processStreamTrackStatusChanged=function(e,t,i){for(var a=this.callsTable.length,n=null,r=[],o={},s={};--a>=0;)if(this.callsTable[a].callId===e){n=this.callsTable[a];break}if(null!==n){\"audio\"===t?(n.isRemoteAudioSilent=i,r.push(\"audioIsSilent\"),o.available=n.remoteCallProfile.audio,o.active=n.remoteCallProfile.audioActive,o.muted=n.isRemoteAudioMuted,o.silent=n.isRemoteAudioSilent,s.available=n.remoteCallProfile.video,s.active=n.remoteCallProfile.videoActive,s.muted=n.isRemoteVideoMuted,s.silent=n.isRemoteVideoSilent):\"video\"===t&&(n.isRemoteVideoSilent=i,r.push(\"videoIsSilent\"),o.available=n.remoteCallProfile.audio,o.active=n.remoteCallProfile.audioActive,o.muted=n.isRemoteAudioMuted,o.silent=n.isRemoteAudioSilent,s.available=n.remoteCallProfile.video,s.active=n.remoteCallProfile.videoActive,s.muted=n.isRemoteVideoMuted,s.silent=n.isRemoteVideoSilent);var l={eventType:\"muteUnmuteEvent\",muteType:\"hardware\",source:\"remote\",mLine:t,callId:e};l.state=i?\"mute\":\"unmute\";var d=function(){B.debug(\"getCallIdAndUsername\");var e=\"\",t=\"\";apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.forEach((function(e){t=e.callId}));var i=apiCC.Session.getActiveSession();if(null!==i){var a=i.getUserAgent();null!=a&&(e=a.username)}var n={callId:t,username:e};return B.debug(\"getCallIdAndUsername result:\",n),n}();l.callId=d.callId,l.username=d.username,apiRTC.sendSentryEvent(l),r.length>0&&this.myWebRTC_Event.createRemoteStreamUpdatedEvent(r,o,s,n.destCallType,n.callId,\"userAction\")}},this.processUpdateStream=function(e,t,i){for(var a=this.callsTable.length,n=null;--a>=0;)if((0,r.ki)(this.callsTable[a].data,\"mesh\",\"object\")&&this.callsTable[a].data.mesh.calleeCallId===e||this.callsTable[a].callId===e){n=this.callsTable[a];break}if(!n)return!1;var o=!1;return\"audio\"===t?\"inactive\"===i?\"media\"===n.callType&&(n.callType=\"videoOnly\",n.updateUserMedia=!0,n.updateCause=\"adaptation\",n.audioSdpDirection=\"inactive\",n.establishCall(),o=!0):\"videoOnly\"===n.callType&&(n.callType=\"media\",n.updateUserMedia=!0,n.updateCause=\"adaptation\",n.audioSdpDirection=null,n.establishCall(),o=!0):\"video\"===t&&(\"inactive\"===i?\"media\"===n.callType&&(this.evalOutgoingVideoBandwithCap(n),n.callType=\"audio\",n.updateUserMedia=!0,n.updateCause=\"adaptation\",n.videoSdpDirection=\"inactive\",n.establishCall(),o=!0):\"audio\"===n.callType&&(this.evalOutgoingVideoBandwithCap(n),n.callType=\"media\",n.updateUserMedia=!0,n.updateCause=\"adaptation\",n.videoSdpDirection=null,n.establishCall(),o=!0)),o},this.processUpdateVideoQuality=function(e,t){B.debug(\"processUpdateVideoQuality\",e,t);var i=this.findCallWithCallId(e);if(i)if(i.sessionMCU&&\"mesh\"!==i.sessionMCU.roomMode){var a=apiCC.getUserMediaStream(i.callConfiguration.userMediaStreamId);if(a){var n=a.getVideoTrack();if(n){var r={};t.width&&t.height&&(r.width=t.width,r.height=t.height),t.frameRate&&(r.frameRate=t.frameRate),n.applyConstraints(r).then((function(e){B.debug(\"processUpdateVideoQuality - applyConstraints; OK\")})).catch((function(e){B.error(\"processUpdateVideoQuality - applyConstraints\",e)}))}else B.warn(\"processUpdateVideoQuality - no such video track; callId:\",e)}else B.warn(\"processUpdateVideoQuality - no such userMediaStream; callId:\",e)}else B.warn(\"processUpdateVideoQuality - wrong roomMode; callId:\",e);else B.warn(\"processUpdateVideoQuality - no such call; callId:\",e)},this.removeAllCallsFromRoom=function(e,t){B.info(\"removeAllCallsFromRoom :\"+e+\" with reason :\"+t);var i,a,n=this.callsTable.length,r=[],o={};for(i=0;i<n;i+=1)this.callsTable[i].dest_roomId==e&&(B.log(\"Call is attached to the room, removing ...\"),o={callId:this.callsTable[i].callId},r.push(o));for(a=0;a<r.length;a+=1)this.removeCallFromTableWithCallIdAndSendBye(r[a].callId,t);r.splice(0,r.length)},this.onHangup=function(e,t){var i=null,a=null,n=null,o=null,s=[],l=!1,d=!1,c=null,u=null;if(e?\"string\"!=typeof e&&(e=String(e)):e=null,t?\"string\"!=typeof t&&(t=null):t=null,this.setStatus(\"<div>Your phone is registered, you can be reached at this number : \"+this.clientId+\"</div>\"),B.info(\"Hanging up.\"),this.initMediaElementState(),null===e)B.log(\"Leaving all calls that are established\"),this.MCUClient&&this.MCUClient.meshOnHangup(),this.removeAllCalls(),this.callControlTable.splice(0,this.callControlTable.length);else if(null!==(a=this.findUserMediaById(e))){for(\"janusConnector\"!==this.MCUClient.pubConnector||\"RTC_Setup_Timeout\"!==t&&\"disconnected\"!==t||(n=a.getUserMediaStream())&&n.stream&&(\"mesh\"===a.sessionMCU.roomMode?(l=!0,d=!0,c=n.stream,a.streamStolen=!0):(l=!0,c=n.stream,a.streamStolen=!0,(u=n.getCallInfo(a.userMediaId))&&(u.flavor=\"call\"))),o=this.callsTable.length;--o>=0;)(0,r.Ym)(this.callsTable[o].data,\"object\")&&(0,r.Ym)(this.callsTable[o].data.mesh,\"object\")&&this.callsTable[o].data.mesh.calleeCallId===e&&s.push(this.callsTable[o].callId);for(o=s.length;--o>=0;)this.removeCallFromTableWithCallIdAndSendBye(s[o],t);this.MCUClient.meshOnHangup(e,null,{restart:l})}else null!==(i=this.findCallWithCallId(e))&&(\"janusConnector\"!==this.MCUClient.pubConnector||\"RTC_Setup_Timeout\"!==t&&\"disconnected\"!==t||(\"publish\"===i.settingUpType||\"shareScreen\"===i.settingUpType?i.data&&i.data.mesh||(l=!0,i.streamStolen=!0):\"subscribe\"===i.settingUpType&&(l=!0)),B.log(\"Leaving call with callId :\"+e),this.removeCallFromTableWithCallIdAndSendBye(e,t));this.displayCallButtonInCommand(),!0===l?null!==i?this.restartCall(i):null!==a&&(!0===d?this.restartCall(a,{userMedia:!0,mesh:!0}):this.restartCall(a,{userMedia:!0,stream:c})):(i&&i.callControl&&this.destroyCallControl(i.callControl),this.stopMaxCallRetriesTimer(e),this.stopRestartCallTimer(e),delete this.callsRetriesTable[e])},this.stopStream=function(e){B.info(\"stopStream in client\");var t,i=null;if(\"Chrome\"===n.Xh&&n.PR<45||\"Firefox\"===n.Xh&&n.PR<44||\"Opera\"===n.Xh&&n.PR<34||\"Chromium\"===n.Xh&&n.PR<44||\"Chrome WebView\"===n.Xh&&n.PR<45)e.onended=null,e.stop();else{for(e.onended=null,B.log(\"MediaStream.stop is now deprecated, using MediaStreamTrack.stop\"),i=e.getTracks(),t=0;t<i.length;t+=1)i[t].onended=null,i[t].stop();B.log(\"... tracks stopped\")}e=null},this.clearCallTimeouts=function(e){var t;for(B.debug(\"clearCallTimeouts\"),0!==e.send200OKTrickleIceFalseTimeOutId&&(B.debug(\"clearing send200OKTrickleIceFalseTimeOutId\"),clearTimeout(e.send200OKTrickleIceFalseTimeOutId),e.send200OKTrickleIceFalseTimeOutId=0),0!==e.sendInviteTrickleIceFalseTimeOutId&&(B.debug(\"clearing sendInviteTrickleIceFalseTimeOutId\"),clearTimeout(e.sendInviteTrickleIceFalseTimeOutId),e.sendInviteTrickleIceFalseTimeOutId=0),0!==e.disconnectionTimeoutId&&(B.debug(\"clearing disconnectionTimeout\"),clearTimeout(e.disconnectionTimeoutId),e.disconnectionTimeoutId=0),0!==e.disconnectionWarningInterval&&(B.debug(\"clearing disconnectionWarningInterval\"),clearInterval(e.disconnectionWarningInterval),e.disconnectionWarningInterval=0),t=0;t<e.checkCandidateTypesTimeoutTable.length;t+=1)B.debug(\"clearing checkCandidateTypesTimeout :\",e.checkCandidateTypesTimeoutTable[t]),clearTimeout(e.checkCandidateTypesTimeoutTable[t]);e.checkCandidateTypesTimeoutTable.splice(0,e.checkCandidateTypesTimeoutTable.length)},this.removeAllCalls=function(){B.info(\"removeAllCalls\");var e,t=this.callsTable.length,i=0,a=null,n=null,o=0,s=null;for(B.log(\"callsNumber = \"+t),e=0;e<t;e+=1){if(i=this.callsTable[e-o].callee?this.callsTable[e-o].callerId:this.callsTable[e-o].calleeId,!0===this.callsTable[e-o].callee)n=\"Hangup_From_Callee\",this.callsTable[e-o].myWebRTC_Stack.sendBye(this.callsTable[e-o].callId,this.clientId,this.callsTable[e-o].dest_roomId,i,n,this.callsTable[e-o].data);else{if(n=\"Hangup_From_Caller\",!0!==this.callsTable[e-o].inviteSended){this.callsTable[e-o].callCancelled=!0,B.warn(\"Leaving call iteration on removeAllCalls\");continue}this.callsTable[e-o].myWebRTC_Stack.sendBye(this.callsTable[e-o].callId,this.clientId,this.callsTable[e-o].dest_roomId,i,n,this.callsTable[e-o].data)}(0,r.ki)(this.callsTable[e-o].sessionMCU,\"roomName\",\"string\")&&(0,r.ki)(this.callsTable[e-o].data,\"MCUType\",\"string\")&&(\"MCU-Caller\"===this.callsTable[e-o].data.MCUType||\"MCU-Callee\"===this.callsTable[e-o].data.MCUType)&&this.MCUClient.leaveSession(this.callsTable[e-o].sessionMCU.roomName,{noHangup:!0}),this.callsTable[e-o].callConfiguration&&this.callsTable[e-o].callConfiguration.userMediaStreamId&&(s=apiCC.getUserMediaStream(this.callsTable[e-o].callConfiguration.userMediaStreamId))&&apiCC.releaseUserMediaStream(s.userMediaStreamId,this.callsTable[e-o].callId),null!==this.callsTable[e-o].screenStream&&(B.log(\"stopping screenStream\"),this.stopStream(this.callsTable[e-o].screenStream),G.createUserMediaStopEvent(this.callsTable[e-o].callId,\"screen\")),null!==this.callsTable[e-o].pc&&(B.log(\"Closing PC\"),this.qosEnable&&void 0!==this.callsTable[e-o].qm&&null!==this.callsTable[e-o].qm&&\"function\"==typeof this.callsTable[e-o].qm.saveStatsToDb&&(this.callsTable[e-o].qm.saveStatsToDb(!0),clearInterval(this.callsTable[e-o].statisticId)),this.callsTable[e-o].csmIntervalId&&clearInterval(this.callsTable[e-o].csmIntervalId),this.callsTable[e-o].pc.close(),this.callsTable[e-o].pc=null),a=this.callsTable[e-o].callId+\"-\"+this.callsTable[e-o].calleeId,this.removeRemoteVideoDisplay(a),this.myWebRTC_Event.createHangupEvent(\"local\",this.clientId,this.callsTable[e-o].remoteId,!0,n,this.callsTable[e-o].callId,this.callsTable[e-o].callType),void 0!==this.callsTable[e-o].data&&null!==this.callsTable[e-o].data&&(\"janusConnector\"===this.callsTable[e-o].data.pubSub||\"MCU-Caller\"!==this.callsTable[e-o].data.MCUType&&\"MCU-Callee\"!==this.callsTable[e-o].data.MCUType||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(this.callsTable[e-o].data.confId,this.callsTable[e-o].callerId,this.callsTable[e-o].calleeId,this.callsTable[e-o].callId)),this.clearCallTimeouts(this.callsTable[e-o]),0!==this.callsTable[e-o].incomingcandidatesQueue.length&&this.callsTable[e-o].incomingcandidatesQueue.splice(0,this.callsTable[e-o].incomingcandidatesQueue.length),void 0!==this.clientIncomingCandidatesQueue[this.callsTable[e-o].callId+\"-\"+this.callsTable[e-o].instanceId]&&0!==this.clientIncomingCandidatesQueue[this.callsTable[e-o].callId+\"-\"+this.callsTable[e-o].instanceId].length&&this.clientIncomingCandidatesQueue[this.callsTable[e-o].callId+\"-\"+this.callsTable[e-o].instanceId].splice(0,this.clientIncomingCandidatesQueue[this.callsTable[e-o].callId+\"-\"+this.callsTable[e-o].instanceId].length),B.log(\"Removing call from table\"),this.callsTable.splice(e-o,1),o+=1}},this.onRemoteHangup=function(t,i,a,n,o,s){var l=this;B.debug(\"onRemoteHangup\");var d=null,c=null,u=null,h=null,p=!1,g=!1,m=!1,C=null,f=null;if(B.log(\"callId :\"+t),B.log(\"confId :\"+o),\"janusConnector\"===this.MCUClient.pubConnector)if(\"RTC_Setup_Timeout\"===n||\"Broken_by_MCU\"===n||\"disconnected\"===n)if(null!=(c=null==s?this.findCallWithCallId(t):this.findCallWithCallIdAndInstanceId(t,s.instanceId))){if(c.setupTimeoutId&&(clearTimeout(c.setupTimeoutId),delete c.setupTimeoutId),!0===c.restarting)return void B.debug(\"call restarting\");if(\"publish\"===c.settingUpType||\"shareScreen\"===c.settingUpType?c.data&&c.data.mesh||(p=!0,c.streamStolen=!0):\"subscribe\"===c.settingUpType&&(p=!0),null!==c.sessionMCU&&\"old\"===c.sessionMCU.modeChangeKind)return void B.debug(\"onRemoteHangup ignore\")}else null!==(u=this.findUserMediaById(t))?(u.close(),(h=u.getUserMediaStream())&&h.stream&&(null!==u.sessionMCU&&\"old\"===u.sessionMCU.modeChangeKind?(p=!0,C=h.stream,u.streamStolen=!0,u.distantCalls.length>0&&(m=!0),(f=h.getCallInfo(u.userMediaId))&&(f.flavor=\"call\")):null!==u.sessionMCU&&\"mesh\"===u.sessionMCU.roomMode?(p=!0,g=!0,C=h.stream,u.streamStolen=!0):(p=!0,C=h.stream,u.streamStolen=!0,(f=h.getCallInfo(u.userMediaId))&&(f.flavor=\"call\")))):B.debug(\"No call and no userMedia found\");else(c=null==s?this.findCallWithCallId(t):this.findCallWithCallIdAndInstanceId(t,s.instanceId))?(c.setupTimeoutId&&(clearTimeout(c.setupTimeoutId),delete c.setupTimeoutId),\"subscribe\"===c.settingUpType&&(p=!0)):(u=this.findUserMediaById(t))&&u.close();if(!m)if(null!==u){var v=null,b=[];for(v=this.callsTable.length;--v>=0;)(0,r.ki)(this.callsTable[v].data,\"mesh\",\"object\")&&this.callsTable[v].data.mesh.calleeCallId===t&&\"subscribe\"!==this.callsTable[v].settingUpType&&b.push(this.callsTable[v].callId);for(v=b.length;--v>=0;)this.removeCallFromTableWithCallIdAndSendBye(b[v],n);if(this.MCUClient.meshOnHangup(t),\"old\"===u.sessionMCU.modeChangeKind){var S=this.MCUClient.getSessionMCU(null,{callback:function(e){return e.roomName===u.sessionMCU.roomName&&\"new\"===e.modeChangeKind}});S&&this.finalizeMeshToJanusTransition(u.sessionMCU,S)}}else void 0!==t?d=null==s?this.removeCallFromTableWithCallIdandRemoteId(t,i,n):this.removeCallFromTableWithCallIdandInstanceId(t,s.instanceId,n):void 0!==o&&(d=this.removeCallFromTableWithConfIdandRemoteId(o,i,n));B.log(\"Reason : \"+n),void 0===n?this.setStatus(\"<div>Your partner : \"+i+\" have left the call. you can be reached at this number : \"+this.clientId+\"</div>\"):(this.setStatus(\"<div>Call hangup with reason : \"+n+\". you can be reached at this number : \"+this.clientId+\"</div>\"),B.log(\"Remote Hangup for reason : \"+n)),c&&!0!==p?0===this.callsTable.length&&0===this.userMediaTable.length?(B.log(\"No more established calls for client\"),this.initMediaElementState(),this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,i,!0,n),this.myWebRTC_Event.createHangupEvent(\"remote\",this.clientId,i,!0,n,t,d),this.displayCallButtonInCommand(),!0===this.getUserMediaOnGoing&&!0!==e.deactivateReloadOnCancel&&(B.log(\"Cancel from Remote\"),\"undefined\"==typeof apiRTC_React&&location.reload(),this.getUserMediaOnGoing=!1)):(B.log(\"Other calls are still established\"),this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,i,!1,n),this.myWebRTC_Event.createHangupEvent(\"remote\",this.clientId,i,!1,n,t,d)):c&&\"subscribe\"===c.settingUpType&&(this.myWebRTC_Event.createRemoteHangupEvent(this.clientId,i,!1,\"restarted\"),this.myWebRTC_Event.createHangupEvent(\"remote\",this.clientId,i,!1,\"restarted\",t,d)),null!=s&&(\"janusConnector\"===this.MCUClient.pubConnector||\"MCU-Caller\"!==s.MCUType&&\"MCU-Callee\"!==s.MCUType||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(o,this.clientId,i,t)),!0===p?null!==c?this.restartCall(c):null!==u&&(!0===g?this.restartCall(u,{userMedia:!0,mesh:!0}):this.randomDelayOnRestart?(B.debug(\"onRemoteHangup - randomDelayOnRestart\"),setTimeout((function(){l.restartCall(u,{userMedia:!0,stream:C})}),5e3*Math.random())):this.restartCall(u,{userMedia:!0,stream:C})):(c&&c.callControl&&this.destroyCallControl(c.callControl),(c||u)&&(this.stopMaxCallRetriesTimer(t),this.stopRestartCallTimer(t),delete this.callsRetriesTable[t]))},this.startMaxCallRetriesTimer=function(e){var t=this;B.debug(\"startMaxCallRetriesTimer for callIdWhenStartingTimer :\",e);var i=setTimeout((function(){B.debug(\"[restartCall] MaxCallRetriesTimer reached for callIdWhenStartingTimer :\",e),t.callsRetriesTable[e].allowedStatus=!1,delete t.callsRetriesTable[e].maxCallsRetriesDurationTimeOutId}),this.maxCallsRetriesDuration);this.callsRetriesTable[e]={},this.callsRetriesTable[e].maxCallsRetriesDurationTimeOutId=i},this.stopMaxCallRetriesTimer=function(e){B.debug(\"stopMaxCallRetriesTimer for callId :\",e),void 0!==this.callsRetriesTable[e]&&void 0!==this.callsRetriesTable[e].maxCallsRetriesDurationTimeOutId&&(clearTimeout(this.callsRetriesTable[e].maxCallsRetriesDurationTimeOutId),B.debug(\"[restartCall] MaxCallRetriesTimer cleared for callId :\",e),delete this.callsRetriesTable[e])},this.stopRestartCallTimer=function(e){B.debug(\"stopRestartCallTimer for callId :\",e),void 0!==this.callsRetriesTable[e]&&void 0!==this.callsRetriesTable[e].restartCallTimeOutId&&(clearTimeout(this.callsRetriesTable[e].restartCallTimeOutId),B.error(\"[restartCall] RestartCallTimer cleared for callId :\",e),delete this.callsRetriesTable[e].restartCallTimeOutId)},this.restartCall=function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B.debug(\"[restartCall] restartCall for callId :\",e.callId);var a=-1;if(!0!==i.userMedia)if(e.callControl&&e.callControl.autoRestart)if(0===(a=e.callControl.autoRestart.counter)&&(e.callControl.autoRestart.callIdWhenStartingTimer=e.callId,this.startMaxCallRetriesTimer(e.callId)),void 0!==this.callsRetriesTable[e.callControl.autoRestart.callIdWhenStartingTimer]&&void 0===this.callsRetriesTable[e.callControl.autoRestart.callIdWhenStartingTimer].allowedStatus){B.debug(\"[restartCall] ... for callIdWhenStartingTimer :\",e.callControl.autoRestart.callIdWhenStartingTimer),B.debug(\"AutoRestartCounter :\",a),B.debug(\"Calling restartCallProcess in :\",this.restartCallDelay*Math.pow(2,a));var n=setTimeout((function(){B.debug(\"Timer reached for restartCall\"),delete e.callControl.autoRestart.pending,t.restartCallProcess(e,i),void 0!==t.callsRetriesTable[e.callControl.autoRestart.callIdWhenStartingTimer]&&void 0!==t.callsRetriesTable[e.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId&&delete t.callsRetriesTable[e.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId}),this.restartCallDelay*Math.pow(2,a));e.callControl.autoRestart.pending=!0,this.callsRetriesTable[e.callControl.autoRestart.callIdWhenStartingTimer].restartCallTimeOutId=n}else B.warn(\"CALL_ABORTED, retries not allowed (maxCallsRetriesDuration reached) for callIdWhenStartingTimer :\",e.callControl.autoRestart.callIdWhenStartingTimer),this.destroyCallControl(e.callControl),G.createErrorEvent(\"call aborted after calls retries (maxCallsRetriesDuration reached)\",\"CALL_ABORTED\",e.callId,e.callControl.roomName),void 0!==this.callsRetriesTable[e.callControl.autoRestart.callIdWhenStartingTimer]&&delete this.callsRetriesTable[e.callControl.autoRestart.callIdWhenStartingTimer];else B.debug(\"[restartCall] autoRestart options not defined\");else this.restartCallProcess(e,i)},this.restartCallProcess=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};B.debug(\"restartCallProcess \");var i=!1,a=!1,n=null;if(!0!==e.restarting){if(e.restarting=!0,!0===t.userMedia&&(i=!0),!0===t.mesh&&(a=!0),!0===i)if(!0===a)\"screenSharing\"===e.callType||\"screenSharingWithAudio\"===e.callType?(e.restarting=!1,this.userMediaTable.push(e),this.MCUClient.meshOnScreenMediaSuccess(e)):(e.restarting=!1,this.userMediaTable.push(e),this.MCUClient.meshOnUserMediaSuccess(e));else if(\"screenSharing\"===e.callType||\"screenSharingWithAudio\"===e.callType){delete e.data.meshPublish,e.data.type=\"publish\";var o=this.createCallControl({type:\"shareScreen\",callId:e.userMediaId,roomName:e.roomId,callConfiguration:e.callConfiguration,data:e.data});o.captureSourceType=e.captureSourceType,o.autoRestart.counter=0,o.autoRestart.stream=t.stream,this.shareScreen(e.roomId,e.data,e.captureSourceType,e.callConfiguration,{callControl:o}),this.myWebRTC_Event.createCallRestartingEvent(e.callType,e.audioOnly,e.userMediaId,e.userMediaId,\"publish\",this.clientId,e.roomId,e.roomId,null)}else{delete e.data.meshPublish;var s=this.createCallControl({type:\"publish\",callId:e.userMediaId,callType:e.callType,roomName:e.roomId,callConfiguration:e.callConfiguration,data:e.data});s.audioOnly=\"audio\"===e.callType,s.sessionId=e.sessionId,s.token=e.token,s.autoRestart.counter=0,s.autoRestart.stream=t.stream,this.MCUClient.publish(e.roomId,e.sessionId,e.token,e.callConfiguration,e.data,{callControl:s}),this.myWebRTC_Event.createCallRestartingEvent(e.callType,\"audio\"===e.callType,e.userMediaId,e.userMediaId,\"publish\",this.clientId,e.roomId,e.roomId,null)}else if(\"publish\"===e.settingUpType)(0,r.Ym)(e.callControl,\"object\")?(B.debug(\"[restartCall] restarting call publish\"),this.MCUClient.publish(e.callControl.roomName,e.callControl.sessionId,e.callControl.token,e.callControl.callConfiguration,e.callControl.data,{callControl:e.callControl}),this.myWebRTC_Event.createCallRestartingEvent(e.callType,e.audioOnly,e.callId,e.callId,\"publish\",this.clientId,e.callControl.roomName,e.callControl.roomName,null)):B.warn(\"[restartCall] cannot auto restart; missing info\");else if(\"shareScreen\"===e.settingUpType)(0,r.Ym)(e.callControl,\"object\")?(B.debug(\"[restartCall] restarting call shareScreen\"),this.shareScreen(e.callControl.roomName,e.callControl.data,e.callControl.captureSourceType,e.callControl.callConfiguration,{callControl:e.callControl}),this.myWebRTC_Event.createCallRestartingEvent(e.callType,e.audioOnly,e.callId,e.callId,\"publish\",this.clientId,e.callControl.roomName,e.callControl.roomName,null)):B.warn(\"[restartCall] cannot auto restart; missing info\");else if(\"subscribe\"===e.settingUpType&&(B.debug(\"[restartCall] restarting call subscribe\"),n=!0===e.mcuRemoteStream.replay?this.MCUClient.getStreamOfUserCall(e.mcuRemoteStream.attributes.callerId,e.mcuRemoteStream.attributes.callId,{replay:!0}):this.MCUClient.getStreamOfUserCall(e.mcuRemoteStream.attributes.callerId,e.mcuRemoteStream.attributes.callId),(0,r.Ym)(e.callControl,\"object\")&&n)){B.debug(\"[restartCall] stream exists, subscribing to it\");var l=!!e.callControl.autoRestart.force;delete e.callControl.autoRestart.force;var d=e.callControl.callId,c=this.MCUClient.subscribeToStreams([n],e.callControl.mediaType,e.callControl.data,e.callControl.callConfiguration,{noStreamCheck:!0,autoSub:!0,force:l});d&&c[0]&&this.myWebRTC_Event.createCallRestartingEvent(e.callType,e.audioOnly,d,c[0],\"subscribe\",this.clientId,e.callControl.roomName,e.callControl.roomName,n.id)}}else B.debug(\"[restartCall] call already restarting\")},this.closingCallProcess=function(e,t){B.log(\"Session terminated.\");var i=null;(0,r.ki)(this.callsTable[e].sessionMCU,\"roomName\",\"string\")&&(0,r.ki)(this.callsTable[e].data,\"MCUType\",\"string\")&&(\"MCU-Caller\"===this.callsTable[e].data.MCUType||\"MCU-Callee\"===this.callsTable[e].data.MCUType)&&this.MCUClient.leaveSession(this.callsTable[e].sessionMCU.roomName),this.callsTable[e].callConfiguration&&this.callsTable[e].callConfiguration.userMediaStreamId&&!0!==this.callsTable[e].streamStolen&&(i=apiCC.getUserMediaStream(this.callsTable[e].callConfiguration.userMediaStreamId))&&apiCC.releaseUserMediaStream(i.userMediaStreamId,this.callsTable[e].callId),null!==this.callsTable[e].screenStream&&(B.log(\"stopping screenStream\"),this.stopStream(this.callsTable[e].screenStream),G.createUserMediaStopEvent(this.callsTable[e].callId,\"screen\")),null!==this.callsTable[e].pc&&(B.log(\"Closing PC\"),this.qosEnable&&void 0!==this.callsTable[e].qm&&null!==this.callsTable[e].qm&&\"function\"==typeof this.callsTable[e].qm.saveStatsToDb&&(this.callsTable[e].qm.saveStatsToDb(!0),clearInterval(this.callsTable[e].statisticId)),this.callsTable[e].csmIntervalId&&clearInterval(this.callsTable[e].csmIntervalId),this.callsTable[e].beginTimeoutId&&(clearTimeout(this.callsTable[e].beginTimeoutId),delete this.callsTable[e].beginTimeoutId),this.callsTable[e].dcfs?\"Ice_failed\"===t?this.callsTable[e].dcfs.failure=\"iceFailed\":this.callsTable[e].dcfs.canceled=!0:\"data\"===this.callsTable[e].callType&&\"dataChannelConnector\"===this.callsTable[e].calleeId&&(this.callsTable[e].failure||this.callsTable[e].success||setTimeout((function(e,t){G.createEvent({eventType:\"onFileSended\",callId:e.callId,remoteId:e.remoteId,name:e.data.filename,error:t}),e.callbacks&&e.callbacks.failure&&e.callbacks.failure(t)}),0,this.callsTable[e],\"Ice_failed\"===t?\"iceFailed\":\"canceled\")),this.callsTable[e].pc.close(),this.callsTable[e].pc=null)},this.removeCallProcess=function(e){var t,i=this,a=this.callsTable[e];this.clearCallTimeouts(a),0!==a.incomingcandidatesQueue.length&&a.incomingcandidatesQueue.splice(0,a.incomingcandidatesQueue.length),void 0!==this.clientIncomingCandidatesQueue[a.callId+\"-\"+a.instanceId]&&0!==this.clientIncomingCandidatesQueue[a.callId+\"-\"+a.instanceId].length&&this.clientIncomingCandidatesQueue[a.callId+\"-\"+a.instanceId].splice(0,this.clientIncomingCandidatesQueue[a.callId+\"-\"+a.instanceId].length),B.log(\"Removing call from table\"),this.callsTable.splice(e,1),B.log(\"this.callsTable.length :\",this.callsTable.length),B.log(\"Call is terminated\"),setTimeout((function(){i.startNextPushData()})),t=this.callsTable.length,this.miniVideo&&0!==t&&(B.log(\"calling attachMediaStream\"),apiCC.attachMediaStream(this.miniVideo,this.callsTable[0].callLocalStream)),this.evalOutgoingVideoBandwithCap()},this.removeCallFromTableWithCallIdAndSendBye=function(e,t){B.debug(\"removeCallFromTableWithCallIdAndSendBye()\",e);var i,a=null,n=null;if(-1!==(i=this.findCallIndexWithCallId(e))){if(this.closingCallProcess(i,t),a=this.callsTable[i].callId+\"-\"+this.callsTable[i].calleeId,this.removeRemoteVideoDisplay(a),this.callsTable[i].callee?(n=this.callsTable[i].callerId,null===t&&(t=\"Hangup_From_Callee\")):(n=this.callsTable[i].calleeId,null===t&&(t=\"Hangup_From_Caller\")),B.log(\"reason is :\"+t),\"LOCAL\"!==this.callsTable[i].calleeId){var r=apiCC.session.getConnectedUserInfo(this.callsTable[i].calleeId,\"userData\"),o=null;if(\"User_Not_Found\"!==r)try{o=JSON.parse(r)}catch(e){B.error(\"userInfo parse fail\",r)}null!=o&&\"true\"===o.isSimulated?apiCC.session.channel.socket.emit(\"simulatedAgentCancelCallRequest\",{number:this.callsTable[i].calleeId,callId:e}):this.callsTable[i].myWebRTC_Stack.sendBye(this.callsTable[i].callId,this.clientId,this.callsTable[i].dest_roomId,n,t,this.callsTable[i].data)}\"Broken_by_MCU\"!==t&&this.myWebRTC_Event.createHangupEvent(\"local\",this.clientId,this.callsTable[i].remoteId,!0,t,this.callsTable[i].callId,this.callsTable[i].callType),void 0!==this.callsTable[i].data&&null!==this.callsTable[i].data&&(\"janusConnector\"===this.callsTable[i].data.pubSub||\"MCU-Caller\"!==this.callsTable[i].data.MCUType&&\"MCU-Callee\"!==this.callsTable[i].data.MCUType||this.myWebRTC_Event.createRecordedStreamsAvailableEvent(this.callsTable[i].data.confId,this.callsTable[i].callerId,this.callsTable[i].calleeId,this.callsTable[i].callId)),this.removeCallProcess(i)}else B.log(\"No call removed\");this.MCUClient.publishCallId===e&&(this.publishCallId=null)},this.removeCall=function(e){B.info(\"removeCall\");var t=null,i=null;return-1!==e?(this.closingCallProcess(e,null),0!==this.callsTable[e].disconnectionWarningTimeout&&(B.debug(\"clearing disconnectionWarningTimeout\"),clearTimeout(this.callsTable[e].disconnectionWarningTimeout),this.callsTable[e].disconnectionWarningTimeout=0),t=this.callsTable[e].callId+\"-\"+this.callsTable[e].calleeId,this.removeRemoteVideoDisplay(t),i=this.callsTable[e].callType,this.removeCallProcess(e)):B.debug(\"No call removed\"),i},this.removeCallFromTableWithConfIdandRemoteId=function(e,t,i){var a;return B.debug(\"removeCallFromTableWithConfIdandRemoteId() with reason :\"+i),i=null,a=this.findCallIndexWithConfIdAndRemoteId(e,t),this.removeCall(a)},this.removeCallFromTableWithCallIdandRemoteId=function(e,t,i){var a;return B.debug(\"removeCallFromTableWithCallIdandRemoteId() with reason :\"+i),B.log(\"callId :\"+e),B.log(\"remoteId :\"+t),i=null,a=this.findCallIndexWithCallIdAndRemoteId(e,t),this.removeCall(a)},this.removeCallFromTableWithCallIdandInstanceId=function(e,t,i){var a;return B.debug(\"removeCallFromTableWithCallIdandInstanceId() with reason :\"+i),B.log(\"callId :\"+e),B.log(\"instanceId :\"+t),i=null,a=this.findCallIndexWithCallIdAndInstanceId(e,t),this.removeCall(a)},this.transitionToActive=function(){B.debug(\"transitionToActive\"),this.remoteVideo&&(this.remoteVideo.style.opacity=1),setTimeout(this.callback(this,\"callback2\"),1e3)},this.callback2=function(){this.miniVideo&&(this.miniVideo.style.opacity=1)},this.initMediaElementState=function(){!1===this.autoAnswer?this.localVideo&&(this.localVideo.style.opacity=0,this.localVideo.src=\"\"):this.localVideo&&(this.localVideo.style.opacity=1),this.remoteVideo&&(this.remoteVideo.style.opacity=0,this.remoteVideo.src=\"\"),this.miniVideo&&(this.miniVideo.style.opacity=0),!0===this.autoAnswer?B.log(\"autoAnswer Activated : localStream is not stopped\"):this.miniVideo&&(this.miniVideo.src=\"\")},this.toggleVideoMute=function(e){B.debug(\"toggleVideoMute\");var t,i,a=this.callsTable.length,n=null,r=null;if(null==e){for(B.debug(\"no callId defined, toggleVideoMute all local video\"),this.isVideoMuted?null!==this.localStream&&(B.debug(\"localStream unMuteTracks\"),this.unMuteTracks(this.localStream.getVideoTracks())):null!==this.localStream&&(B.debug(\"localStream muteTracks\"),this.muteTracks(this.localStream.getVideoTracks())),this.isVideoMuted=!this.isVideoMuted,t=0;t<a;t+=1)this.callsTable[t].data&&this.callsTable[t].data.mesh||(r=null,this.callsTable[t].callConfiguration&&(r=apiCC.getUserMediaStream(this.callsTable[t].callConfiguration.userMediaStreamId)),r?r.videoMuted?r.unMuteVideoOnStreams(\"enabled\"):r.muteVideoOnStreams(\"enabled\"):null!==this.callsTable[t].callLocalStream&&(this.callsTable[t].isLocalVideoMuted?(B.debug(\"unmuting call :\",this.callsTable[t].callId),this.unMuteTracks(this.callsTable[t].callLocalStream.getVideoTracks())):(B.debug(\"muting call :\",this.callsTable[t].callId),this.muteTracks(this.callsTable[t].callLocalStream.getVideoTracks())),this.callsTable[t].isLocalVideoMuted=!this.callsTable[t].isLocalVideoMuted));for(a=this.userMediaTable.length,t=0;t<a;t+=1)r=null,this.userMediaTable[t].callConfiguration&&(r=apiCC.getUserMediaStream(this.userMediaTable[t].callConfiguration.userMediaStreamId)),r&&(r.videoMuted?r.unMuteVideoOnStreams(\"enabled\"):r.muteVideoOnStreams(\"enabled\"));return{muteState:this.isVideoMuted,callId:\"ALL\"}}return B.debug(\"callId is defined :\",e),(i=this.findCallIndexWithCallId(e))>=0?(this.callsTable[i].callConfiguration&&(r=apiCC.getUserMediaStream(this.callsTable[i].callConfiguration.userMediaStreamId)),r?(r.videoMuted?r.unMuteVideoOnStreams(\"enabled\"):r.muteVideoOnStreams(\"enabled\"),{muteState:r.videoMuted,callId:e}):null!==this.callsTable[i].callLocalStream?(this.callsTable[i].isLocalVideoMuted?(B.debug(\"unmuting call :\",this.callsTable[i].callId),this.unMuteTracks(this.callsTable[i].callLocalStream.getVideoTracks())):(B.debug(\"muting call :\",this.callsTable[i].callId),this.muteTracks(this.callsTable[i].callLocalStream.getVideoTracks())),this.callsTable[i].isLocalVideoMuted=!this.callsTable[i].isLocalVideoMuted,{muteState:this.callsTable[i].isLocalVideoMuted,callId:e}):{muteState:\"STREAM_NOT_FOUND\",callId:e}):(n=this.findUserMediaById(e))&&(n.callConfiguration&&(r=apiCC.getUserMediaStream(n.callConfiguration.userMediaStreamId)),r)?(r.videoMuted?r.unMuteVideoOnStreams(\"enabled\"):r.muteVideoOnStreams(\"enabled\"),{muteState:r.videoMuted,callId:e}):{muteState:\"CALL_NOT_FOUND\",callId:e}},this.unMuteTracks=function(e){var t;if(0!==e.length){for(t=0;t<e.length;t+=1)e[t].enabled=!0;B.log(\"tracks unMuted.\")}else B.log(\"No tracks available.\")},this.muteTracks=function(e){var t;if(0!==e.length){for(t=0;t<e.length;t+=1)e[t].enabled=!1;B.log(\"tracks muted.\")}else B.log(\"No tracks available.\")},this.toggleAudioMute=function(e){B.debug(\"toggleAudioMute\");var t,i,a=this.callsTable.length,n=null,r=null;if(null==e){for(B.debug(\"no callId defined, toggleAudioMute all local audio\"),this.isAudioMuted?null!==this.localStream&&(B.debug(\"localStream unMuteTracks\"),this.unMuteTracks(this.localStream.getAudioTracks())):null!==this.localStream&&(B.debug(\"localStream muteTracks\"),this.muteTracks(this.localStream.getAudioTracks())),this.isAudioMuted=!this.isAudioMuted,t=0;t<a;t+=1)this.callsTable[t].data&&this.callsTable[t].data.mesh||(r=null,this.callsTable[t].callConfiguration&&(r=apiCC.getUserMediaStream(this.callsTable[t].callConfiguration.userMediaStreamId)),r?r.audioMuted?r.unMuteAudioOnStreams(\"enabled\"):r.muteAudioOnStreams(\"enabled\"):null!==this.callsTable[t].callLocalStream&&(this.callsTable[t].isLocalAudioMuted?(B.debug(\"unmuting call :\",this.callsTable[t].callId),this.unMuteTracks(this.callsTable[t].callLocalStream.getAudioTracks())):(B.debug(\"muting call :\",this.callsTable[t].callId),this.muteTracks(this.callsTable[t].callLocalStream.getAudioTracks())),this.callsTable[t].isLocalAudioMuted=!this.callsTable[t].isLocalAudioMuted));for(a=this.userMediaTable.length,t=0;t<a;t+=1)r=null,this.userMediaTable[t].callConfiguration&&(r=apiCC.getUserMediaStream(this.userMediaTable[t].callConfiguration.userMediaStreamId)),r&&(r.audioMuted?r.unMuteAudioOnStreams(\"enabled\"):r.muteAudioOnStreams(\"enabled\"));return{muteState:this.isAudioMuted,callId:\"ALL\"}}return B.debug(\"callId is defined :\",e),(i=this.findCallIndexWithCallId(e))>=0?(this.callsTable[i].callConfiguration&&(r=apiCC.getUserMediaStream(this.callsTable[i].callConfiguration.userMediaStreamId)),r?(r.audioMuted?r.unMuteAudioOnStreams(\"enabled\"):r.muteAudioOnStreams(\"enabled\"),{muteState:r.audioMuted,callId:e}):null!==this.callsTable[i].callLocalStream?(this.callsTable[i].isLocalAudioMuted?(B.debug(\"unmuting call :\",this.callsTable[i].callId),this.unMuteTracks(this.callsTable[i].callLocalStream.getAudioTracks())):(B.debug(\"muting call :\",this.callsTable[i].callId),this.muteTracks(this.callsTable[i].callLocalStream.getAudioTracks())),this.callsTable[i].isLocalAudioMuted=!this.callsTable[i].isLocalAudioMuted,{muteState:this.callsTable[i].isLocalAudioMuted,callId:e}):{muteState:\"STREAM_NOT_FOUND\",callId:e}):(n=this.findUserMediaById(e))&&(n.callConfiguration&&(r=apiCC.getUserMediaStream(n.callConfiguration.userMediaStreamId)),r)?(r.audioMuted?r.unMuteAudioOnStreams(\"enabled\"):r.muteAudioOnStreams(\"enabled\"),{muteState:r.audioMuted,callId:e}):{muteState:\"CALL_NOT_FOUND\",callId:e}},this.sendDTMF=function(e,t,i,a){B.debug(\"sendDTMF\");var n=0;null!=e?(B.debug(\"callId is defined :\",e),n=this.findCallIndexWithCallId(e),B.debug(\"index :\",n),n>=0&&(B.debug(\"index :\",n),this.callsTable[n].sendTones(t,i,a))):B.debug(\"no callId defined, leaving sendDTMF\")},this.xhr=function(e,t,i,a){var n=new XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&200===n.status&&i(n.responseText)},void 0!==a&&(n.upload.onprogress=a),n.open(\"POST\",e),n.send(t)},this.takeSnapshot=function(e,i,a,n,r,o,s){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};B.info(\"takeSnapshot\");var d,c=null,u=null,h=document.createElement(\"canvas\"),p=null,g=null,m=new Date,C=m.toJSON(),f=C.replace(new RegExp(\":\",\"g\"),\"-\"),v=null;switch(n){case\"Desactivated\":d=0;break;case\"Low\":d=2;break;case\"Medium\":d=4;break;case\"High\":d=6;break;default:B.log(\"blurLevel not defined switch case : \"+n),d=0}if(void 0!==s){if(B.log(\"takeSnapshot of defined video Id :\"+s),null===(v=document.getElementById(s)))return B.log(\"Cannot find video with Id :\"+s),B.log(\"Leaving takeSnapshot\"),void this.myWebRTC_Event.createErrorEvent(\"localVideo Div Name is not correct for takeSnapshot\",\"INCORRECT_VIDEOID_FOR_SNAPSHOT\")}else if(B.warn(\"ApiRTC DEPRECATED : Please add videoId for TakeSnapshot\"),null!==this.localVideo)v=this.localVideo,B.log(\"using localVideo for takeSnapshot\");else{if(null===(v=document.getElementById(\"myLocalVideo\")))return B.log(\"Cannot find video with Id : myLocalVideo\"),void this.myWebRTC_Event.createErrorEvent(\"localVideo Div Name is not correct for takeSnapshot\",\"INCORRECT_VIDEOID_FOR_SNAPSHOT\");B.log(\"using Video with Id : myLocalVideo for takeSnapshot\")}h.width=v.videoWidth,h.height=v.videoHeight,l.hasOwnProperty(\"width\")&&(B.debug(\"options.width is set :\"+l.width),h.width=l.width),l.hasOwnProperty(\"height\")&&(B.debug(\"options.height is set :\"+l.height),h.height=l.height),B.log(\"snapshot.width : \"+h.width),B.log(\"snapshot.height :\"+h.height),(c=h.getContext(\"2d\")).drawImage(v,0,0,h.width,h.height),(u=document.createElement(\"img\")).src=h.toDataURL(\"image/png\"),u.style.padding=5,u.width=h.width,u.height=h.height,0!==d?(B.log(\"Adding Blur on Photo\"),p=c.getImageData(0,0,h.width,h.height),B.log(\"av pixels data : \"+p.data),p=t(u,p,d),B.log(\"ap pixels data : \"+p.data),c.putImageData(p,0,0),u.src=h.toDataURL(\"image/png\")):B.log(\"blur on photo is desactivated\"),\"object\"===j(i)?null!==i?i.src=u.src:B.log(\"localPhotoIdOrDiv is null\"):null!==document.getElementById(i)?document.getElementById(i).src=u.src:B.log(\"localPhotoId is not defined\"),g=new FormData,void 0!==r?(B.log(\"sessionId !== undefined :\"+r),g.append(\"destFileName\",this.clientId+\"-\"+f+\".png\"),g.append(\"data\",h.toDataURL(\"image/png\")),g.append(\"sessionId\",r)):(B.log(\"Upload on data1\"),g.append(\"photo\",h.toDataURL(\"image/png\")),g.append(\"clientId\",this.clientId),g.append(\"apiKey\",apiCC.session.apiKey)),this.xhr(e,g,(function(e){if(B.log(\"fileName :\",e),null!==e)try{var t=JSON.parse(e);\"OK\"===t.resultCode&&(B.log(\"files loaded, filename :\"+t.fileUrl),G.createSnapShotPhotoUploaded(t.fileUrl))}catch(e){B.log(\"Parsing error:\",e)}\"Photo received\"!==e&&\"An error occurred.\"!==e&&\"Photo-\"!==e.substring(0,6)||G.createSnapShotPhotoUploaded(e)}),o)},this.takeSnapshotAndSendOnDataChannel=function(e,t,i,a){B.info(\"takeSnapshotAndSendOnDataChannel\");var n,r=null,o=document.createElement(\"canvas\"),s=null;if(void 0!==t){if(B.log(\"takeSnapshot of defined video Id :\"+t),null===(s=document.getElementById(t)))return B.log(\"Cannot find video with Id :\"+t),B.log(\"Leaving takeSnapshot\"),void this.myWebRTC_Event.createErrorEvent(\"localVideo Div Name is not correct for takeSnapshot\",\"INCORRECT_VIDEOID_FOR_SNAPSHOT\")}else B.warn(\"ApiRTC DEPRECATED : Please add videoId for TakeSnapshot\");null!=s&&(o.width=s.clientWidth,o.height=s.clientHeight),B.log(\"snapshot.width : \"+o.width),B.log(\"snapshot.height :\"+o.height),o.getContext(\"2d\").drawImage(s,0,0,o.width,o.height),(r=document.createElement(\"img\")).src=o.toDataURL(\"image/png\"),r.style.padding=5,r.width=o.width,r.height=o.height,\"object\"===j(e)?null!==e?e.src=r.src:B.log(\"localPhotoIdOrDiv is null\"):null!==document.getElementById(e)?document.getElementById(e).src=r.src:B.log(\"localPhotoId is not defined\"),n=o.toDataURL(\"image/png\"),this.sendDataWithCallId(i,{file:n,name:\"nomFichier\",type:\"image/png-dataUrl\"},a)},this.callWithNumber=function(e,t,i,a){B.info(\"Click on Call Button, video activated : \"+t),B.log(\"callConfiguration : \",a);var o=null,s=0,l=null,d=null,c=null,u=null,h=null;if(\"number\"==typeof e&&(B.log(\"called number type is number, converting to string\"),e=e.toString()),\"\"!==e&&e!==this.clientId){if(this.setStatus(\"Calling Destination number :\"+e),(o=new R(this)).instanceId=apiCC.generateInstanceId(),B.log(\"Calling destination number :\"+e),null==a||void 0===a.apzcallId||null===a.apzcallId?o.generateCallId():o.callId=a.apzcallId,!0===apiCC.isSIPNumber(e)?(B.log(\"Prefix 0 , + , or 'sip:' detected, calling a SIP device\"),!0===e.toString().startsWith(\"sip:\")&&(e=e.toString().replace(\"sip:\",\"\"),B.log(\"called SIP number is :\",e)),null!=i?i.pubSub=\"sipConnector\":(i={}).pubSub=\"sipConnector\",o.trickleIce=!1):B.log(\"Establishing Web call\"),o.callerId=this.clientId,o.calleeId=e,o.dest_roomId=e,o.audioOnly=!t,o.remoteId=e,o.callConfiguration=a,null!=a?(\"VIDEO\"===a.mediaTypeForOutgoingCall||\"AUDIO\"===a.mediaTypeForOutgoingCall||\"VIDEOONLY\"===a.mediaTypeForOutgoingCall||\"NONE\"===a.mediaTypeForOutgoingCall?(B.log(\"Setting mediaTypeForOutgoingCall :\"+a.mediaTypeForOutgoingCall),o.mediaTypeForOutgoingCall=a.mediaTypeForOutgoingCall):(B.log(\"mediaTypeForOutgoingCall is not set\"),!1===t&&(B.log(\"videoActivated is false, setting mediaTypeForOutgoingCall to AUDIO\"),o.mediaTypeForOutgoingCall=\"AUDIO\")),void 0!==a.mediaRoutingMode&&null!==a.mediaRoutingMode&&o.setCallMediaRoutingMode(a.mediaRoutingMode),void 0!==a.turnServerAddress&&null!==a.turnServerAddress&&o.setCallTurnServer(a.turnServerAddress),!0!==a.preferVP9Codec&&!1!==a.preferVP9Codec||(o.preferVP9Codec=a.preferVP9Codec),a.hasOwnProperty(\"forceCallType\")&&(o.callType=a.forceCallType,\"screenSharing\"!==o.callType&&\"screenSharingWithAudio\"!==o.callType||(o.screenSharing=!0))):B.log(\"callConfiguration is not set\"),void 0!==i&&void 0!==i.MCUType&&(\"MCU-Caller\"!==i.MCUType&&\"MCU-Callee\"!==i.MCUType||(\"janusConnector\"===this.MCUClient.pubConnector&&\"Firefox\"===n.Xh&&(n.PR>43?o.mediaConstraints={offerToReceiveAudio:!1,offerToReceiveVideo:!1}:o.mediaConstraints={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}}),i.pubSub=this.MCUClient.pubConnector,i.videoBandwidthSettings=this.videoBandwidthSettings,\"groupKurentoConnector\"===i.pubSub&&(i.pubSub=\"kurentoConnector\"))),o.checkDTLSCompliancy(),l=o.callId,d=apiCC.session.getConnectedUserInfo(e,\"userData\"),B.log(\"userInfo :\",d),\"User_Not_Found\"!==d&&void 0!==d&&void 0!==(c=JSON.parse(d))&&\"true\"===c.react&&(B.log(\"userInfoJson.react :\",JSON.stringify(c.react)),B.log(\"userInfoJson.osName :\",JSON.stringify(c.osName)),\"iOS\"===c.osName&&(B.log(\"Callee : React and iOS detected, setting H264 as preferred codec for the call\"),o.preferH264Codec=!0)),!0===o.audioOnly&&(o.callType=\"audio\"),void 0!==i?o.data=i:i={},i.convId&&(i.cloudConvId||(i.cloudConvId=i.convId),delete i.convId),!0===i.dataCall&&(o.dataCall=!0),o.data.instanceId=o.instanceId,s=this.callsTable.push(o),B.log(\"Call Number is :\"+s),o.data&&\"MCU-Caller\"===o.data.MCUType&&\"NONE\"===o.mediaTypeForOutgoingCall)return o.inviteSended=!0,o.myWebRTC_Stack.sendInvite(o.callId,o.callerId,this.nickname,o.dest_roomId,o.dest_roomId,\"none\",{offer:{type:\"no-offer\"},data:o.data}),o.callId;o.data&&\"MCU-Caller\"===o.data.MCUType&&(o.settingUpType=\"publish\",o.callControl=this.createCallControl({type:\"publish\",callId:o.callId,roomName:o.data.confId,callConfiguration:o.callConfiguration,data:o.data}),o.callControl.sessionId=o.data.confId,o.callControl.token=o.data.confId,o.callControl.autoRestart.counter=0,o.setMediaConstraintsToSendOnlyOffer()),(0,r.ki)(a,\"userMediaStreamId\",\"string\")&&(h=a.userMediaStreamId),null!=c&&\"true\"===c.isSimulated?apiCC.session.channel.socket.emit(\"simulatedAgentCallRequest\",{number:e,call:o,videoActivated:t,data:i,callConfiguration:{apzcallId:o.callId}}):!0===this.accessToLocalMedia&&!0===this.autoAnswer||o.dataCall||h?o.dataCall?(B.log(\"Datachannel call\"),o.establishCall()):(B.log(\"callWithNumber :: User has already granted access to local media and AutoAnswer activated : establishing call\"),h?((u=apiCC.getUserMediaStream(h)).addCallInfo(o.callId),void 0!==o.callConfiguration&&null!==o.callConfiguration||(o.callConfiguration={}),o.callConfiguration.userMediaStreamId=u.userMediaStreamId,o.onUserMediaSuccessOnCall(u.stream)):o.establishCall()):\"MCU-Callee\"===i.MCUType&&!0===this.userAcceptOnIncomingCallBeforeGetUserMedia?B.log(\"Stand-by :: wait for AcceptCall on recorded 1to1 call\"):o.getUserMediaOnCall(),!0===this.autoAnswer&&this.displayHangUpButtonInCommand()}else this.setStatus(\"Dialed call number is not correct :\"+e+\".you can be reached at this number : \"+this.clientId),B.log(\"Call Number is incorrect\");return l},this.startTestCall=function(e,t){B.info(\"startTestCall : video activated : \"+e);var i,a,n=null,r=null,o={};return this.setStatus(\"Starting test call.\"),(n=new R(this)).generateCallId(),n.instanceId=apiCC.generateInstanceId(),n.callerId=this.clientId,n.calleeId=12345,n.dest_roomId=12345,n.audioOnly=!e,n.remoteId=12345,n.callConfiguration=t,null!=t?(\"VIDEO\"===t.mediaTypeForOutgoingCall||\"AUDIO\"===t.mediaTypeForOutgoingCall||\"VIDEOONLY\"===t.mediaTypeForOutgoingCall||\"NONE\"===t.mediaTypeForOutgoingCall?(B.log(\"Setting mediaTypeForOutgoingCall :\"+t.mediaTypeForOutgoingCall),n.mediaTypeForOutgoingCall=t.mediaTypeForOutgoingCall):B.log(\"mediaTypeForOutgoingCall is not set\"),void 0!==t.mediaRoutingMode&&null!==t.mediaRoutingMode&&n.setCallMediaRoutingMode(t.mediaRoutingMode),void 0!==t.turnServerAddress&&null!==t.turnServerAddress&&n.setCallTurnServer(t.turnServerAddress),!0!==t.preferVP9Codec&&!1!==t.preferVP9Codec||(n.preferVP9Codec=t.preferVP9Codec)):(B.log(\"callConfiguration is not set\"),t={}),n.checkDTLSCompliancy(),a=n.callId,o.pubSub=\"testCallKurentoConnector\",n.data=o,n.data.instanceId=n.instanceId,!0===n.audioOnly&&(n.callType=\"audio\"),i=this.callsTable.push(n),B.log(\"Call Number is :\"+i),!0===this.accessToLocalMedia&&!0===this.autoAnswer||n.dataCall||t.userMediaStreamId||apiCC.userMediaStreamTable.length>0?n.dataCall?(B.log(\"Datachannel call\"),n.establishCall()):(B.log(\"startTestCall :: User has already granted access to local media and AutoAnswer activated : establishing call\"),t.userMediaStreamId?((r=apiCC.getUserMediaStream(t.userMediaStreamId)).addCallInfo(n.callId),void 0!==n.callConfiguration&&null!==n.callConfiguration||(n.callConfiguration={}),n.callConfiguration.userMediaStreamId=r.userMediaStreamId,n.callLocalStream=r.stream,n.establishCall()):apiCC.userMediaStreamTable.length>0?((r=apiCC.userMediaStreamTable[0]).addCallInfo(n.callId),void 0!==n.callConfiguration&&null!==n.callConfiguration||(n.callConfiguration={}),n.callConfiguration.userMediaStreamId=r.userMediaStreamId,n.callLocalStream=r.stream,n.establishCall()):n.establishCall()):n.getUserMediaOnCall(),!0===this.autoAnswer&&this.displayHangUpButtonInCommand(),a},this.extensionInstallationSuccessCallback=function(){B.debug(\"extensionInstallationSuccessCallback\"),apiCC.session.apiCCWebRTCClient.webRTCClient.apiRTCExtensionInstalled=!0},this.extensionInstallationFailureCallback=function(e,t){B.debug(\"extensionInstallationFailureCallback : Error :\"+e+\", \"+t),e=null,t=null,G.createDesktopCaptureEvent(\"Extension_installation_Error\",this.waitingShareScreenCallId,this.waitingShareScreenDestNumber,this.waitingCaptureSourceType),this.setStatus('Inline extension installation is not possible, please install extension using following link: <a href=\"https://chrome.google.com/webstore/detail/apizee-desktop-capture/mjjnofoemoepfididplbfimokpnpcoeg?hl=fr\" target=\"_blank\">ApiRTC desktopCapture extension</a>')},this.manageNotInstalledExtension=function(e,t,i){B.debug(\"manageNotInstalledExtension\"),this.setStatus(\"ApiRTC extension need to be installed to enable screen sharing.<br>You can be reached at this number : \"+this.clientId),B.warn(\"apiRTC extension not installed\"),G.createDesktopCaptureEvent(\"Extension_not_installed\",e,t),B.warn(\"Starting apiRTC extension installation\"),this.waitingShareScreenDestNumber=t,this.waitingShareScreenCallId=e,this.waitingCaptureSourceType=i,chrome.webstore.install(\"https://chrome.google.com/webstore/detail/mjjnofoemoepfididplbfimokpnpcoeg\",this.callback(this,\"extensionInstallationSuccessCallback\"),this.callback(this,\"extensionInstallationFailureCallback\"))},this.shareScreen=function(e,t,i,a,n){B.info(\"shareScreen\");var o=null,s=null,l=null,d=null;if(!0===apiCC.isScreenSharingCompliant())if(\"\"!==e&&e!==this.clientId){if(null!==t&&\"object\"===j(t)||(t={}),\"janusConnector\"===this.MCUClient.pubConnector&&!t.mesh&&n&&n.callControl&&n.callControl.callId&&this.findCallWithCallId(n.callControl.callId))return B.debug(\"call already exists\",n.callControl.callId),n.callControl.callId;if(null!==a&&\"object\"===j(a)||(a={}),null!==a.qos&&\"object\"===j(a.qos)?(t.qos={},\"excellent\"===a.qos.videoMinQuality?t.qos.videoMinQuality=\"excellent\":\"good\"===a.qos.videoMinQuality?t.qos.videoMinQuality=\"good\":\"medium\"===a.qos.videoMinQuality?t.qos.videoMinQuality=\"medium\":(a.qos.videoMinQuality,t.qos.videoMinQuality=\"bad\"),!0===a.qos.videoForbidInactive&&(t.qos.videoForbidInactive=!0)):t.qos={videoMinQuality:\"bad\"},[\"audioLabels\",\"videoLabels\"].forEach((function(e){(0,r.Ym)(a[e],\"array\")&&(t[e]=[],a[e].forEach((function(i){(0,r.Ym)(i,\"string\")&&t[e].push(i)})))})),(0,r.Ym)(a,\"context\",\"object\"))try{JSON.stringify(a.context),t.context=a.context}catch(e){}B.log(\"shareScreen; callConfiguration: \"+JSON.stringify(a)),s=new R(apiCC.session.apiCCWebRTCClient.webRTCClient),void 0!==t.mesh&&void 0!==t.instanceId?(B.debug(\"keeping instanceId \"),s.instanceId=t.instanceId):s.instanceId=apiCC.generateInstanceId(),B.log(\"Calling destination number :\"+e);var c=this.MCUClient.getSessionMCU(e);if(c&&(s.sessionMCU=c),s.sessionMCU&&\"janusConnector\"===this.MCUClient.pubConnector&&!t.mesh?(s.settingUpType=\"shareScreen\",n&&n.callControl?(s.callControl=n.callControl,s.callControl.autoRestart.counter+=1,s.callId=s.callControl.callId,s.restarted=!0):(s.callControl=this.createCallControl({type:\"shareScreen\",roomName:e,callConfiguration:a,data:t}),s.callControl.captureSourceType=i,s.callControl.autoRestart.counter=0,s.generateCallId(),s.callControl.callId=s.callId)):(s.settingUpType=\"shareScreen\",s.generateCallId()),o=s.callId,s.callerId=this.clientId,s.calleeId=e,s.dest_roomId=e,s.audioOnly=!1,s.screenSharing=!0,s.remoteId=e,s.callType=\"screenSharing\",s.captureSourceType=i,s.callConfiguration=a,s.data=t,s.data.instanceId=s.instanceId,null!=a&&void 0!==a.turnServerAddress&&null!==a.turnServerAddress&&s.setCallTurnServer(a.turnServerAddress),s.checkDTLSCompliancy(),apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.push(s),s.sessionMCU&&\"janusConnector\"===this.MCUClient.pubConnector&&s.callControl&&s.callControl.autoRestart.stream)return B.debug(\"shareScreen; autoRestart\"),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,s.callLocalStream=s.callControl.autoRestart.stream,s.establishCall(),s.callId;if(void 0!==t&&void 0!==t.mesh&&null!==(l=apiCC.session.apiCCWebRTCClient.webRTCClient.findUserMediaById(t.mesh.calleeCallId))&&l.callConfiguration&&l.callConfiguration.userMediaStreamId)return(d=apiCC.getUserMediaStream(l.callConfiguration.userMediaStreamId)).addCallInfo(s.callId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,s.sessionMCU&&\"janusConnector\"===apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector&&s.callControl&&(s.callControl.autoRestart.stream=d.stream),s.callConfiguration.userMediaStreamId=d.userMediaStreamId,s.callLocalStream=d.stream,s.establishCall(),s.callId;apiCC.createUserMediaStream({callId:s.callId,type:s.callType,captureSourceType:i,success:function(e){B.debug(\"[shareScreen] success; userMediaStreamId: \"+e.userMediaStreamId),apiCC.session.apiCCWebRTCClient.webRTCClient.accessToLocalMedia=!0,s.sessionMCU&&\"janusConnector\"===apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.pubConnector&&s.callControl&&(s.callControl.autoRestart.stream=e.stream),s.callConfiguration.userMediaStreamId=e.userMediaStreamId,s.callLocalStream=e.stream,s.establishCall()}})}else this.setStatus(\"Dialed call number is not correct :\"+e+\".You can be reached at this number : \"+this.clientId),B.log(\"Call Number is incorrect\");else B.log(\"shareScreen is not supported on this browser\"),G.createDesktopCaptureEvent(\"Browser_Not_Compatible\",o,e);return B.info(\"shareScreen, callId :\",o),o},this.startScreenSharingOnCall=function(e,t){B.info(\"getScreenMedia for callId :\"+e);var i=null;if(\"Chrome\"===n.Xh)if(null!==(i=this.findCallWithCallId(e))){if(!1===this.apiRTCExtensionInstalled)return void this.manageNotInstalledExtension(i.callId,i.remoteId,t);null==t&&(t=[\"screen\",\"window\",\"tab\"]),window.postMessage({command:\"getDesktopId\",callNumber:i.callId,remoteId:i.remoteId,captureSourceType:t,browser_major_version:n.PR},\"*\")}else B.log(\"call not found\");else B.log(\"shareScreen is only available for chrome Browser\"),G.createDesktopCaptureEvent(\"Browser_Not_Compatible\",e,null)},this.toggleVideoScreen=function(e){B.info(\"toggleVideoScreen for callId :\"+e);var t=this.findCallWithCallId(e);null!==t?t.toggleVideoScreen():B.log(\"call not found\")},this.switchVideoToScreen=function(e){B.info(\"switchVideoToScreen for callId :\"+e);var t=this.findCallWithCallId(e);null!==t?t.switchVideoToScreen():B.log(\"call not found\")},this.switchScreenToVideo=function(e){B.info(\"switchScreenToVideo for callId :\"+e);var t=this.findCallWithCallId(e);null!==t?t.switchScreenToVideo():B.log(\"call not found\")},this.addVideoMedia=function(e){B.info(\"webRTCClient::addVideoMedia for callId :\"+e);var t=this.findCallWithCallId(e);null!==t?t.addVideoMedia():B.log(\"call not found\")},this.callbymail=function(t){var i;B.info(\"Click on Call per mail Button\"),i=t,new RegExp(\"^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$\",\"i\").test(i)?(B.log(\"Calling Destination mail :\"+t),this.socket.emit(\"webrtc_invite_permail\",t),e.channel.socket.emit(\"webrtc_invite_permail\",t)):B.log(\"Mail address is not correct :\"+t)},this.callperURL=function(e){B.info(\"Call per URL\");var t,i=null;(i=new R(this)).instanceId=apiCC.generateInstanceId(),B.log(\"Calling Destination number :\"+e),i.generateCallId(),i.callerId=this.clientId,i.calleeId=e,i.dest_roomId=e,i.audioOnly=!1,i.getUserMediaOnCall(),i.remoteId=e,i.checkDTLSCompliancy(),t=this.callsTable.push(i),B.log(\"Call Number is :\"+t)},this.acceptCall=function(e,t){B.info(\"acceptCall for callId :\"+e),B.log(\"acceptCall() - callConfiguration : \",t);var i=null,a=null;if(null!==(i=this.findCallWithCallId(e))){if(B.log(\"acceptCall() - Call found\"),i.isAccepted=!0,null!=t?(\"VIDEO\"===t.mediaTypeForIncomingCall||\"AUDIO\"===t.mediaTypeForIncomingCall||\"VIDEOONLY\"===t.mediaTypeForIncomingCall||\"NONE\"===t.mediaTypeForIncomingCall||\"DATA\"===t.mediaTypeForIncomingCall?(B.log(\"acceptCall() - Setting mediaTypeForIncomingCall :\"+t.mediaTypeForIncomingCall),i.mediaTypeForIncomingCall=t.mediaTypeForIncomingCall):B.log(\"acceptCall() - mediaTypeForIncomingCall is not set\"),void 0!==t.mediaRoutingMode&&null!==t.mediaRoutingMode&&i.setCallMediaRoutingMode(t.mediaRoutingMode),void 0!==t.turnServerAddress&&null!==t.turnServerAddress&&i.setCallTurnServer(t.turnServerAddress),!0!==t.preferVP9Codec&&!1!==t.preferVP9Codec||(i.preferVP9Codec=t.preferVP9Codec)):(B.log(\"acceptCall() - callConfiguration is not set\"),t={}),!0===i.screenSharing&&(B.log(\"acceptCall() for screenSharing : forcing mediaTypeForIncomingCall to NONE\"),t.mediaTypeForIncomingCall=\"NONE\",i.mediaTypeForIncomingCall=\"NONE\"),i.callConfiguration=(0,r.S6)(i.callConfiguration,t),\"VIDEO\"===i.mediaTypeForIncomingCall?i.setLocalCallProfile({audio:!0,audioActive:!0,video:!0,videoActive:!0}):\"AUDIO\"===i.mediaTypeForIncomingCall?i.setLocalCallProfile({audio:!0,audioActive:!0,video:!1,videoActive:!1}):\"VIDEOONLY\"===i.mediaTypeForIncomingCall?i.setLocalCallProfile({audio:!1,audioActive:!1,video:!0,videoActive:!0}):\"NONE\"===i.mediaTypeForIncomingCall&&i.setLocalCallProfile({audio:!1,audioActive:!1,video:!1,videoActive:!1}),i.data&&\"MCU-Callee\"===i.data.MCUType&&\"NONE\"===i.mediaTypeForIncomingCall)return void i.myWebRTC_Stack.sendInvite(i.callId,i.callerId,this.nickname,i.dest_roomId,i.dest_roomId,\"none\",{offer:{type:\"no-offer\"},data:i.data});i.data&&\"MCU-Callee\"===i.data.MCUType&&(i.mediaTypeForOutgoingCall=i.mediaTypeForIncomingCall,i.settingUpType=\"publish\",i.callControl=this.createCallControl({type:\"publish\",callId:i.callId,roomName:i.data.confId,callConfiguration:i.callConfiguration,data:i.data}),i.callControl.sessionId=i.data.confId,i.callControl.token=i.data.confId,i.callControl.autoRestart.counter=0,i.setMediaConstraintsToSendOnlyOffer()),this.unidirectionelCallOnly?(B.log(\"acceptCall() - unidirectional call\"),i.onUserMediaSuccessTestUni()):!0===this.userAcceptOnIncomingCallBeforeGetUserMedia?(B.log(\"acceptCall with userAcceptOnIncomingCallBeforeGetUserMedia\"),t.userMediaStreamId?((a=apiCC.getUserMediaStream(t.userMediaStreamId)).addCallInfo(i.callId),void 0!==i.callConfiguration&&null!==i.callConfiguration||(i.callConfiguration={}),i.callConfiguration.userMediaStreamId=a.userMediaStreamId,i.onUserMediaSuccessOnCall(a.stream)):i.getUserMediaOnCall()):!0===i.accessToMedia||t.userMediaStreamId||i.dataCall?(B.log(\"acceptCall() :: User has already granted access to local media and AutoAnswer activated : establishing call\"),i.dataCall?i.establishCall():t.userMediaStreamId?((a=apiCC.getUserMediaStream(t.userMediaStreamId)).addCallInfo(i.callId),void 0!==i.callConfiguration&&null!==i.callConfiguration||(i.callConfiguration={}),i.callConfiguration.userMediaStreamId=a.userMediaStreamId,i.callLocalStream=a.stream,i.establishCall()):i.establishCall()):B.log(\"acceptCall() - call will be established when user accept his media\")}else B.log(\"Call not found\")},this.refuseCall=function(e,t){B.info(\"refuseCall for callId :\"+e);var i,a=null;i=void 0!==t?t:\"User_Refused_Call\",null!==(a=this.findCallWithCallId(e))?(B.log(\"Call found\"),\"MCU-Callee\"===a.data.MCUType?(a.myWebRTC_Stack.sendBye(a.callId,a.callerId,a.dest_roomId,a.calleeId,\"User_Media_Error\",a.data),this.removeCallFromTableWithCallIdandRemoteId(a.callId,a.calleeId,i)):(a.myWebRTC_Stack.sendBye(a.callId,a.calleeId,a.dest_roomId,a.callerId,i,a.data),this.removeCallFromTableWithCallIdandRemoteId(a.callId,a.callerId,i)),0===this.callsTable.length&&(B.log(\"No more established calls for client\"),this.initMediaElementState())):B.log(\"Call not found\")},this.stopMedia=function(e){var t=this;return new Promise((function(i,a){var n=null,o=null;return(n=t.findCallWithCallId(e))?n.callLocalStream?void n.removeStream(n.callLocalStream).then((function(){return n.callLocalStream=null,(0,r.ki)(n.callConfiguration,\"userMediaStreamId\",\"string\")&&(apiCC.releaseUserMediaStream(n.callConfiguration.userMediaStreamId,n.callId),delete n.callConfiguration.userMediaStreamId),i()})).catch(a):i():((o=t.findUserMediaById(e))&&o.releaseUserMediaStream(),i())}))},this.addMedia=function(e,t,i,a){var n=this;B.info(\"addMedia for callId :\"+e);var o=null,s=null,l=null,d=function(){return Promise.resolve()},c=function(){return Promise.resolve()};!0===t&&(d=function(){return n.stopMedia(e)}),(0,r.Ym)(i,\"string\")&&(l=apiCC.getUserMediaStream(i),i=null);var u=function(e){void 0!==e.callConfiguration&&null!==e.callConfiguration||(e.callConfiguration={}),e.isLocalAudioMuted&&e.isLocalVideoMuted?e.callConfiguration.muted=\"VIDEO\":e.isLocalAudioMuted?e.callConfiguration.muted=\"AUDIOONLY\":e.isLocalVideoMuted&&(e.callConfiguration.muted=\"VIDEOONLY\")},h=function(e,t,i){\"audio\"===t?i?e.audioSdpDirection=null:(0,r.ki)(e.remoteCallProfile,\"audio\",\"boolean\")&&!0===e.remoteCallProfile.audio&&!0===e.remoteCallProfile.audioActive?e.audioSdpDirection=\"recvonly\":e.audioSdpDirection=\"inactive\":\"video\"===t&&(i?e.videoSdpDirection=null:(0,r.ki)(e.remoteCallProfile,\"video\",\"boolean\")&&!0===e.remoteCallProfile.video&&!0===e.remoteCallProfile.videoActive?e.videoSdpDirection=\"recvonly\":e.videoSdpDirection=\"inactive\")},p=function(e,t,i,a){void 0!==e.callConfiguration&&null!==e.callConfiguration||(e.callConfiguration={}),e.callConfiguration.userMediaStreamId=t.userMediaStreamId,h(e,\"audio\",t.audio),h(e,\"video\",t.video),u(e),function(e,t,i){t&&i?(e.audioOnly=!1,e.mediaTypeForIncomingCall=\"VIDEO\",e.mediaTypeForOutgoingCall=\"VIDEO\"):t?(e.audioOnly=!1,e.mediaTypeForIncomingCall=\"AUDIO\",e.mediaTypeForOutgoingCall=\"AUDIO\"):i?(e.audioOnly=!1,e.mediaTypeForIncomingCall=\"VIDEOONLY\",e.mediaTypeForOutgoingCall=\"VIDEOONLY\"):(e.audioOnly=!1,e.mediaTypeForIncomingCall=\"NONE\",e.mediaTypeForOutgoingCall=\"NONE\")}(e,t.audio,t.video),e.callLocalStream=t.stream,e.started?e.addingUserMedia=!0:n.accessToLocalMedia=!0,e.asyncCallbacks={},e.asyncCallbacks.type=\"addingUserMedia\",e.asyncCallbacks.resolve=i,e.asyncCallbacks.reject=a,e.asyncCallbacks.timeoutId=setTimeout((function(){e.asyncCallbacks&&\"function\"==typeof e.asyncCallbacks.reject&&(e.asyncCallbacks.reject(\"addMedia timeout\"),delete e.asyncCallbacks)}),q),e.establishCall()};if(null!==(o=this.findCallWithCallId(e))){if(o.asyncCallbacks)return Promise.reject(\"job already ongoing\");c=function(){return new Promise((function(e,t){l?(l.addCallInfo(o.callId),p(o,l,e,t)):i?apiCC.createUserMediaStream({type:\"media\",callId:o.callId,stream:i,sync:!0,success:function(i){B.debug(\"[addMedia] success; userMediaStreamId: \"+i.userMediaStreamId),p(o,i,e,t)},failure:function(e,i){return t(i)}}):(0,r.ki)(a,\"getUserMediaStreamId\",\"function\")?a.getUserMediaStreamId().then((function(i){if(!(l=apiCC.getUserMediaStream(i)))return t(\"wrong userMediaStreamId\");l.addCallInfo(o.callId),p(o,l,e,t)})).catch(t):apiCC.userMediaStreamTable.length>0?((l=apiCC.userMediaStreamTable[0]).addCallInfo(o.callId),p(o,l,e,t)):(u(o),o.addingUserMedia=!0,o.asyncCallbacks={},o.asyncCallbacks.type=\"addingUserMedia\",o.asyncCallbacks.resolve=e,o.asyncCallbacks.reject=t,o.asyncCallbacks.timeoutId=setTimeout((function(){o.asyncCallbacks&&\"function\"==typeof o.asyncCallbacks.reject&&(o.asyncCallbacks.reject(\"addMedia timeout\"),delete o.asyncCallbacks)}),q),o.getUserMediaOnCall())}))}}else if(s=this.findUserMediaById(e)){if(!0===s.addingUserMedia)return Promise.reject(\"addMedia already ongoing\");c=function(){return new Promise((function(t,n){s.addingUserMedia=!0,new Promise((function(e,t){if(l)return l.addCallInfo(s.userMediaId,\"userMedia\"),void 0!==s.callConfiguration&&null!==s.callConfiguration||(s.callConfiguration={}),s.callConfiguration.userMediaStreamId=l.userMediaStreamId,s.callType=l.callType,s.audio=l.audio,s.video=l.video,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(s,!0),e(l.userMediaStreamId);if(i)apiCC.createUserMediaStream({callId:s.userMediaId,callFlavor:\"userMedia\",type:s.callType,stream:i,sync:!0,success:function(t){return B.debug(\"[addMedia] success; userMediaStreamId: \"+t.userMediaStreamId),void 0!==s.callConfiguration&&null!==s.callConfiguration||(s.callConfiguration={}),s.callConfiguration.userMediaStreamId=t.userMediaStreamId,s.callType=t.callType,s.audio=t.audio,s.video=t.video,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(s,!0),e(t.userMediaStreamId)},failure:function(e,i){return t(i)}});else if((0,r.ki)(a,\"getUserMediaStreamId\",\"function\"))a.getUserMediaStreamId().then((function(i){return(l=apiCC.getUserMediaStream(i))?(l.addCallInfo(s.userMediaId,\"userMedia\"),void 0!==s.callConfiguration&&null!==s.callConfiguration||(s.callConfiguration={}),s.callConfiguration.userMediaStreamId=l.userMediaStreamId,s.callType=l.callType,s.audio=l.audio,s.video=l.video,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(s,!0),e(l.userMediaStreamId)):t(\"wrong userMediaStreamId\")})).catch(t);else{if(apiCC.userMediaStreamTable.length>0)return(l=apiCC.userMediaStreamTable[0]).addCallInfo(s.userMediaId,\"userMedia\"),void 0!==s.callConfiguration&&null!==s.callConfiguration||(s.callConfiguration={}),s.callConfiguration.userMediaStreamId=l.userMediaStreamId,s.callType=l.callType,s.audio=l.audio,s.video=l.video,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(s,!0),e(l.userMediaStreamId);apiCC.createUserMediaStream({callId:s.userMediaId,callFlavor:\"userMedia\",type:s.callType,audioSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.audioSourceId,videoSourceId:apiCC.session.apiCCWebRTCClient.webRTCClient.videoSourceId,success:function(t){return B.debug(\"[addMedia] success; userMediaStreamId: \"+t.userMediaStreamId),void 0!==s.callConfiguration&&null!==s.callConfiguration||(s.callConfiguration={}),s.callConfiguration.userMediaStreamId=t.userMediaStreamId,s.callType=t.callType,s.audio=t.audio,s.video=t.video,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshOnUserMediaSuccess(s,!0),e(t.userMediaStreamId)},failure:function(e,i){return t(i)}})}})).then((function(t){return function(t){return new Promise((function(i,a){for(var n=[],r=0;r<apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length;r+=1){var o=apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable[r];void 0!==o.data&&void 0!==o.data.mesh&&o.data.mesh.calleeCallId===e&&n.push(apiCC.session.apiCCWebRTCClient.webRTCClient.addMedia(o.callId,!0,t))}Promise.all(n).then((function(){return i(t)})).catch(a)}))}(t)})).then((function(e){return delete s.addingUserMedia,t(e)})).catch((function(e){return delete s.addingUserMedia,n(e)}))}))}}else c=function(){return Promise.reject(\"no suitable replacement\")};return new Promise((function(e,t){d().then((function(){return c()})).then((function(t){return B.info(\"addMedia success; userMediaStreamId: \"+t),e(t)})).catch((function(e){B.error(\"addMedia failure: \"+e);var i=null,a=null;return o?(o.callControl&&(i=o.callControl.roomName,a=o.callControl.type),G.createErrorEvent(\"Failed to addMedia\",\"MEDIA_UPDATE_ERROR\",o.callId,i,a)):s&&G.createErrorEvent(\"Failed to addMedia\",\"MEDIA_UPDATE_ERROR\",s.userMediaId,null,\"publish\"),t(e)}))}))},this.updateMediaDeviceOnCall=function(e,t){return B.info(\"updateMediaDeviceOnCall for callId :\"+e),this.addMedia(e,!0,t),e},this.updateMediaTypeOnCall=function(e,t){var i=function(e,t,i){return new Promise((function(a,n){var o,s={};e.callControl.mediaType=i,e.mediaType=i,e.data.mediaType=i,e.updateCause=\"userAction\",s.type=\"update\",s.mode=\"passive\",s.callId=e.callId,s.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,s.callerNickname=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,s.calleeId=e.sessionMCU.roomName,s.roomId=e.sessionMCU.roomName,s.callType=t.attributes.callType,s.data=(0,r.S6)(e.data),s.data.type=\"subscribe\",s.stream=t,o=JSON.stringify(s),B.log(\"C->S: \"+o),apiCC.session.apiCCWebRTCClient.webRTCClient.socket.emit(\"update\",o),e.asyncCallbacks={},e.asyncCallbacks.type=\"updateMediaType\",e.asyncCallbacks.resolve=a,e.asyncCallbacks.reject=n,e.asyncCallbacks.timeoutId=setTimeout((function(){e.asyncCallbacks&&\"function\"==typeof e.asyncCallbacks.reject&&(e.asyncCallbacks.reject(\"timeout\"),delete e.asyncCallbacks)}),2e4)}))},a=this.findCallWithCallId(e);if(!a)return Promise.reject(\"call not found\");if(\"subscribe\"!==a.settingUpType)return Promise.reject(\"wrong call type\");if(a.asyncCallbacks)return Promise.reject(\"job already ongoing\");var n=this.MCUClient.getStreamFromList(a.streamId);if(!n)return Promise.reject(\"wrong streamId\");if(\"VIDEO\"===a.callControl.mediaType){if(\"AUDIOONLY\"===t&&n.audio)return i(a,n,t);if(\"VIDEOONLY\"===t&&n.video)return i(a,n,t)}else if(\"AUDIOONLY\"===a.callControl.mediaType){if(\"VIDEO\"===t&&n.video)return i(a,n,t);if(\"VIDEOONLY\"===t&&n.video)return i(a,n,t)}else if(\"VIDEOONLY\"===a.callControl.mediaType){if(\"VIDEO\"===t&&n.video)return i(a,n,t);if(\"AUDIOONLY\"===t&&n.audio)return i(a,n,t)}return Promise.reject(\"wrong mediaType\")},this.updateSimulcastFeedOnCall=function(e,t){var i=this.findCallWithCallId(e);if(!i)return Promise.reject(\"call not found\");if(\"subscribe\"!==i.settingUpType)return Promise.reject(\"wrong call type\");if(i.asyncCallbacks)return Promise.reject(\"job already ongoing\");var a=this.MCUClient.getStreamFromList(i.streamId);if(!a)return Promise.reject(\"wrong streamId\");if(!t)return Promise.reject(\"wrong simulcast\");i.callControl.callConfiguration.simulcast||(i.callControl.callConfiguration.simulcast={}),i.data.simulcast||(i.data.simulcast={}),t.streamQuality&&(\"high\"===t.streamQuality?(i.callControl.callConfiguration.simulcast.substream=2,i.data.simulcast.substream=2):\"medium\"===t.streamQuality?(i.callControl.callConfiguration.simulcast.substream=1,i.data.simulcast.substream=1):\"low\"===t.streamQuality?(i.callControl.callConfiguration.simulcast.substream=0,i.data.simulcast.substream=0):(i.callControl.callConfiguration.simulcast.substream=-1,i.data.simulcast.substream=-1)),t.streamFrameRate&&(\"high\"===t.streamFrameRate?(i.callControl.callConfiguration.simulcast.temporal=2,i.data.simulcast.temporal=2):\"medium\"===t.streamFrameRate?(i.callControl.callConfiguration.simulcast.temporal=1,i.data.simulcast.temporal=1):\"low\"===t.streamFrameRate?(i.callControl.callConfiguration.simulcast.temporal=0,i.data.simulcast.temporal=0):(i.callControl.callConfiguration.simulcast.temporal=-1,i.data.simulcast.temporal=-1));var n={type:\"updateSimulcastFeed\"};n.callId=i.callId,n.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,n.callerNickname=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,n.calleeId=i.sessionMCU.roomName,n.roomId=i.sessionMCU.roomName,n.callType=a.attributes.callType,n.data=(0,r.S6)(i.data),n.stream=a;var o=JSON.stringify(n);return B.log(\"C->S: \"+o),apiCC.session.apiCCWebRTCClient.webRTCClient.socket.emit(\"updateSimulcastFeed\",o),Promise.resolve()},this.updateCallConfigurationOnCall=function(e,t){var i=function(e,t,i){\"audio\"===t?e.audioSdpDirection=i?null:\"inactive\":\"video\"===t&&(e.videoSdpDirection=i?null:\"inactive\")},a=this.findCallWithCallId(e);return a?\"publish\"!==a.settingUpType?Promise.reject(\"wrong call type\"):a.asyncCallbacks?Promise.reject(\"job already ongoing\"):((0,r.Ym)(t,\"object\")||(t={}),(0,r.ki)(t,\"audioOnly\",\"boolean\")||(t.audioOnly=!1),(0,r.ki)(t,\"videoOnly\",\"boolean\")||(t.videoOnly=!1),function(e,t){return new Promise((function(a,n){e.mediaTypeForIncomingCall=\"NONE\",!0===t.audioOnly?(B.log(\"Setting call as audioOnly\"),e.audioOnly=!0,e.callType=\"audio\",e.mediaTypeForOutgoingCall=\"AUDIO\",i(e,\"audio\",!0),i(e,\"video\",!1)):!0===t.videoOnly?(B.log(\"Setting call as videoOnly\"),e.audioOnly=!1,e.callType=\"videoOnly\",e.mediaTypeForOutgoingCall=\"VIDEOONLY\",i(e,\"audio\",!1),i(e,\"video\",!0)):(B.log(\"Setting call as media\"),e.audioOnly=!1,e.callType=\"media\",e.mediaTypeForOutgoingCall=\"VIDEO\",i(e,\"audio\",!0),i(e,\"video\",!0)),e.updateUserMedia=!0,e.updateCause=\"userAction\",e.establishCall(),e.asyncCallbacks={},e.asyncCallbacks.type=\"updateCallConfiguration\",e.asyncCallbacks.resolve=a,e.asyncCallbacks.reject=n,e.asyncCallbacks.timeoutId=setTimeout((function(){e.asyncCallbacks&&\"function\"==typeof e.asyncCallbacks.reject&&(e.asyncCallbacks.reject(\"timeout\"),delete e.asyncCallbacks)}),2e4)}))}(a,t)):Promise.reject(\"call not found\")},this.findUserMediaById=function(e){for(var t=this.userMediaTable.length;--t>=0;)if(this.userMediaTable[t].userMediaId===e)return this.userMediaTable[t];return null},this.findCallIndexWithCallIdAndRemoteId=function(e,t){B.debug(\"findCallIndexWithCallIdAndRemoteId\");var i,a=this.callsTable.length;for(B.trace(\"callsNumber : \"+a),i=0;i<a;i+=1)if(this.callsTable[i].callId===e&&(B.log(\"callId found\"),B.log(\"this.callsTable[i].callee :\"+this.callsTable[i].callee),B.log(\"this.callsTable[i].calleeId :\"+this.callsTable[i].calleeId),!0===this.callsTable[i].callee&&this.callsTable[i].callerId===t||!1===this.callsTable[i].callee&&this.callsTable[i].calleeId===t))return i;return B.log(\"Call not found\"),-1},this.findCallIndexWithConfIdAndRemoteId=function(e,t){B.debug(\"findCallIndexWithConfIdAndRemoteId\"),B.log(\"confId :\"+e),B.log(\"remoteId :\"+t);var i,a=this.callsTable.length;for(i=0;i<a;i+=1)if(B.log(\"this.callsTable[i].data.confId :\"+this.callsTable[i].data.confId),this.callsTable[i].data.confId===e){if(!0===this.callsTable[i].callee&&this.callsTable[i].callerId===t||!1===this.callsTable[i].callee&&this.callsTable[i].calleeId===t)return i}else B.debug(\"ConfId is different\");return B.debug(\"Call not found - findCallIndexWithConfIdAndRemoteId\"),-1},this.findCallIndexWithCallId=function(e){B.debug(\"findCallIndexWithCallId\");var t,i=this.callsTable.length;for(t=0;t<i;t+=1)if(this.callsTable[t].callId===e)return B.log(\"Call found with callId\"),t;return B.debug(\"Call not found - findCallIndexWithCallId\"),-1},this.findCallWithCallIdAndInstanceId=function(e,t){B.debug(\"findCallWithCallIdAndInstanceId :\"+e+\" ,instanceId : \"+t),void 0===t&&B.debug(\"instanceId is undefined : must be a mesh publish call, id must be a streamId\");var i,a=this.callsTable.length;for(B.trace(\"callsNumber :\"+a),i=0;i<a;i+=1)if(this.callsTable[i].callId===e&&this.callsTable[i].instanceId===t)return this.callsTable[i];return B.debug(\"Call not found, findCallWithCallIdAndInstanceId\"),null},this.findCallIndexWithCallIdAndInstanceId=function(e,t){B.debug(\"findCallIndexWithCallIdAndInstanceId :\"+e+\" ,instanceId : \"+t),void 0===t&&B.debug(\"instanceId is undefined : must be a mesh publish call, id must be a streamId\");var i,a=this.callsTable.length;for(B.trace(\"callsNumber :\"+a),i=0;i<a;i+=1)if(this.callsTable[i].callId===e&&this.callsTable[i].instanceId===t)return i;return B.debug(\"Call not found, findCallIndexWithCallIdAndInstanceId\"),-1},this.findCallWithCallId=function(e){B.trace(\"findCallWithCallId :\"+e);var t,i=this.callsTable.length;for(B.trace(\"callsNumber :\"+i),t=0;t<i;t+=1)if(B.trace(\"this.callsTable[i].callId :\"+this.callsTable[t].callId),this.callsTable[t].callId===e)return this.callsTable[t];return B.debug(\"Call not found\"),null},this.findCallWithStreamId=function(e,t){B.debug(\"findCallWithStreamId :\"+e);var i,a=!(!t||!t.ignoreModeChangeKindOld),n=this.callsTable.length;for(B.trace(\"callsNumber :\"+n),i=0;i<n;i+=1)if(B.log(\"this.callsTable[i].streamId :\"+this.callsTable[i].streamId),!(this.callsTable[i].streamId!=e||a&&this.callsTable[i].sessionMCU&&\"old\"===this.callsTable[i].sessionMCU.modeChangeKind))return B.log(\"Call found\"),this.callsTable[i];return B.log(\"Call not found\"),null},this.findCallWithCallIdAndRemoteIdAndInstanceId=function(e,t,i){B.debug(\"findCallWithCallIdAndRemoteIdAndInstanceId callId : \"+e+\" ,instanceId : \"+i);var a,n=this.callsTable.length;for(B.trace(\"callsNumber :\"+n),a=0;a<n;a+=1)if(this.callsTable[a].callId===e&&this.callsTable[a].instanceId===i&&(!0===this.callsTable[a].callee&&this.callsTable[a].callerId===t||!1===this.callsTable[a].callee&&this.callsTable[a].calleeId===t))return this.callsTable[a];return B.debug(\"Call not found\"),null},this.findCallWithCallIdAndRemoteId=function(e,t){B.log(\"findCallWithCallIdAndRemoteId\");var i,a=this.callsTable.length;for(B.trace(\"callsNumber :\"+a),i=0;i<a;i+=1)if(this.callsTable[i].callId===e&&(!0===this.callsTable[i].callee&&this.callsTable[i].callerId===t||!1===this.callsTable[i].callee&&this.callsTable[i].calleeId===t))return this.callsTable[i];return B.log(\"Call not found\"),null},this.remoteVideoDisplayManager=function(){B.debug(\"remoteVideoDisplayManager\");var e,t=[],i=0,a=0,n=0,r=0,o=0,s=0,l=0;for(this.remoteVideo&&(0===this.maxWidthRemoteVideo&&(this.maxWidthRemoteVideo=this.remoteVideo.clientWidth),0===this.maxHeightRemoteVideo&&(this.maxHeightRemoteVideo=this.remoteVideo.clientHeight),i=(t=this.remoteVideo.children).length,a=this.maxWidthRemoteVideo,n=this.maxHeightRemoteVideo,B.log(\"maxWidth\"+a),B.log(\"maxHeight\"+n),r=this.remoteVideo.clientWidth),r>a&&(r=a),(o=3/4*(r/=i))>n&&(r=4/3*(o=n)),s=r/a*100,l=o/n*100,s+=\"%\",l+=\"%\",B.log(\"widthinPercent\"+s),B.log(\"heightinPercent\"+l),e=0;e<i;e+=1)t[e].style.cssText=\"width:\"+s+\";height:\"+l+\";\"},this.removeRemoteVideoDisplay=function(e){B.debug(\"removeRemoteVideoDisplay with callId =\"+e);var t,i=\"callId_\"+e,a=[],n=0;for(this.remoteVideo&&(n=(a=this.remoteVideo.children).length),t=0;t<n;t+=1)if(a[t].id===i)return this.remoteVideo.removeChild(a[t]),void B.log(\"VideoDisplay removed for \"+i);this.remoteVideoDisplayManager()},this.setStatus=function(e){null!==this.statusDiv?this.statusDiv.innerHTML=e:B.log(\"Status Div Null\")},this.displayCallButtonInCommand=function(){null!==this.commandDiv&&(this.commandDiv.innerHTML='<form name=\"form1\" action=\"\"><input type=\"texte\" name=\"mail\" value=\"\" placeholder=\"Enter Destination number...\"><a href=\"#\" onClick = \"apiCC.session.apiCCWebRTCClient.call(document.forms.form1.mail.value);\"><img src=\"http://www.apizee.com/Demo/images/Call.png\" height=\"30px\"></a></input></form>')},this.displayHangUpButtonInCommand=function(){B.debug(\"displayHangUpButtonInCommand\"),null!==this.commandDiv&&(this.commandDiv.innerHTML='<a href=\"#\" onClick = \"apiCC.session.apiCCWebRTCClient.toggleAudioMute()\"> <img src=\"http://www.apizee.com/Demo/images/Microphone.png\" height=\"30px\" disabled=\"true\"></a><a href=\"#\" onClick = \"apiCC.session.apiCCWebRTCClient.toggleVideoMute();\"> <img src=\"http://www.apizee.com/Demo/images/Camera2.png\" height=\"30px\" disabled=\"true\"></a><a href=\"#\" onClick = \"apiCC.session.apiCCWebRTCClient.hangUp()\"> <img src=\"http://www.apizee.com/Demo/images/Hangup.png\" height=\"30px\" disabled=\"true\"> </a>')},this.checkURLForCallDestination=function(){var e=0;return\"room\"===location.search.substring(1,5)&&(B.log(\"Call establishment using URL\"),e=location.search.substring(6),B.log(\"Destination call number is :\"+e)),e},this.releaseUserMedia=function(){B.info(\"releaseUserMedia\"),null!==this.localStream&&(B.log(\"stopping localStream\"),this.stopStream(this.localStream),G.createUserMediaStopEvent(null,\"media\"),this.accessToLocalMedia=!1,this.autoAnswer=!1,B.log(\"this.autoAnswer :\"+this.autoAnswer)),null!==this.screenStream&&void 0!==this.screenStream&&(B.log(\"stopping screenStream\"),this.stopStream(this.screenStream),G.createUserMediaStopEvent(null,\"screen\"))},this.startDataChannelOnCall=function(e){B.info(\"startDataChannelOnCall with callId :\"+e);var t=this.findCallWithCallId(e);t?(B.log(\"Call found\",t),t.addingDataChannelOnCallOngoing=!0,t.createDataChannel()):B.log(\"Call not found\")},this.sendDataWithCallId=function(e,t,i){B.info(\"sendDataWithCallId :\"+e);var a=this.findCallWithCallId(e);a?(B.log(\"Call found\",a),a.sendData(t,i)):B.log(\"Call not found\")},this.processDataAck=function(e){B.debug(\"processDataAck\",e);var t=this.findCallWithCallId(e.callId);if(t)if(\"ok\"===e.result)if((0,r.ki)(e,\"capabilities\",\"object\")&&(0,r.ki)(e.capabilities,\"dataEndAckEnabled\",\"boolean\")&&(t.dataEndAckEnabled=e.capabilities.dataEndAckEnabled,B.debug(\"dataEndAckEnabled\",t.dataEndAckEnabled)),\"complete\"===e.state)t.beginTimeoutId&&(clearTimeout(t.beginTimeoutId),delete t.beginTimeoutId),t.callbacks.success({state:\"complete\",filename:t.data.filename,size:t.data.size,mediaURL:e.mediaURL,mediaId:e.mediaId}),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(t.callId);else if(\"incomplete\"===e.state){var i,a,n=1<<17,o=[],s=Math.floor(t.data.size/n),l=t.data.size%n;for(i=0;i<s;i+=1)(a=F(\"checksum64\")).update(t.fileContent,i*n,n),o.push(a.digest(\"hex\"));if(l>0&&((a=F(\"checksum64\")).update(t.fileContent,s*n,l),o.push(a.digest(\"hex\"))),B.debug(JSON.stringify(o)),e.checksums.length===o.length){for(i=0;i<o.length&&e.checksums[i]===o[i];i+=1);t.data.offset=n*i}t.mediaURL=e.mediaURL,t.mediaId=e.mediaId,t.establishCall()}else\"missing\"===e.state?(t.mediaURL=e.mediaURL,t.mediaId=e.mediaId,t.establishCall()):\"ready\"===e.state?t.establishCall():(B.debug(\"wrong state \"+e.state),t.beginTimeoutId&&(clearTimeout(t.beginTimeoutId),delete t.beginTimeoutId),t.callbacks.failure(\"serverError\"),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(t.callId));else B.debug(\"wrong result \"+e.result),t.beginTimeoutId&&(clearTimeout(t.beginTimeoutId),delete t.beginTimeoutId),t.callbacks.failure(\"serverError\"),apiCC.session.apiCCWebRTCClient.webRTCClient.onHangup(t.callId);else B.debug(\"no such call\",e.callId)},this.processDataEndAck=function(e){B.debug(\"processDataEndAck\",e);var t=this.findCallWithCallId(e.callId);if(t){var i=null;if(!t.dcfs){if(!t.data||\"pipeline\"!==t.data.transferType)return void B.debug(\"not pipeline\");B.debug(\"pipeline\"),i=t,t.clientCall?(B.debug(\"resolve client call\"),t=t.clientCall):(B.debug(\"no client call\"),t=null)}t&&(t.success&&e.data&&(t.success.data=e.data),\"ok\"===e.result?(!0===e.complete||(delete t.success,t.failure=\"transferIncomplete\"),t.dcfs.terminateTransfer()):\"error\"===e.result&&(delete t.success,t.failure=e.errorInfo,t.dcfs.terminateTransfer())),i&&\"error\"===e.result&&(B.debug(\"error on pipeline\"),i.failure=e.errorInfo,G.createEvent({eventType:\"onFileSended\",callId:i.callId,remoteId:i.remoteId,name:i.filename,error:i.failure}),i.callbacks.failure(i.failure),this.onHangup(i.callId))}else B.debug(\"no such call\",e.callId)},this.pushData=function(e,t,i,a){var n=this;if(!(0,r.Ym)(t,\"object\"))return null;if((t=Object.assign({},t)).transferType||(t.transferType=\"file\"),\"file\"===t.transferType&&!e)return null;if(\"file\"!==t.transferType&&\"pipeline\"!==t.transferType&&\"plugin\"!==t.transferType)return null;if(!(\"plugin\"!==t.transferType||t.pluginName&&t.pluginData))return null;(0,r.Ym)(a,\"object\")||(a={}),\"function\"!=typeof a.pending&&(a.pending=function(){}),\"function\"!=typeof a.progress&&(a.progress=function(){}),\"function\"!=typeof a.success&&(a.success=function(){}),\"function\"!=typeof a.failure&&(a.failure=function(){});var o=new R(apiCC.session.apiCCWebRTCClient.webRTCClient);if(o.generateCallId(),o.instanceId=apiCC.generateInstanceId(),o.callerId=apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,o.calleeId=\"dataChannelConnector\",o.dest_roomId=\"dataChannelConnector\",o.callType=\"data\",o.dataCall=!0,o.remoteId=\"dataChannelConnector\",t.pipelineCallId&&(o.pipelineCallId=t.pipelineCallId),o.data={},o.data.pubSub=\"dataChannelConnector\",o.data.transferType=t.transferType,\"pipeline\"===t.transferType?(t.checksumEnabled=!1,o.transferCount=0):\"plugin\"===t.transferType&&(t.checksumEnabled=!1,o.data.pluginName=t.pluginName,o.data.pluginData=Object.assign({},t.pluginData),o.data.pluginData.headers&&(o.data.pluginData.headers=Object.assign({},o.data.pluginData.headers)),o.data.pluginData.data&&(o.data.pluginData.data=Object.assign({},o.data.pluginData.data)),o.data.pluginData.formData&&(o.data.pluginData.formData=Object.assign({},o.data.pluginData.formData))),(0,r.ki)(t,\"context\",\"object\"))try{JSON.stringify(t.context),o.data.context=Object.assign({},t.context)}catch(e){}if(!0===t.overwrite&&(o.data.overwrite=!0),(0,r.Ym)(t,\"ttl\",\"number\")&&t.ttl>0&&(o.data.ttl=t.ttl),o.data.instanceId=o.instanceId,e&&(o.data.cloudConvId=e),o.callbacks=a,null!=i&&void 0!==i.turnServerAddress&&null!==i.turnServerAddress&&o.setCallTurnServer(i.turnServerAddress),\"pipeline\"===o.data.transferType)o.data.size=0,o.pushDataStatus={type:\"pipeline\",state:\"pending\",data:t},this.callsTable.push(o),setTimeout((function(){n.startNextPushData()}));else if((0,r.Ym)(t,\"file\",\"object\")&&(t.file instanceof File||t.file.constructor===File||!0===t.asFile))(0,r.Ym)(t,\"filename\",\"string\")?o.data.filename=t.filename:o.data.filename=t.file.name,(0,r.Ym)(t,\"filetype\",\"string\")?o.data.contentType=t.filetype:o.data.contentType=t.file.type,(0,r.Ym)(t,\"sourceType\",\"string\")&&t.sourceType.length>0&&(o.data.sourceType=t.sourceType),o.data.size=t.file.size,o.data.metadata=t.metadata,o.pushDataStatus={type:\"file\",state:\"pending\",convId:String(e),data:t},this.callsTable.push(o),setTimeout((function(){n.startNextPushData()}));else{if(!(0,r.Ym)(t,\"buffer\",\"object\")||!(t.buffer instanceof ArrayBuffer||t.buffer.constructor===ArrayBuffer||!0===t.asBuffer))return null;if(!(0,r.Ym)(t,\"filename\",\"string\")||!(0,r.Ym)(t,\"filetype\",\"string\"))return null;o.data.filename=t.filename,o.data.contentType=t.filetype,(0,r.Ym)(t,\"sourceType\",\"string\")&&t.sourceType.length>0&&(o.data.sourceType=t.sourceType),o.data.size=t.buffer.byteLength,o.data.metadata=t.metadata,o.pushDataStatus={type:\"buffer\",state:\"pending\",convId:String(e),data:t},this.callsTable.push(o),setTimeout((function(){n.startNextPushData()}))}return o.callId},this.startNextPushData=function(){for(var e=this,t=[],i=0;i<this.callsTable.length;i+=1){var a=this.callsTable[i];if(\"data\"===a.callType&&a.dataCall&&\"dataChannelConnector\"===a.remoteId&&a.pushDataStatus){if(\"ready\"===a.pushDataStatus.state)continue;t.push(a)}}if(0===t.length)return!1;var n=null;\"active\"===t[0].pushDataStatus.state?t.splice(0,1):\"pending\"===t[0].pushDataStatus.state&&(n=t[0],t.splice(0,1));for(var r=0;r<t.length;r+=1){var o=t[r];o.pushDataStatus.rank!==r&&(o.pushDataStatus.rank=r,G.createEvent({eventType:\"onFilePending\",callId:o.callId,remoteId:o.remoteId,name:o.data.filename,rank:r}),o.callbacks.pending({state:\"pending\",callId:o.callId,rank:r}))}if(!n)return!1;B.debug(\"startNextPushData\",n.callId);var s=n.pushDataStatus.data;if(delete n.pushDataStatus.data,\"pipeline\"===n.pushDataStatus.type){n.pushDataStatus.state=\"active\";var l={type:\"pushData\",callerId:apiCC.session.apiCCId,callId:n.callId,data:n.data},d=JSON.stringify(l);return B.debug(\"C->S: \"+d),apiCC.session.channel.socket.emit(\"pushData\",d),!0}if(\"file\"===n.pushDataStatus.type){n.pushDataStatus.state=\"active\";var c=new FileReader;c.onload=function(e){apiCC.session.apiCCWebRTCClient.webRTCClient.startPushData(n,s,e.target.result)},c.readAsArrayBuffer(s.file)}else{if(\"buffer\"!==n.pushDataStatus.type)return B.error(\"startNextPushData - wrong type\"),n.callbacks.failure(\"start\",n.callId),this.onHangup(n.callId),!1;n.pushDataStatus.state=\"active\",this.startPushData(n,s,s.buffer)}return n.beginTimeoutId=setTimeout((function(){delete n.beginTimeoutId,n.callbacks.failure(\"timeout\",n.callId),e.onHangup(n.callId)}),2e4),!0},this.startPushData=function(e,t,i){if(e.fileContent=new Uint8Array(i),e.pipelineCallId){var a=this.findCallWithCallId(e.pipelineCallId);if(!a)return B.error(\"no such pipeline call\"),void this.onHangup(e.callId);e.pipelineCall=a,a.clientCall=e,e.sendDataChannel=a.sendDataChannel;var n=0===a.transferCount?100:0;e.startTransfer({delay:n}),a.transferCount+=1}else{if(!Object.prototype.hasOwnProperty.call(t,\"checksumEnabled\")||t.checksumEnabled){var r=F(\"checksum64\");r.update(e.fileContent),e.data.checksum=r.digest(\"hex\")}else e.data.checksumEnabled=!1;var o={type:\"pushData\",callerId:apiCC.session.apiCCId,convId:e.pushDataStatus.convId,callId:e.callId,data:e.data},s=JSON.stringify(o);B.debug(\"C->S: \"+s),apiCC.session.channel.socket.emit(\"pushData\",s)}},this.cancelPushData=function(e){for(var t=null,i=this.callsTable.length;--i>=0;){var a=this.callsTable[i];if(a.callId===e&&\"data\"===a.callType&&a.dataCall&&\"dataChannelConnector\"===a.remoteId&&a.pushDataStatus){t=a;break}}if(!t)return B.error(\"cancelPushData - no such call\",e),\"no such call\";if(\"pending\"===t.pushDataStatus.state)G.createEvent({eventType:\"onFileSended\",callId:t.callId,remoteId:t.remoteId,name:t.data.filename,error:\"canceled\"}),t.callbacks.failure(\"canceled\"),this.onHangup(t.callId);else if(\"active\"===t.pushDataStatus.state)this.onHangup(t.callId);else{if(\"ready\"!==t.pushDataStatus.state)return B.error(\"cancelPushData - wrong state\"),\"wrong state\";t.clientCall&&this.cancelPushData(t.clientCall.callId),t.success={state:\"complete\"},G.createEvent({eventType:\"onFileSended\",callId:t.callId,remoteId:t.remoteId}),t.callbacks.success(t.success),this.onHangup(t.callId)}return null},this.setVideoBandwidth=function(e,t,i){if(\"number\"==typeof e){var a=!1,n=!1;if(\"overall\"===t?\"incoming\"===i?e>0?(this.videoBandwidthSettings.overallIncoming=e,a=!0):(delete this.videoBandwidthSettings.overallIncoming,a=!0):\"outgoing\"===i&&(e>0?(this.videoBandwidthSettings.overallOutgoing=e,a=!0,n=!0):(delete this.videoBandwidthSettings.overallOutgoing,a=!0,n=!0)):\"perCall\"===t?\"incoming\"===i?e>0?(this.videoBandwidthSettings.perCallIncoming=e,a=!0):(delete this.videoBandwidthSettings.perCallIncoming,a=!0):\"outgoing\"===i&&(e>0?(this.videoBandwidthSettings.perCallOutgoing=e,a=!0,n=!0):(delete this.videoBandwidthSettings.perCallOutgoing,a=!0,n=!0)):\"remote\"===t&&(this.videoRemoteBandwidth=e),a)for(var r=this.MCUClient.sessionMCUs.length;--r>=0;){var o={type:\"info\",infoType:\"setVideoBandwidthSettings\",data:{clientId:this.clientId,roomId:this.MCUClient.sessionMCUs[r].roomName,pubSub:this.MCUClient.pubConnector,videoBandwidthSettings:this.videoBandwidthSettings}},s=JSON.stringify(o);B.log(\"C->S: \"+s),apiCC.session.channel.socket.emit(\"info\",s)}n&&this.evalOutgoingVideoBandwithCap()}else B.error(\"Unvalid target bandwidth usage value needs to be a number :\",e)},this.setAudioBandwidth=function(e){this.audioBandwidth=e},this.setDataBandwidth=function(e){this.dataBandwidth=e},this.processCheckCallStatus=function(e){this.MCUClient.processCheckCallStatus(e);var t={type:\"updateCallStatus\",clientId:this.clientId,data:{}};e.data.pubSub&&(t.data.pubSub=e.data.pubSub),t.sessions=[];for(var i=0;i<this.MCUClient.sessionMCUs.length;i+=1)t.sessions.push(this.MCUClient.createSessionDescriptor(this.MCUClient.sessionMCUs[i]));t.calls=[];for(var a=0;a<this.userMediaTable.length;a+=1){var n=this.userMediaTable[a];t.calls.push({callId:n.userMediaId,callType:n.callType,remoteId:n.remoteId,roomId:n.roomId,data:n.data,meshPublish:!0})}for(var r=0;r<this.callsTable.length;r+=1){var o=this.callsTable[r];t.calls.push({callId:o.callId,callType:o.callType,remoteId:o.remoteId,roomId:o.roomId,data:o.data,remoteStream:o.mcuRemoteStream})}var s=JSON.stringify(t);apiCC.session.channel.socket.emit(\"updateCallStatus\",s)},this.processRemoteStreamAdded=function(e,t){if(e.sessionMCU&&\"new\"===e.sessionMCU.modeChangeKind){B.debug(\"processRemoteStreamAdded\",e);var i=this.MCUClient.getSessionMCU(null,{callback:function(t){return t.roomName===e.sessionMCU.roomName&&\"old\"===t.modeChangeKind}});if(!i)return void B.error(\"wrong roomId: no such old session\");B.debug(\"oldSessionMCU\",i);for(var a=this.callsTable.length;--a>=0;)if(this.callsTable[a].sessionMCU===i&&(0,r.ki)(this.callsTable[a],[\"mcuRemoteStream\",\"attributes\",\"callId\"],\"string\")&&this.callsTable[a].mcuRemoteStream.attributes.callId===e.mcuRemoteStream.attributes.callId){B.debug(\"processRemoteStreamAdded: bye\",this.callsTable[a]),this.removeCallFromTableWithCallIdAndSendBye(this.callsTable[a].callId);break}}},this.processDistantCallEstablished=function(e){if(B.debug(\"processDistantCallEstablished\",e),(0,r.ki)(e,[\"descriptor\",\"callFeed\",\"callId\"],\"string\"))if(e.descriptor.callFeed.clientId===this.clientId){var t=null;if(\"mesh\"===e.descriptor.callMode?t=this.MCUClient.getSessionMCU(null,{callback:function(t){return t.roomName===e.descriptor.roomId&&\"mesh\"===t.roomMode}}):\"sfu\"===e.descriptor.callMode&&(t=this.MCUClient.getSessionMCU(null,{callback:function(t){return t.roomName===e.descriptor.roomId&&!t.hasOwnProperty(\"roomMode\")}})),t){B.debug(\"sessionMCU\",t);var i=null,a=null;if(\"mesh\"===e.descriptor.callMode?(i=this.findUserMediaById(e.descriptor.callFeed.callId),B.debug(\"userMedia\",i)):(a=this.findCallWithCallId(e.descriptor.callFeed.callId),B.debug(\"call\",a)),e.active){if(!i&&!a)return void B.debug(\"wrong callId: no such call\");for(var n=this.MCUClient.distantCalls.length;--n>=0&&(this.MCUClient.distantCalls[n].roomId!==e.descriptor.roomId||this.MCUClient.distantCalls[n].clientId!==e.descriptor.clientId||this.MCUClient.distantCalls[n].callId!==e.descriptor.callId););if(n>=0){if(!this.MCUClient.distantCalls[n].early)return void B.debug(\"processDistantCallEstablished: descriptor already exists\");B.debug(\"processDistantCallEstablished: replace early descriptor\",this.MCUClient.distantCalls[n],e.descriptor),this.MCUClient.distantCalls[n]=e.descriptor}else B.debug(\"processDistantCallEstablished: add descriptor\",e.descriptor),this.MCUClient.distantCalls.push(e.descriptor)}else if(\"old\"===t.modeChangeKind){for(var o=this.MCUClient.distantCalls.length;--o>=0;)if(this.MCUClient.distantCalls[o].roomId===e.descriptor.roomId&&this.MCUClient.distantCalls[o].clientId===e.descriptor.clientId&&this.MCUClient.distantCalls[o].callId===e.descriptor.callId){B.debug(\"processDistantCallEstablished: set descriptor to removed\",this.MCUClient.distantCalls[o]),this.MCUClient.distantCalls[o].removed=!0;break}}else for(var s=this.MCUClient.distantCalls.length;--s>=0;)if(this.MCUClient.distantCalls[s].roomId===e.descriptor.roomId&&this.MCUClient.distantCalls[s].clientId===e.descriptor.clientId&&this.MCUClient.distantCalls[s].callId===e.descriptor.callId){B.debug(\"processDistantCallEstablished: remove descriptor\",this.MCUClient.distantCalls[s]),this.MCUClient.distantCalls.splice(s,1);break}if(\"new\"===t.modeChangeKind){var l=this.MCUClient.getSessionMCU(null,{callback:function(t){return t.roomName===e.descriptor.roomId&&\"old\"===t.modeChangeKind}});if(!l)return void B.error(\"wrong roomId: no such old session\");B.debug(\"oldSessionMCU\",l),B.debug(\"processDistantCallEstablished: replacement\");for(var d=!1,c=this.userMediaTable.length;--c>=0;){var u=this.userMediaTable[c];if(u.sessionMCU===l){var h=!1,p=0;B.debug(\"processDistantCallEstablished: userMedia\",u);for(var g=u.distantCalls.length;--g>=0;)u.distantCalls[g].replaced?p+=1:u.distantCalls[g].callFeed.callId===e.descriptor.callFeed.callId&&(B.debug(\"processDistantCallEstablished: distantCall\",u.distantCalls[g]),h=!0,u.distantCalls[g].replaced=!0,p+=1);if(h){if(p===u.distantCalls.length){B.debug(\"processDistantCallEstablished: remove replaced distant call descriptors\");for(var m=this.MCUClient.distantCalls.length;--m>=0;)\"mesh\"===this.MCUClient.distantCalls[m].callMode&&this.MCUClient.distantCalls[m].callFeed.callId===u.userMediaId&&this.MCUClient.distantCalls[m].replaced&&(B.debug(\"processDistantCallEstablished: remove distantCall\",this.MCUClient.distantCalls[m]),this.MCUClient.distantCalls.splice(m,1));B.debug(\"processDistantCallEstablished: close old calls\");for(var C=this.callsTable.slice(),f=C.length;--f>=0;)(0,r.ki)(C[f].data,\"mesh\",\"object\")&&C[f].data.mesh.calleeCallId===u.userMediaId&&\"subscribe\"!==C[f].settingUpType&&this.removeCallFromTableWithCallIdAndSendBye(C[f].callId);this.MCUClient.meshOnHangup(u.userMediaId),d=!0}break}}}d&&this.finalizeMeshToJanusTransition(l,t)}}else B.debug(\"wrong roomId: no such session\")}else B.debug(\"wrong clientId: message not intended for self\");else B.debug(\"wrong format: missing callFeed\")},this.finalizeMeshToJanusTransition=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};B.debug(\"finalizeMeshToJanusTransition\");var a=0,n=0;if(!0===i.force){for(var r=this.callsTable.slice(),o=r.length;--o>=0;){var s=r[o];s.sessionMCU===e&&((\"publish\"===s.settingUpType||\"shareScreen\"===s.settingUpType)&&s.data&&s.data.mesh?this.onHangup(s.callId):this.onHangup(s.callId,\"disconnected\"))}for(var l=this.userMediaTable.slice(),d=l.length;--d>=0;){var c=l[d];c.sessionMCU===e&&this.onHangup(c.userMediaId,\"disconnected\")}}else for(var u=this.userMediaTable.length;--u>=0;){var h=this.userMediaTable[u];if(h.sessionMCU===e){a+=1;for(var p=0,g=h.distantCalls.length;--g>=0;)B.debug(\"finalizeMeshToJanusTransition: distantCall\",h.distantCalls[g]),h.distantCalls[g].replaced&&(p+=1);p===h.distantCalls.length&&(n+=1)}}a===n&&(B.debug(\"finalizeMeshToJanusTransition: finalize transition\"),t.transitionTimeoutId&&(clearTimeout(t.transitionTimeoutId),delete t.transitionTimeoutId),this.MCUClient.removeSessionMCU(e),delete t.modeChangeKind,this.MCUClient.transitionCount-=1,this.MCUClient.transitionCount<=0&&this.evalOutgoingVideoBandwithCap(),G.createMCURoomModeChangedEvent(t.roomName,\"mesh\",\"sfu\",\"complete\"))},this.processConfigureEncodings=function(e){var t=this.findCallWithCallId(e.callId);if(t&&Object.prototype.hasOwnProperty.call(e,\"command\")&&\"RID\"===t.simulcast){var i={};Object.prototype.hasOwnProperty.call(e,\"maxBitrate\")&&(i.maxBitrate=e.maxBitrate),t.configureSimulcastEncodings(e.command,i)}},this.processSimulcastFeedChanged=function(e){var t=this.findCallWithCallId(e.callId);if(t){var i={};2===e.substream?i.streamQuality=\"high\":1===e.substream?i.streamQuality=\"medium\":0===e.substream&&(i.streamQuality=\"low\"),2===e.temporal?i.streamFrameRate=\"high\":1===e.temporal?i.streamFrameRate=\"medium\":0===e.temporal&&(i.streamFrameRate=\"low\"),Object.keys(i).length>0&&G.createSimulcastFeedChanged(t.callId,i)}},this.createCallControl=function(e){var t=new W(e);return this.callControlTable.push(t),t},this.destroyCallControl=function(e){if(e.multi){if(!e.roomName)return B.warn(\"findCallControl: cannot destroy without roomName\"),null;for(var t=[],i=this.callControlTable.length;--i>=0;)this.callControlTable[i].roomName===e.roomName&&(t.push(this.callControlTable[i]),this.callControlTable.splice(i,1));return t}var a=this.findCallControl(e,{accept:\"index\"});if(null!==a&&a>=0){var n=this.callControlTable[a];return this.callControlTable.splice(a,1),n}return null},this.findCallControl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=\"index\"===t.accept;if(\"publish\"===e.type||\"shareScreen\"===e.type){if(!e.callId)return B.warn(\"findCallControl: cannot search without callId\"),null;for(var a=null,n=null,o=this.callControlTable.length;--o>=0;)if((\"publish\"===this.callControlTable[o].type||\"shareScreen\"===this.callControlTable[o].type)&&this.callControlTable[o].callId===e.callId){a=this.callControlTable[o],n=o;break}return a?i?n:a:null}if(\"subscribe\"===e.type){if(!(0,r.ki)(e,\"stream\",\"object\")||!Object.prototype.hasOwnProperty.call(e.stream,\"id\")||!(0,r.ki)(e.stream,\"attributes\",\"object\"))return B.warn(\"findCallControl: cannot search without stream\"),null;for(var s=null,l=null,d=this.callControlTable.length;--d>=0;)if(\"subscribe\"===this.callControlTable[d].type&&(this.callControlTable[d].stream.id===e.stream.id||this.callControlTable[d].stream.attributes.callerId===e.stream.attributes.callerId&&this.callControlTable[d].stream.attributes.callId===e.stream.attributes.callId)){s=this.callControlTable[d],l=d;break}return s?i?l:s:null}return B.warn(\"findCallControl: wrong type\",e.type),null},this.getCallControls=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={};if(t.addUserMedia)for(var a=this.userMediaTable.length;--a>=0;){var n=this.userMediaTable[a];i[n.userMediaId]=n}if(e){for(var r=this.callControlTable.length;--r>=0;){var o=this.callControlTable[r];e.indexOf(o.type)>=0&&(i[o.callId]=o)}return i}for(var s=this.callControlTable.length;--s>=0;){var l=this.callControlTable[s];i[l.callId]=l}return i},this.getCallIds=function(e){for(var t=[],i=this.callControlTable.length;--i>=0;){var a=this.callControlTable[i];e.indexOf(a.type)>=0&&t.push(a.callId)}return t},this.evalOutgoingVideoBandwithCap=function(e){if(B.debug(\"evalOutgoingVideoBandwithCap\"),!(this.MCUClient.transitionCount>0)){var t=null;this.videoBandwidthSettings.perCallOutgoing&&(t=this.videoBandwidthSettings.perCallOutgoing);for(var i=[],a=this.callsTable.length;--a>=0;)this.callsTable[a].belongsToRoom()&&\"publish\"!==this.callsTable[a].settingUpType&&\"shareScreen\"!==this.callsTable[a].settingUpType||this.callsTable[a].localCallProfile&&this.callsTable[a].localCallProfile.video&&this.callsTable[a].localCallProfile.videoActive&&i.push(this.callsTable[a]);if(0===i.length)return t;if(this.videoBandwidthSettings.overallOutgoing){var n=Math.floor(this.videoBandwidthSettings.overallOutgoing/i.length);t=t?Math.min(t,n):n}for(var r=i.length;--r>=0;)e&&i[r]===e?t&&i[r].videoCap!==t?(i[r].videoCap=t,this.rtpSenderSetParamatersCapable&&i[r].applyOutgoingBitrate(i[r].videoCap)):!t&&i[r].videoCap&&(delete i[r].videoCap,this.rtpSenderSetParamatersCapable&&i[r].applyOutgoingBitrate(null)):t&&i[r].videoCap!==t?(i[r].videoCap=t,this.rtpSenderSetParamatersCapable?i[r].applyOutgoingBitrate(i[r].videoCap):setTimeout((function(e){e.belongsToRoom()||!e.callee?(e.updateUserMedia=!0,e.establishCall()):B.debug(\"Call is not to be updated\")}),0,i[r])):!t&&i[r].videoCap&&(delete i[r].videoCap,this.rtpSenderSetParamatersCapable?i[r].applyOutgoingBitrate(null):setTimeout((function(e){e.belongsToRoom()||!e.callee?(e.updateUserMedia=!0,e.establishCall()):B.debug(\"Call is not to be updated\")}),0,i[r]));return t}B.debug(\"evalOutgoingVideoBandwithCap - transition ongoing\")},this.callback=function(e,t){return this.closureHandler=function(i){return e[t](i)},this.closureHandler},this.callbackWithParams=function(e,t){return this.closureHandler=function(i,a,n){return e[t](i,a,n)},this.closureHandler},this.simulatedAgentLaunchWaitingCall=function(){this.socket.emit(\"simulatedAgentLaunchWaitingCall\",{type:\"simulatedAgentLaunchWaitingCall\"})}},J=(i(2707),a.Y.get(\"PreCallTest\")),Y=125e3,z=2e4,X=apiCC.myWebRTC_Event,K=function(e,t,i,a,n){var r=this;this.webRTCClient=e.webRTCClient,this.notifyTerminated=e.notifyTerminated,this.audioSourceId=a,this.videoSourceId=n,this.testId=\"initial\",this.stepId=\"initial\",this.report={tests:[],resolutions:[],failurCause:\"\"},this.maxHeight=240,this.maxWidth=320,this.resolutions=[[320,240,\"QVGA\"],[640,480,\"VGA\"],[1024,576,\"SD\"],[1280,720,\"HD 720p\"],[1920,1080,\"HD 1080p\"]],this.currentResolution=0,this.userMediastreamId=null,\"simpleVideoRecordTest\"===i&&(J.warn(\"Simple video record test is activated\"),this.simpleVideoRecordTest=!0),!0===apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled&&(J.debug(\"Forcing meshModeEnabled to false for precall test\"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled=!1,this.modifyMeshModeEnabledValueBeforePreCall=!0),this.generateId=function(e){for(var t=\"\",i=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",a=0;a<e;a+=1)t+=i.charAt(Math.floor(Math.random()*i.length));return t},this.generateRoomId=function(){return\"PC-\"+this.generateId(4)+\"-\"+this.generateId(4)+\"-\"+this.generateId(4)},this.pushStats=function(e,t){return e.data.push(t),!0},this.evalQuartiles=function(e,t,i){var a=[];if(void 0===i?e.forEach((function(e){\"number\"==typeof e[t]&&a.push(e[t])})):e.forEach((function(e){a.push(i(e[t]))})),a.sort((function(e,t){return e<t?-1:e===t?0:1})),a.length%2==0){var n=a.length/2,r=Math.floor((a[n-1]+a[n])/2);if(n%2==0){var o=n/2,s=Math.floor((a[o-1]+a[o])/2),l=n+o,d=Math.floor((a[l-1]+a[l])/2);return{min:a[0],firstQuartile:s,median:r,thirdQuartile:d,max:a[a.length-1]}}var c=Math.floor(n/2),u=a[c],h=a[n+c];return{min:a[0],firstQuartile:u,median:r,thirdQuartile:h,max:a[a.length-1]}}var p=Math.floor(a.length/2),g=a[p];if((p+1)%2==0){var m=(p+1)/2,C=Math.floor((a[m-1]+a[m])/2),f=p+m,v=Math.floor((a[f-1]+a[f])/2);return{min:a[0],firstQuartile:C,median:g,thirdQuartile:v,max:a[a.length-1]}}var b=Math.floor(p/2),S=a[b],y=a[p+b];return{min:a[0],firstQuartile:S,median:g,thirdQuartile:y,max:a[a.length-1]}},this.runBitRateTest=function(){apiCC.webRTCCompliant?(J.debug(\"Run bitrate test\"),\"initial\"===this.testId&&(this.handlers=[{type:\"joinMCUSessionAnswer\",callback:this.handleJoinMCUSessionAnswer.bind(this)},{type:\"MCUAvailableStream\",callback:this.handleMCUAvailableStream.bind(this)},{type:\"onCallStatsUpdate\",callback:this.handleOnCallStatsUpdate.bind(this)},{type:\"remoteStreamAdded\",callback:this.handleRemoteStreamAdded.bind(this)},{type:\"userMediaSuccess\",callback:this.handleuserMediaSuccess.bind(this)},{type:\"MCURecordedStreamsAvailable\",callback:this.handleRecordingStreamAvailable.bind(this)}],this.handlers.forEach((function(e){apiRTC.addEventListener(e.type,e.callback)})),this.webRTCClient.setMCUConnector(\"mcu4.apizee.com\"),this.webRTCClient.setAllowMultipleCalls(!0),this.webRTCClient.enableCallStatsMonitoring(!0,1e3),this.webRTCClient.enableQualityEvaluating(!0,1e3),this.startNextTest())):(this.report.failurCause=\"Your device is not WebRTC Compliant\",this.terminate())},this.startNextTest=function(){if(!0===this.simpleVideoRecordTest)\"initial\"===this.testId?(J.debug(\"initial simple test\"),t?this.runResolutionTest():this.startTestAudioNlVideo(2e3)):\"resolution-test\"===this.testId?(J.debug(\"resolution-test simple\"),this.startTestAudioNlVideo(2e3)):\"audio-and-video-2000\"===this.testId&&(J.debug(\"Before recordThenTerminate simple\"),this.recordThenTerminate());else if(\"initial\"===this.testId)t?this.runResolutionTest():this.startTestAudioNlVideo(i);else if(\"resolution-test\"===this.testId)this.startTestAudioNlVideo(i);else if(this.testId===\"audio-and-video-\"+i)if(\"success\"===this.report[this.testId].status){var e=this.report[this.testId].subscribeCallIds[0],a=this.stats[e].videoReceived;void 0!==a.bitsReceivedPerSecond.max&&a.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():a.bitsReceivedPerSecond.max>=15e5?this.startTestAudioNlVideo(1500):a.bitsReceivedPerSecond.max>=1e6?this.startTestAudioNlVideo(1e3):a.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):a.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(\"audio-and-video-1500\"===this.testId)if(\"success\"===this.report[this.testId].status){var n=this.report[this.testId].subscribeCallIds[0],r=this.stats[n].videoReceived;void 0!==r.bitsReceivedPerSecond.max&&r.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():r.bitsReceivedPerSecond.max>=1e6?this.startTestAudioNlVideo(1e3):r.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):r.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(\"audio-and-video-1000\"===this.testId)if(\"success\"===this.report[this.testId].status){var o=this.report[this.testId].subscribeCallIds[0],s=this.stats[o].videoReceived;void 0!==s.bitsReceivedPerSecond.max&&s.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():s.bitsReceivedPerSecond.max>=6e5?this.startTestAudioNlVideo(600):s.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(\"audio-and-video-600\"===this.testId)if(\"success\"===this.report[this.testId].status){var l=this.report[this.testId].subscribeCallIds[0],d=this.stats[l].videoReceived;void 0!==d.bitsReceivedPerSecond.max&&d.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():d.bitsReceivedPerSecond.max>=25e4?this.startTestAudioNlVideo(250):this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else if(\"audio-and-video-250\"===this.testId)if(\"success\"===this.report[this.testId].status){var c=this.report[this.testId].subscribeCallIds[0],u=this.stats[c].videoReceived;void 0!==u.bitsReceivedPerSecond.max&&u.bitsReceivedPerSecond.max+.15*this.videoBandwidth*1e3>=1e3*this.videoBandwidth?this.recordThenTerminate():this.startTestAudioNlOnly()}else this.startTestAudioNlOnly();else this.recordThenTerminate()},this.startTestAudioNlVideo=function(e){this.prepareEnvForNewTest(),J.debug(\"%ctestAudioNlVideo\"+e),this.testId=\"audio-and-video-\"+e,this.report.tests.push(this.testId),this.audioEnabled=!0,this.videoEnabled=!0,this.videoBandwidth=e,this.webRTCClient.setRemoteVideoBandwidth(this.videoBandwidth),this.stats={},this.report[this.testId]={audioEnabled:!0,audioLimited:!1,videoEnabled:!0,videoLimited:!0,videoBandwidth:this.videoBandwidth,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId=\"joining-mcu-session\",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),z)},this.startTestAudioNlOnly=function(){this.prepareEnvForNewTest(),J.debug(\"%cstartTestAudioNlOnly\"),this.testId=\"audio-only\",this.report.tests.push(this.testId),this.audioEnabled=!0,this.videoEnabled=!1,this.webRTCClient.setRemoteVideoBandwidth(null),this.stats={},this.report[this.testId]={audioEnabled:!0,audioLimited:!1,videoEnabled:!1,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId=\"joining-mcu-session\",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),z)},this.startTestVideoNlOnly=function(){this.prepareEnvForNewTest(),J.debug(\"%cstartTestVideoNlOnly\"),this.testId=\"video-only\",this.report.tests.push(this.testId),this.audioEnabled=!1,this.videoEnabled=!0,this.videoBandwidth=600,this.webRTCClient.setRemoteVideoBandwidth(this.videoBandwidth),this.stats={},this.report[this.testId]={audioEnabled:!1,audioLimited:!1,videoEnabled:!0,stats:this.stats},this.mcuSession={},this.mcuSession.roomId=this.generateRoomId(),this.report[this.testId].roomId=this.mcuSession.roomId,this.webRTCClient.joinMCUSession(this.mcuSession.roomId),this.stepId=\"joining-mcu-session\",this.timeoutId=setTimeout(this.abortJoinMCUSession.bind(this),z)},this.recordThenTerminate=function(){!0===r.modifyMeshModeEnabledValueBeforePreCall&&(J.debug(\"Restoring meshModeEnabled to true, as it was modified for precall test\"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.meshModeEnabled=!0);var e=null;if(r.videoEnabled&&r.audioEnabled?e=\"AUDIO-VIDEO\":r.audioEnabled?e=\"AUDIO-ONLY\":r.videoEnabled&&(e=\"VIDEO-ONLY\"),!e)return J.error(\"Can't define record type\"),void r.terminate();J.debug(\"Start recording with type:\",e),r.webRTCClient.startRecording(e,\"recordPreCall\",null,null,{ttl:900}),setTimeout((function(){J.debug(\"Stop recording\"),r.webRTCClient.stopRecording()}),1e4)},this.terminate=function(){J.debug(\"Terminate\"),this.testId=\"terminated\",this.handlers&&this.handlers.forEach((function(e){apiRTC.removeEventListener(e.type,e.callback)})),this.notifyTerminated(this.report),this.leaveSession()},this.succeed=function(){X.createEvent({eventType:\"preCallTestStatus\",testId:this.testId,status:\"success\",stepId:this.stepId}),this.report[this.testId].status=\"success\",this.startNextTest()},this.fail=function(){J.debug(\"fail\"),X.createEvent({eventType:\"preCallTestStatus\",testId:this.testId,status:\"failure\",stepId:this.stepId}),this.report[this.testId].status=\"failure\",this.report[this.testId].stepId=this.stepId,this.leaveSession(),this.startNextTest()},this.prepareEnvForNewTest=function(){void 0!==r.mcuSession&&r.leaveSession()},this.abortJoinMCUSession=function(){J.debug(\"abortJoinMCUSession\"),this.fail()},this.abortStreamPublishing=function(){J.debug(\"abortStreamPublishing\"),this.fail()},this.abortStreamSubscribing=function(){J.debug(\"abortStreamSubscribing\"),this.fail()},this.observeStreamPublished=function(){if(J.debug(\"observeStreamPublished\"),\"Safari\"===apiRTC.browser||\"Mobile Safari\"===apiRTC.browser)return J.info(\"Safari\"),J.error(\"observeStreamPublished not supported on Safari\"),clearInterval(this.intervalId),void this.fail();if(this.intervalCounter+=1,this.intervalCounter>30)return clearInterval(this.intervalId),void this.fail();if(this.audioEnabled&&this.videoEnabled){var e=0;if(void 0!==this.stats[this.publishCallId]&&(void 0!==this.stats[this.publishCallId].audioSent&&void 0!==this.stats[this.publishCallId].audioSent.bitsSentPerSecond&&this.stats[this.publishCallId].audioSent.bitsSentPerSecond.thirdQuartile>=2e4&&(e+=1),void 0!==this.stats[this.publishCallId].videoSent&&void 0!==this.stats[this.publishCallId].videoSent.bitsSentPerSecond&&this.stats[this.publishCallId].videoSent.bitsSentPerSecond.thirdQuartile>=Y&&(e+=1)),2===e){clearInterval(this.intervalId);var t=this.streams[0];this.subscribeToUserStream(t.attributes.callerId,t.id,\"VIDEO\"),this.stepId=\"stream-subscribing\",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),z)}else J.debug(\"okCnt !== 2\")}else if(this.audioEnabled)if(void 0!==this.stats[this.publishCallId])if(void 0!==this.stats[this.publishCallId].audioSent&&void 0!==this.stats[this.publishCallId].audioSent.bitsSentPerSecond)if(this.stats[this.publishCallId].audioSent.bitsSentPerSecond.thirdQuartile>=2e4){clearInterval(this.intervalId);var i=this.streams[0];this.subscribeToUserStream(i.attributes.callerId,i.id,\"AUDIOONLY\"),this.stepId=\"stream-subscribing\",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),z)}else J.debug(\"no stats audio 1 \");else J.debug(\"no stats audio 2\");else J.debug(\"no stats audio 3\");else if(this.videoEnabled)if(void 0!==this.stats[this.publishCallId])if(void 0!==this.stats[this.publishCallId].videoSent&&void 0!==this.stats[this.publishCallId].videoSent.bitsSentPerSecond)if(this.stats[this.publishCallId].videoSent.bitsSentPerSecond.thirdQuartile>=Y){clearInterval(this.intervalId);var a=this.streams[0];this.subscribeToUserStream(a.attributes.callerId,a.id,\"VIDEOONLY\"),this.stepId=\"stream-subscribing\",this.timeoutId=setTimeout(this.abortStreamSubscribing.bind(this),z)}else J.debug(\"no stats video 1 \");else J.debug(\"no stats video 2\");else J.debug(\"no stats video 3\");else J.debug(\"no audio or video\"),clearInterval(this.intervalId),this.fail()},this.observeStreamSubscribed=function(){if(this.intervalCounter+=1,this.intervalCounter>30)return clearInterval(this.intervalId),void this.succeed();var e=null,t=null,i=0,a=0;this.audioEnabled&&(e=this.stats[this.publishCallId].audioSent),this.videoEnabled&&(t=this.stats[this.publishCallId].videoSent);for(var n=0;n<this.subscribeCallIds.length;n+=1){var r=this.subscribeCallIds[n];if(this.audioEnabled&&this.videoEnabled){var o=0;void 0!==this.stats[r]&&(void 0!==this.stats[r].audioReceived&&void 0!==this.stats[r].audioReceived.bitsReceivedPerSecond&&null!=e&&void 0!==e.bitsSentPerSecond&&this.stats[r].audioReceived.bitsReceivedPerSecond.thirdQuartile>=e.bitsSentPerSecond.firstQuartile-2e3&&(o+=1),void 0!==this.stats[r].videoReceived&&void 0!==this.stats[r].videoReceived.bitsReceivedPerSecond&&null!=t&&void 0!==t.bitsSentPerSecond&&this.stats[r].videoReceived.bitsReceivedPerSecond.thirdQuartile>=t.bitsSentPerSecond.firstQuartile&&(o+=1)),2===o&&(i+=1)}else this.audioEnabled?void 0!==this.stats[r]&&void 0!==this.stats[r].audioReceived&&void 0!==this.stats[r].audioReceived.bitsReceivedPerSecond&&null!=e&&void 0!==e.bitsSentPerSecond&&this.stats[r].audioReceived.bitsReceivedPerSecond.thirdQuartile>=e.bitsSentPerSecond.firstQuartile&&(i+=1):a+=1}a>0?(clearInterval(this.intervalId),this.fail()):i===this.subscribeCallIds.length&&(clearInterval(this.intervalId),this.succeed())},this.handleJoinMCUSessionAnswer=function(e){if(\"joining-mcu-session\"===this.stepId){if(X.createEvent({eventType:\"preCallTestStatus\",testId:this.testId,status:\"start\",stepId:this.stepId}),clearTimeout(this.timeoutId),this.mcuSession.sessionId=e.detail.sessionId,this.mcuSession.token=e.detail.token,this.audioEnabled&&this.videoEnabled){var t=this,i={audio:{},video:{}};i=apiCC.setResolutionInConstraint(this.maxWidth,this.maxHeight,i),J.debug(\"constraints :\",i),apiRTC.createUserMediaStream({type:\"media\",audioSourceId:this.audioSourceId,videoSourceId:this.videoSourceId,gum_config:i,release:function(e){J.debug(\"createUserMediaStream release\",e.userMediaStreamId)},success:function(e){J.debug(\"createUserMediaStream success\",e.userMediaStreamId),J.debug(\"audioSourceId\",a),J.debug(\"videoSourceId\",n)},failure:function(e,i){J.error(\"createUserMediaStream failure\",e.userMediaStreamId),J.error(\"failure; userMediaStreamId: \"+e.userMediaStreamId),J.error(\"failure; error: \"+i),X.createEvent({eventType:\"preCallTestStatus\",testId:this.testId,status:\"failure\",stepId:this.stepId,createUserMediaStreamError:i}),t.terminate()}})}else if(this.audioEnabled)this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,{audioOnly:!0});else{if(!this.videoEnabled)return void this.fail();this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,{videoOnly:!0,qos:{videoStartQuality:\"upper\"}})}this.subscribeCallIds=[],this.report[this.testId].publishCallId=this.publishCallId,this.report[this.testId].subscribeCallIds=[],this.streams=[],this.stepId=\"stream-publishing\",this.timeoutId=setTimeout(this.abortStreamPublishing.bind(this),z)}},this.handleuserMediaSuccess=function(e){var t={userMediaStreamId:e.detail.userMediaStreamId,qos:{videoStartQuality:\"upper\"}};this.userMediastreamId=e.detail.userMediaStreamId,this.publishCallId=this.webRTCClient.publish(this.mcuSession.roomId,this.mcuSession.sessionId,this.mcuSession.token,t),this.report[this.testId].publishCallId=this.publishCallId},this.handleRecordingStreamAvailable=function(e){J.debug(\"handleRecordingStreamAvailable\"),this.terminate()},this.handleMCUAvailableStream=function(e){if(\"stream-publishing\"===this.stepId&&!1===e.detail.isRemoteStream)for(var t=0;t<e.detail.streams.length;t+=1){var i=e.detail.streams[t];if(i.room===this.mcuSession.roomId&&i.attributes.callId===this.publishCallId&&\"stream-publishing\"===this.stepId){if(clearTimeout(this.timeoutId),this.stepId=\"stream-published\",this.streams.push(i),!0===this.simpleVideoRecordTest){var a=\"VIDEO\";!1===i.audio&&(a=\"VIDEOONLY\"),!1===i.video&&(a=\"AUDIOONLY\"),this.subscribeToUserStream(i.attributes.callerId,i.id,a),this.stepId=\"stream-subscribing\"}else this.intervalId=setInterval(this.observeStreamPublished.bind(this),1e3);this.intervalCounter=0}}},this.handleRemoteStreamAdded=function(e){\"stream-subscribing\"===this.stepId&&void 0!==this.subscribeCallIds.find((function(t){return t===e.detail.callId}))&&(clearTimeout(this.timeoutId),this.stepId=\"stream-subscribed\",this.intervalId=setInterval(this.observeStreamSubscribed.bind(this),1e3),this.intervalCounter=0)},this.handleOnCallStatsUpdate=function(e){var t=this;if(\"stream-published\"!==this.stepId&&\"stream-subscribing\"!==this.stepId&&\"stream-subscribed\"!==this.stepId||(void 0===this.stats[this.publishCallId]&&(this.stats[this.publishCallId]={}),void 0!==e.detail.stats.audioSent&&(void 0===this.stats[this.publishCallId].audioSent&&(this.stats[this.publishCallId].audioSent={startTime:e.detail.stats.audioSent.timestamp,data:[]}),this.pushStats(this.stats[this.publishCallId].audioSent,e.detail.stats.audioSent)?this.stats[this.publishCallId].audioSent.data.length>=5&&[\"bitsSentPerSecond\",\"packetsSentPerSecond\"].forEach((function(i){var a=t.evalQuartiles(t.stats[t.publishCallId].audioSent.data,i);a.sampleCount=t.stats[t.publishCallId].audioSent.data.length,a.time=e.detail.stats.audioSent.timestamp-t.stats[t.publishCallId].audioSent.startTime,t.stats[t.publishCallId].audioSent[i]=a})):J.debug(\"audio stats not pushed for :\",this.publishCallId)),void 0!==e.detail.stats.videoSent&&(void 0===this.stats[this.publishCallId].videoSent&&(this.stats[this.publishCallId].videoSent={startTime:e.detail.stats.videoSent.timestamp,data:[]}),this.pushStats(this.stats[this.publishCallId].videoSent,e.detail.stats.videoSent)?this.stats[this.publishCallId].videoSent.data.length>=5&&([\"bitsSentPerSecond\",\"packetsSentPerSecond\",\"framesEncodedPerSecond\"].forEach((function(i){var a=t.evalQuartiles(t.stats[t.publishCallId].videoSent.data,i);a.sampleCount=t.stats[t.publishCallId].videoSent.data.length,a.time=e.detail.stats.videoSent.timestamp-t.stats[t.publishCallId].videoSent.startTime,t.stats[t.publishCallId].videoSent[i]=a})),this.stats[this.publishCallId].videoSent.width=e.detail.stats.videoSent.width,this.stats[this.publishCallId].videoSent.height=e.detail.stats.videoSent.height):J.debug(\"video stats not pushed for :\",this.publishCallId))),\"stream-subscribed\"===this.stepId)for(var i=function(i){n=0;var a=t.subscribeCallIds[i];void 0===t.stats[a]&&(t.stats[a]={}),void 0!==e.detail.stats.audioReceived&&(void 0===t.stats[a].audioReceived&&(t.stats[a].audioReceived={startTime:e.detail.stats.audioReceived.timestamp,data:[]}),t.pushStats(t.stats[a].audioReceived,e.detail.stats.audioReceived)?(n=t.stats[a].audioReceived.data.length,void 0===t.stats[a].audioReceived.data[n-1].mosS&&(t.stats[a].audioReceived.data[n-1].mosS={}),t.stats[a].audioReceived.data[n-1].mosS=e.detail.stats.quality.mosS,t.stats[a].audioReceived.data.length>=15&&([\"bitsReceivedPerSecond\",\"packetsReceivedPerSecond\",\"delay\"].forEach((function(i){var n=t.evalQuartiles(t.stats[a].audioReceived.data,i);n.sampleCount=t.stats[a].audioReceived.data.length,n.time=e.detail.stats.audioReceived.timestamp-t.stats[a].audioReceived.startTime,t.stats[a].audioReceived[i]=n})),void 0!==t.stats[a].audioReceived.data[0].jitter&&[\"jitter\"].forEach((function(i){var n=t.evalQuartiles(t.stats[a].audioReceived.data,i,(function(e){return Math.floor(1e3*e)}));n.sampleCount=t.stats[a].audioReceived.data.length,n.time=e.detail.stats.audioReceived.timestamp-t.stats[a].audioReceived.startTime,t.stats[a].audioReceived[i]=n})),t.stats[a].audioReceived.packetsLost={max:e.detail.stats.audioReceived.packetsLost,sampleCount:t.stats[a].audioReceived.data.length,time:e.detail.stats.audioReceived.timestamp-t.stats[a].audioReceived.startTime},[\"packetsLostRatio\"].forEach((function(i){var n=t.evalQuartiles(t.stats[a].audioReceived.data,i);n.sampleCount=t.stats[a].audioReceived.data.length,n.time=e.detail.stats.audioReceived.timestamp-t.stats[a].audioReceived.startTime,t.stats[a].audioReceived[i]=n})),void 0===t.stats[a].audioReceived.mosS&&(t.stats[a].audioReceived.mosS={}),[\"mosS\"].forEach((function(e){var i=t.evalQuartiles(t.stats[a].audioReceived.data,e);i.sampleCount=t.stats[a].audioReceived.data.length,t.stats[a].audioReceived[e]=i})))):J.error(\"audio stats not pushed for callId :\",a)),void 0!==e.detail.stats.videoReceived&&(void 0===t.stats[a].videoReceived&&(t.stats[a].videoReceived={startTime:e.detail.stats.videoReceived.timestamp,data:[]}),t.pushStats(t.stats[a].videoReceived,e.detail.stats.videoReceived)?(n=t.stats[a].videoReceived.data.length,void 0===t.stats[a].videoReceived.data[n-1].mosV&&(t.stats[a].videoReceived.data[n-1].mosV={}),void 0===t.stats[a].videoReceived.data[n-1].mosAV&&(t.stats[a].videoReceived.data[n-1].mosAV={}),t.stats[a].videoReceived.data[n-1].mosV=e.detail.stats.quality.mosV,t.stats[a].videoReceived.data[n-1].mosAV=e.detail.stats.quality.mosAV,t.stats[a].videoReceived.data.length>=15&&([\"bitsReceivedPerSecond\",\"packetsReceivedPerSecond\",\"framesDecodedPerSecond\"].forEach((function(i){var n=t.evalQuartiles(t.stats[a].videoReceived.data,i);n.sampleCount=t.stats[a].videoReceived.data.length,n.time=e.detail.stats.videoReceived.timestamp-t.stats[a].videoReceived.startTime,t.stats[a].videoReceived[i]=n})),void 0!==t.stats[a].videoReceived.data[0].jitter&&[\"jitter\"].forEach((function(i){var n=t.evalQuartiles(t.stats[a].videoReceived.data,i,(function(e){return Math.floor(1e3*e)}));n.sampleCount=t.stats[a].videoReceived.data.length,n.time=e.detail.stats.videoReceived.timestamp-t.stats[a].videoReceived.startTime,t.stats[a].videoReceived[i]=n})),t.stats[a].videoReceived.packetsLost={max:e.detail.stats.videoReceived.packetsLost,sampleCount:t.stats[a].videoReceived.data.length,time:e.detail.stats.videoReceived.timestamp-t.stats[a].videoReceived.startTime},[\"packetsLostRatio\"].forEach((function(i){var n=t.evalQuartiles(t.stats[a].videoReceived.data,i);n.sampleCount=t.stats[a].videoReceived.data.length,n.time=e.detail.stats.videoReceived.timestamp-t.stats[a].videoReceived.startTime,t.stats[a].videoReceived[i]=n})),void 0===t.stats[a].videoReceived.mosV&&(t.stats[a].videoReceived.mosV={}),[\"mosV\"].forEach((function(e){var i=t.evalQuartiles(t.stats[a].videoReceived.data,e);i.sampleCount=t.stats[a].videoReceived.data.length,t.stats[a].videoReceived[e]=i})),void 0===t.stats[a].videoReceived.mosAV&&(t.stats[a].videoReceived.mosAV={}),[\"mosAV\"].forEach((function(e){var i=t.evalQuartiles(t.stats[a].videoReceived.data,e);i.sampleCount=t.stats[a].videoReceived.data.length,t.stats[a].videoReceived[e]=i})),t.stats[a].videoReceived.width=e.detail.stats.videoReceived.width,t.stats[a].videoReceived.height=e.detail.stats.videoReceived.height)):J.error(\"video stats not pushed for callId :\",a))},a=0;a<this.subscribeCallIds.length;a+=1){var n;i(a)}},this.subscribeToUserStream=function(e,t,i){var a=this,n=this.webRTCClient.getStreamFromList(t);if(null!=n){var r=[];r.push(n),this.webRTCClient.subscribe(r,i).forEach((function(e){a.subscribeCallIds.push(e),a.report[a.testId].subscribeCallIds.push(e)}))}},this.leaveSession=function(){J.debug(\"leaveSession\"),void 0!==this.streams&&\"number\"==typeof this.streams[0]&&this.webRTCClient.unsubscribe(this.streams[0]),null!==this.userMediastreamId&&apiRTC.releaseUserMediaStream(this.userMediastreamId),delete this.streams,delete this.subscribeCallIds,\"string\"==typeof this.publishCallId&&this.webRTCClient.unpublish(this.publishCallId),delete this.publishCallId,void 0!==this.mcuSession&&void 0!==this.mcuSession.sessionId&&(this.webRTCClient.leaveMCUSession(),delete this.mcuSession.sessionId),delete this.mcuSession,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.splice(0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.length),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionReqs.splice(0,apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.joinSessionReqs.length),J.debug(\"leaveSession done\")},this.runResolutionTest=function(){this.testId=\"resolution-test\",this.stepId=\"resolution-test\",X.createEvent({eventType:\"preCallTestStatus\",testId:this.testId,status:\"start\",stepId:this.stepId}),J.debug(\"Run resolution test\"),this.startGetUserMedia(this.resolutions[this.currentResolution])},this.startGetUserMedia=function(e){J.debug(\"startGetUserMedia :\",e);var t={audio:!1,video:{}};t=apiCC.setVideoSourceIdInConstraint(this.videoSourceId,t),t=apiCC.setResolutionInConstraint(e[0],e[1],t),J.debug(\"startGetUserMedia constraints:\",t),apiCC.getUserMedia(t).then(function(t){this.resolutions.length>1?(this.report.resolutions.push(e[2]+\":   \"+e[0]+\"x\"+e[1]),this.maxWidth=e[0],this.maxHeight=e[1],t.getTracks().forEach((function(e){e.stop()})),this.maybeContinueGetUserMedia()):J.debug(\"No video track in returned stream.\")}.bind(this)).catch(function(t){J.debug(\"startGetUserMedia catch error:\",t),this.resolutions.length>1?J.debug(e[0]+\"x\"+e[1]+\" not supported\"):J.error(\"getUserMedia failed with error: \"+t.name),this.maybeContinueGetUserMedia()}.bind(this))},this.maybeContinueGetUserMedia=function(){this.currentResolution!==this.resolutions.length-1?(this.currentResolution++,this.startGetUserMedia(this.resolutions[this.currentResolution])):this.startNextTest()}},Q=a.Y.get(\"ApiCCWebRTCClient\"),$=function(e,t,i,a,o,s){Q.debug(\"apiCC.ApiCCWebRTCClient\"),this.myWebRTC_Event=apiCC.myWebRTC_Event,this.webRTCClient=new H(e),this.webRTCClient.channelReady=!0,this.callTest=null,\"undefined\"==typeof apiRTC_React&&this.webRTCClient.initialize(t,i,a,o,s),this.call=function(t,i,a){return\"RECORD\"===i&&Q.warn(\"DEPRECATED : usage of data parameter on call() as a string with 'RECORD' value will be deprecated in a next version of apiRTC. Please consider using a JSON Data parameter instead : data = {isRecorded : true}\"),!0===this.webRTCClient.recordedCall&&(Q.log(\"recordedCall option is activated\"),void 0!==i&&\"RECORD\"!==i||(i={}),i.MCUType=\"MCU-Caller\",i.confId=Math.floor(1000001*Math.random()).toString()),void 0!==i&&(\"RECORD\"!==i&&!0!==i.isRecorded||(Q.log(\"recordedCall option is activated\"),\"RECORD\"===i&&(i={}),i.MCUType=\"MCU-Caller\",i.confId=Math.floor(1000001*Math.random()).toString())),null!=a&&!0===a.record&&(Q.log(\"callConfiguration record option is activated\"),void 0!==i&&\"RECORD\"!==i||(i={}),i.MCUType=\"MCU-Caller\",i.confId=Math.floor(1000001*Math.random()).toString()),Q.log(\"session.webRTCPluginActivated =\",e.webRTCPluginActivated),(\"IE\"===n.Xh||\"Safari\"===n.Xh&&n.PR<11)&&!0===e.webRTCPluginActivated?(Q.log(\"managing call with WebRTC Plugin\"),null==a&&(a={}),a.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin((function(){Q.log(\"manageWebRTCPlugin cb in call\"),apiCC.session.apiCCWebRTCClient.webRTCClient.callWithNumber(t,!0,i,a)}),(function(){Q.log(\"actionOnInstallationNeeded\")})),a.apzcallId):(Q.log(\"managing call with browser\"),this.webRTCClient.callWithNumber(t,!0,i,a))},this.getStatsFromCall=function(e,t){var i=this.webRTCClient.findCallWithCallId(e);null===i?t(new Error(\"Call was not found\"),null):null===i.pc?t(new Error(\"Call has no peerconnection\"),null):!0===this.webRTCClient.csmEnable?t(null,this.webRTCClient.csmLastResults):t(new Error(\"Call stats monitoring not activated\"),null)},this.testCall=function(t){return Q.log(\"session.webRTCPluginActivated =\",e.webRTCPluginActivated),(\"IE\"===n.Xh||\"Safari\"===n.Xh&&n.PR<11)&&!0===e.webRTCPluginActivated?(Q.log(\"managing call with WebRTC Plugin\"),null==t&&(t={}),t.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin((function(){Q.log(\"manageWebRTCPlugin cb in call\"),apiCC.session.apiCCWebRTCClient.webRTCClient.startTestCall(!0,t)}),(function(){Q.log(\"actionOnInstallationNeeded\")})),t.apzcallId):(Q.log(\"managing call with browser\"),this.webRTCClient.startTestCall(!0,t))},this.setClientTurnServer=function(e){this.webRTCClient.setClientTurnServer(e)},this.activateScreenSharing=function(e){this.webRTCClient.activateScreenSharing(e)},this.shareScreen=function(e,t,i){return Q.info(\"shareScreen\"),this.webRTCClient.shareScreen(e,t,i)},this.startScreenSharingOnCall=function(e,t){Q.info(\"startScreenSharingOnCall\"),this.webRTCClient.startScreenSharingOnCall(e,t)},this.startDataChannel=function(e,t){if(Q.info(\"startDataChannel\"),!(\"Edge\"===n.Xh&&n.PR<79))return void 0!==t?t.dataCall=!0:(t={}).dataCall=!0,this.webRTCClient.callWithNumber(e,!0,t,null);Q.warn(\"Cannot startDataChannel as it is not supported on Edge\")},this.startDataChannelOnCall=function(e){this.webRTCClient.startDataChannelOnCall(e)},this.sendDataWithCallId=function(e,t,i){this.webRTCClient.sendDataWithCallId(e,t,i)},this.callAudio=function(e,t,i){return Q.info(\"callAudio\"),this.webRTCClient.callWithNumber(e,!1,t,i)},this.callbymail=function(e){this.webRTCClient.callbymail(e)},this.addMedia=function(e){return this.webRTCClient.addMedia(e),e},this.hangUp=function(e){this.webRTCClient.onHangup(e)},this.getMyMedia=function(e,t){Q.info(\"getMyMedia : \",e),\"screen\"===e?this.webRTCClient.shareScreen(\"LOCAL\",{},t):this.webRTCClient.getUserMedia()},this.releaseStream=function(e){Q.info(\"releaseStream : \",e),Q.info(\"releaseStream.callId : \",e.callId),void 0!==e.callId?this.webRTCClient.removeCallFromTableWithCallIdAndSendBye(e.callId,\"stop_ScreenSharing\"):this.webRTCClient.stopStream(e)},this.autoAnswerUserMediaSuccessHandler=function(e){Q.info(\"autoAnswerUserMediaSuccessHandler :\"+e),e=null,this.webRTCClient.autoAnswer=!0},this.autoAnswerUserMediaErrorHandler=function(e){Q.info(\"autoAnswerUserMediaErrorHandler :\"+e),e=null,this.webRTCClient.autoAnswer=!1},this.activateAutoAnswer=function(){apiCC.addEventListener(\"userMediaSuccess\",this.callback(this,\"autoAnswerUserMediaSuccessHandler\")),apiCC.addEventListener(\"userMediaError\",this.callback(this,\"autoAnswerUserMediaErrorHandler\")),this.webRTCClient.getUserMedia()},this.getAutoAnswer=function(){return this.webRTCClient.autoAnswer},this.setUnidirectionalCall=function(e){!0===e||!1===e?this.webRTCClient.unidirectionelCallOnly=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setUnidirectionalCall()\",\"PARAMETER_ERROR_SETUNIDIRCALL\")},this.setReceiveMediaDeactivated=function(e){!0===e||!1===e?this.webRTCClient.receiveMediaDeactivated=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setReceiveMediaDeactivated()\",\"PARAMETER_ERROR_SETRECVMEDIADEACTIVATED\")},this.setPreferVP9Codec=function(e){!0===e||!1===e?this.webRTCClient.preferVP9Codec=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setPreferVP9Codec()\",\"PARAMETER_ERROR_SETPREFERVP9CODEC\")},this.setPreferH264Codec=function(e){!0===e||!1===e?this.webRTCClient.preferH264Codec=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setPreferH264Codec()\",\"PARAMETER_ERROR_SETPREFERH264CODEC\")},this.getUnidirectionalCall=function(){return this.webRTCClient.unidirectionelCallOnly},this.toggleVideoMute=function(e){return this.webRTCClient.toggleVideoMute(e)},this.isVideoMuted=function(e){var t;return Q.debug(\"isVideoMuted :\",e),null==e?this.webRTCClient.isVideoMuted:(Q.debug(\"callId is defined :\",e),-1!==(t=this.webRTCClient.findCallIndexWithCallId(e))?this.webRTCClient.callsTable[t].isLocalVideoMuted:void 0)},this.toggleAudioMute=function(e){return this.webRTCClient.toggleAudioMute(e)},this.sendDTMF=function(e,t,i,a){return this.webRTCClient.sendDTMF(e,t,i,a)},this.isAudioMuted=function(e){var t;return Q.debug(\"isAudioMuted :\",e),null==e?this.webRTCClient.isAudioMuted:(Q.debug(\"callId is defined :\",e),-1!==(t=this.webRTCClient.findCallIndexWithCallId(e))?this.webRTCClient.callsTable[t].isLocalAudioMuted:void 0)},this.setNtoNConf=function(e){!0===e||!1===e?this.webRTCClient.NtoNConf=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setNtoNConf()\",\"PARAMETER_ERROR_SETNTONCONF\")},this.getNtoNConf=function(){return this.webRTCClient.NtoNConf},this.setRTPMedia=function(e){!0===e||!1===e?this.webRTCClient.RTPMedia=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setRTPMedia()\",\"PARAMETER_ERROR_SETRTPMEDIA\")},this.getRTPMedia=function(){return this.webRTCClient.RTPMedia},this.setMediaRoutingMode=function(e){\"hostOnly\"===e?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.hostOnly:\"stun\"===e?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.stun:\"stunOnly\"===e?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.stunOnly:\"turn\"===e?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.turn:\"turnOnly\"===e?this.webRTCClient.mediaRoutingMode=this.webRTCClient.mediaRoutingModeEnum.turnOnly:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setMediaRoutingMode()\",\"PARAMETER_ERROR_SETMEDIAROUTINGMODE\")},this.enableQos=function(e,t){\"Chrome\"!==apiCC.browser&&\"Firefox\"!==apiCC.browser&&(Q.warn(\"enableQos() is only supported on Chrome and Firefox, support on other browsers will be added soon\"),e=!1),Q.info(\"this.enableQos=\"+e),this.webRTCClient.qosEnable=e,this.webRTCClient.qosInterval=t||this.webRTCClient.qosInterval},this.enableCallStatsMonitoring=function(e,t){[\"chrome\",\"firefox\"].indexOf(r.wL.type)<0?Q.warn(\"enableCallStatsMonitoring() is only supported on Chrome and Firefox, support on other browsers will be added soon\"):(this.webRTCClient.csmEnable=e,t&&(this.webRTCClient.csmIntervalMs=t))},this.enableQualityEvaluating=function(e,t){[\"chrome\",\"firefox\"].indexOf(r.wL.type)<0?Q.warn(\"enableQualityEvaluating() is only supported on Chrome and Firefox, support on other browsers will be added soon\"):(this.webRTCClient.qualityScoreEnable=e,t&&(this.webRTCClient.qualityScoreIntervalMs=t))},this.getMediaRoutingMode=function(){var e=null;return this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.hostOnly?e=\"hostOnly\":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.stun?e=\"stun\":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.stunOnly?e=\"stunOnly\":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.turn?e=\"turn\":this.webRTCClient.mediaRoutingMode===this.webRTCClient.mediaRoutingModeEnum.turnOnly&&(e=\"turnOnly\"),e},this.setMediaTypeForIncomingCall=function(e){Q.debug(\"setMediaTypeForIncomingCall :\",e),\"VIDEO\"===e||\"AUDIO\"===e||\"VIDEOONLY\"===e||\"NONE\"===e?this.webRTCClient.mediaTypeForIncomingCall=e:Q.log(\"setMediaTypeForIncomingCall, value is not correct\",e)},this.setMediaTypeForOutgoingCall=function(e){Q.debug(\"setMediaTypeForOutgoingCall :\",e),\"VIDEO\"===e||\"AUDIO\"===e||\"VIDEOONLY\"===e||\"NONE\"===e?this.webRTCClient.mediaTypeForOutgoingCall=e:Q.log(\"setMediaTypeForOutgoingCall, value is not correct\",e)},this.setStereo=function(e){Q.info(\"setStereo :\",e),!0===e?(this.webRTCClient.setStereo=e,this.webRTCClient.gum_config={audio:{mandatory:{echoCancellation:!1,googEchoCancellation:!1},optional:[]},video:{mandatory:{},optional:[]}}):!1===e?this.webRTCClient.setStereo=e:Q.log(\"setStereo, value is not correct\",e)},this.setMCUConnector=function(e){Q.info(\"setMCUConnector :\",e),Q.log(\"setting value :\",e),\"mcu4.apizee.com\"===e?this.webRTCClient.MCUClient.pubConnector=\"janusConnector\":\"mcu3.apizee.com\"===e?this.webRTCClient.MCUClient.pubConnector=\"groupKurentoConnector\":Q.log(\"value is incorrect :\",e)},this.enableMeshRoomMode=function(e){Q.info(\"enableMeshRoomMode :\",e),\"IE\"===n.Xh?(Q.log(\"IE detected, MeshRoomMode is not supported\"),this.webRTCClient.MCUClient.meshModeEnabled=!1):this.webRTCClient.MCUClient.meshModeEnabled=e},this.setAllowAsymetricMediaCalls=function(e){Q.info(\"setAllowAsymetricMediaCalls :\",e),!0===e||!1===e?this.webRTCClient.allowAsymetricMediaCalls=e:Q.log(\"setAllowAsymetricMediaCalls, value is not correct\",e)},this.takeSnapshot=function(t,i,a,n,r,o,s){this.webRTCClient.takeSnapshot(t,i,e.apiKey,a,n,r,o,s)},this.takeSnapshotAndSendOnDataChannel=function(e,t,i,a){this.webRTCClient.takeSnapshotAndSendOnDataChannel(e,t,i,a)},this.setUserAcceptOnIncomingCall=function(e){Q.info(\"setUserAcceptOnIncomingCall :\",e),!0===e||!1===e?this.webRTCClient.userAcceptOnIncomingCall=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setUserAcceptOnIncomingCall()\",\"PARAMETER_ERROR_SETUSERACCEPTONINCOCALL\")},this.setUserAcceptOnIncomingCallBeforeGetUserMedia=function(e){Q.info(\"setUserAcceptOnIncomingCallBeforeGetUserMedia :\",e),!0===e||!1===e?this.webRTCClient.userAcceptOnIncomingCallBeforeGetUserMedia=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setUserAcceptOnIncomingCallBeforeGetUserMedia()\",\"PARAMETER_ERROR_SETUSERACCEPTONINCOCALLBEFOREGUM\")},this.setUserAcceptOnIncomingDataCall=function(e){!0===e||!1===e?this.webRTCClient.userAcceptOnIncomingDataCall=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setUserAcceptOnIncomingDataCall()\",\"PARAMETER_ERROR_SETUSERACCEPTONINCOCALL\")},this.setUserAcceptOnIncomingScreenSharingCall=function(e){!0===e||!1===e?this.webRTCClient.userAcceptOnIncomingScreenSharingCall=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setUserAcceptOnIncomingScreenSharingCall()\",\"PARAMETER_ERROR_SETUSERACCEPTONINCOSCREENSHARINGCALL\")},this.setHideLocalVideoOnCall=function(e){!0===e||!1===e?this.webRTCClient.hideLocalVideoOnCall=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : hideLocalVideoOnCall()\",\"PARAMETER_ERROR_SETHIDELOCALVIDEOONCALL\")},this.setAllowMultipleCalls=function(e){!0===e||!1===e?this.webRTCClient.allowMultipleCalls=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setAllowMultipleCalls()\",\"PARAMETER_ERROR_SETALLOWMULTIPLECALLS\")},this.setPcConfig=function(e){Q.info(\"Setting PC_config to :\",e),this.webRTCClient.pc_config=e},this.setPcConstraints=function(e){Q.info(\"Setting PC_constraints to :\"+e),this.webRTCClient.pc_constraints=e},this.setGetUserMediaConfig=function(e){this.webRTCClient.setGetUserMediaConfig(e)},this.setTrickleIce=function(e){Q.info(\"Setting trickleIce to :\"+e),!0===e||!1===e?this.webRTCClient.trickleIce=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setTrickleIce()\",\"PARAMETER_ERROR_SETTRICKLEICE\")},this.setRecordedCall=function(e){!0===e||!1===e?this.webRTCClient.recordedCall=e:this.myWebRTC_Event.createErrorEvent(\"parameter error when calling function : setRecordedCall()\",\"PARAMETER_ERROR_SETRECORDEDCALL\")},this.getRecordedCall=function(){return this.webRTCClient.recordedCall},this.acceptCall=function(e,t){this.webRTCClient.acceptCall(e,t)},this.refuseCall=function(e){Q.info(\"refuseCall\"),this.webRTCClient.refuseCall(e)},this.toggleVideoScreen=function(e){Q.info(\"toggleVideoScreen\"),this.webRTCClient.toggleVideoScreen(e)},this.switchVideoToScreen=function(e){Q.info(\"switchVideoToScreen\"),this.webRTCClient.switchVideoToScreen(e)},this.switchScreenToVideo=function(e){Q.info(\"switchScreenToVideo\"),this.webRTCClient.switchScreenToVideo(e)},this.addVideoMedia=function(e){Q.info(\"addVideoMedia\"),this.webRTCClient.addVideoMedia(e)},this.updateMediaDeviceOnCall=function(e,t){return Q.info(\"updateMediaDeviceOnCall\"),this.webRTCClient.updateMediaDeviceOnCall(e,t)},this.updateMediaTypeOnCall=function(e,t){return!(0,r.Ym)(e,\"string\")||\"VIDEO\"!==t&&\"AUDIOONLY\"!==t&&\"VIDEOONLY\"!==t?Promise.reject(\"wrong arguments\"):this.webRTCClient.updateMediaTypeOnCall(e,t)},this.releaseUserMedia=function(){this.webRTCClient.releaseUserMedia()},this.setAllowedAudioCodecs=function(e){this.webRTCClient.allowedAudioCodecs=e},this.setAllowedVideoCodecs=function(e){this.webRTCClient.allowedVideoCodecs=e},this.setAudioBandwidth=function(e){this.webRTCClient.setAudioBandwidth(e)},this.setVideoBandwidth=function(e){},this.setRemoteVideoBandwidth=function(e){\"number\"==typeof e?this.webRTCClient.setVideoBandwidth(e,\"remote\"):Q.error(\"Unvalid target bandwidth usage value needs to be a number :\",e)},this.setOverallIncomingVideoBandwidth=function(e){\"number\"==typeof e?this.webRTCClient.setVideoBandwidth(e,\"overall\",\"incoming\"):Q.error(\"Unvalid target bandwidth usage value needs to be a number :\",e)},this.setOverallOutgoingVideoBandwidth=function(e){\"number\"==typeof e?this.webRTCClient.setVideoBandwidth(e,\"overall\",\"outgoing\"):Q.error(\"Unvalid target bandwidth usage value needs to be a number :\",e)},this.setPerCallIncomingVideoBandwidth=function(e){\"number\"==typeof e?this.webRTCClient.setVideoBandwidth(e,\"perCall\",\"incoming\"):Q.error(\"Unvalid target bandwidth usage value needs to be a number :\",e)},this.setPerCallOutgoingVideoBandwidth=function(e){\"number\"==typeof e?this.webRTCClient.setVideoBandwidth(e,\"perCall\",\"outgoing\"):Q.error(\"Unvalid target bandwidth usage value needs to be a number :\",e)},this.setDataBandwidth=function(e){this.webRTCClient.setDataBandwidth(e)},this.createMCUSession=function(e,t){Q.info(\"createMCUSession\"),this.webRTCClient.MCUClient.initDivElements(e,t),this.webRTCClient.MCUClient.createSession()},this.joinMCUSession=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Q.debug(\"joinMCUSession\"),e?this.webRTCClient.MCUClient.joinSession(e,t):new Error(\"wrong roomId\")},this.getMCUStreamList=function(){return Q.debug(\"getMCUStreamList\"),this.webRTCClient.MCUClient.getStreamList()},this.getStreamFromList=function(e){return Q.debug(\"getStreamFromList\"),this.webRTCClient.MCUClient.getStreamFromList(e)},this.getStreamIdOfUser=function(e){return Q.debug(\"getStreamIdOfUser\"),this.webRTCClient.MCUClient.getStreamIdOfUser(e)},this.getCallIdFromStreamId=function(e){Q.debug(\"getCallIdFromStreamId\");var t=this.webRTCClient.findCallWithStreamId(e);return null===t?(Q.log(\"call not found in getCallIdFromStreamId\"),null):t.callId},this.getCallIdFromRemoteMCUUser=function(e){var t,i;return Q.debug(\"getCallIdFromRemoteMCUUser\"),t=this.webRTCClient.MCUClient.getStreamIdOfUser(e),null===(i=this.webRTCClient.findCallWithStreamId(t))?(Q.log(\"call not found in getCallIdFromRemoteMCUUser\"),null):i.callId},this.ejectParticipantFromMCUSession=function(e,t,i){this.webRTCClient.MCUClient.ejectParticipant(e,t,i)},this.publish=function(e,t,i,a,r,o){if(\"IE\"===n.Xh&&(Q.log(\"apiCC.session.webRTCPluginActivated =\"+apiCC.session.webRTCPluginActivated),Q.log(\"apiCC.webRTCPluginInstalled =\"+apiCC.webRTCPluginInstalled)),(\"IE\"===n.Xh||\"Safari\"===n.Xh&&n.PR<11)&&!0===apiCC.session.webRTCPluginActivated&&!1===apiCC.webRTCPluginInstalled)return Q.log(\"managing call with WebRTC Plugin\"),null==a&&(a={}),a.apzcallId=apiCC.generateCallId(),apiCC.manageWebRTCPlugin((function(){apiCC.webRTCPluginInstalled=!0,Q.info(\"manageWebRTCPlugin cb in call\");var n=this.webRTCClient.MCUClient.getSessionMCU(e);return n&&\"mesh\"===n.roomMode?this.webRTCClient.MCUClient.meshPublish(e,t,i,a,r,o):(Q.debug(\"publish\"),this.webRTCClient.MCUClient.publish(e,t,i,a,r,o))}),(function(){Q.log(\"actionOnInstallationNeeded\")})),a.apzcallId;var s=this.webRTCClient.MCUClient.getSessionMCU(e);return s&&\"mesh\"===s.roomMode?this.webRTCClient.MCUClient.meshPublish(e,t,i,a,r,o):(Q.debug(\"publish\"),this.webRTCClient.MCUClient.publish(e,t,i,a,r,o))},this.unpublish=function(e){Q.info(\"unpublish\"),this.webRTCClient.MCUClient.unpublish(e)},this.publishScreen=function(e,t,i,a){var n=this.webRTCClient.MCUClient.getSessionMCU(e);return n&&\"mesh\"===n.roomMode?(Q.info(\"publishScreen\"),this.webRTCClient.MCUClient.meshPublishScreen(e,t,i,a)):(Q.info(\"publishScreen\"),this.webRTCClient.MCUClient.publishScreen(e,t,i,a))},this.subscribe=function(e,t,i,a,r){return Q.info(\"subscribe :\",e),\"IE\"===n.Xh&&(Q.log(\"apiCC.session.webRTCPluginActivated =\"+apiCC.session.webRTCPluginActivated),Q.log(\"apiCC.webRTCPluginInstalled =\"+apiCC.webRTCPluginInstalled)),(\"IE\"===n.Xh||\"Safari\"===n.Xh&&n.PR<11)&&!0===apiCC.session.webRTCPluginActivated&&!1===apiCC.webRTCPluginInstalled?(Q.log(\"managing call with WebRTC Plugin\"),apiCC.manageWebRTCPlugin((function(){return apiCC.webRTCPluginInstalled=!0,Q.log(\"manageWebRTCPlugin cb in subscribe\"),\"boolean\"==typeof t&&(Q.warn(\"DEPRECATED : usage of audioOnly parameter on subscribe() is now replaced by mediatype with value VIDEO, AUDIOONLY or VIDEOONLY and will be deprecated in a next version of apiRTC\"),t=!0===t?\"AUDIOONLY\":\"VIDEO\"),apiCC.session.apiCCWebRTCClient.subscribe(e,t,i,a)}),(function(){Q.log(\"actionOnInstallationNeeded\")})),\"WebRTC_Plugin\"):(\"boolean\"==typeof t&&(Q.warn(\"DEPRECATED : usage of audioOnly parameter on subscribe() is now replaced by mediatype with value VIDEO, AUDIOONLY or VIDEOONLY and will be deprecated in a next version of apiRTC\"),t=!0===t?\"AUDIOONLY\":\"VIDEO\"),this.webRTCClient.MCUClient.subscribeToStreams(e,t,i,a,r))},this.unsubscribe=function(e){Q.info(\"unsubscribe :\",e),this.webRTCClient.MCUClient.unsubscribe(e)},this.startStreaming=function(e,t,i,a){return Q.info(\"startStreaming\"),this.webRTCClient.MCUClient.startStreaming(e,t,i,a)},this.stopStreaming=function(e){return Q.info(\"stopStreaming\"),this.webRTCClient.MCUClient.stopStreaming(e)},this.startRecording=function(e,t,i,a,n){Q.info(\"startRecording\"),this.webRTCClient.MCUClient.startRecording(e,t,i,a,n)},this.stopRecording=function(e){Q.info(\"stopRecording\"),this.webRTCClient.MCUClient.stopRecording(e)},this.changeStreamPriority=function(e,t){var i=this.webRTCClient.findCallWithCallId(e);if(!i&&!(i=this.webRTCClient.findUserMediaById(e)))return Q.error(\"changeStreamPriority - no such call\",e),!1;if(!i.sessionMCU)return Q.error(\"changeStreamPriority - no such sessionMCU\"),!1;if(!(0,r.Ym)(t,\"number\")||t<0)return Q.error(\"changeStreamPriority - wrong priority\",t),!1;var a=JSON.stringify({type:\"changeStreamPriority\",roomId:i.sessionMCU.roomName,callerId:apiCC.session.apiCCWebRTCClient.webRTCClient.clientId,callId:e,data:{pubSub:this.webRTCClient.MCUClient.pubConnector,priority:t}});return Q.log(\"C->S: \"+a),apiCC.session.channel.socket.emit(\"changeStreamPriority\",a),!0},this.startComposite=function(e){Q.info(\"startComposite\"),this.webRTCClient.MCUClient.startComposite(e)},this.stopComposite=function(e){Q.info(\"stopComposite\"),this.webRTCClient.MCUClient.stopComposite(e)},this.startCompositeRecording=function(e,t,i,a,n){Q.info(\"startCompositeRecording\"),this.webRTCClient.MCUClient.startCompositeRecording(e,t,i,a,n)},this.stopCompositeRecording=function(e){Q.info(\"stopCompositeRecording\"),this.webRTCClient.MCUClient.stopCompositeRecording(e)},this.checkCallExist=function(e){for(var t=null,i=this.webRTCClient.callsTable.length;--i>=0;){var a=this.webRTCClient.callsTable[i];if(a.callId===e&&a.data&&a.sessionMCU&&(\"MCU-Caller\"===a.data.MCUType||\"MCU-Callee\"===a.data.MCUType)&&a.data.confId===a.sessionMCU.roomName){t=a;break}}return t||Q.error(\"startCallRecording: no such call\"),t},this.startCallRecording=function(e){var t;if(t=this.checkCallExist(e)){var i=(0,r.ws)({},t.data);this.webRTCClient.MCUClient.startCompositeRecording(\"AUDIO-VIDEO\",null,t.sessionMCU.convId,i,t.sessionMCU.roomName)}},this.stopCallRecording=function(e){var t;(t=this.checkCallExist(e))&&this.webRTCClient.MCUClient.stopCompositeRecording(t.sessionMCU.roomName)},this.enforceMCU=function(e){this.webRTCClient.MCUClient.enforceMCU(e)},this.takeSnapshotOnMCUSession=function(e){return Q.info(\"takeSnapshotOnMCUSession\"),this.webRTCClient.MCUClient.takeSnapshot(e)},this.sendMCUSessionInvitation=function(e,t,i){this.webRTCClient.MCUClient.sendSessionInvitation(e,t,i)},this.sendMCUSessionInvitationToGroupChat=function(e,t){this.webRTCClient.MCUClient.sendSessionInvitationToGroupChat(e,t)},this.acceptMCUSessionInvitation=function(e,t,i,a){this.webRTCClient.MCUClient.initDivElements(i,a),this.webRTCClient.MCUClient.acceptSessionInvitation(e,t)},this.leaveMCUSession=function(e){this.webRTCClient.MCUClient.leaveSession(e)},this.recordStream=function(e){Q.info(\"recordStream :\",e),void 0!==MediaRecorder?apiCC.recordMgr.record(e).then((function(){Q.log(\"Recording started\")})).catch((function(e){Q.error(\"startRecord failed :\",e)})):Q.debug(\"MediaRecorder is not supported on this browser, leaving recordStream process\")},this.stopRecordStream=function(e){Q.info(\"stopRecordStream\"),void 0!==MediaRecorder?apiCC.recordMgr.stop().then((function(t){Q.log(\"Recording stopped\"),e(t)})).catch((function(e){Q.error(\"stopRecord failed :\",e)})):Q.debug(\"MediaRecorder is not supported on this browser, leaving recordStream process\")},this.getMediaDevices=function(e){Q.debug(\"getMediaDevices 2\"),apiCC.getMediaDevices().then((function(t){e(t),apiCC.mediaDeviceMgr.gotSources(t)})).catch((function(t){e(null),apiCC.mediaDeviceMgr.gotSources(null)}))},this.setAudioSourceId=function(e){Q.info(\"setAudioSourceId :\"+e),this.webRTCClient.audioSourceId=e},this.setAudioOutputId=function(e){Q.info(\"setaudioOutputId :\"+e),this.webRTCClient.audioOutputId=e},this.setVideoSourceId=function(e){Q.info(\"setVideoSourceId :\"+e),this.webRTCClient.videoSourceId=e},this.setVideoFacingMode=function(e){Q.info(\"setVideoFacingMode :\"+e),\"user\"===e||\"environment\"===e||\"left\"===e||\"right\"===e||\"deactivated\"===e?this.webRTCClient.facingMode=\"deactivated\"===e?null:e:Q.log(\"facingMode value is not correct\")},this.attachMediaStream=function(e,t){Q.debug(\"attachMediaStream\"),apiCC.attachMediaStream(e,t)},this.addStreamInDiv=function(e,t,i,a,n,r){Q.debug(\"addStreamInDiv\"),apiCC.addStreamInDiv(e,t,i,a,n,r)},this.removeElementFromDiv=function(e,t){Q.debug(\"removeElementFromDiv\"),apiCC.removeElementFromDiv(e,t)},this.setSelectedStream=function(e){Q.warn(\"setSelectedStream() is now deprecated\")},this.callback=function(e,t){return this.closureHandler=function(i){return e[t](i)},this.closureHandler},this.startPrecallTest=function(e,t,i,a,n){var r={webRTCClient:this,notifyTerminated:e};this.callTest=new K(r,t,i,a,n),this.callTest.runBitRateTest()}}},6527:(e,t,i)=>{\"use strict\";i.d(t,{p:()=>n}),i(3843),i(3710),i(7941),i(2772),i(2564),i(561),i(1058),i(9653),i(3290),i(6755),i(4916),i(3123),i(2222),i(4812);var a=i(1549).Y.get(\"ApiCCWhiteBoardClient\"),n=function(e,t,i,n,r){function o(e){e.style.display=\"none\"}a.debug(\"Loading apiCC.ApiCCWhiteBoardClient\"),this.roomId=null,this.whiteBoardDisconnectionTimeoutId=0,this.sessionStarted=!1,this.prev={},this.lastEmit=Date.now(),this.clients={},this.listenedPeers={},this.touchScreenActivated=!1,this.touchControlPoint={},this.drawElements=[],this.ghostElements={},this.redoStack=[],this.undoIndex=0,this.userCursorColor=null,this.cursors={},this.cursorStyle=\"cross\",this.CURSOR_STYLES=[\"circle\",\"cross\"],this.currentScale=1,this.dx=0,this.dy=0,this.instructionsFaded=!1,this.canvas=null,this.ctx=null,this.currentTool=\"pen\",this.currentColor=\"rgba(0, 0, 0, 1)\",this.currentBrushWidth=1,this.readOnly=!1,this.isDrawing=!1,this.focusOnDrawing=!1,this.paperSheetId=0,this.drawingId=0,this.offline=!1,this.roomJoined=!1,this.laserModeActivated=!1,this.AVAILABLE_TOOLS=[\"pen\",\"ellipse\",\"rectangle\",\"erase\",\"void\",\"arrow\"],this.GEOMETRY_TOOLS=[\"arrow\",\"rectangle\",\"ellipse\"],this.disconnectionTimer=void 0!==r?r:3e4,a.log(\"Setting Whiteboard disconnectionTimer to : \"+this.disconnectionTimer),this.setCanvas=function(e){a.debug(\"[Whiteboard] setCanvas() :\",e),null!==this.canvas&&(a.log(\"Unsetting old canvas events\"),this.sessionStarted&&!this.readOnly&&(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener(\"touchstart\",this.onTouchStart,!1),this.canvas.removeEventListener(\"touchend\",this.onTouchEnd,!1),this.canvas.removeEventListener(\"touchcancel\",this.onTouchCancel,!1),this.canvas.removeEventListener(\"touchleave\",this.onTouchEnd,!1),this.canvas.removeEventListener(\"touchmove\",this.onTouchMove,!1)))),null!==e&&null!==document.getElementById(e)?(this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext(\"2d\"),this.sessionStarted&&!this.readOnly&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove,this.touchScreenActivated&&(this.canvas.addEventListener(\"touchstart\",this.onTouchStart,!1),this.canvas.addEventListener(\"touchend\",this.onTouchEnd,!1),this.canvas.addEventListener(\"touchcancel\",this.onTouchCancel,!1),this.canvas.addEventListener(\"touchleave\",this.onTouchEnd,!1),this.canvas.addEventListener(\"touchmove\",this.onTouchMove,!1)))):(null!==e&&null===document.getElementById(e)&&a.warn(\"No such element whose id is : \"+e),this.canvas=null,this.ctx=null)},this.setCanvas(t),this.sendDataToRoom=function(e){if(a.info(\"[Whiteboard] sendDataToRoom()\"),!1===this.offline&&null!==this.roomId){if(null===apiCC.session||void 0===apiCC.session)return void a.info(\"apiCC.session does not exist, leaving process\");a.debug(\"this.drawElements :\",this.drawElements),a.debug(\"data.tool :\",e.tool);var t=[];a.debug(\"drawElementsToSend :\",t);var i,n={x:0,y:0,drawing:!1,tool:this.currentTool,cursorColor:this.userCursorColor,color:this.currentColor,width:this.currentBrushWidth,paperSheetId:this.paperSheetId,drawElements:t,id:apiCC.session.apiCCId},r=Object.keys(e);for(i=0;i<r.length;i++)n[r[i]]=e[r[i]];apiCC.session.roomMgr.sendMessageToRoom(this.roomId,\"whiteBoard\",n)}},this.setCursorsDiv=function(){a.warn(\"[Whiteboard] setCursorsDiv() - method obsolete, please use setUserCursorColor to set a cursor pointer that will be seen by other users\")},this.setUserCursorColor=function(e){a.debug(\"[Whiteboard] setUserCursorColor() : \"+e),null===e||\"invisible\"===e?this.userCursorColor=\"invisible\":/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)?this.userCursorColor=e:(a.warn(\"[Whiteboard] setUserCursorColor() color \"+e+\" is invalid, defaulting to invisible\"),this.userCursorColor=\"invisible\")},this.setUserCursorColor(i),this.setCursorStyle=function(e){a.debug(\"[Whiteboard] setCursorStyle() : \"+e),this.CURSOR_STYLES.indexOf(e)>-1?(this.userCursorColor=\"invisible\",this.cursorStyle=e):a.error(\"[Whiteboard] setCursorStyle() style \"+e+\" is invalid\")},this.setFocusOnDrawing=function(e){a.debug(\"[Whiteboard] setFocusOnDrawing()\"),this.focusOnDrawing=e},this.createRoom=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.debug(\"[Whiteboard] createRoom()\"),apiCC.session.roomMgr.createRoom(\"whiteBoard\",e)},this.requestContactListInRoom=function(e){a.log(\"[Whiteboard] requestContactListInRoom :\"+e),apiCC.session.roomMgr.requestContactListInRoom(e)},this.setDrawingTool=function(e){a.debug(\"[Whiteboard] setDrawingTool()\");var t=0;null!==apiCC.session&&(t=apiCC.session.apiCCId),this.AVAILABLE_TOOLS.indexOf(e)>-1&&(this.currentTool=e,this.ghostElements[t]=null)},this.setReadOnly=function(e){a.debug(\"[Whiteboard] setReadOnly()\");var t=0;null!==apiCC.session&&(t=apiCC.session.apiCCId),this.ghostElements[t]=null,this.readOnly=!0===e,this.readOnly&&null!==this.canvas?(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener(\"touchstart\",this.onTouchStart,!1),this.canvas.removeEventListener(\"touchend\",this.onTouchEnd,!1),this.canvas.removeEventListener(\"touchcancel\",this.onTouchCancel,!1),this.canvas.removeEventListener(\"touchleave\",this.onTouchEnd,!1),this.canvas.removeEventListener(\"touchmove\",this.onTouchMove,!1))):null!==this.canvas&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove,this.touchScreenActivated&&(this.canvas.addEventListener(\"touchstart\",this.onTouchStart,!1),this.canvas.addEventListener(\"touchend\",this.onTouchEnd,!1),this.canvas.addEventListener(\"touchcancel\",this.onTouchCancel,!1),this.canvas.addEventListener(\"touchleave\",this.onTouchEnd,!1),this.canvas.addEventListener(\"touchmove\",this.onTouchMove,!1)))},this.laserModeProcess=function(e){var t=this;setTimeout((function(){return t.undo(e)}),5e3)},this.undo=function(e){a.debug(\"[Whiteboard] undo()\");var t=this.drawElements.length-1,i=null,n=[],r=[],o=null,s=0;if(null!==apiCC.session&&(s=apiCC.session.apiCCId),void 0===e)for(;t>=0;)this.drawElements[t].userId==s&&(null===i&&(i=this.drawElements[t].undoIndex),i===this.drawElements[t].undoIndex&&(o=this.drawElements.splice(t,1)[0],n.push(o),r.push(o.drawingId))),t--;else for(t=0;t<this.drawElements.length;t++)this.drawElements[t].userId==s&&this.drawElements[t].drawingId===e&&(a.debug(\"[Whiteboard] element found with drawingId in undo laser :\",e),o=this.drawElements.splice(t,1)[0],n.push(o),r.push(o.drawingId));n.length>0&&(this.redraw(),this.sendDataToRoom({tool:\"void\",delete:r,undoneElements:n}),this.redoStack.push(n))},this.redo=function(){a.debug(\"[Whiteboard] redo()\");var e,t=[];if(this.redoStack.length>0){for(t=this.redoStack.pop(),e=0;e<t.length;e++)this.addNewDrawing(t[e]);this.sendDataToRoom({tool:\"void\",drawObjectsArray:t}),this.redraw()}},this.setBrushSize=function(e){a.debug(\"[Whiteboard] setBrushSize()\"),!isNaN(e)&&e>0&&(this.currentBrushWidth=e)},this.setBrushColor=function(e){a.debug(\"[Whiteboard] setBrushColor()\"),this.currentColor=e},this.setScale=function(e){a.debug(\"[Whiteboard] setScale()\"),e>0?(this.currentScale=e,this.redraw()):a.warn(\"Scale factor must be > 0!\")},this.getScale=function(){return a.debug(\"[Whiteboard] getScale()\"),this.currentScale},this.setOffset=function(e,t){a.debug(\"[Whiteboard] setOffset()\");var i=parseInt(e,10),n=parseInt(t,10);isNaN(i)||isNaN(n)||(this.dx=Number(i),this.dy=Number(n),this.redraw())},this.getOffset=function(){return a.debug(\"[Whiteboard] getOffset()\"),{x:this.dx,y:this.dy}},this.printSharedText=function(e,t,i,n,r,o){a.debug(\"[Whiteboard] printSharedText()\"),this.setBrushStyle(this.currentColor,this.currentBrushWidth),this.undoIndex++,this.redoStack=[];var s=0;null!==apiCC.session&&(s=apiCC.session.apiCCId);var l={type:\"text\",x:e,y:t,text:i,size:n,font:r,border:o,userId:s,drawingId:this.drawingId,color:this.currentColor,width:this.currentBrushWidth,undoIndex:this.undoIndex,time:Date.now()};this.sendDataToRoom({x:e,y:t,tool:\"void\",drawObject:l}),this.drawingId++,this.addNewDrawing(l)},this.addPeerListener=function(e,t){a.debug(\"[Whiteboard] addPeerListener()\"),this.listenedPeers.hasOwnProperty(e)||(this.listenedPeers[e]=[]),this.listenedPeers[e].push(t)},this.inviteInRoom=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};a.debug(\"[Whiteboard] inviteInRoom()\"),null!==e?null!==t?apiCC.session.roomMgr.inviteInRoom(e,t,\"whiteBoard\",i,n):a.debug(\"wrong destId\"):a.debug(\"wrong roomId\")},this.answerToRoomInvitation=function(e,t){a.info(\"[Whiteboard] answerToRoomInvitation()\");var i=t&&!this.isInRoom();return this.isInRoom()?a.error(\"[Whiteboard] cannot answer room invitation : user is already in a room\"):apiCC.session.roomMgr.answerToRoomInvitation(e,t,\"whiteBoard\"),i&&(a.log(\"[Whiteboard] user joining room\"),this.paperSheetId=0,this.drawingId=0,this.roomId=e,this.sendDataToRoom({tool:\"void\",needCatchUp:\"*||-1\"})),i},this.joinRoom=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.info(\"[Whiteboard] joinRoom() roomId :\",e),null==e?a.error(\"[Whiteboard] cannot join room : room is null or undefined\"):this.isInRoom()&&!0===this.roomJoined?a.error(\"[Whiteboard] cannot join room : user is already in a room\"):apiCC.session.roomMgr.joinRoom(e,\"whiteBoard\",t)},this.leaveRoom=function(){a.info(\"[Whiteboard] leaveRoom()\"),this.isInRoom()&&(apiCC.session.roomMgr.leaveRoom(this.roomId,\"whiteBoard\"),this.roomId=null,this.paperSheetId=0,this.drawingId=0,this.listenedPeers={},this.roomJoined=!1)},this.isInRoom=function(){return null!==this.roomId},this.clearPaper=function(){a.debug(\"[Whiteboard] clearPaper()\"),this.deleteHistory()},this.refreshCanvas=function(){if(null!==this.canvas&&null!==this.ctx){var e=this.canvas.width;this.canvas.width=e}},this.deleteHistory=function(){a.info(\"[Whiteboard] deleteHistory()\");var e=0;null!==apiCC.session&&(e=apiCC.session.apiCCId),this.refreshCanvas(),this.drawElements=[],this.ghostElements[e]=null,this.paperSheetId++,this.drawingId=0,this.sendDataToRoom({tool:\"void\",deleteHistory:!0})},this.setBrushStyle=function(e,t){null!==this.ctx&&(this.ctx.strokeStyle=e,this.ctx.fillStyle=e,this.ctx.lineWidth=t)},this.redraw=function(){var e,t,i;for(a.debug(\"[Whiteboard] redraw()\"),this.refreshCanvas(),e=0;e<this.drawElements.length;e++)this.drawSingleObject(this.drawElements[e]);for(t=Object.keys(this.ghostElements),e=0;e<t.length;e++)null!==this.ghostElements[t[e]]&&this.drawSingleObject(this.ghostElements[t[e]]);for(t=Object.keys(this.cursors),e=0;e<t.length;e++)if(null!==this.cursors[t[e]]&&\"invisible\"!==this.cursors[t[e]].color&&(0!==this.cursors[t[e]].x||0!==this.cursors[t[e]].y))switch(i={fromx:(this.cursors[t[e]].x-this.dx)*this.currentScale-13,fromy:(this.cursors[t[e]].y-this.dy)*this.currentScale-13,tox:(this.cursors[t[e]].x-this.dx)*this.currentScale+13,toy:(this.cursors[t[e]].y-this.dy)*this.currentScale+13},this.setBrushStyle(this.cursors[t[e]].color,4),this.cursorStyle){case\"circle\":null!==this.ctx&&(this.ctx.globalAlpha=.4,this.fillEllipse(i.fromx,i.fromy,i.tox,i.toy),this.drawEllipse(i.fromx+2,i.fromy+2,i.tox-2,i.toy-2),this.ctx.globalAlpha=1);break;case\"cross\":null!==this.ctx&&(this.ctx.globalAlpha=.7,this.ctx.beginPath(),this.ctx.moveTo(i.fromx+(i.tox-i.fromx)/2,i.fromy),this.ctx.lineTo(i.fromx+(i.tox-i.fromx)/2,i.toy),this.ctx.lineCap=\"butt\",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(i.fromx,i.fromy+(i.toy-i.fromy)/2),this.ctx.lineTo(i.tox,i.fromy+(i.toy-i.fromy)/2),this.ctx.lineCap=\"butt\",this.ctx.stroke(),this.ctx.globalAlpha=1)}},this.addNewDrawing=function(e){var t=0;this.drawElements.push(e),this.drawSingleObject(e),null!==apiCC.session&&(t=apiCC.session.apiCCId),e.userId===t&&!0===this.laserModeActivated&&this.laserModeProcess(e.drawingId)},this.drawSingleObject=function(e){if(null!==this.ctx&&null!==this.canvas){var t={};switch(this.setBrushStyle(e.color,e.width),this.ctx.scale(this.currentScale,this.currentScale),t.fromx=e.fromx-this.dx,t.tox=e.tox-this.dx,t.x=e.x-this.dx,t.fromy=e.fromy-this.dy,t.toy=e.toy-this.dy,t.y=e.y-this.dy,e.type){case\"arrow\":this.drawArrow(t.fromx,t.fromy,t.tox,t.toy);break;case\"ellipse\":this.drawEllipse(t.fromx,t.fromy,t.tox,t.toy);break;case\"rectangle\":this.drawRectangle(t.fromx,t.fromy,t.tox,t.toy);break;case\"pen\":this.drawLine(t.fromx,t.fromy,t.tox,t.toy);break;case\"erase\":this.eraseArea(t.fromx,t.fromy);break;case\"text\":this.drawText(t.x,t.y,e.text,e.size,e.font,e.border)}this.ctx.scale(1/this.currentScale,1/this.currentScale)}},this.drawLine=function(e,t,i,a){null!==this.ctx&&(this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(i,a),this.ctx.lineCap=\"round\",this.ctx.stroke())},this.drawText=function(e,t,i,a,n,r){if(null!==this.ctx){var o,s,l=\"Arial\";null!=n&&(l=n),this.ctx.font=a+\"px \"+l,this.ctx.fillText(i,e,t),null!=r&&(o=this.ctx.strokeStyle,s=this.ctx.lineWidth,this.ctx.strokeStyle=r,this.ctx.lineWidth=1,this.ctx.strokeText(i,e,t),this.ctx.strokeStyle=o,this.ctx.lineWidth=s)}},this.eraseArea=function(e,t){null!==this.ctx&&this.ctx.clearRect(e-this.ctx.lineWidth-1,t-this.ctx.lineWidth-1,2*this.ctx.lineWidth+2,2*this.ctx.lineWidth+2)},this.drawArrow=function(e,t,i,a){if(null!==this.ctx){var n=Math.atan2(a-t,i-e);this.ctx.beginPath(),this.ctx.lineCap=\"butt\",this.ctx.moveTo(e,t),this.ctx.lineTo(i,a),this.ctx.stroke(),this.ctx.save(),this.ctx.beginPath(),this.ctx.translate(i,a),this.ctx.rotate(n+Math.PI/2),this.ctx.moveTo(0,-this.ctx.lineWidth),this.ctx.lineTo(5*this.ctx.lineWidth*.5+1,10+.25*this.ctx.lineWidth),this.ctx.lineTo(-5*this.ctx.lineWidth*.5-1,10+.25*this.ctx.lineWidth),this.ctx.closePath(),this.ctx.restore(),this.ctx.fill()}},this.drawEllipse=function(e,t,i,a){var n=null,r=null;null!==this.ctx&&(n={x:Math.abs(e-i)/2,y:Math.abs(t-a)/2},r={x:e-(e-i)/2,y:t-(t-a)/2},this.ctx.beginPath(),\"IE\"!==apiRTC.browser&&this.ctx.ellipse(r.x,r.y,n.x,n.y,0,0,2*Math.PI),this.ctx.stroke())},this.fillEllipse=function(e,t,i,a){if(null!==this.ctx){var n={x:Math.abs(e-i)/2,y:Math.abs(t-a)/2},r={x:e-(e-i)/2,y:t-(t-a)/2};this.ctx.beginPath(),\"IE\"!==apiRTC.browser&&this.ctx.ellipse(r.x,r.y,n.x,n.y,0,0,2*Math.PI),this.ctx.fill()}},this.drawRectangle=function(e,t,i,a){if(null!==this.ctx){this.ctx.beginPath();var n=e,r=t;e>i&&(n=i),t>a&&(r=a),this.ctx.rect(n,r,Math.abs(e-i),Math.abs(t-a)),this.ctx.stroke()}},this.getContext=function(){return this.ctx},this.loadPhotoInBackground=function(e){a.debug(\"[Whiteboard] loadPhotoInBackground :\"+e);var t=document.getElementsByTagName(\"body\")[0];t.style.backgroundImage=\"url(\"+e+\")\",t.style.backgroundPosition=\"50% 50%\",t.style.backgroundRepeat=\"no-repeat\"},this.messageProcessing=function(e){a.debug(\"[Whiteboard] messageProcessing\");var t,i=null,n=null,r=!1,o=null,s=null,l=null,d=null,c=null;if(this.cursors[e.id]||(a.log(\"[Whiteboard] messageProcessing - creating cursor for new user : \"+e.id),this.cursors[e.id]={id:e.id},this.clients[e.id]={}),this.cursors[e.id].x=e.x,this.cursors[e.id].y=e.y,this.cursors[e.id].lastUpdate=Date.now(),e.cursorColor&&null!==e.cursorColor?this.cursors[e.id].color=e.cursorColor:this.cursors[e.id].color=\"invisible\",void 0===apiRTC.userAgentInstance||\"ON\"===apiRTC.userAgentInstance.capabilities.whiteboardCursor?\"invisible\"!==this.cursors[e.id].color&&(r=!0):(a.debug(\"[Whiteboard] - cursor is not supported on userAgent\"),this.cursors[e.id].color=\"invisible\"),null!==this.ghostElements[e.id]&&(this.ghostElements[e.id]=null,r=!0),this.listenedPeers.hasOwnProperty(e.id))for(o={id:e.id,x:e.x,y:e.y,tool:e.tool,drawing:e.drawing},t=0;t<this.listenedPeers[e.id].length;t++)\"function\"==typeof this.listenedPeers[e.id][t]?this.listenedPeers[e.id][t](o):a.warn(\"[Whiteboard] Peer listenener is not a function!\");if(e.drawing&&this.clients[e.id]&&(a.debug(\"data.drawing && this.clients[data.id]\"),n={fromx:void 0!==e.prevX?e.prevX:this.clients[e.id].x,fromy:void 0!==e.prevY?e.prevY:this.clients[e.id].y,tox:e.x,toy:e.y,type:null!==e.tool?e.tool:\"pen\",color:e.color,width:e.width,userId:e.id,drawingId:e.drawingId},this.GEOMETRY_TOOLS.indexOf(n.type)>-1?e.prevX&&e.prevY&&(this.ghostElements[e.id]=n,r=!0):this.addNewDrawing(n),this.focusOnDrawing&&((i=this.canvas.parentNode).scrollLeft=this.currentScale*(e.x-this.dx)-i.clientWidth/2,i.scrollTop=this.currentScale*(e.y-this.dy)-i.clientHeight/2)),e.drawObject&&((n=e.drawObject).color=e.color,n.width=e.width,this.ghostElements[e.id]=null,this.addNewDrawing(n),this.focusOnDrawing&&((i=this.canvas.parentNode).scrollLeft=this.currentScale*(e.x-this.dx)-i.clientWidth/2,i.scrollTop=this.currentScale*(e.y-this.dy)-i.clientHeight/2)),e.hasOwnProperty(\"drawObjectsArray\"))for(t=0;t<e.drawObjectsArray.length;t++)this.addNewDrawing(e.drawObjectsArray[t]);if(e.hasOwnProperty(\"delete\"))for(t=this.drawElements.length-1,r=!0;t>=0;)e.delete.indexOf(this.drawElements[t].drawingId)>-1&&this.drawElements[t].userId==e.id&&this.drawElements.splice(t,1),t--;if(e.hasOwnProperty(\"paperSheetId\")){if(e.paperSheetId<this.paperSheetId)a.debug(\"[Whiteboard] - data.paperSheetId < this.paperSheetId\");else if(e.paperSheetId>this.paperSheetId){if(a.debug(\"[Whiteboard] - messageProcessing : peer has a more recent version : \"+this.paperSheetId+\" vs \"+e.paperSheetId),e.hasOwnProperty(\"deleteHistory\")&&a.debug(\"User : \"+e.id+\" ,has deleted the history\"),e.hasOwnProperty(\"drawElements\")){for(a.debug(\"[Whiteboard] - messageProcessing : receiving update from peer\"),null!==e.drawElements?this.drawElements=e.drawElements:this.drawElements=[],t=0;t<this.drawElements.length;t++)this.drawElements[t].hasOwnProperty(\"userId\")&&this.drawElements[t].hasOwnProperty(\"drawingId\")&&(this.clients[this.drawElements[t].userId]={x:0,y:0,drawing:!1,tool:\"pen\",cursorColor:null,color:null,width:1,paperSheetId:this.paperSheetId,drawingId:this.drawElements[t].drawingId,id:this.drawElements[t].userId});this.paperSheetId=e.paperSheetId,this.drawingId=0,r=!0}}else if(e.hasOwnProperty(\"drawingId\"))if(a.debug(\"[Whiteboard] - data.hasOwnProperty(drawingId): \"),0!==e.drawingId&&void 0===this.clients[e.id]||void 0!==this.clients[e.id]&&this.clients[e.id].hasOwnProperty(\"drawingId\")&&e.drawingId-this.clients[e.id].drawingId>1)a.log(\"[Whiteboard] - messageProcessing : catchup from peer required : \"+e.drawingId),d=e.id+\"||-1\",void 0!==this.clients[e.id]&&this.clients[e.id].hasOwnProperty(\"drawingId\")&&(d=e.id+\"||\"+this.clients[e.id].drawingId),this.sendDataToRoom({tool:\"void\",needCatchUp:d});else if(e.hasOwnProperty(\"needCatchUp\")&&(e.needCatchUp.startsWith(apiCC.session.apiCCId+\"||\")||e.needCatchUp.startsWith(\"*||\"))){for(a.debug(\"[Whiteboard] - messageProcessing : letting peer catchup: \"+e.id),s=e.needCatchUp.split(\"||\")[1],l=[],t=0;t<this.drawElements.length;t++)(c=this.drawElements[t]).hasOwnProperty(\"userId\")&&c.hasOwnProperty(\"drawingId\")&&c.userId===apiCC.session.apiCCId&&c.drawingId>parseInt(s,10)&&l.push(c);this.sendDataToRoom({tool:\"void\",catchUpData:l,catchupIndex:s})}else a.debug(\"[Whiteboard] - else - drawingId\");else if(e.hasOwnProperty(\"needCatchUp\")){for(a.debug(\"[Whiteboard] - messageProcessing : needCatchUp\"+e.id),s=e.needCatchUp.split(\"||\")[1],l=[],t=0;t<this.drawElements.length;t++)c=this.drawElements[t],l.push(c);a.debug(\"[Whiteboard] - sending catchUpData : \",l),this.sendDataToRoom({tool:\"void\",catchUpData:l,catchupIndex:s})}else a.debug(\"[Whiteboard] - else - paperSheetId\");if(e.hasOwnProperty(\"catchUpData\")){for(a.debug(\"[Whiteboard] - messageProcessing : catching up: \"+e.id),\"complete\"===e.catchUpStatus&&(a.debug(\"catchUpData is complete, cleaning drawElements\"),this.drawElements.splice(0,this.drawElements.length)),t=0;t<e.catchUpData.length;t++)c=e.catchUpData[t],e.userId===apiCC.session.apiCCId&&c.hasOwnProperty(\"drawingId\")&&this.drawingId<c.drawingId&&(this.drawingId=c.drawingId+1);this.drawElements=e.catchUpData.concat(this.drawElements),this.paperSheetId=e.paperSheetId,r=!0}}r&&this.redraw(),this.clients[e.id]=e},this.isStarted=function(){return this.sessionStarted},this.start=function(){this.isStarted()?a.warn(\"[Whiteboard] WhiteBoardClient is already started\"):(a.info(\"[Whiteboard] starting WhiteBoardClient\"),this.isDrawing=!1,this.prev={},this.lastEmit=Date.now(),this.currentScale=1,this.dx=0,this.dy=0,this.drawingId=0,this.clients={},this.listenedPeers={},this.cursors={},this.drawElements=[],this.touchScreenActivated=!1,this.sessionStarted=!0,null!==this.canvas&&(this.canvas.onmousedown=this.onmousedown,this.canvas.onmouseup=this.onmouseup,this.canvas.onmouseleave=this.onmouseleave,this.canvas.onmousemove=this.onmousemove),this.redraw()),null!==apiCC.session&&void 0!==apiCC.session.roomMgr||(a.log(\"[Whiteboard] roomMgr is not defined, setting offline mode\"),this.offline=!0)},this.stop=function(){this.isStarted()?(a.info(\"[Whiteboard] Stopping WhiteBoardClient\"),this.isInRoom()&&this.leaveRoom(),this.sessionStarted=!1,null!==this.canvas&&(this.canvas.onmousedown=null,this.canvas.onmouseup=null,this.canvas.onmouseleave=null,this.canvas.onmousemove=null,this.touchScreenActivated&&(this.canvas.removeEventListener(\"touchstart\",this.onTouchStart,!1),this.canvas.removeEventListener(\"touchend\",this.onTouchEnd,!1),this.canvas.removeEventListener(\"touchcancel\",this.onTouchCancel,!1),this.canvas.removeEventListener(\"touchleave\",this.onTouchEnd,!1),this.canvas.removeEventListener(\"touchmove\",this.onTouchMove,!1))),this.drawElements=[],this.ghostElements={},this.redoStack=[]):a.info(\"[Whiteboard] cannot stop WhiteboardClient as it is not started\")},this.getTouchOffSet=function(e){a.debug(\"[Whiteboard] getTouchOffSet():\");var t,i,n,r,o=null,s={offsetX:0,offsetY:0};return o=e.target,t=window.getComputedStyle(o,null),i=parseInt(t.borderLeftWidth,10),n=parseInt(t.borderTopWidth,10),r=o.getBoundingClientRect(),s.offsetX=e.clientX-i-r.left,s.offsetY=e.clientY-n-r.top,a.log(\"offset.offsetX :\"+s.offsetX),a.log(\"offset.offsetY :\"+s.offsetY),s},this.toggleTouchScreen=function(){!0===this.touchScreenActivated?this.deactivateTouchScreen():this.activateTouchScreen()},this.activateTouchScreen=function(){null!==this.canvas?(this.touchScreenActivated=!0,this.canvas.addEventListener(\"touchstart\",this.onTouchStart,!1),this.canvas.addEventListener(\"touchend\",this.onTouchEnd,!1),this.canvas.addEventListener(\"touchcancel\",this.onTouchCancel,!1),this.canvas.addEventListener(\"touchleave\",this.onTouchEnd,!1),this.canvas.addEventListener(\"touchmove\",this.onTouchMove,!1)):a.warn(\"Trying to activateTouchScreen() while canvas is null.\")},this.deactivateTouchScreen=function(){null!==this.canvas?(this.touchScreenActivated=!1,this.canvas.removeEventListener(\"touchstart\",this.onTouchStart,!1),this.canvas.removeEventListener(\"touchend\",this.onTouchEnd,!1),this.canvas.removeEventListener(\"touchcancel\",this.onTouchCancel,!1),this.canvas.removeEventListener(\"touchleave\",this.onTouchEnd,!1),this.canvas.removeEventListener(\"touchmove\",this.onTouchMove,!1)):a.warn(\"Trying to deactivateTouchScreen() while canvas is null.\")},this.activateLaserMode=function(){this.laserModeActivated=!0},this.deactivateLaserMode=function(){this.laserModeActivated=!1},this.sendDrawingData=function(e,t,i){a.debug(\"[Whiteboard] sendDrawingData()\");var n={x:e.offsetX,y:e.offsetY,drawing:t,prevX:this.prev.x,prevY:this.prev.y};if(!1!==t||\"invisible\"!==this.userCursorColor){var r=0;null!==apiCC.session&&(r=apiCC.session.apiCCId),null!==i&&(n.drawObject=i,n.drawObject.drawingId=this.drawingId,n.drawObject.userId=r,this.drawingId++),n.drawingId=this.drawingId,this.sendDataToRoom(n)}else a.debug(\"isDrawing false and userCursorColor invisible - leaving sendDrawingData\")},this.onmousedown=function(e){e.preventDefault();var t,i,a=e.target||e.srcElement,r=a.currentStyle||window.getComputedStyle(a,null),s=parseInt(r.borderLeftWidth,10)||0,l=parseInt(r.borderTopWidth,10)||0,d=a.getBoundingClientRect(),c={offsetX:this.dx+1/this.currentScale*(e.clientX-s-d.left),offsetY:this.dy+1/this.currentScale*(e.clientY-l-d.top)};if(this.prev.x=c.offsetX,this.prev.y=c.offsetY,this.isDrawing=!0,this.undoIndex++,this.redoStack=[],null===(t=document.getElementById(n))||this.instructionsFaded||(o(t),this.instructionsFaded=!0),\"erase\"===this.currentTool){this.sendDrawingData(c,this.isDrawing,null);var u=0;null!==apiCC.session&&(u=apiCC.session.apiCCId),this.lastEmit=Date.now(),i={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:u,drawingId:this.drawingId,undoIndex:this.undoIndex,time:Date.now()},this.drawingId++,this.addNewDrawing(i),this.redraw()}}.bind(this),this.onmouseup=function(e){var t,i=null,a=null,n=0,r=0,o=null,s={offsetX:0,offsetY:0},l=0;this.isDrawing&&this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(a=(i=e.target||e.srcElement).currentStyle||window.getComputedStyle(i,null),n=parseInt(a.borderLeftWidth,10)||0,r=parseInt(a.borderTopWidth,10)||0,o=i.getBoundingClientRect(),s.offsetX=this.dx+1/this.currentScale*(e.clientX-n-o.left),s.offsetY=this.dy+1/this.currentScale*(e.clientY-r-o.top),null!==apiCC.session&&(l=apiCC.session.apiCCId),t={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,tox:s.offsetX,toy:s.offsetY,color:this.currentColor,width:this.currentBrushWidth,userId:l,undoIndex:this.undoIndex,time:Date.now()},this.sendDrawingData(s,this.isDrawing,t),this.ghostElements[l]=null,this.redraw(),this.addNewDrawing(t),this.prev.x=s.offsetX,this.prev.y=s.offsetY),this.isDrawing=!1,this.ghostElements[l]=null}.bind(this),this.onmouseleave=function(){var e=0;null!==apiCC.session&&(e=apiCC.session.apiCCId),this.isDrawing=!1,this.sendDrawingData({offsetX:0,offsetY:0},this.isDrawing,null),this.ghostElements[e]=null}.bind(this),this.onmousemove=function(e){var t,i,a,n,r,o=null,s={};if(t=(o=e.target||e.srcElement).currentStyle||window.getComputedStyle(o,null),i=parseInt(t.borderLeftWidth,10)||0,a=parseInt(t.borderTopWidth,10)||0,n=o.getBoundingClientRect(),s.offsetX=this.dx+1/this.currentScale*(e.clientX-i-n.left),s.offsetY=this.dy+1/this.currentScale*(e.clientY-a-n.top),Date.now()-this.lastEmit>30)if(this.sendDrawingData(s,this.isDrawing,null),this.lastEmit=Date.now(),this.isDrawing){var l=0;null!==apiCC.session&&(l=apiCC.session.apiCCId),r={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:l,undoIndex:this.undoIndex,time:Date.now()},\"pen\"===this.currentTool||\"erase\"===this.currentTool?(\"pen\"===this.currentTool&&(r.tox=s.offsetX,r.toy=s.offsetY),r.drawingId=this.drawingId,this.drawingId++,this.addNewDrawing(r),this.prev.x=s.offsetX,this.prev.y=s.offsetY):this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(r.tox=s.offsetX,r.toy=s.offsetY,this.ghostElements[l]=r),\"pen\"!==this.currentTool&&this.redraw()}else\"erase\"===this.currentTool&&(this.redraw(),r={type:\"rectangle\",fromx:s.offsetX-this.currentBrushWidth,fromy:s.offsetY-this.currentBrushWidth,tox:parseInt(s.offsetX,10)+parseInt(this.currentBrushWidth,10),toy:parseInt(s.offsetY,10)+parseInt(this.currentBrushWidth,10),color:\"#444444\",width:1},this.drawSingleObject(r),r.color=\"#DDDDDD\",r.fromx=r.fromx-1,r.fromy=r.fromy-1,r.tox=r.tox+1,r.toy=r.toy+1,this.drawSingleObject(r))}.bind(this),this.onTouchStart=function(e){a.debug(\"[Whiteboard] handleStart\"),e.preventDefault();var t,i=e.changedTouches,r={};this.isDrawing=!0,this.undoIndex++,this.redoStack=[],(r=this.getTouchOffSet(i[0])).offsetX=this.dx+1/this.currentScale*r.offsetX,r.offsetY=this.dy+1/this.currentScale*r.offsetY,this.prev.x=r.offsetX,this.prev.y=r.offsetY,this.sendDrawingData(r,!1,null),null!==(t=document.getElementById(n))&&o(t)}.bind(this),this.onTouchEnd=function(e){a.debug(\"[Whiteboard] handleEnd :\"+e);var t,i={},n=e.changedTouches,r=0;this.isDrawing&&this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&((i=this.getTouchOffSet(n[0])).offsetX=this.dx+1/this.currentScale*i.offsetX,i.offsetY=this.dy+1/this.currentScale*i.offsetY,null!==apiCC.session&&(r=apiCC.session.apiCCId),t={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,tox:i.offsetX,toy:i.offsetY,color:this.currentColor,width:this.currentBrushWidth,userId:r,undoIndex:this.undoIndex,time:Date.now()},this.sendDrawingData(i,this.isDrawing,t),this.addNewDrawing(t),this.prev.x=i.offsetX,this.prev.y=i.offsetY),this.isDrawing=!1,this.ghostElements[r]=null,e=null}.bind(this),this.onTouchCancel=function(e){a.debug(\"[Whiteboard] handleCancel :\"+e);var t=0;null!==apiCC.session&&(t=apiCC.session.apiCCId),this.isDrawing=!1,this.ghostElements[t]=null,e=null}.bind(this),this.onTouchMove=function(e){a.debug(\"[Whiteboard] handleMove :\"+e);var t,i=e.changedTouches,n={};if(Date.now()-this.lastEmit>30&&((n=this.getTouchOffSet(i[0])).offsetX=this.dx+1/this.currentScale*n.offsetX,n.offsetY=this.dy+1/this.currentScale*n.offsetY,this.sendDrawingData(n,this.isDrawing,null),this.lastEmit=Date.now(),this.isDrawing)){(n=this.getTouchOffSet(i[0])).offsetX=this.dx+1/this.currentScale*n.offsetX,n.offsetY=this.dy+1/this.currentScale*n.offsetY;var r=0;null!==apiCC.session&&(r=apiCC.session.apiCCId),t={type:this.currentTool,fromx:this.prev.x,fromy:this.prev.y,color:this.currentColor,width:this.currentBrushWidth,userId:r,undoIndex:this.undoIndex,time:Date.now()},\"pen\"===this.currentTool||\"erase\"===this.currentTool?(\"pen\"===this.currentTool&&(t.tox=n.offsetX,t.toy=n.offsetY),t.drawingId=this.drawingId,this.drawingId++,this.addNewDrawing(t),this.prev.x=n.offsetX,this.prev.y=n.offsetY):this.GEOMETRY_TOOLS.indexOf(this.currentTool)>-1&&(t.tox=n.offsetX,t.toy=n.offsetY,this.ghostElements[r]=t,this.redraw())}}.bind(this)}},2719:(e,t,i)=>{\"use strict\";i.r(t),i(2772),i(3710),i(9554),i(1539),i(8674),i(561),i(2564),i(8309),i(4916),i(3123),i(1058),i(6992),i(8783),i(3948),i(285),i(1637),i(4363),i(9653),i(9714),i(3843),i(7941),i(4812),i(9575),i(2472),i(2990),i(8927),i(3105),i(5035),i(4345),i(7174),i(2846),i(4731),i(7209),i(6319),i(8867),i(7789),i(3739),i(9368),i(4483),i(2056),i(3462),i(678),i(7462),i(3824),i(5021),i(2974),i(5016),i(2222),i(9600),i(6755),i(4747),i(2526),i(1817),i(2165);var a=i(1549),n=i(5945),r=i(8765),o=i(1215),s=i(3173),l=a.Y.get(\"RecordManager\"),d=i(4708);function c(e){return c=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},c(e)}var u=a.Y.get(\"ApiCC_Methods\"),h=i(6075).F;apiCC.myWebRTC_Adapter=new h,apiCC.myWebRTC_Event=new r.K;var p=apiCC.myWebRTC_Event;apiCC.myWebRTC_Event.customEventIsDefined,apiCC.myEventTable=[],apiCC.ApiCCSession=i(3720).K,apiCC.ApiCCWebRTCClient=i(5882).D,apiCC.ApiCCUserMediaStream=i(7323).q,apiCC.ApiCCPointerSharingClient=i(9213).X,apiCC.ApiCCWhiteBoardClient=i(6527).p,apiCC.ApiCCDataClient=i(128)._,apiCC.ApiCCIMClient=i(6844).U,apiCC.ApiCCCoBrowsingClient=i(1254).W,apiCC.recordMgr=new function(){l.debug(\"RecordManager creation\"),this.mediaRecorder=null,this.recordedBlobs=[],this.mimeType=null,this.record=function(e,t){var i=this;return l.info(\"record\"),l.log(\"stream :\"+e),l.log(\"stream :\",e),new Promise((function(a,n){var r=null;if(void 0===MediaRecorder)return l.debug(\"MediaRecorder is not supported on this browser, leaving recordStream process\"),void n(o.g.createError(s.g.ERROR_STREAM_RECORD,\"MediaRecorder is not supported on this browser, leaving recordStream process\",l));if(null===e)return l.debug(\"Stream has no data, cannot record\"),void n(o.g.createError(s.g.ERROR_STREAM_RECORD,\"Stream has no data, cannot record\",l));if(null!==i.mediaRecorder&&(l.log(\"this.mediaRecorder.state :\"+i.mediaRecorder.state),\"recording\"===i.mediaRecorder.state||\"paused\"===i.mediaRecorder.state))return l.log(\"mediaRecorder is already ongoing, use stopRecordStream before trying another record\"),void n(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder is already ongoing, use stopRecordStream before trying another record\",l));if(l.debug(\"checking MediaRecorderOptions mimeType support\"),null!=t?(l.debug(\"options is defined :\",t),null!==t.mimeType&&void 0!==t.mimeType&&(l.debug(\"contentType is defined :\",t.mimeType),MediaRecorder.isTypeSupported(t.mimeType)&&(r=t.mimeType))):t={},null===r){var d=\"video/webm;codecs=vp8,opus\";MediaRecorder.isTypeSupported(d)||(l.debug(d+\" is not Supported\"),d=\"video/webm;codecs=vp9,opus\",MediaRecorder.isTypeSupported(d)||(l.debug(d+\" is not Supported\"),d=\"video/webm\",MediaRecorder.isTypeSupported(d)||(l.debug(d+\" is not Supported\"),d=\"\"))),t.mimeType=d}i.mimeType=t.mimeType,l.debug(\"Start record with MediaRecorderOptions :\",t);try{i.recordedBlobs=[],i.mediaRecorder=new MediaRecorder(e,t)}catch(e){return l.error(\"Exception while creating MediaRecorder: \"+e+\". mimeType: \"+t.mimeType),void n(o.g.createError(s.g.ERROR_STREAM_RECORD,\"Exception while creating MediaRecorder: \"+e+\". mimeType: \"+t.mimeType,l))}i.mediaRecorder.onstart=function(e){l.log(\"onstart :\"+e),this.onerror=null,a()},i.mediaRecorder.ondataavailable=function(e){e.data&&e.data.size>0&&apiCC.recordMgr.recordedBlobs.push(e.data)},i.mediaRecorder.onerror=function(e){l.log(\"onerror :\"+e),n(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder error :\"+e,l)),this.onerror=null},i.mediaRecorder.start(10),l.log(\"MediaRecorder started\",i.mediaRecorder)}))},this.stop=function(){var e=this;return l.info(\"stop\"),new Promise((function(t,i){return e.mediaRecorder.onstop=function(e){l.log(\"mediaRecorder onstop :\"+e),this.onstart=null,this.onstop=null,this.onerror=null,this.onpause=null,this.onresume=null,this.ondataavailable=null;var i=new Blob(apiCC.recordMgr.recordedBlobs,{type:this.mimeType});t(i)},void 0===MediaRecorder?(l.debug(\"MediaRecorder is not supported on this browser, leaving recordStream process\"),void i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"MediaRecorder is not supported on this browser, leaving recordStream process\",l))):null===e.mediaRecorder?(l.log(\"mediaRecorder is not running, use startRecordStream before trying to stop\"),void i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder is not running, use startRecordStream before trying to stop\",l))):(l.log(\"this.mediaRecorder.state :\"+e.mediaRecorder.state),\"inactive\"===e.mediaRecorder.state?(l.log(\"mediaRecorder is already inactive\"),void i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder is already inactive\",l))):void e.mediaRecorder.stop())}))},this.pause=function(){var e=this;return l.info(\"pause\"),new Promise((function(t,i){return null===e.mediaRecorder?(l.log(\"mediaRecorder is not running, use startRecordStream before trying to pause\"),void i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder is not running, use startRecordStream before trying to pause\",l))):(l.log(\"this.mediaRecorder.state :\"+e.mediaRecorder.state),\"paused\"===e.mediaRecorder.state?(l.log(\"mediaRecorder is already paused\"),void i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder is already paused\",l))):\"inactive\"===e.mediaRecorder.state?(l.log(\"mediaRecorder is inactive\"),void i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder is inactive\",l))):(e.mediaRecorder.onerror=function(e){l.log(\"onerror :\"+e),i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder error :\"+e,l)),this.onerror=null},e.mediaRecorder.onpause=function(e){l.log(\"onpause :\"+e),this.onerror=null,t()},void e.mediaRecorder.pause()))}))},this.resume=function(){var e=this;return l.info(\"resume\"),new Promise((function(t,i){return null===e.mediaRecorder?(l.log(\"mediaRecorder is not running, use startRecordStream before trying to resume\"),void i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder is not running, use startRecordStream before trying to resume\",l))):(l.log(\"this.mediaRecorder.state :\"+e.mediaRecorder.state),\"recording\"===e.mediaRecorder.state?(l.log(\"mediaRecorder is already recording\"),void i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder is already recording\",l))):\"inactive\"===e.mediaRecorder.state?(l.log(\"mediaRecorder is inactive\"),void i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder is inactive\",l))):(e.mediaRecorder.onerror=function(e){l.log(\"onerror :\"+e),i(o.g.createError(s.g.ERROR_STREAM_RECORD,\"mediaRecorder error :\"+e,l)),this.onerror=null},e.mediaRecorder.onresume=function(e){l.log(\"onresume :\"+e),this.onerror=null,t()},void e.mediaRecorder.resume()))}))}},\"electron\"!==n.$6?i(2746):u.debug(\"Electron detected, not loading onbeforeunload\"),apiCC.addEventListener=function(e,t){var i={},a=null;[\"sessionReady\",\"incomingCall\",\"callEstablished\",\"remoteHangup\",\"userMediaSuccess\",\"userMediaError\",\"userMediaStop\",\"error\",\"receiveIMMessage\",\"updatePresence\",\"webRTCClientCreated\",\"updateUserStatus\",\"channelEvent\",\"groupChatCreation\",\"groupChatInvitation\",\"groupChatMemberUpdate\",\"addUserInGroupChatAnswer\",\"receiveGroupChatMessage\",\"userDataAnswer\",\"fetchUserDataAnswer\",\"receiveConversationList\",\"receiveConversationHistory\",\"receiveConversationDetailReport\",\"receiveContactOccurrencesFromConversationList\",\"receiveMCUSessionInvitation\",\"MCUSessionCreation\",\"MCUAvailableStream\",\"MCUAvailableStreamUpdate\",\"MCUAvailableReplay\",\"MCURemoveStream\",\"canPlayRemoteVideo\",\"recordedFileAvailable\",\"receiveData\",\"roomCreation\",\"roomJoined\",\"roomInvitation\",\"roomMemberUpdate\",\"receiveRoomMessage\",\"contactListInRoom\",\"snapShotPhotoUploaded\",\"stopRecord\",\"callAttempt\",\"joinMCUSessionAnswer\",\"hangup\",\"desktopCapture\",\"remoteStreamAdded\",\"localStreamRemoved\",\"remoteStreamRemoved\",\"switchStream\",\"sendDataChannelOpen\",\"sendDataChannelClose\",\"sendDataChannelError\",\"receiveDataChannelOpen\",\"receiveDataChannelClose\",\"receiveDataChannelError\",\"connectedUsersListUpdate\",\"onFileSended\",\"onFileSending\",\"onFileReceiving\",\"onFileReceived\",\"onFileProgress\",\"onFilePending\",\"recordedStreamsAvailable\",\"closingWhiteBoard\",\"webRTCPluginInstallation\",\"onQosStatsUpdate\",\"onQosChange\",\"onQosAudioChange\",\"onCallScoreUpdate\",\"activeSpeaker\",\"stopSpeaking\",\"audioAmplitude\",\"preCallTestStatus\",\"onQosVideoChange\",\"onCallStatsUpdate\",\"cpuLimited\",\"bandwidthLimited\",\"MCURecordedStreamsAvailable\",\"MCURecordingStarted\",\"MCURecordingStopped\",\"ICECandidateTypeUpdate\",\"disconnectionWarning\",\"MCUAvailableComposite\",\"callRestarting\",\"selectedICECandidate\",\"MCUParticipantEjected\",\"MCURoomModeChanged\",\"MCUStreamingStarted\",\"MCUStreamingStopped\",\"mediaDeviceChanged\",\"externalJsLoadingStatus\",\"slowLink\",\"localStreamUpdated\",\"remoteStreamUpdated\",\"simulcastFeedChanged\",\"videoQualityChanged\",\"bandwidthResourceManagement\",\"backgroundSubstractionStopVisibilityChange\",\"backgroundSubstractionStopComputeTime\",\"AIESnapshot\",\"AIELog\",\"cloudEventOccurred\"].indexOf(e)>-1?(\"remoteHangup\"===e&&u.warn(\"DEPRECATED : ApiRTC : remoteHangup event is now deprecated, please use hangup event instead\"),u.log(\"Adding listener on type :\"+e),\"undefined\"!=typeof apiRTC_React?eventManager.addEventListener(e,t):document.addEventListener?document.addEventListener(e,t,!1):\"undefined\"!=typeof $jqApz?(u.log(\"using $jqApz\"),$jqApz(document).on(e,t)):\"undefined\"!=typeof jQuery?(u.log(\"using jQuery\"),jQuery(document).on(e,t)):u.warn(\"Custom Events not supported on this browser : addEventListener()\"),i={type:e,listener:t},a=apiCC.myEventTable.push(i),u.trace(\"number of myEventTable:\"+a)):(p.createErrorEvent(\"ERROR: Trying to add a listener on an unknow event\",\"UNKNOWN_EVENT_ON_ADDLISTENER\"),u.log(\"ERROR: Trying to add a listener on an unknow event :\"+e))},apiCC.removeEventListener=function(e,t){u.debug(\"Removing listener on type :\"+e),document.removeEventListener?document.removeEventListener(e,t,!1):\"undefined\"!=typeof jQuery?jQuery(document).off(e,t):u.log(\"Custom Events not supported on this browser\")},apiCC.setSessionStorage=function(e,t,i){u.debug(\"setSessionStorage\"),i=i||36e5;var a=new Date,n=new Date;n.setTime(a.getTime()+i);try{var r=JSON.stringify({value:t,expiresAt:n});sessionStorage.setItem(e,r)}catch(e){u.error(\"Sotheming went wrong during json strigify to set session storage values\")}},apiCC.isWebRTCCompliant=function(){u.debug(\"isWebRTCCompliant\");var e=!1,t=!1;return[\"RTCPeerConnection\",\"webkitRTCPeerConnection\",\"mozRTCPeerConnection\",\"RTCIceGatherer\"].forEach((function(t){e||t in window&&(e=!0)})),!1===e?(u.debug(\"isWebRTCCompliant::isWebRTCSupported false\"),!1):([\"getUserMedia\",\"webkitGetUserMedia\",\"mozGetUserMedia\",\"msGetUserMedia\"].forEach((function(e){t||e in navigator&&(t=!0)})),!1===t?(u.debug(\"isWebRTCCompliant::isWebRTCGUMSupported false or you are connected with HTTP\"),!1):\"MIUI Browser\"===n.Xh?(u.debug(\"isWebRTCCompliant::MIUI Browser detected false\"),!1):\"UCBrowser\"===n.Xh?(u.debug(\"isWebRTCCompliant::UCBrowser detected false\"),!1):\"QQ\"===n.Xh||\"QQBrowser\"===n.Xh||\"QQBrowserLite\"===n.Xh?(u.debug(\"isWebRTCCompliant::QQ or QQBrowser or QQBrowserLite detected false\"),!1):\"Baidu\"===n.Xh||\"baidu\"===n.Xh?(u.debug(\"isWebRTCCompliant::Baidu or baidu detected false\"),!1):(\"IE\"===n.Xh||\"Safari\"===n.Xh&&n.PR<11)&&!0!==this.webRTCPluginActivated?(u.debug(\"isWebRTCCompliant FALSE : IE or Safari\"),!1):(u.debug(\"isWebRTCCompliant:: WebRTC is supported\"),!0))},apiCC.isQoSStatCompliant=function(){var e=!1;return[\"chrome\",\"firefox\"].indexOf(apiCC.browserDetails.type)<0?(u.debug(\"QoS Statistics is only supported on Chrome and Firefox\"),e):e=!0},apiCC.isScreenSharingCompliant=function(){var e=!1;return\"IE\"===n.Xh||\"Android\"===n.BF||\"iOS\"===apiRTC.osName&&\"undefined\"!=typeof cordova||(\"Chrome\"===n.Xh||\"Firefox\"===n.Xh&&n.PR>=52||navigator.getDisplayMedia||navigator.mediaDevices.getDisplayMedia?e=!0:u.debug(\"ScreenSharing is not supported\")),e},apiCC.getMediaDevices=function(){return u.debug(\"getMediaDevices\"),new Promise((function(e,t){if(\"undefined\"!=typeof apiRTC_React)u.log(\"enumerateDevices() is supported - React Native\"),mediaDevices.enumerateDevices().then((function(t){u.log(\"enumerateDevices(), sources :\",t),apiCC.mediaDeviceMgr.mediaSourceInfos=t,e(t)})).catch((function(e){u.log(\"enumerateDevices(), error :\",e),t(e)}));else if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)u.log(\"enumerateDevices() is supported.\"),navigator.mediaDevices.enumerateDevices().then((function(t){u.log(\"enumerateDevices(), sources :\",t),apiCC.mediaDeviceMgr.mediaSourceInfos=t,e(t)})).catch((function(e){u.log(\"enumerateDevices(), error :\",e),t(e)}));else if(u.log(\"enumerateDevices() not supported.\"),\"undefined\"==typeof MediaStreamTrack)u.warn(\"This browser does not support MediaStreamTrack\"),t(new Error(\"getMediaDevices() - MediaStreamTrack undefined\"));else try{MediaStreamTrack.getSources(e)}catch(e){u.debug(\"catch MediaStreamTrack.getSources :\"+e),t(new Error(\"getMediaDevices() - Error on MediaStreamTrack.getSources :\"+e))}}))},apiCC.getMediaDevicesWithCB=function(e){if(u.debug(\"getMediaDevicesWithCB\"),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)u.log(\"enumerateDevices() is supported.\"),navigator.mediaDevices.enumerateDevices().then(e).catch((function(e){u.log(\"navigator.mediaDevices.enumerateDevices error: \",e),e=null}));else if(u.log(\"enumerateDevices() not supported.\"),\"undefined\"==typeof MediaStreamTrack)e(null),u.warn(\"This browser does not support MediaStreamTrack\");else try{MediaStreamTrack.getSources(e)}catch(t){u.debug(\"catch MediaStreamTrack.getSources :\"+t),e(null)}},apiCC.getUserMedia=function(e){return u.info(\"getUserMedia\"),u.debug(\"with constraints :\",e),new Promise((function(t,i){void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia?(u.debug(\"webRTC getUserMedia with promises\"),navigator.mediaDevices.getUserMedia(e).then(t).catch(i)):\"undefined\"!=typeof apiRTC_React?(u.debug(\"webRTC getUserMedia with promises on React Native\"),mediaDevices.getUserMedia(e).then(t).catch(i)):(u.debug(\"webRTC getUserMedia without promises\"),apiCC.myWebRTC_Adapter.getUserMedia(e,t,i))}))},apiCC.getUserMediaWithCB=function(e,t,i){u.info(\"getUserMediaWithCB\"),u.debug(\"with constraints :\"+JSON.stringify(e)),void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia?(u.log(\"getUserMedia with promises\"),navigator.mediaDevices.getUserMedia(e).then(t).catch(i)):(u.log(\"getUserMedia without promises\"),apiCC.myWebRTC_Adapter.getUserMedia(e,t,i))},apiCC.userMediaStreamTable=[],apiCC.getUserMediaStreamIds=function(){for(var e=[],t=apiCC.userMediaStreamTable.length;--t>=0;)e.push(apiCC.userMediaStreamTable[t].userMediaStreamId);return e},apiCC.getUserMediaStream=function(e,t){var i=null,a=apiCC.userMediaStreamTable.length;if(null==e){if(t&&\"function\"==typeof t.accept)for(;--a>=0;)if(!0===t.accept(apiCC.userMediaStreamTable[a])){i=apiCC.userMediaStreamTable[a];break}}else for(;--a>=0;)if(apiCC.userMediaStreamTable[a].userMediaStreamId===e){i=apiCC.userMediaStreamTable[a];break}return i},apiCC.getFirstUserMediaStream=function(){return apiCC.userMediaStreamTable.length>0?apiCC.userMediaStreamTable[0]:null},apiCC.createUserMediaStream=function(e){var t=function(e){for(var t=apiCC.userMediaStreamTable.length;--t>=0;)if(apiCC.userMediaStreamTable[t].userMediaStreamId===e){apiCC.userMediaStreamTable.splice(t,1);break}},i=new apiCC.ApiCCUserMediaStream,a=\"call\";return u.debug(\"[createUserMediaStream] userMediaStreamId: \"+i.userMediaStreamId),null==e&&(e={}),e.type&&(i.callType=e.type),e.stream?(i.stream=e.stream,i.streamStolen=!0,i.notifyUserMediaStop=!1):e.gum_config&&(i.gum_config=(0,d.S6)(e.gum_config)),e.audioSourceId&&(i.inputs.audioSourceId=e.audioSourceId),e.videoSourceId&&(i.inputs.videoSourceId=e.videoSourceId),e.facingMode&&(i.inputs.facingMode=e.facingMode),e.captureSourceType&&(i.captureSourceType=e.captureSourceType),e.notifyUserMediaSuccess&&(i.notifyUserMediaSuccess=e.notifyUserMediaSuccess),e.notifyUserMediaError&&(i.notifyUserMediaError=e.notifyUserMediaError),e.tryAudioCallAfterUserMediaError&&(i.tryAudioCallAfterUserMediaError=e.tryAudioCallAfterUserMediaError),e.displayMediaStreamConstraints&&(i.displayMediaStreamConstraints=e.displayMediaStreamConstraints),e.forceExtensionOnChrome&&(i.forceExtensionOnChrome=e.forceExtensionOnChrome),e.filters&&(i.filters=e.filters),e.callId&&(\"call\"!==e.callFlavor&&\"userMedia\"!==e.callFlavor||(a=e.callFlavor),null===i.stream?i.addCallInfo(e.callId,a,!0):i.addCallInfo(e.callId,a,!1)),i.callbacks.release=\"function\"==typeof e.release?e.release:function(){},i.callbacks.success=\"function\"==typeof e.success?e.success:function(){},i.callbacks.failure=\"function\"==typeof e.failure?e.failure:function(){},apiCC.userMediaStreamTable.push(i),null===i.stream?\"screenSharing\"===i.callType||\"screenSharingWithAudio\"===i.callType?i.getScreenMedia():\"data\"!==i.callType?i.getUserMedia():!0===e.sync?(t(i.userMediaStreamId),i.callbacks.failure(i,\"wrong type\")):setTimeout((function(){t(i.userMediaStreamId),i.callbacks.failure(i,\"wrong type\")}),0):(i.updateMediaProperties(i.stream),!0===e.sync?i.callbacks.success(i):setTimeout((function(){i.callbacks.success(i)}),0)),i},apiCC.releaseUserMediaStream=function(e,t,i){var a=!1,n=apiCC.userMediaStreamTable.length,r=null;if(null!==t&&\"string\"!=typeof t&&(t=null),null==e){if(i&&\"function\"==typeof i.accept)for(;--n>=0;)if(!0===i.accept(apiCC.userMediaStreamTable[n])){if(t){if(null===(r=apiCC.userMediaStreamTable[n].getOwnerCallInfo())||r.callId!==t){apiCC.userMediaStreamTable[n].removeCallInfo(t);break}}else if(null!==(r=apiCC.userMediaStreamTable[n].getOwnerCallInfo()))break;u.debug(\"[releaseUserMediaStream] match; userMediaStreamId: \"+apiCC.userMediaStreamTable[n].userMediaStreamId),apiCC.userMediaStreamTable[n].release(),t&&apiCC.userMediaStreamTable[n].removeCallInfo(t),apiCC.userMediaStreamTable.splice(n,1),a=!0;break}}else for(;--n>=0;)if(apiCC.userMediaStreamTable[n].userMediaStreamId===e){if(t){if(null===(r=apiCC.userMediaStreamTable[n].getOwnerCallInfo())||r.callId!==t){apiCC.userMediaStreamTable[n].removeCallInfo(t);break}}else if(null!==(r=apiCC.userMediaStreamTable[n].getOwnerCallInfo()))break;u.debug(\"[releaseUserMediaStream] id; userMediaStreamId: \"+apiCC.userMediaStreamTable[n].userMediaStreamId),apiCC.userMediaStreamTable[n].release(),t&&apiCC.userMediaStreamTable[n].removeCallInfo(t),apiCC.userMediaStreamTable.splice(n,1),a=!0;break}return a},apiCC.activeSpeakerDetect=!1,apiCC.activeSpeakerThreshold=100,apiCC.enableActiveSpeakerDetecting=function(e,t){apiCC.activeSpeakerDetect=e,t&&(apiCC.activeSpeakerThreshold=t)},apiCC.apiRTCExtensionInstalled=!1,apiCC.extensionInstallationSuccessCallback=function(){u.debug(\"extensionInstallationSuccessCallback\"),apiCC.apiRTCExtensionInstalled=!0},apiCC.extensionInstallationFailureCallback=function(e,t){u.debug(\"extensionInstallationFailureCallback : Error :\"+e+\", \"+t),e=null,t=null,p.createDesktopCaptureEvent(\"Extension_installation_Error\",apiRTC.waitingShareScreenCallId,apiRTC.waitingShareScreenDestNumber,apiRTC.waitingCaptureSourceType)},apiCC.manageNotInstalledExtension=function(e,t,i){u.debug(\"manageNotInstalledExtension\"),u.warn(\"apiRTC extension not installed\"),p.createDesktopCaptureEvent(\"Extension_not_installed\",e,t),u.warn(\"Starting apiRTC extension installation\"),apiRTC.waitingShareScreenDestNumber=t,apiRTC.waitingShareScreenCallId=e,apiRTC.waitingCaptureSourceType=i,n.PR>=71?(u.debug(\"Chrome >= 71, opening Chrome web Store\"),apiRTC.extensionInstallationFailureCallback(\"Chrome71 : chrome.webstore.install() no more supported\",\"Chrome71-screenShare\"),window.open(\"https://chrome.google.com/webstore/detail/apizee-desktop-capture/mjjnofoemoepfididplbfimokpnpcoeg\")):chrome.webstore.install(\"https://chrome.google.com/webstore/detail/mjjnofoemoepfididplbfimokpnpcoeg\",apiRTC.extensionInstallationSuccessCallback,apiRTC.extensionInstallationFailureCallback)},apiCC.activateScreenSharing=function(e){u.debug(\"activateScreenSharing\");var t=null;void 0!==e?u.log(\"extensionId is defined :\"+e):(u.log(\"using apirtc extension's Id\"),e=\"mjjnofoemoepfididplbfimokpnpcoeg\"),\"Chrome\"===n.Xh?null!==document.getElementById(e)?(u.log(\"extensionLink is present, screenSharing is already activated\"),window.postMessage(\"apiRTC-extension\",\"*\")):(u.log(\"screenSharing is not yet activated\"),(t=document.createElement(\"link\")).href=\"https://chrome.google.com/webstore/detail/\"+e,t.rel=\"chrome-webstore-item\",t.id=e,document.getElementsByTagName(\"head\")[0].appendChild(t),window.addEventListener(\"message\",(function(e){var t=null;if(u.log(\"message: event: \"+JSON.stringify(e.data)),e.origin==window.location.origin){if(\"apiRTC-DeskstopCapture-loaded\"!==e.data)return\"extensionInstalledAndLoaded\"===e.data?(apiCC.apiRTCExtensionInstalled=!0,null!==apiCC.waitingShareScreenUserMediaStream&&void 0!==apiCC.waitingShareScreenUserMediaStream&&(apiCC.userMediaStreamTable.push(apiCC.waitingShareScreenUserMediaStream[0]),delete apiCC.waitingShareScreenUserMediaStream),void(apiCC.waitingShareScreenUserMediaStreamId&&(t=apiCC.getUserMediaStream(apiCC.waitingShareScreenUserMediaStreamId),delete apiCC.waitingShareScreenUserMediaStreamId,t&&t.getScreenMedia()))):void(\"object\"===c(e.data)&&void 0!==e.data.desktopId&&(\"getScreenMedia\"!==e.data.remoteId||null===(t=apiCC.getUserMediaStream(e.data.callNumber))||t.registerScreenMedia(e.data.captureSourceType,e.data.desktopId)));apiCC.apiRTCExtensionInstalled=!0}})),window.postMessage(\"apiRTC-extension\",\"*\")):(u.log(\"activateScreenSharing is only available for chrome Browser\"),p.createDesktopCaptureEvent(\"Browser_Not_Compatible\",null,null))},apiCC.checkIfAudioSourceIdExistOnDevice=function(e){u.log(\"checkIfAudioSourceIdExistOnDevice :\",e);var t,i=!1,a=null;if(null!==apiCC.mediaDeviceMgr.mediaSourceInfos)for(t=0;t<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++t)\"audio\"!==(a=apiCC.mediaDeviceMgr.mediaSourceInfos[t]).kind&&\"audioinput\"!==a.kind||(a.deviceId===e?(u.log(\"Audio device present :\",e),i=!0):u.log(\"not this deviceId\"));return i},apiCC.setAudioSourceIdInConstraint=function(e,t){return u.log(\"setAudioSourceIdInConstraint:\",t),null==e?u.log(\"audioSourceId not defined\"):!1===t.audio?u.log(\"constraints.audio === false, no audio device present\"):!1===apiCC.checkIfAudioSourceIdExistOnDevice(e)?(u.log(\"audioSourceId not found on device\"),t.audio={}):(!0!==t.audio&&void 0!==t.audio||(t.audio={}),u.log(\"audioSourceId is defined :\",e),\"iOS\"===n.ag.name?\"Mobile Safari\"===n.Xh||(t.audio.deviceId=e):\"Firefox\"===n.Xh&&n.PR>=50?t.audio.deviceId=e:\"Chrome\"===n.Xh&&n.PR<48||\"Safari\"===n.Xh&&n.PR<11?t.audio.optional=[{sourceId:e}]:t.audio.deviceId=e?{ideal:e}:void 0),u.debug(\"constraints =\",t),t},apiCC.checkIfVideoSourceIdExistOnDevice=function(e){u.log(\"checkIfVideoSourceIdExistOnDevice :\",e);var t,i=!1,a=null;if(u.debug(\"apiCC.mediaDeviceMgr.mediaSourceInfos :\",apiCC.mediaDeviceMgr.mediaSourceInfos),null!==apiCC.mediaDeviceMgr.mediaSourceInfos)for(t=0;t<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++t)\"video\"!==(a=apiCC.mediaDeviceMgr.mediaSourceInfos[t]).kind&&\"videoinput\"!==a.kind||(a.deviceId===e?(u.log(\"Video device present :\",e),i=!0):u.log(\"not this deviceId\"));return i},apiCC.getMediaDeviceLabelFromDeviceid=function(e){u.log(\"getMediaDeviceLabelFromDeviceid :\",e);var t,i=\"Not_Found\",a=null;if(u.debug(\"apiCC.mediaDeviceMgr.mediaSourceInfos :\",apiCC.mediaDeviceMgr.mediaSourceInfos),null!==apiCC.mediaDeviceMgr.mediaSourceInfos)for(t=0;t<apiCC.mediaDeviceMgr.mediaSourceInfos.length;++t)(a=apiCC.mediaDeviceMgr.mediaSourceInfos[t]).deviceId===e?(u.log(\"Video device present :\",e),i=a.label):u.log(\"not this deviceId\");return i},apiCC.setVideoSourceIdInConstraint=function(e,t){if(u.log(\"setVideoSourceIdInConstraint : \",t),null==e)u.log(\"videoSourceId not defined\");else if(!1===t.video)u.log(\"constraints.video === false, no video device present\");else if(!1===apiCC.checkIfVideoSourceIdExistOnDevice(e))u.log(\"videoSourceId not found on device\"),t.video={};else if(u.log(\"videoSourceId is defined :\",e),!0!==t.video&&void 0!==t.video||(t.video={}),\"iOS\"===n.ag.name)if(\"Mobile Safari\"===n.Xh){if(e){var i=!1,a=n.ag.version.split(\".\");a.length>0&&parseInt(a[0])<13&&(i=!0),t.video.deviceId=i?{exact:e}:{ideal:e}}}else t.video.deviceId=e;else\"Firefox\"===n.Xh&&n.PR>=50?\"Firefox\"===n.Xh&&n.PR>=77?(u.debug(\"FX > 77 using exact to set deviceId\"),t.video.deviceId={exact:e}):t.video.deviceId=e:\"Chrome\"===n.Xh&&n.PR<48||\"Safari\"===n.Xh&&n.PR<11?t.video.optional=[{sourceId:e}]:t.video.deviceId=e?{ideal:e}:void 0;return u.log(\"constraints =\",t),t},apiCC.setVideoFacingModeInConstraint=function(e,t){u.log(\"setVideoFacingModeInConstraint\");var i={};return!1===t.video?(u.log(\"facingMode value is not setted, constraints.video is false\"),t):null==e?(u.log(\"facingMode value is not setted\"),t):\"user\"!==e&&\"environment\"!==e&&\"left\"!==e&&\"right\"!==e?(u.log(\"facingMode value is not correct\"),t):(null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices&&null!==navigator.mediaDevices.getSupportedConstraints&&void 0!==navigator.mediaDevices.getSupportedConstraints&&(i=navigator.mediaDevices.getSupportedConstraints()),i.hasOwnProperty(\"facingMode\")?(u.log(\"Setting FacingMode in constraint\"),!0===t.video&&(t.video={}),t.video.facingMode={ideal:e}):u.log(\"FacingMode not supported by device\"),u.debug(\"constraints =\",t),t)},apiCC.setResolutionInConstraint=function(e,t,i){return u.log(\"setResolutionInConstraint\"),e<=0||t<=0?(u.log(\"Resolution value must be positif non null\"),i):(!0===i.video||void 0!==i.video?\"iOS\"===n.ag.name?\"Mobile Safari\"===n.Xh?(i.video.width=e?{exact:e}:void 0,i.video.height=t?{exact:t}:void 0):(i.video.width=e,i.video.height=t):\"Firefox\"===n.Xh&&n.PR>=50?(i.video.width=e,i.video.height=t):\"Safari\"===n.Xh&&n.PR>=11||\"Mobile Safari\"===n.Xh||\"Edge\"===n.Xh||\"Chrome\"===n.Xh&&n.PR>=49||\"Firefox\"===n.Xh&&n.PR>=50?(i.video.width=e?{exact:e}:void 0,i.video.height=t?{exact:t}:void 0):i.video.mandatory=[{width:e,height:t}]:u.error(\"setResolutionInConstraint : contraint.video must be true or defined\"),u.debug(\"constraints =\",i),i)},apiCC.checkConstraintDependingOnDevice=function(e){u.debug(\"checkConstraintDependingOnDevice :\",e),\"Mobile Safari\"===n.Xh&&n.PR>=13&&void 0!==e.video&&void 0!==e.video.height&&void 0!==e.video.width&&1080===e.video.height.ideal&&1920===e.video.width.ideal&&(u.debug(\"Downgrading selected height and width resolution on iOS, to avoid stream issue\"),e.video.height.ideal=720,e.video.width.ideal=1280)},apiCC.attachMediaStream=function(e,t){u.debug(\"attachMediaStream\"),null!==e?(void 0!==e.srcObject?e.srcObject=t:void 0!==e.mozSrcObject?e.mozSrcObject=t:void 0!==e.src?\"Chrome\"===n.Xh&&n.PR<46?(u.log(\"Attaching media stream for Chrome < 46\"),e.src=webkitURL.createObjectURL(t)):e.src=URL.createObjectURL(t):u.error(\"Error attaching stream to element.\"),\"iOS\"===n.ag.name&&(u.log(\"iOS detected\"),e.setAttribute(\"playsinline\",!0))):u.log(\"videoElt is null\")},apiCC.addStreamInDiv=function(e,t,i,a,r,o,s){u.debug(\"addStreamInDiv\");var l,c=null,h=null,p=!1,g=null;(0,d.Ym)(s,\"object\")&&null!=s.type&&(t=s.type),(0,d.Ym)(s,\"object\")&&void 0!==s.forceAudioAndVideoMediaElementSeparation&&(u.debug(\"forceAudioAndVideoMediaElementSeparation is set\"),p=!0),\"audio\"===t?c=document.createElement(\"audio\"):(\"iOS\"===n.BF&&\"Mobile Safari\"===n.Xh&&(u.debug(\"iOS && Mobile Safari\"),p=!0),c=document.createElement(\"video\")),c.id=a,c.autoplay=!0,!0===p&&!1===o?(u.debug(\"before adding separated MediaEltAudio\"),(g=document.createElement(\"audio\")).id=a+\"_sepAudio\",g.muted=o,g.autoplay=!0,c.muted=!0):c.muted=o,c.style.width=r.width,c.style.height=r.height,l=function(e){var t=null,i=e.play();t=function(){var i=e.play();u.log(\"funcFixIoS\"),void 0!==i&&i.then((function(){u.log(\"Autoplay started\"),apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient.setStatus(\"Audio is now activated\"),document.removeEventListener(\"touchstart\",t)})).catch((function(e){u.error(\"Autoplay was prevented\")}))},void 0!==i&&i.then((function(){u.log(\"Autoplay started\")})).catch((function(e){\"iOS\"===n.ag.name?(u.warn(\"iOS : Autoplay was prevented, activating touch event to start media play\"),apiCC.myWebRTC_Event.createErrorEvent(\"ERROR: iOS : Autoplay was prevented\",\"IOS_AUTOPLAY_PREVENTED\"),document.addEventListener(\"touchstart\",t),apiCC.session&&apiCC.session.apiCCWebRTCClient&&apiCC.session.apiCCWebRTCClient.webRTCClient.setStatus(\"WARNING : Audio autoplay was prevented by iOS, touch screen to activate audio\")):u.warn(\"Autoplay was prevented\")}))},\"Chrome\"===n.Xh&&\"61\"===n.PR&&\"Android\"===n.BF&&(c.style.borderRadius=\"1px\",u.log(\"Patch for video display on Chrome 61 Android\")),apiCC.session&&apiCC.session.apiCCWebRTCClient&&void 0!==apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId&&null!==apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId?(u.log(\"audioOutputId set to: \"+apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId),c.setSinkId(apiCC.session.apiCCWebRTCClient.webRTCClient.audioOutputId).then((function(){u.log(\"Success, audio output device attached\")}))):u.log(\"No audioOutputId set\"),\"iOS\"!==n.BF&&(h=document.getElementById(i)).appendChild(c),void 0!==e&&(apiCC.attachMediaStream(c,e),!0===p&&!1===o&&apiCC.attachMediaStream(g,e)),\"iOS\"===n.BF&&(h=document.getElementById(i)).appendChild(c),!0===p&&!1===o&&null!==h&&h.appendChild(g),l(c),!0===p&&!1===o&&l(g)},apiCC.removeElementFromDiv=function(e,t){u.debug(\"removeElementFromDiv\");var i,a,n=null;i=document.getElementById(t),n=document.getElementById(e),null!==i&&(u.log(\"Removing video element with Id : \"+t),null!==n&&n.removeChild(i)),null!==(a=document.getElementById(t+\"_sepAudio\"))&&(u.log(\"iOS : Removing audio element with Id : \"+t+\"_sepAudio\"),null!==n&&n.removeChild(a))},apiCC.randomString=function(e,t){for(var i=\"string\"==typeof t&&t.length>0?t:\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\",a=\"\";--e>=0;)a+=i.charAt(Math.floor(Math.random()*i.length));return a},apiCC.generateCallId=function(){var e;return e=void 0!==Number.MAX_SAFE_INTEGER?Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():Math.floor(1000001*Math.random()).toString(),u.debug(\"new callId :\"+e),e},apiCC.generateInstanceId=function(){var e;return e=void 0!==Number.MAX_SAFE_INTEGER?Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString():Math.floor(1000001*Math.random()).toString(),u.debug(\"new instanceId :\"+e),e},apiCC.myApiCCWhiteBoardClient=null,apiCC.createWhiteBoard=function(e,t,i,a){return u.debug(\"createWhiteBoard\"),apiCC.myApiCCWhiteBoardClient=new apiCC.ApiCCWhiteBoardClient(apiCC.session,e,t,i,a),apiCC.myApiCCWhiteBoardClient},apiCC.closeWhiteBoardClient=function(e){u.info(\"closeWhiteBoardClient\"),p.createClosingWhiteBoardEvent(apiCC.myApiCCWhiteBoardClient.roomId,e),apiCC.myApiCCWhiteBoardClient.isInRoom()&&apiCC.myApiCCWhiteBoardClient.leaveRoom(),apiCC.myApiCCWhiteBoardClient.stop()},apiCC.registerIOsDevice=function(e){u.debug(\"call registerIOsDevice 1\");var t={type:\"registerIOsDevice\",senderId:apiCC.session.apiCCId,token:e},i=JSON.stringify(t);u.debug(\"call registerIOsDevice \"+i),apiCC.session.channel.socket.emit(\"registerIOsDevice\",i),u.debug(\"call registerIOsDevice  done\")},apiCC.registerAndroidDevice=function(e){u.debug(\"registerAndroidDevice\");var t={type:\"registerAndroidDevice\",senderId:apiCC.session.apiCCId,token:e},i=JSON.stringify(t);apiCC.session.channel.socket.emit(\"registerAndroidDevice\",i)},apiCC.unRegisterIOsDevice=function(e){u.debug(\"unRegisterIOsDevice\");var t={type:\"unRegisterIOsDevice\",senderId:apiCC.session.apiCCId,token:e},i=JSON.stringify(t);apiCC.session.channel.socket.emit(\"unRegisterIOsDevice\",i)},apiCC.unRegisterAndroidDevice=function(e){u.debug(\"unRegisterAndroidDevice\");var t={type:\"unRegisterAndroidDevice\",senderId:apiCC.session.apiCCId,token:e},i=JSON.stringify(t);apiCC.session.channel.socket.emit(\"unRegisterAndroidDevice\",i)},apiCC.storeSessionInfoInSessionStorage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u.info(\"storeSessionInfoInSessionStorage\",e),apiCC.session){var t=5e3;(0,d.ki)(apiCC.session,\"apiCCIdPersistenceTimeout\",\"number\")&&apiCC.session.apiCCIdPersistenceTimeout>=0&&(t=apiCC.session.apiCCIdPersistenceTimeout),(0,d.Ym)(e.apiCCIdPersistenceTimeout,\"number\")&&e.apiCCIdPersistenceTimeout>=0&&(t=e.apiCCIdPersistenceTimeout),apiCC.setSessionStorage(\"apiCCId\",apiCC.session.apiCCId,t),apiCC.setSessionStorage(\"apiKey\",apiCC.session.apiKey,t),null!==apiCC.session.sessionId&&apiCC.setSessionStorage(\"sessionId\",apiCC.session.sessionId,t)}},apiCC.disconnect=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u.info(\"disconnect\",e),null!==apiCC&&apiCC.cleanAllEventListener(),null!==apiCC.session&&void 0!==apiCC.session&&(\"undefined\"==typeof apiRTC_React&&!0!==e.invalidateApiCCId&&apiCC.storeSessionInfoInSessionStorage(e),null!==apiCC.myApiCCWhiteBoardClient&&(u.log(\"apiCC.myApiCCWhiteBoardClient.roomId :\"+apiCC.myApiCCWhiteBoardClient.roomId),null!==apiCC.myApiCCWhiteBoardClient.roomId&&apiCC.closeWhiteBoardClient(\"USER_DISCONNECTION\")),u.log(\"Disconnecting from Server\"),void 0!==apiCC.session.channel.socket&&null!==apiCC.session.channel.socket&&apiCC.session.channel.socket.disconnect(),apiCC.session.channel.channelHasBeenDisconnected=!1,apiCC.session.connectedUsersList.splice(0,apiCC.session.connectedUsersList.length)),apiCC&&(apiCC.session=null,apiCC.jsLoaded=!1)},apiCC.reconnect=function(){u.log(\"Reconnect\"),u.log(\"apiCC.session.channel.socket:\",apiCC.session.channel.socket),apiCC.session.channel.socket.socket.connect()},apiCC.cleanApiRTCContext=function(){null!==apiCC.session&&void 0!==apiCC.session&&(null!==apiCC.session.apiCCWebRTCClient&&void 0!==apiCC.session.apiCCWebRTCClient&&(0!==apiCC.session.apiCCWebRTCClient.webRTCClient.callsTable.length&&u.warn(\"Call is still established and will be disconnected\"),apiCC.session.apiCCWebRTCClient.webRTCClient.MCUClient.sessionMCUs.length>0&&u.log(\"MCU session is still established and will be disconnected\"),apiCC.session.apiCCWebRTCClient.hangUp(),null!==apiCC.session.apiCCWebRTCClient.webRTCClient.localStream&&(apiCC.session.apiCCWebRTCClient.webRTCClient.stopStream(apiCC.session.apiCCWebRTCClient.webRTCClient.localStream),p.createUserMediaStopEvent(null,\"media\")),apiCC.session.apiCCWebRTCClient=null),null!==apiCC.session.apiCCIMClient&&void 0!==apiCC.session.apiCCIMClient&&(apiCC.session.apiCCIMClient=null),null!==apiCC.session.apiCCDataClient&&void 0!==apiCC.session.apiCCDataClient&&(apiCC.session.apiCCDataClient=null),null!==apiCC.myApiCCWhiteBoardClient&&void 0!==apiCC.myApiCCWhiteBoardClient&&(apiCC.myApiCCWhiteBoardClient=null),null!==apiCC.session.apiCCCoBrowsingClient&&void 0!==apiCC.session.apiCCCoBrowsingClient&&(apiCC.session.apiCCCoBrowsingClient=null))},apiCC.cleanAllEventListener=function(){var e,t=0;if(null!==apiCC&&null!==apiCC.myEventTable&&(t=apiCC.myEventTable.length),0!==t){for(u.trace(\"number of myEventTable:\"+t),e=0;e<t;e+=1)apiCC.removeEventListener(apiCC.myEventTable[e].type,apiCC.myEventTable[e].listener);apiCC.myEventTable.splice(0,t),t=apiCC.myEventTable.length,u.trace(\"number of myEventTable after splice:\"+t)}},apiCC.testUserPing=function(e){u.debug(\"testUserPing()\");var t,i,a,n,r=apiCC.bandwidthTestServer+\"/upload-test\",o=new XMLHttpRequest,s=new FormData,l=Math.round(5*Math.random()),d=!1;\"withCredentials\"in o?o.open(\"POST\",r,!0):\"undefined\"!=typeof XDomainRequest?(o=new XDomainRequest).open(\"POST\",r):o=null,t=new Blob([l],{type:\"text/xml\"}),s.append(\"file\",t),o?(o.onload=function(){200===o.status&&(n=Date.now()-i,d||(clearTimeout(a),e(null,n)))},o.onerror=function(t){u.log(\"testUserUpload onerror status :\",t.target.status),e({err:\"An error occured during XMLHttpRequest\",msg:t.target.status},null)},a=setTimeout((function(){d=!0,e(\"Ping timeout\",-1)}),5e3),o.send(s),i=Date.now()):e({err:\"XMLHttpRequest is not defined\",msg:\"XMLHttpRequest is not defined\"},null)},apiCC.testUserDownload=function(e,t){u.debug(\"testUserDownload()\");var i,a,n,r,o,s,l=apiCC.bandwidthTestServer+\"/files/noise_\"+e+\"ko.jpg\",d=0,c=new Image,h=0;l+=\"?nnn=\"+Date.now();var p=[[256,257529],[500,525944],[768,787234],[1e3,1055741],[1500,1541044],[2e3,1992034],[2500,2596028],[3e3,2904977],[3500,3648299],[4e3,4151187],[4500,4741712],[5e3,5264577],[5500,5776081],[6e3,6318553],[6500,6779868],[7e3,7334256],[7500,7874040],[8e3,8081460],[8500,8651795],[9e3,9081899],[9500,9503574],[1e4,10082008],[10500,10543425],[11e3,11200424],[11500,11200424],[12e3,12110671],[12500,12715962],[13e3,13222120],[13500,13605073],[14e3,13954769],[14500,14777594],[15e3,15178928],[15500,15602106],[16e3,16054618],[16500,16578623],[17e3,17048069],[17500,17456403],[18e3,17910332],[18500,18725846],[19e3,19284746],[19500,19771902],[2e4,20121527],[21e3,20975042],[22e3,22189200],[23e3,23027928],[24e3,24027870],[25e3,24878845],[26e3,26237503],[27e3,27112004],[28e3,27953446],[29e3,29313013],[3e4,30474095]];for(o=0;o<p.length;o++)e===p[o][0]&&(d=p[o][1]);apiCC.testUserPing((function(e,u){c.onload=function(){for((a=Date.now()-i)-u>10&&(a-=u),n=d/(a/1e3),r=Math.round(n/1e3),s={type:\"download\",kBPerSec:r},o=0;o<apiCC.bandwidthRatingThresholds.length;o++)8*s.kBPerSec>=apiCC.bandwidthRatingThresholds[o]&&h++;s.rating=h+\"/\"+apiCC.bandwidthRatingThresholds.length,t(null,s)},c.onerror=function(e,i){t({label:\"Error when downloading\",err:e,msg:i},null)},i=(new Date).getTime(),c.src=l}))},apiCC.testUserUpload=function(e,t){u.debug(\"testUserUpload()\");var i,a,n,r,o,s,l,d=apiCC.bandwidthTestServer+\"/upload-test\",c=new XMLHttpRequest,h=new FormData,p=\"\",g=0;\"withCredentials\"in c?c.open(\"POST\",d,!0):\"undefined\"!=typeof XDomainRequest?(c=new XDomainRequest).open(\"POST\",d):c=null;for(a=0;a<e;a++)p+=Math.round(5*Math.random());i=new Blob([p],{type:\"text/xml\"}),h.append(\"file\",i),c?(c.onload=function(){if(200===c.status){for(o=Date.now()-r,s=e/(o/1e3),l=Math.round(s/1e3),n={type:\"upload\",kBPerSec:l},a=0;a<apiCC.bandwidthRatingThresholds.length;a++)8*n.kBPerSec>=apiCC.bandwidthRatingThresholds[a]&&g++;n.rating=g+\"/\"+apiCC.bandwidthRatingThresholds.length,t(null,n)}else t({err:\"An error occured during XMLHttpRequest\",msg:c.status},null)},c.onerror=function(e){u.log(\"testUserUpload onerror status :\",e.target.status),t({err:\"An error occured during XMLHttpRequest\",msg:e.target.status},null)},c.send(h),r=Date.now()):t({err:\"XMLHttpRequest is not defined\",msg:\"XMLHttpRequest is not defined\"},null)},apiCC.testUserUploadLoop=function(e,t,i){var a={type:\"upload\",kBPerSec:t.kbps/8,kbps:t.kbps,rating:t.rating},n=0;t.kbps>1e3?apiCC.testUserUpload(e,(function(r,o){null!==r?i({err:\"An error occured during XMLHttpRequest\"},null):(a.kBPerSec=o.kBPerSec,a.kbps=8*o.kBPerSec,a.rating=o.rating,n=a.kbps-t.kbps,u.debug(\"upload \"+e+\" \"+JSON.stringify(a)+\"; diff \"+n),n>=2e4&&e<12e6?apiCC.testUserUploadLoop(e+8e6,a,i):n>=1e4&&e<14e6?apiCC.testUserUploadLoop(e+6e6,a,i):n>=5e3&&e<16e6?apiCC.testUserUploadLoop(e+4e6,a,i):n>=1e3&&e<18e6?apiCC.testUserUploadLoop(e+2e6,a,i):n>=200&&e<19e6?apiCC.testUserUploadLoop(e+1e6,a,i):i(null,a))})):i(null,a)},apiCC.testUserDownloadLoop=function(e,t,i){var a={type:\"download\",kBPerSec:t.kbps/8,kbps:t.kbps,rating:t.rating},n=0;t.kbps>=3500?apiCC.testUserDownload(e,(function(r,o){null!==r?i({err:\"Error when downloading\"},null):(a.kBPerSec=o.kBPerSec,a.kbps=8*o.kBPerSec,a.rating=o.rating,n=a.kbps-t.kbps,u.debug(\"download \"+e+\" \"+JSON.stringify(a)+\"; diff \"+n),n>=2e4?apiCC.testUserDownloadLoop(3e4,a,i):n>=1e4&&e<=2e4?apiCC.testUserDownloadLoop(e+1e4,a,i):n>=5e3&&e<=25e3?apiCC.testUserDownloadLoop(e+5e3,a,i):n>=1e3&&e<=27e3?apiCC.testUserDownloadLoop(e+3e3,a,i):n>=200&&e<=29e3?apiCC.testUserDownloadLoop(e+1e3,a,i):i(null,a))})):i(null,a)},apiCC.listenedAudioSources={};var g=window.AudioContext||window.webkitAudioContext||!1;apiCC.audioContext=null,apiCC.getAudioContext=function(){return\"iOS\"===apiRTC.osName&&\"undefined\"!=typeof cordova?u.debug(\"No audioContext for iOS cordova\"):g&&null===apiCC.audioContext&&(apiCC.audioContext=new g),apiCC.audioContext},apiCC.listenToAudioSources=function(e){u.debug(\"listenToAudioSources()\");var t,i=apiCC.getAudioContext();null!=i?(Object.keys(apiCC.listenedAudioSources).length>0&&apiCC.stopAudioSourceListening(),apiCC.getMediaDevices().then((function(a){for(u.log(a),t=0;t<a.length;t++)\"audioinput\"===a[t].kind&&(apiCC.listenedAudioSources[a[t].deviceId]={deviceId:a[t].deviceId,callback:e,label:a[t].label},navigator.getUserMedia({audio:{optional:[{sourceId:a[t].deviceId}]},video:!1},function(e){u.log(\"new stream processing function for : \"+this.device.deviceId),this.device.audioListener=this;var t=this,a=i.createScriptProcessor(2048,1,1),n=i.createMediaStreamSource(e);a.connect(i.destination),a.onaudioprocess=function(){var i,a,n,r=new Uint8Array(this.analyser.frequencyBinCount),o=0;for(this.analyser.getByteFrequencyData(r),a=0;a<r.length;a++)o+=r[a];i=o/r.length,n={deviceId:t.device.deviceId,label:t.device.label,amplitude:i,active:e.active},t.device.callback(n)},a.analyser=i.createAnalyser(),a.analyser.smoothingTimeConstant=.3,a.analyser.fftSize=1024,n.connect(a.analyser),a.analyser.connect(a),this.destroy=function(){u.log(\"destroy()\");var t,i=e.getTracks();for(t=0;t<i.length;t+=1)i[t].stop();n.disconnect(),a.analyser.disconnect(),a.disconnect()}}.bind({device:apiCC.listenedAudioSources[a[t].deviceId]}),(function(e){u.error(\"Error getting microphone\",e)})))}),(function(e){u.debug(\"listenToAudioSources() - getMediaDevices error :\",e)}))):u.debug(\"listenToAudioSources() - Unable to create audio context\")},apiCC.stopAudioSourceListening=function(){var e;for(u.debug(\"stopAudioSourceListening()\"),e=0;e<Object.keys(apiCC.listenedAudioSources).length;e++)void 0!==apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[e]]?void 0!==apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[e]].audioListener?apiCC.listenedAudioSources[Object.keys(apiCC.listenedAudioSources)[e]].audioListener.destroy():u.warn(\"error on stopAudioSourceListening, audioListener\"):u.warn(\"error on stopAudioSourceListening, listenedAudioSources element\");apiCC.listenedAudioSources={}},apiCC.webRTCPluginInstalled=!1,apiCC.iePluginInstallationPreventUnload=!1,apiCC.setlogStorageActivated=function(e,t){u.debug(\"setlogStorageActivated :\",e),this.logStorageActivated=(!0===e||!1===e)&&e,void 0!==t&&(this.logStorageLevel=t)},apiCC.sendLogToCloud=function(e,t,i,a){u.info(\"sendLogToCloud\");var n,r,o=[],s=null,l=[],d=null,c=null;for(o.push(JSON.stringify({title:\"ApiRTC logs\",description:\"Logs of apiRTC client\"})),o.push(JSON.stringify({ts:Date.now(),name:\"system-info\",args:{browserName:apiCC.browser,browserVersion:apiCC.browser_version,platform:apiCC.osName}})),n=0;n<e.length;n++)s=\"error\"===e[n][0]?{name:\"test-run\",args:{error:e[n][1]}}:{name:\"test-run\",args:{info:e[n][1]}},o.push(JSON.stringify(s));l=o.concat(apiCC.logStorage),d=new FormData,r=\"[\"+l.join(\",\\n\")+\"]\",u.debug(\"fileContent :\",r),!0!==a&&(d.append(\"data\",r),d.append(\"apiKey\",apiCC.initApiKey),void 0!==t&&d.append(\"id\",t),(c=new XMLHttpRequest).open(\"POST\",i+\"/test/api/\",!0),c.onreadystatechange=function(){4===c.readyState&&200===c.status&&console.info(\"[apiRTC_Logs] POST'd successfully\"),console.trace(c.responseText)},c.send(d))},apiCC.manageWebRTCPlugin=function(e,t){u.debug(\"manageWebRTCPlugin\");var i;i=\"https:\"!==window.location.protocol?\"http\":\"https\",loadjs([i+\"://cdn.temasys.io/adapterjs/0.15.x/adapter.debug.js\"],\"temAdapter\",{async:!0,numRetries:apiCC.extJsLoadingRetryNb||100,reqdelay:apiCC.extJsLoadingRetryDelay||200,success:function(){u.log(\"End of .js loading for plugin\"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent(\"temAdapter\",\"loaded\"),AdapterJS.WebRTCPlugin.isPluginInstalled(AdapterJS.WebRTCPlugin.pluginInfo.prefix,AdapterJS.WebRTCPlugin.pluginInfo.plugName,AdapterJS.WebRTCPlugin.pluginInfo.type,(function(){apiCC.myWebRTC_Adapter.RTCSessionDescription=RTCSessionDescription,apiCC.myWebRTC_Adapter.RTCIceCandidate=RTCIceCandidate,apiCC.myWebRTC_Adapter.RTCPeerConnection=RTCPeerConnection,apiCC.myWebRTC_Adapter.getUserMedia=navigator.getUserMedia,apiCC.attachMediaStream=attachMediaStream,AdapterJS.webRTCReady((function(t){return u.log(\"webRTCReady, plugin already installed\"),e()}))}),(function(){return apiCC.iePluginInstallationPreventUnload=!0,t(),AdapterJS.webRTCReady((function(t){return u.log(\"webRTCReady after plugin install\"),apiCC.iePluginInstallationPreventUnload=!1,apiCC.myWebRTC_Adapter.RTCSessionDescription=RTCSessionDescription,apiCC.myWebRTC_Adapter.RTCIceCandidate=RTCIceCandidate,apiCC.myWebRTC_Adapter.RTCPeerConnection=RTCPeerConnection,apiCC.myWebRTC_Adapter.getUserMedia=navigator.getUserMedia,apiCC.attachMediaStream=attachMediaStream,e()})),apiCC.session.apiCCWebRTCClient.myWebRTC_Event.createEvent({eventType:\"webRTCPluginInstallation\"}),null}))},error:function(e){u.error(\"temAdapter loading error\"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent(\"temAdapter\",\"error\")},retrycb:function(e,t){u.warn(\"temAdapter loading retry :\"+e+\" ,delay before retry :\"+t),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent(\"temAdapter\",\"retry\")}})},apiCC.checkMutingStateForUserMedia=function(e,t){u.debug(\"checkMutingStateForUserMedia\"),(0,d.ki)(e,\"muted\",\"string\")&&(u.log(\"callConfiguration muted is set :\",e.muted),\"VIDEO\"===e.muted&&(t.muteVideoOnStreams(\"enabled\"),t.muteAudioOnStreams(\"enabled\")),\"AUDIOONLY\"===e.muted&&t.muteAudioOnStreams(\"enabled\"),\"VIDEOONLY\"===e.muted&&t.muteVideoOnStreams(\"enabled\"))},apiCC.isSIPNumber=function(e){var t,i=null,a=!1;return t=e.toString().startsWith(\"sip:\"),e.toString().length<=20&&(i=!0),(0!==e.toString().indexOf(\"0\")&&0!==e.toString().indexOf(\"+\")||!0!==i)&&!0!==t||(a=!0),a},apiCC.loadSentry=function(e,t){u.debug(\"Remote logging activation\"),loadjs([t+\"://browser.sentry-cdn.com/5.24.2/bundle.tracing.min.js\"],\"Sentry\",{async:!0,numRetries:10,reqdelay:500,success:function(){Sentry.init({dsn:\"https://c24c226714f841dbbc3d1518b6cc7fe8@o333237.ingest.sentry.io/5448622\",release:apiCC.version,tracesSampleRate:1}),Sentry.configureScope((function(t){t.setTag(\"apiKey\",e)}))},error:function(e){console.error(\"Remote logging - loading error\")},retrycb:function(e,t){console.warn(\"Remote logging - loading retry :\"+e+\" ,delay before retry :\"+t)}})},apiCC.sendSentryEvent=function(e){if(u.debug(\"sendSentryEvent\",e),\"undefined\"!=typeof Sentry){var t=\"\",i={};\"muteUnmuteEvent\"===e.eventType?(t=\"Mute event on callId:\"+e.callId,i.muteType=e.muteType,i.source=e.source,i.mLine=e.mLine,i.state=e.state,i.callId=e.callId,i.username=e.username):u.error(\"sendSentryEvent error : type \",e.eventType,\" is not supported\");var a=Object.keys(i);\"\"!==t&&a.length>0&&Sentry.withScope((function(e){a.forEach((function(t){e.setTag(t,i[t])})),Sentry.captureMessage(t)}))}else u.debug(\"Sentry not activated\")}},5945:(e,t,i)=>{\"use strict\";i.d(t,{ag:()=>l,E2:()=>n,cf:()=>p,Xh:()=>r,dc:()=>o,PR:()=>s,vO:()=>u,BF:()=>d,MM:()=>c,$6:()=>h}),i(8309),i(2772),i(9064);var a,n=null,r=null,o=null,s=null,l=null,d=null,c=null,u=null,h=null,p=null;a=(n=new UAParser).getBrowser(),l=n.getOS(),p=n.getBrowser(),\"undefined\"!=typeof apiRTC_React?(o=DeviceInfo.getSystemVersion(),d=DeviceInfo.getSystemName(),r=DeviceInfo.getUserAgent(),u=DeviceInfo.getModel()):(o=a.version,d=n.getOS().name,c=n.getOS().version,r=a.name,u=n.getDevice().type),s=void 0!==o?a.major:99,window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.toLowerCase().indexOf(\" electron/\")>=0&&(h=\"electron\")},4708:(e,t,i)=>{\"use strict\";function a(e){return a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},a(e)}i.d(t,{_C:()=>r,Pj:()=>o,yJ:()=>s,dD:()=>l,Wc:()=>d,S6:()=>c,ws:()=>u,wL:()=>h,cw:()=>g,Ym:()=>m,ki:()=>C,fS:()=>f}),i(4603),i(4916),i(9714),i(3123),i(9600),i(1249),i(7941),i(4723),i(1058),i(6992),i(9575),i(1539),i(2472),i(2990),i(8927),i(3105),i(5035),i(4345),i(7174),i(2846),i(4731),i(7209),i(6319),i(8867),i(7789),i(3739),i(9368),i(4483),i(2056),i(3462),i(678),i(7462),i(3824),i(5021),i(2974),i(5016),i(9753),i(7042),i(2526),i(1817),i(2165),i(8783),i(3948);var n=i(1549).Y.get(\"Utils\");function r(e){return new RegExp(\"^[0-9-.]*$\",\"g\").test(e)}function o(){return\"undefined\"!=typeof apiRTC_React||\"https:\"===window.location.protocol}function s(){return\"undefined\"==typeof apiRTC_React&&\"http:\"===window.location.protocol}function l(e){var t,i,a,n,r={};for(a=0,n=(t=e.split(\"&\")).length;a<n;a++)r[(i=t[a].split(\"=\"))[0]]=i[1];return r}function d(e){return Object.keys(e).map((function(t){return t+\"=\"+e[t]})).join(\"&\")}function c(e,t){n.debug(\"mergeJSON\");var i={},a=null;if(e)for(a in e)e.hasOwnProperty(a)&&(i[a]=e[a]);if(t)for(a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);return n.log(i),i}var u=function(e,t){var i,a,n;for(null==e&&(e={}),i=1;i<arguments.length;i+=1)for(a in n=arguments[i])n.hasOwnProperty(a)&&(e[a]=n[a]);return e},h=function(){var e=function(e,t,i){var a=e.match(t);return a&&a.length>=i&&parseInt(a[i],10)},t={};if(\"undefined\"!=typeof apiRTC_React)return t.type=\"react-native\",t;if(void 0!==window&&void 0!==window.navigator)if(window.navigator.mozGetUserMedia)t.type=\"firefox\",t.version=e(window.navigator.userAgent,/Firefox\\/(\\d+)\\./,1);else if(window.navigator.webkitGetUserMedia)if(window.webkitRTCPeerConnection)t.type=\"chrome\",t.version=e(window.navigator.userAgent,/Chrom(e|ium)\\/(\\d+)\\./,2);else{if(!window.navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/))return t;t.type=\"safari\",t.version=e(window.navigator.userAgent,/AppleWebKit\\/(\\d+)\\./,1)}else if(window.navigator.mediaDevices&&window.navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/))t.type=\"edge\",t.version=e(window.navigator.userAgent,/Edge\\/(\\d+).(\\d+)$/,2);else{if(!window.navigator.mediaDevices||!window.navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./))return t;t.type=\"safari\",t.version=e(window.navigator.userAgent,/AppleWebKit\\/(\\d+)\\./,1)}return t}(),p=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-/=\",g={decode:function(e){var t,i=p.indexOf(e.charAt(e.length-1)),a=p.indexOf(e.charAt(e.length-2)),n=e.length/4*3,r=null,o=null,s=null,l=null,d=null,c=null,u=0,h=null;for(64===i&&n--,64===a&&n--,h=new Uint8Array(n),t=0;t<n;t+=3)r=p.indexOf(e.charAt(u++))<<2|(l=p.indexOf(e.charAt(u++)))>>4,o=(15&l)<<4|(d=p.indexOf(e.charAt(u++)))>>2,s=(3&d)<<6|(c=p.indexOf(e.charAt(u++))),h[t]=r,64!==d&&(h[t+1]=o),64!==c&&(h[t+2]=s);return h},encode:function(e){var t,i=\"\",a=new Uint8Array(e),n=a.byteLength,r=n%3,o=n-r,s=null;for(t=0;t<o;t+=3)s=a[t]<<16|a[t+1]<<8|a[t+2],i+=p[(16515072&s)>>18]+p[(258048&s)>>12]+p[(4032&s)>>6]+p[63&s];return 1===r?(s=a[o],i+=p[(252&s)>>2]+p[(3&s)<<4]+\"==\"):2===r&&(s=a[o]<<8|a[o+1],i+=p[(64512&s)>>10]+p[(1008&s)>>4]+p[(15&s)<<2]+\"=\"),i}};function m(e,t){return 3===arguments.length?C(arguments[0],arguments[1],arguments[2]):\"null\"===t?null===e:\"array\"===t?null!==e&&\"object\"===a(e)&&Array.isArray(e):null!==e&&a(e)===t}function C(e,t,i){if(null!==t&&\"object\"===a(t)&&Array.isArray(t)&&t.length>=1){var n=t[0];if(t.length>1)return m(e,\"object\")&&m(n,\"string\")&&e.hasOwnProperty(n)&&m(e[n],\"object\")&&C(e[n],t.slice(1),i);t=n}return\"undefined\"===i?m(e,\"object\")&&m(t,\"string\")&&!e.hasOwnProperty(t)&&m(e[t],i):m(e,\"object\")&&m(t,\"string\")&&e.hasOwnProperty(t)&&m(e[t],i)}function f(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;for(var i in e)if(e.hasOwnProperty(i)){if(!t.hasOwnProperty(i))return!1;if(e[i]===t[i])continue;if(\"object\"!==a(e[i]))return!1;if(!f(e[i],t[i]))return!1}for(i in t)if(t.hasOwnProperty(i)&&!e.hasOwnProperty(i))return!1;return!0}},6075:(e,t,i)=>{\"use strict\";i.d(t,{F:()=>n});var a=i(1549).Y.get(\"WebRTC_Stack\"),n=function(){this.adaptForIoSCordova=function(){if(\"iOS\"===apiRTC.osName&&\"undefined\"!=typeof cordova){if(a.log(\"Modification for iOS cordova\"),void 0===cordova.plugins)return void a.log(\"cordova.plugins not defined\");if(void 0===cordova.plugins.iosrtc)return void a.log(\"cordova.plugins.iosrtc not defined\");this.RTCPeerConnection=cordova.plugins.iosrtc.RTCPeerConnection,this.RTCSessionDescription=cordova.plugins.iosrtc.RTCSessionDescription,this.RTCIceCandidate=cordova.plugins.iosrtc.RTCIceCandidate}},\"undefined\"!=typeof RTCSessionDescription?this.RTCSessionDescription=RTCSessionDescription:a.log(\"RTCSessionDescription is undefined\"),\"undefined\"!=typeof RTCIceCandidate?this.RTCIceCandidate=RTCIceCandidate:a.log(\"RTCIceCandidate is undefined\"),\"undefined\"!=typeof RTCPeerConnection?this.RTCPeerConnection=RTCPeerConnection:a.log(\"RTCPeerConnection is undefined\"),void 0!==navigator.getUserMedia?this.getUserMedia=navigator.getUserMedia:\"undefined\"!=typeof getUserMedia?this.getUserMedia=getUserMedia:a.log(\"getUserMedia is undefined\")}},8765:(e,t,i)=>{\"use strict\";i.d(t,{K:()=>l}),i(6755),i(2772),i(3710),i(8309),i(9601),i(2526),i(1817),i(1539),i(2165),i(6992),i(8783),i(3948);var a=i(1549),n=i(5945),r=i(4708);function o(e){return o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},o(e)}var s=a.Y.get(\"WebRTC_Event\"),l=function(){if(s.debug(\"WebRTC_Event\"),this.customEventIsDefined=\"notTested\",\"notTested\"===this.customEventIsDefined)try{new CustomEvent(\"test\",{detail:\"test\",bubbles:!0,cancelable:!0}),this.customEventIsDefined=!0}catch(e){this.customEventIsDefined=!1,s.log(\"customEvent error :\"+e)}(\"IE\"===n.Xh&&n.dc>8||\"Netscape\"===n.Xh)&&(s.log(\"polyfill the CustomEvent()\"),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent(\"CustomEvent\");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.CustomEvent.prototype,window.CustomEvent=e}(),this.customEventIsDefined=!0),\"IE\"===n.Xh&&n.dc>8&&(s.log(\"polyfill startsWith()\"),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t})),this.eventDispatchMgr=function(e,t){if(\"undefined\"!=typeof apiRTC_React){var i={type:e,detail:t};eventManager.dispatchEvent(i)}else if(!1===this.customEventIsDefined)\"undefined\"!=typeof $jqApz?(s.log(\"CustomEvent not supported by Browser, using $jqApz \"),$jqApz.event.trigger({type:e,detail:t})):\"undefined\"!=typeof jQuery?(s.log(\"CustomEvent not supported by Browser, using jQuery \"),jQuery.event.trigger({type:e,detail:t})):s.warn(\"Custom Events not supported on this browser : eventDispatchMgr()\");else{var a=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0});document.dispatchEvent(a)}},this.createIncomingCallEvent=function(e,t,i,a,n,r,o,s,l,d,c){var u={eventType:\"incomingCall\",time:new Date,clientId:e,callerId:t,callId:a,autoAnswerActivated:n,callNumber:r,callerNickname:i,audioOnly:o,callType:s,destCallType:c,recordedCall:l,remoteType:d};this.eventDispatchMgr(\"incomingCall\",u)},this.createCallAttemptEvent=function(e,t,i,a){var n={eventType:\"callAttempt\",time:new Date,clientId:e,callerId:t,callId:a,callerNickname:i};this.eventDispatchMgr(\"callAttempt\",n)},this.createCallEstablishedEvent=function(e,t,i,a){s.debug(\"createCallEstablishedEvent with callType : \"+t),s.debug(\"destCallType : \"+a);var n={eventType:\"callEstablished\",time:new Date,calleeId:e,callType:t,callId:i,destCallType:a};this.eventDispatchMgr(\"callEstablished\",n)},this.createHangupEvent=function(e,t,i,a,n,r,o){var s={eventType:\"hangup\",time:new Date,hangupType:e,clientId:t,remoteId:i,lastEstablishedCall:a,reason:n,callId:r,callType:o};this.eventDispatchMgr(\"hangup\",s)},this.createRemoteHangupEvent=function(e,t,i,a){var n={eventType:\"remoteHangup\",time:new Date,clientId:e,remoteId:t,lastEstablishedCall:i,reason:a};this.eventDispatchMgr(\"remoteHangup\",n)},this.createCallRestartingEvent=function(e,t,i,a,n,r,o,s,l){var d={eventType:\"callRestarting\",time:new Date,callType:e,audioOnly:t,oldCallId:i,newCallId:a,dataType:n,clientId:r,remoteId:o,destRoom:s,streamId:l};this.eventDispatchMgr(\"callRestarting\",d)},this.createUserMediaSuccessEvent=function(e,t,i,a,n,r,o,s,l,d,c){var u={eventType:\"userMediaSuccess\",time:new Date,onCallEstablishment:e,audioIsAvailable:t,audioDeviceLabel:i,videoIsAvailable:a,videoDeviceLabel:n,callType:r,callId:o,stream:s,remoteId:l,restarted:d,userMediaStreamId:c};this.eventDispatchMgr(\"userMediaSuccess\",u)},this.createUserMediaErrorEvent=function(e,t,i,a,n,r,s){var l={eventType:\"userMediaError\",time:new Date,onCallEstablishment:e,callType:t,userMediaStreamId:a,callId:n,tryAudioCallActivated:r,gumConfig:s};\"object\"===o(i)?(l.error={},l.error.message=i.message,l.error.code=i.code,l.error.name=i.name):l.error=i,this.eventDispatchMgr(\"userMediaError\",l)},this.createUserMediaStopEvent=function(e,t,i){var a={eventType:\"userMediaStop\",time:new Date,callId:e,mediaType:t,userMediaStreamId:i};this.eventDispatchMgr(\"userMediaStop\",a)},this.createICECandidateTypeUpdateEvent=function(e,t,i){var a={eventType:\"ICECandidateTypeUpdate\",time:new Date,callId:e,localCandidate:t,remoteCandidate:i};this.eventDispatchMgr(\"ICECandidateTypeUpdate\",a)},this.createSelectedICECandidateEvent=function(e,t,i,a,n,r,o){var s={eventType:\"selectedICECandidate\",time:new Date,callId:e,localCandidateType:t,remoteCandidateType:i,localAddress:a,remoteAdress:n,transportType:r,localTransportType:o};this.eventDispatchMgr(\"selectedICECandidate\",s)},this.createErrorEvent=function(e,t,i,a,n,o,s){var l={eventType:\"error\",time:new Date,errorInfo:e,errorCode:t,callId:i,roomName:a,roomCallType:n};(0,r.Ym)(o,\"object\")&&(l.data=o),(0,r.Ym)(s,\"string\")&&(l.convId=s),this.eventDispatchMgr(\"error\",l)},this.createReceiveIMMessageEvent=function(e,t,i,a,n,r){var o={eventType:\"receiveIMMessage\",time:new Date,senderId:e,senderNickname:t,senderPhotoURL:i,message:a,UUCSeq:n,convId:r};this.eventDispatchMgr(\"receiveIMMessage\",o)},this.createChannelEvent=function(e,t){var i={eventType:\"channelEvent\",time:new Date,channelEvent:e,event:t};this.eventDispatchMgr(\"channelEvent\",i)},this.createSessionReadyEvent=function(e){s.debug(\"createSessionReadyEvent\");var t={eventType:\"sessionReady\",time:new Date,apiCCId:e};this.eventDispatchMgr(\"sessionReady\",t)},this.createWebRTCClientCreatedEvent=function(){var e={eventType:\"webRTCClientCreated\",time:new Date};this.eventDispatchMgr(\"webRTCClientCreated\",e)},this.createUpdatePresenceEvent=function(e,t,i){var a={eventType:\"updatePresence\",time:new Date,connectedUsersList:e,connectedUsersListWithStatus:i,state:t};this.eventDispatchMgr(\"updatePresence\",a)},this.createCloudEventOccurredEvent=function(e,t){var i={eventType:\"cloudEventOccurred\",time:new Date,topic:e,target:t};this.eventDispatchMgr(\"cloudEventOccurred\",i)},this.createUpdateUserStatusEvent=function(e){var t={eventType:\"updateUserStatus\",time:new Date,message:e};this.eventDispatchMgr(\"updateUserStatus\",t)},this.createGroupChatCreationEvent=function(e,t,i,a,n,r){var o={eventType:\"groupChatCreation\",time:new Date,status:e,groupChatId:t,initialDestId:i,invitationSendedToInitialDestId:a,newContactId:n,invitationSendedToNewContactId:r};this.eventDispatchMgr(\"groupChatCreation\",o)},this.createGroupChatInvitationEvent=function(e,t,i,a,n){var r={eventType:\"groupChatInvitation\",time:new Date,groupChatId:e,contactList:n,senderId:t,senderNickname:i,senderPhotoURL:a};this.eventDispatchMgr(\"groupChatInvitation\",r)},this.createGroupChatMemberUpdateEvent=function(e,t,i){var a={eventType:\"groupChatMemberUpdate\",time:new Date,groupChatId:e,contactList:t,status:i};this.eventDispatchMgr(\"groupChatMemberUpdate\",a)},this.createAddUserInGroupChatEvent=function(e,t,i){var a={eventType:\"addUserInGroupChatAnswer\",time:new Date,invitationSended:e,groupChatId:t,contactId:i};this.eventDispatchMgr(\"addUserInGroupChatAnswer\",a)},this.createReceiveGroupChatMessageEvent=function(e,t,i,a,n){var o={eventType:\"receiveGroupChatMessage\",time:new Date,groupChatId:e,senderId:t,senderNickname:i,message:a};(0,r.Ym)(n,\"object\")&&(o.metadata=n),this.eventDispatchMgr(\"receiveGroupChatMessage\",o)},this.createReceiveConversationListAnswerEvent=function(e){var t={eventType:\"receiveConversationList\",time:new Date,convList:e};this.eventDispatchMgr(\"receiveConversationList\",t)},this.createReceiveContactOccurrencesFromConversationListAnswerEvent=function(e){var t={eventType:\"receiveContactOccurrencesFromConversationList\",time:new Date,occurrencesList:e};this.eventDispatchMgr(\"receiveContactOccurrencesFromConversationList\",t)},this.createReceiveConversationDetailReportAnswerEvent=function(e){var t={eventType:\"receiveConversationDetailReport\",time:new Date,CDR:e};this.eventDispatchMgr(\"receiveConversationDetailReport\",t)},this.createReceiveConversationHistoryEvent=function(e,t,i){var a={eventType:\"receiveConversationHistory\",time:new Date,convId:e,convHistory:t,status:i};this.eventDispatchMgr(\"receiveConversationHistory\",a)},this.createUserDataAnswerEvent=function(e,t,i,a){var n={eventType:\"userDataAnswer\",time:new Date,userFound:e,contactId:t,nickname:i,photoURL:a};this.eventDispatchMgr(\"userDataAnswer\",n)},this.createFetchUserDataAnswerEvent=function(e){var t=\"fetchUserDataAnswer\",i={eventType:t,timeout:e.timeout,userData:e.userData,id:e.id};this.eventDispatchMgr(t,i)},this.createReceiveDataEvent=function(e,t,i){var a={eventType:\"receiveData\",time:new Date,senderId:e,dstRoomId:t,data:i};this.eventDispatchMgr(\"receiveData\",a)},this.createMCUSessionCreationEvent=function(e,t){var i={eventType:\"MCUSessionCreation\",time:new Date,sessionId:e,token:t};this.eventDispatchMgr(\"MCUSessionCreation\",i)},this.createJoinMCUSessionAnswerEvent=function(e,t,i,a,n){var r={eventType:\"joinMCUSessionAnswer\",time:new Date,sessionId:e,token:t,groupChatId:i,initiator:a,roomId:n.roomName};n.roomMode&&(r.mode=n.roomMode),!0===n.meshOnly&&(r.meshOnly=!0),n.joinSessionAnswer&&(r.result=Object.assign({},n.joinSessionAnswer)),this.eventDispatchMgr(\"joinMCUSessionAnswer\",r)},this.createMCUAvailableStreamEvent=function(e,t){var i={eventType:\"MCUAvailableStream\",time:new Date,streams:e,isRemoteStream:t};this.eventDispatchMgr(\"MCUAvailableStream\",i)},this.createMCUAvailableReplayEvent=function(e,t){var i={eventType:\"MCUAvailableReplay\",time:new Date,streams:e,isRemoteStream:t};this.eventDispatchMgr(\"MCUAvailableReplay\",i)},this.createMCUAvailableCompositeEvent=function(e,t){var i={eventType:\"MCUAvailableComposite\",time:new Date,streams:e,isRemoteStream:t};this.eventDispatchMgr(\"MCUAvailableComposite\",i)},this.createMCURemovedStreamEvent=function(e){var t={eventType:\"MCURemoveStream\",time:new Date,streamId:e};this.eventDispatchMgr(\"MCURemoveStream\",t)},this.createMCUAvailableStreamUpdateEvent=function(e,t){var i={eventType:\"MCUAvailableStreamUpdate\",time:new Date,streams:e,isRemoteStream:t};this.eventDispatchMgr(\"MCUAvailableStreamUpdate\",i)},this.createMCUParticipantEjectedEvent=function(e,t,i){var a={eventType:\"MCUParticipantEjected\",time:new Date,roomId:e,clientId:t};i&&(a.data=i),this.eventDispatchMgr(\"MCUParticipantEjected\",a)},this.createReceiveMCUSessionInvitationEvent=function(e,t,i,a){void 0===i&&(i=0);var n={eventType:\"receiveMCUSessionInvitation\",time:new Date,sessionId:e,token:t,groupChatId:i,initiatorId:a};this.eventDispatchMgr(\"receiveMCUSessionInvitation\",n)},this.createRemoteStreamAddedEvent=function(e,t,i,a,n,r,o){var s={eventType:\"remoteStreamAdded\",time:new Date,callId:t,callType:e,stream:i,remoteId:a,destCallType:n,audioIsAvailable:r.available,audioIsActive:r.active,audioIsMuted:r.muted,videoIsAvailable:o.available,videoIsActive:o.active,videoIsMuted:o.muted};this.eventDispatchMgr(\"remoteStreamAdded\",s)},this.createRemoteStreamRemovedEvent=function(e,t,i,a,n){var r={eventType:\"remoteStreamRemoved\",time:new Date,callId:t,callType:e,stream:i,remoteId:a,destCallType:n};this.eventDispatchMgr(\"remoteStreamRemoved\",r)},this.createSimulcastFeedChanged=function(e,t){var i={eventType:\"simulcastFeedChanged\",time:new Date,callId:e,simulcast:t};this.eventDispatchMgr(\"simulcastFeedChanged\",i)},this.createLocalStreamRemovedEvent=function(e,t,i,a,n){var r={eventType:\"localStreamRemoved\",time:new Date,callId:t,callType:e,stream:i,remoteId:a,destCallType:n};this.eventDispatchMgr(\"localStreamRemoved\",r)},this.createSlowLinkEvent=function(e,t){var i={eventType:\"slowLink\",time:new Date,callId:e};t&&(i.advice=t),this.eventDispatchMgr(\"slowLink\",i)},this.createVideoQualityChangedEvent=function(e,t,i,a){var n={eventType:\"videoQualityChanged\",time:new Date,roomname:t,callId:e,hint:i,profileType:a.name};a.bitrate&&(n.bitrate=a.bitrate),a.width&&a.height&&(n.width=a.width,n.height=a.height),a.frameRate&&(n.frameRate=a.frameRate),this.eventDispatchMgr(\"videoQualityChanged\",n)},this.createAudioAmplitudeEvent=function(e,t,i,a){var n={eventType:\"audioAmplitude\",time:new Date,callId:i,userMediaStreamId:a,descriptor:{amplitude:e,isSpeaking:t}};this.eventDispatchMgr(\"audioAmplitude\",n)},this.createLocalStreamUpdatedEvent=function(e,t,i,a,n,r,o,s,l){var d={eventType:\"localStreamUpdated\",time:new Date,changeList:e,audioIsAvailable:t.available,audioDeviceLabel:t.deviceLabel,audioIsActive:t.active,audioIsMuted:t.muted,audioIsSilent:t.silent,videoIsAvailable:i.available,videoDeviceLabel:i.deviceLabel,videoIsActive:i.active,videoIsMuted:i.muted,videoIsSilent:i.silent,onCall:a,callType:n,callId:r,stream:o,userMediaStreamId:s,cause:l};this.eventDispatchMgr(\"localStreamUpdated\",d)},this.createRemoteStreamUpdatedEvent=function(e,t,i,a,n,r){var o={eventType:\"remoteStreamUpdated\",time:new Date,changeList:e,audioIsAvailable:t.available,audioIsActive:t.active,audioIsMuted:t.muted,audioIsSilent:t.silent,videoIsAvailable:i.available,videoIsActive:i.active,videoIsMuted:i.muted,videoIsSilent:i.silent,callType:a,callId:n,cause:r};this.eventDispatchMgr(\"remoteStreamUpdated\",o)},this.createCanPlayRemoteVideoEvent=function(e,t,i){var a={eventType:\"canPlayRemoteVideo\",time:new Date,videoDivId:e,callType:t,remoteId:i};this.eventDispatchMgr(\"canPlayRemoteVideo\",a)},this.createRecordedFileAvailableEvent=function(e){var t={eventType:\"recordedFileAvailable\",time:new Date,fileName:e};this.eventDispatchMgr(\"recordedFileAvailable\",t)},this.createRecordedStreamsAvailableEvent=function(e,t,i,a,n,r,o){var s={eventType:\"recordedStreamsAvailable\",time:new Date,confId:e,userId1:t,userId2:i,callId:a,apiKey:apiCC.session.apiKey};n&&(s.convId=n),r&&(s.mediaId=r),o&&(s.mediaURL=o),this.eventDispatchMgr(\"recordedStreamsAvailable\",s)},this.createMCURecordedStreamsAvailableEvent=function(e,t,i,a,n,o,s,l,d,c,u){var h={eventType:\"MCURecordedStreamsAvailable\",time:new Date,roomName:e,callId:t,clientId:i,convId:n,mediaId:o,mediaURL:s,recordType:l};d&&(h.remoteId=d),a&&(h.recordedFileName=a),c&&(h.mediaType=c),(0,r.Ym)(u,\"object\")?(h.descriptor={},(0,r.Ym)(u,\"mode\",\"string\")&&(h.descriptor.mode=u.mode),(0,r.Ym)(u,\"labelEnabled\",\"boolean\")&&(h.descriptor.labelEnabled=u.labelEnabled),!0===h.descriptor.labelEnabled&&(0,r.Ym)(u,\"labels\",\"array\")&&(h.descriptor.labels=u.labels)):h.descriptor={mode:\"complete\",labelEnabled:!1},this.eventDispatchMgr(\"MCURecordedStreamsAvailable\",h)},this.createMCURecordingStartedEvent=function(e,t,i,a,n,o,s,l,d,c,u,h){var p={eventType:\"MCURecordingStarted\",time:new Date,roomName:e,callId:t,clientId:i,recordType:a,recordStartTime:n};o&&(p.convId=o),s&&(p.mediaId=s),l&&(p.mediaURL=l),d&&(p.remoteId=d),c&&(p.recordedFileName=c),u&&(p.mediaType=u),(0,r.Ym)(h,\"object\")&&(p.descriptor={},(0,r.Ym)(h,\"mode\",\"string\")&&(p.descriptor.mode=h.mode),(0,r.Ym)(h,\"labelEnabled\",\"boolean\")&&(p.descriptor.labelEnabled=h.labelEnabled),!0===p.descriptor.labelEnabled&&(0,r.Ym)(h,\"labels\",\"array\")&&(p.descriptor.labels=h.labels)),this.eventDispatchMgr(\"MCURecordingStarted\",p)},this.createMCURecordingStoppedEvent=function(e,t,i,a,n,o,s,l,d,c,u,h){var p={eventType:\"MCURecordingStopped\",time:new Date,roomName:e,callId:t,clientId:i,recordType:a,recordStartTime:n};o&&(p.convId=o),s&&(p.mediaId=s),l&&(p.mediaURL=l),d&&(p.remoteId=d),c&&(p.recordedFileName=c),u&&(p.mediaType=u),(0,r.Ym)(h,\"object\")&&(p.descriptor={},(0,r.Ym)(h,\"mode\",\"string\")&&(p.descriptor.mode=h.mode),(0,r.Ym)(h,\"labelEnabled\",\"boolean\")&&(p.descriptor.labelEnabled=h.labelEnabled),!0===p.descriptor.labelEnabled&&(0,r.Ym)(h,\"labels\",\"array\")&&(p.descriptor.labels=h.labels)),this.eventDispatchMgr(\"MCURecordingStopped\",p)},this.createStopRecordEvent=function(){var e={eventType:\"stopRecord\",time:new Date};this.eventDispatchMgr(\"stopRecord\",e)},this.createMCUStreamingStartedEvent=function(e,t,i,a){var n={eventType:\"MCUStreamingStarted\",time:new Date,roomName:e,callId:t,clientId:i,streamingStartTime:a};this.eventDispatchMgr(\"MCUStreamingStarted\",n)},this.createMCUStreamingStoppedEvent=function(e,t,i,a){var n={eventType:\"MCUStreamingStopped\",time:new Date,roomName:e,callId:t,clientId:i,streamingEndTime:a};this.eventDispatchMgr(\"MCUStreamingStopped\",n)},this.createMCURoomModeChangedEvent=function(e,t,i,a){var n={eventType:\"MCURoomModeChanged\",time:new Date,roomId:e,oldMode:t,newMode:i,state:a};this.eventDispatchMgr(\"MCURoomModeChanged\",n)},this.createSnapShotPhotoUploaded=function(e){var t={eventType:\"snapShotPhotoUploaded\",time:new Date,fileName:e};this.eventDispatchMgr(\"snapShotPhotoUploaded\",t)},this.createRoomCreationEvent=function(e,t,i){var a={eventType:\"roomCreation\",time:new Date,status:e,roomId:t,roomType:i};this.eventDispatchMgr(\"roomCreation\",a)},this.createRoomJoinedEvent=function(e,t,i){var a={eventType:\"roomJoined\",time:new Date,status:e,roomId:t,roomType:i};this.eventDispatchMgr(\"roomJoined\",a)},this.createRoomInvitationEvent=function(e,t,i,a,n,r){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=\"roomInvitation\",l={eventType:\"roomInvitation\",time:new Date,roomId:e,contactList:n,senderId:t,senderNickname:i,senderPhotoURL:a,roomType:r};o.cloudConvId&&(l.cloudConvId=o.cloudConvId),!0===o.webconf&&(l.webconf=!0),this.eventDispatchMgr(s,l)},this.createRoomMemberUpdateEvent=function(e,t,i,a){var n={eventType:\"roomMemberUpdate\",time:new Date,roomId:e,contactList:t,status:i,roomType:a};this.eventDispatchMgr(\"roomMemberUpdate\",n)},this.createContactListInRoomEvent=function(e,t,i){var a={eventType:\"contactListInRoom\",time:new Date,roomId:e,contactList:t,roomType:i};this.eventDispatchMgr(\"contactListInRoom\",a)},this.createReceiveRoomMessageEvent=function(e,t,i,a,n){var r={eventType:\"receiveRoomMessage\",time:new Date,roomId:e,senderId:t,senderNickname:i,message:a,roomType:n};this.eventDispatchMgr(\"receiveRoomMessage\",r)},this.createDesktopCaptureEvent=function(e,t,i){var a={eventType:\"desktopCapture\",time:new Date,event:e,callId:t,remoteId:i};this.eventDispatchMgr(\"desktopCapture\",a)},this.createMediaDeviceChangedEvent=function(e,t,i){var a=\"NotDefined\";null!=t&&(a=t);var n={eventType:\"mediaDeviceChanged\",time:new Date,diff:e,updateReason:a,firstMediaDeviceListInitialization:i};this.eventDispatchMgr(\"mediaDeviceChanged\",n)},this.createSwitchStreamEvent=function(e,t){var i={eventType:\"switchStream\",time:new Date,callId:e,stream:t};this.eventDispatchMgr(\"switchStream\",i)},this.createConnectedUsersListUpdateEvent=function(e,t,i,a){var n={eventType:\"ConnectedUsersListUpdate\",time:new Date,group:e,usersList:t,status:i,updateReason:a};this.eventDispatchMgr(\"connectedUsersListUpdate\",n)},this.createClosingWhiteBoardEvent=function(e,t){var i={eventType:\"closingWhiteBoard\",time:new Date,roomId:e,reason:t};this.eventDispatchMgr(\"closingWhiteBoard\",i)},this.createExternalJsLoadingStatusEvent=function(e,t){var i={eventType:\"externalJsLoadingStatus\",extjs:e,status:t,time:new Date};this.eventDispatchMgr(\"externalJsLoadingStatus\",i)},this.createBackgroundSubstractionStopVisibilityChangeEvent=function(e){var t={userMediaStreamId:e};this.eventDispatchMgr(\"backgroundSubstractionStopVisibilityChange\",t)},this.createBackgroundSubstractionStopComputeTimeEvent=function(e){var t={userMediaStreamId:e};this.eventDispatchMgr(\"backgroundSubstractionStopComputeTime\",t)},this.createAIESnapshotEvent=function(e,t){var i={userMediaStreamId:e,image:t};this.eventDispatchMgr(\"AIESnapshot\",i)},this.createAIELogEvent=function(e,t){var i={userMediaStreamId:e,log:t};this.eventDispatchMgr(\"AIELog\",i)},this.createEvent=function(e){if(!e.eventType)throw new Error(\"The event json must have an eventType\"+e);e.time=new Date,this.eventDispatchMgr(e.eventType,e)}}},940:(e,t,i)=>{\"use strict\";i.d(t,{S:()=>o}),i(2772);var a=i(1549),n=i(5945),r=a.Y.get(\"WebRTC_Stack\"),o=function(e){this.sendInvite=function(t,i,a,o,s,l){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};r.debug(\"WebRTC_Stack::sendInvite()\"),l||(l=\"media\");var c={type:\"invite\",callId:t,callerId:i,callerNickname:a,calleeId:o,roomId:s,callType:l};d.mode&&(c.mode=d.mode);var u=d.offer;if(u){if(\"IE\"===n.Xh||\"Safari\"===n.Xh&&n.PR<11){var h=u.type,p=u.sdp;r.log(\"JSON.stringify(type):\",JSON.stringify(h)),r.log(\"JSON.stringify(sdp):\",JSON.stringify(p)),u={type:h,sdp:p}}c.sdpoffer=u}d.data&&(c.data=d.data),d.stream&&(c.stream=d.stream);var g=JSON.stringify(c);r.info(\"C->S:\",g),e.emit(\"invite\",g)},this.sendInviteBroadcast=function(t,i,a,n,o,s){var l,d;r.debug(\"WebRTC_Stack::sendInviteBroadcast()\"),l={type:\"invite\",callId:t,callerId:i,callerNickname:a,calleeId:n,roomId:o,sdpoffer:s},d=JSON.stringify(l),r.debug(\"C->S: \"+d),e.emit(\"invite_broadcast\",d)},this.send200OK=function(t,i,a,o,s,l,d){r.debug(\"WebRTC_Stack::send200OK()\");var c,u,h=null;(\"IE\"===n.Xh||\"Safari\"===n.Xh&&n.PR<11)&&(r.log(\"JSON.stringify(offer.sdp) :\"+JSON.stringify(l.sdp)),r.log(\"JSON.stringify(offer.type) :\"+JSON.stringify(l.type)),(h={}).sdp=l.sdp,h.type=l.type,l=h),c={type:\"200OK\",callId:t,callerId:i,calleeId:a,calleeNickname:o,roomId:s,sdpanswer:l,data:d},u=JSON.stringify(c),r.info(\"C->S: \"+u),e.emit(\"200OK\",u)},this.sendCandidate=function(t,i,a,o,s,l,d,c,u,h){r.debug(\"WebRTC_Stack::sendCandidate()\");var p=null,g={};r.debug(\"completeCandidate :\",h),\"IE\"===n.Xh?(r.log(\"Browser is IE, adapting completeCandidate\"),g.sdpMLineIndex=h.sdpMLineIndex,g.candidate=h.candidate,g.sdpMid=h.sdpMid):g=h,null!==u?(r.log(\"call data is defined :\",u),p={type:\"candidate\",callId:t,callerId:i,calleeId:a,roomId:o,dst:s,label:l,id:d,candidate:c,data:u,completeCandidate:g}):(r.log(\"call data is undefined\"),p={type:\"candidate\",callId:t,callerId:i,calleeId:a,roomId:o,dst:s,label:l,id:d,candidate:c,completeCandidate:g});var m=JSON.stringify(p);r.info(\"C->S:\",m),e.emit(\"candidate\",m)},this.sendBye=function(t,i,a,n,o,s){r.debug(\"WebRTC_Stack::sendBye()\");var l,d=null;null!==s?(r.log(\"call data is defined :\"+s),d={type:\"bye\",callId:t,clientId:i,roomId:a,dst:n,reason:o,data:s}):(r.log(\"call data is undefined\"),d={type:\"bye\",callId:t,clientId:i,roomId:a,dst:n,reason:o}),l=JSON.stringify(d),r.info(\"C->S: \"+l),e.emit(\"bye\",l)},this.sendUpdate=function(t,i,a,n,o,s,l,d){r.debug(\"WebRTC_Stack::sendUpdate()\");var c,u=null;u={type:\"update\",callId:t,callerId:i,calleeId:a,roomId:n,dst:o,sdpoffer:s,callType:l},null!=d&&(r.log(\"call data is defined: \"+d),u.data=d),c=JSON.stringify(u),r.info(\"C->S: \"+c),e.emit(\"update\",c)},this.send200Update=function(t,i,a,n,o,s,l){r.debug(\"WebRTC_Stack::send200Update()\");var d,c=null;null!==l?(r.log(\"call data is defined :\"+l),c={type:\"200update\",callId:t,callerId:i,calleeId:a,roomId:n,dst:o,sdpanswer:s,data:l}):(r.log(\"call data is undefined\"),c={type:\"200update\",callId:t,callerId:i,calleeId:a,roomId:n,dst:o,sdpanswer:s}),d=JSON.stringify(c),r.info(\"C->S: \"+d),e.emit(\"200update\",d)},this.sendDebugCommand=function(t,i,a){var n,o;r.debug(\"WebRTC_Stack::sendDebugCommand :\"+t),n={type:\"debugCommand\",command:t,apiKey:i,clientId:a},o=JSON.stringify(n),r.info(\"C->S: \"+o),e.emit(\"debugCommand\",o)},this.sendAck=function(t,i,a){var n,o;r.debug(\"WebRTC_Stack::sendAck()\"),n={type:\"Ack\",AckMessageType:t,cSeq:i,dst:a},o=JSON.stringify(n),r.info(\"C->S: \"+o),e.emit(\"Ack\",o)},this.sendInfo=function(t,i){var a,n,o=[\"activeSpeaker\",\"callStats\",\"stopSpeaking\"];o.indexOf(t)<0&&r.debug(\"WebRTC_Stack::sendInfo()\"),a={type:\"info\",infoType:t,data:i},n=JSON.stringify(a),o.indexOf(t)<0&&r.info(\"C->S: \"+n),e.emit(\"info\",n)},this.sendDataMessage=function(t,i){r.debug(\"WebRTC_Stack::sendDataMessage()\");var a={type:\"apiRTCDataMessage\",senderId:t,data:i},n=JSON.stringify(a);r.info(\"C->S: \"+n),e.emit(\"apiRTCDataMessage\",n)}}},2746:(e,t,i)=>{\"use strict\";i.r(t);var a=i(1549).Y.get(\"onbeforeunload\");apiCC.beforeUnloadFct=function(e){a.debug(\"User has refreshed or left the page, eventType :\",e);try{if(\"undefined\"!=typeof mailClicked&&null!==mailClicked&&(a.log(\"mailClicked variable is defined\"),!0===mailClicked))return a.log(\"mailClicked is true : leaving onbeforeunload\"),void(mailClicked=!1)}catch(e){a.log(\"Catch error on PATCH/WORKAROUND to avoid reload of page in chrome when mailto :\"+e)}try{if(void 0!==apiCC.iePluginInstallationPreventUnload&&null!==apiCC.iePluginInstallationPreventUnload&&!0===apiCC.iePluginInstallationPreventUnload)return void a.log(\"iePluginInstallationPreventUnload is true : leaving onbeforeunload\")}catch(e){a.log(\"Catch error on PATCH/WORKAROUND to avoid reload of page in IE when installing webRTC plugin :\"+e)}null!==apiCC&&void 0!==apiCC&&(apiCC.storeSessionInfoInSessionStorage(),apiCC.cleanApiRTCContext(),apiCC.disconnect({invalidateApiCCId:!0}),apiCC.cleanAllEventListener(),apiCC.myEventTable=[]),null!==apiCC&&void 0!==apiCC&&(apiCC.session=null,apiCC.jsLoaded=!1)},\"Mobile Safari\"===apiRTC.browser?window.addEventListener(\"pagehide\",(function(){apiCC.beforeUnloadFct(\"unload_MobileSafari\")})):window.onbeforeunload=function(){apiCC.beforeUnloadFct(\"unload\")}},9064:(e,t,i)=>{\"use strict\";function a(e){return a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},a(e)}i(2222),i(2772),i(4916),i(3123),i(5306),i(3210),i(2526),i(1817),i(1539),i(2165),i(6992),i(8783),i(3948),e=i.hmd(e),function(t){var n=\"function\",r=\"undefined\",o=\"object\",s=\"model\",l=\"name\",d=\"type\",c=\"vendor\",u=\"version\",h=\"architecture\",p=\"console\",g=\"mobile\",m=\"tablet\",C=\"smarttv\",f=\"wearable\",v={extend:function(e,t){var i={};for(var a in e)t[a]&&t[a].length%2==0?i[a]=t[a].concat(e[a]):i[a]=e[a];return i},has:function(e,t){return\"string\"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return\"string\"===a(e)?e.replace(/[^\\d\\.]/g,\"\").split(\".\")[0]:void 0},trim:function(e){return e.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\"\")}},b={rgx:function(e,t){for(var i,r,s,l,d,c,u=0;u<t.length&&!d;){var h=t[u],p=t[u+1];for(i=r=0;i<h.length&&!d;)if(d=h[i++].exec(e))for(s=0;s<p.length;s++)c=d[++r],a(l=p[s])===o&&l.length>0?2==l.length?a(l[1])==n?this[l[0]]=l[1].call(this,c):this[l[0]]=l[1]:3==l.length?a(l[1])!==n||l[1].exec&&l[1].test?this[l[0]]=c?c.replace(l[1],l[2]):void 0:this[l[0]]=c?l[1].call(this,c,l[2]):void 0:4==l.length&&(this[l[0]]=c?l[3].call(this,c.replace(l[1],l[2])):void 0):this[l]=c||void 0;u+=2}},str:function(e,t){for(var i in t)if(a(t[i])===o&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(v.has(t[i][n],e))return\"?\"===i?void 0:i}else if(v.has(t[i],e))return\"?\"===i?void 0:i;return e}},S={browser:{oldsafari:{version:{\"1.0\":\"/8\",1.2:\"/1\",1.3:\"/3\",\"2.0\":\"/412\",\"2.0.2\":\"/416\",\"2.0.3\":\"/417\",\"2.0.4\":\"/419\",\"?\":\"/\"}}},device:{amazon:{model:{\"Fire Phone\":[\"SD\",\"KF\"]}},sprint:{model:{\"Evo Shift 4G\":\"7373KT\"},vendor:{HTC:\"APA\",Sprint:\"Sprint\"}}},os:{windows:{version:{ME:\"4.90\",\"NT 3.11\":\"NT3.51\",\"NT 4.0\":\"NT4.0\",2e3:\"NT 5.0\",XP:[\"NT 5.1\",\"NT 5.2\"],Vista:\"NT 6.0\",7:\"NT 6.1\",8:\"NT 6.2\",8.1:\"NT 6.3\",10:[\"NT 6.4\",\"NT 10.0\"],RT:\"ARM\"}}}},y={browser:[[/(opera\\smini)\\/([\\w\\.-]+)/i,/(opera\\s[mobiletab]+).+version\\/([\\w\\.-]+)/i,/(opera).+version\\/([\\w\\.]+)/i,/(opera)[\\/\\s]+([\\w\\.]+)/i],[l,u],[/(opios)[\\/\\s]+([\\w\\.]+)/i],[[l,\"Opera Mini\"],u],[/\\s(opr)\\/([\\w\\.]+)/i],[[l,\"Opera\"],u],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/\\s]?([\\w\\.]*)/i,/(avant\\s|iemobile|slim)(?:browser)?[\\/\\s]?([\\w\\.]*)/i,/(bidubrowser|baidubrowser)[\\/\\s]?([\\w\\.]+)/i,/(?:ms|\\()(ie)\\s([\\w\\.]+)/i,/(rekonq)\\/([\\w\\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\\/([\\w\\.-]+)/i],[l,u],[/(konqueror)\\/([\\w\\.]+)/i],[[l,\"Konqueror\"],u],[/(trident).+rv[:\\s]([\\w\\.]+).+like\\sgecko/i],[[l,\"IE\"],u],[/(edge|edgios|edga|edg)\\/((\\d+)?[\\w\\.]+)/i],[[l,\"Edge\"],u],[/(yabrowser)\\/([\\w\\.]+)/i],[[l,\"Yandex\"],u],[/(Avast)\\/([\\w\\.]+)/i],[[l,\"Avast Secure Browser\"],u],[/(AVG)\\/([\\w\\.]+)/i],[[l,\"AVG Secure Browser\"],u],[/(puffin)\\/([\\w\\.]+)/i],[[l,\"Puffin\"],u],[/(focus)\\/([\\w\\.]+)/i],[[l,\"Firefox Focus\"],u],[/(opt)\\/([\\w\\.]+)/i],[[l,\"Opera Touch\"],u],[/((?:[\\s\\/])uc?\\s?browser|(?:juc.+)ucweb)[\\/\\s]?([\\w\\.]+)/i],[[l,\"UCBrowser\"],u],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[l,/_/g,\" \"],u],[/(windowswechat qbcore)\\/([\\w\\.]+)/i],[[l,\"WeChat(Win) Desktop\"],u],[/(micromessenger)\\/([\\w\\.]+)/i],[[l,\"WeChat\"],u],[/(brave)\\/([\\w\\.]+)/i],[[l,\"Brave\"],u],[/(qqbrowserlite)\\/([\\w\\.]+)/i],[l,u],[/(QQ)\\/([\\d\\.]+)/i],[l,u],[/m?(qqbrowser)[\\/\\s]?([\\w\\.]+)/i],[l,u],[/(baiduboxapp)[\\/\\s]?([\\w\\.]+)/i],[l,u],[/(2345Explorer)[\\/\\s]?([\\w\\.]+)/i],[l,u],[/(MetaSr)[\\/\\s]?([\\w\\.]+)/i],[l],[/(LBBROWSER)/i],[l],[/xiaomi\\/miuibrowser\\/([\\w\\.]+)/i],[u,[l,\"MIUI Browser\"]],[/;fbav\\/([\\w\\.]+);/i],[u,[l,\"Facebook\"]],[/safari\\s(line)\\/([\\w\\.]+)/i,/android.+(line)\\/([\\w\\.]+)\\/iab/i],[l,u],[/headlesschrome(?:\\/([\\w\\.]+)|\\s)/i],[u,[l,\"Chrome Headless\"]],[/\\swv\\).+(chrome)\\/([\\w\\.]+)/i],[[l,/(.+)/,\"$1 WebView\"],u],[/((?:oculus|samsung)browser)\\/([\\w\\.]+)/i],[[l,/(.+(?:g|us))(.+)/,\"$1 $2\"],u],[/android.+version\\/([\\w\\.]+)\\s+(?:mobile\\s?safari|safari)*/i],[u,[l,\"Android Browser\"]],[/(sailfishbrowser)\\/([\\w\\.]+)/i],[[l,\"Sailfish Browser\"],u],[/(chrome|omniweb|arora|[tizenoka]{5}\\s?browser)\\/v?([\\w\\.]+)/i],[l,u],[/(dolfin)\\/([\\w\\.]+)/i],[[l,\"Dolphin\"],u],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[l,\"360 Browser\"]],[/((?:android.+)crmo|crios)\\/([\\w\\.]+)/i],[[l,\"Chrome\"],u],[/(coast)\\/([\\w\\.]+)/i],[[l,\"Opera Coast\"],u],[/fxios\\/([\\w\\.-]+)/i],[u,[l,\"Firefox\"]],[/version\\/([\\w\\.]+).+?mobile\\/\\w+\\s(safari)/i],[u,[l,\"Mobile Safari\"]],[/version\\/([\\w\\.]+).+?(mobile\\s?safari|safari)/i],[u,l],[/webkit.+?(gsa)\\/([\\w\\.]+).+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i],[[l,\"GSA\"],u],[/webkit.+?(mobile\\s?safari|safari)(\\/[\\w\\.]+)/i],[l,[u,b.str,S.browser.oldsafari.version]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[l,u],[/(navigator|netscape)\\/([\\w\\.-]+)/i],[[l,\"Netscape\"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\\sbrowser|minimo|conkeror)[\\/\\s]?([\\w\\.\\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([\\w\\.-]+)$/i,/(mozilla)\\/([\\w\\.]+).+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\\/\\s]?([\\w\\.]+)/i,/(links)\\s\\(([\\w\\.]+)/i,/(gobrowser)\\/?([\\w\\.]*)/i,/(ice\\s?browser)\\/v?([\\w\\._]+)/i,/(mosaic)[\\/\\s]([\\w\\.]+)/i],[l,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\\)]/i],[[h,\"amd64\"]],[/(ia32(?=;))/i],[[h,v.lowerize]],[/((?:i[346]|x)86)[;\\)]/i],[[h,\"ia32\"]],[/windows\\s(ce|mobile);\\sppc;/i],[[h,\"arm\"]],[/((?:ppc|powerpc)(?:64)?)(?:\\smac|;|\\))/i],[[h,/ower/,\"\",v.lowerize]],[/(sun4\\w)[;\\)]/i],[[h,\"sparc\"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|arm(?:64|(?=v\\d+[;l]))|(?=atmel\\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[h,v.lowerize]]],device:[[/\\((ipad|playbook);[\\w\\s\\),;-]+(rim|apple)/i],[s,c,[d,m]],[/applecoremedia\\/[\\w\\.]+ \\((ipad)/],[s,[c,\"Apple\"],[d,m]],[/(apple\\s{0,1}tv)/i],[[s,\"Apple TV\"],[c,\"Apple\"],[d,C]],[/(archos)\\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/\\s(nook)[\\w\\s]+build\\/(\\w+)/i,/(dell)\\s(strea[kpr\\s\\d]*[\\dko])/i],[c,s,[d,m]],[/(kf[A-z]+)\\sbuild\\/.+silk\\//i],[s,[c,\"Amazon\"],[d,m]],[/(sd|kf)[0349hijorstuw]+\\sbuild\\/.+silk\\//i],[[s,b.str,S.device.amazon.model],[c,\"Amazon\"],[d,g]],[/android.+aft([bms])\\sbuild/i],[s,[c,\"Amazon\"],[d,C]],[/\\((ip[honed|\\s\\w*]+);.+(apple)/i],[s,c,[d,g]],[/\\((ip[honed|\\s\\w*]+);/i],[s,[c,\"Apple\"],[d,g]],[/(blackberry)[\\s-]?(\\w+)/i,/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\\s_-]?([\\w-]*)/i,/(hp)\\s([\\w\\s]+\\w)/i,/(asus)-?(\\w+)/i],[c,s,[d,g]],[/\\(bb10;\\s(\\w+)/i],[s,[c,\"BlackBerry\"],[d,g]],[/android.+(transfo[prime\\s]{4,10}\\s\\w+|eeepc|slider\\s\\w+|nexus 7|padfone|p00c)/i],[s,[c,\"Asus\"],[d,m]],[/(sony)\\s(tablet\\s[ps])\\sbuild\\//i,/(sony)?(?:sgp.+)\\sbuild\\//i],[[c,\"Sony\"],[s,\"Xperia Tablet\"],[d,m]],[/android.+\\s([c-g]\\d{4}|so[-l]\\w+)(?=\\sbuild\\/|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[s,[c,\"Sony\"],[d,g]],[/\\s(ouya)\\s/i,/(nintendo)\\s([wids3u]+)/i],[c,s,[d,p]],[/android.+;\\s(shield)\\sbuild/i],[s,[c,\"Nvidia\"],[d,p]],[/(playstation\\s[34portablevi]+)/i],[s,[c,\"Sony\"],[d,p]],[/(sprint\\s(\\w+))/i],[[c,b.str,S.device.sprint.vendor],[s,b.str,S.device.sprint.model],[d,g]],[/(htc)[;_\\s-]+([\\w\\s]+(?=\\)|\\sbuild)|\\w+)/i,/(zte)-(\\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\\s)sony)[_\\s-]?([\\w-]*)/i],[c,[s,/_/g,\" \"],[d,g]],[/(nexus\\s9)/i],[s,[c,\"HTC\"],[d,m]],[/d\\/huawei([\\w\\s-]+)[;\\)]/i,/(nexus\\s6p|vog-l29|ane-lx1|eml-l29)/i],[s,[c,\"Huawei\"],[d,g]],[/android.+(bah2?-a?[lw]\\d{2})/i],[s,[c,\"Huawei\"],[d,m]],[/(microsoft);\\s(lumia[\\s\\w]+)/i],[c,s,[d,g]],[/[\\s\\(;](xbox(?:\\sone)?)[\\s\\);]/i],[s,[c,\"Microsoft\"],[d,p]],[/(kin\\.[onetw]{3})/i],[[s,/\\./g,\" \"],[c,\"Microsoft\"],[d,g]],[/\\s(milestone|droid(?:[2-4x]|\\s(?:bionic|x2|pro|razr))?:?(\\s4g)?)[\\w\\s]+build\\//i,/mot[\\s-]?(\\w*)/i,/(XT\\d{3,4}) build\\//i,/(nexus\\s6)/i],[s,[c,\"Motorola\"],[d,g]],[/android.+\\s(mz60\\d|xoom[\\s2]{0,2})\\sbuild\\//i],[s,[c,\"Motorola\"],[d,m]],[/hbbtv\\/\\d+\\.\\d+\\.\\d+\\s+\\([\\w\\s]*;\\s*(\\w[^;]*);([^;]*)/i],[[c,v.trim],[s,v.trim],[d,C]],[/hbbtv.+maple;(\\d+)/i],[[s,/^/,\"SmartTV\"],[c,\"Samsung\"],[d,C]],[/\\(dtv[\\);].+(aquos)/i],[s,[c,\"Sharp\"],[d,C]],[/android.+((sch-i[89]0\\d|shw-m380s|gt-p\\d{4}|gt-n\\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\\w+))/i],[[c,\"Samsung\"],s,[d,m]],[/smart-tv.+(samsung)/i],[c,[d,C],s],[/((s[cgp]h-\\w+|gt-\\w+|galaxy\\snexus|sm-\\w[\\w\\d]+))/i,/(sam[sung]*)[\\s-]*(\\w+-?[\\w-]*)/i,/sec-((sgh\\w+))/i],[[c,\"Samsung\"],s,[d,g]],[/sie-(\\w*)/i],[s,[c,\"Siemens\"],[d,g]],[/(maemo|nokia).*(n900|lumia\\s\\d+)/i,/(nokia)[\\s_-]?([\\w-]*)/i],[[c,\"Nokia\"],s,[d,g]],[/android[x\\d\\.\\s;]+\\s([ab][1-7]\\-?[0178a]\\d\\d?)/i],[s,[c,\"Acer\"],[d,m]],[/android.+([vl]k\\-?\\d{3})\\s+build/i],[s,[c,\"LG\"],[d,m]],[/android\\s3\\.[\\s\\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[c,\"LG\"],s,[d,m]],[/(lg) netcast\\.tv/i],[c,s,[d,C]],[/(nexus\\s[45])/i,/lg[e;\\s\\/-]+(\\w*)/i,/android.+lg(\\-?[\\d\\w]+)\\s+build/i],[s,[c,\"LG\"],[d,g]],[/(lenovo)\\s?(s(?:5000|6000)(?:[\\w-]+)|tab(?:[\\s\\w]+))/i],[c,s,[d,m]],[/android.+(ideatab[a-z0-9\\-\\s]+)/i],[s,[c,\"Lenovo\"],[d,m]],[/(lenovo)[_\\s-]?([\\w-]+)/i],[c,s,[d,g]],[/linux;.+((jolla));/i],[c,s,[d,g]],[/((pebble))app\\/[\\d\\.]+\\s/i],[c,s,[d,f]],[/android.+;\\s(oppo)\\s?([\\w\\s]+)\\sbuild/i],[c,s,[d,g]],[/crkey/i],[[s,\"Chromecast\"],[c,\"Google\"],[d,C]],[/android.+;\\s(glass)\\s\\d/i],[s,[c,\"Google\"],[d,f]],[/android.+;\\s(pixel c)[\\s)]/i],[s,[c,\"Google\"],[d,m]],[/android.+;\\s(pixel( [23])?( xl)?)[\\s)]/i],[s,[c,\"Google\"],[d,g]],[/android.+;\\s(\\w+)\\s+build\\/hm\\1/i,/android.+(hm[\\s\\-_]*note?[\\s_]*(?:\\d\\w)?)\\s+build/i,/android.+(mi[\\s\\-_]*(?:a\\d|one|one[\\s_]plus|note lte)?[\\s_]*(?:\\d?\\w?)[\\s_]*(?:plus)?)\\s+build/i,/android.+(redmi[\\s\\-_]*(?:note)?(?:[\\s_]*[\\w\\s]+))\\s+build/i],[[s,/_/g,\" \"],[c,\"Xiaomi\"],[d,g]],[/android.+(mi[\\s\\-_]*(?:pad)(?:[\\s_]*[\\w\\s]+))\\s+build/i],[[s,/_/g,\" \"],[c,\"Xiaomi\"],[d,m]],[/android.+;\\s(m[1-5]\\snote)\\sbuild/i],[s,[c,\"Meizu\"],[d,g]],[/(mz)-([\\w-]{2,})/i],[[c,\"Meizu\"],s,[d,g]],[/android.+a000(1)\\s+build/i,/android.+oneplus\\s(a\\d{4})[\\s)]/i],[s,[c,\"OnePlus\"],[d,g]],[/android.+[;\\/]\\s*(RCT[\\d\\w]+)\\s+build/i],[s,[c,\"RCA\"],[d,m]],[/android.+[;\\/\\s]+(Venue[\\d\\s]{2,7})\\s+build/i],[s,[c,\"Dell\"],[d,m]],[/android.+[;\\/]\\s*(Q[T|M][\\d\\w]+)\\s+build/i],[s,[c,\"Verizon\"],[d,m]],[/android.+[;\\/]\\s+(Barnes[&\\s]+Noble\\s+|BN[RT])(V?.*)\\s+build/i],[[c,\"Barnes & Noble\"],s,[d,m]],[/android.+[;\\/]\\s+(TM\\d{3}.*\\b)\\s+build/i],[s,[c,\"NuVision\"],[d,m]],[/android.+;\\s(k88)\\sbuild/i],[s,[c,\"ZTE\"],[d,m]],[/android.+[;\\/]\\s*(gen\\d{3})\\s+build.*49h/i],[s,[c,\"Swiss\"],[d,g]],[/android.+[;\\/]\\s*(zur\\d{3})\\s+build/i],[s,[c,\"Swiss\"],[d,m]],[/android.+[;\\/]\\s*((Zeki)?TB.*\\b)\\s+build/i],[s,[c,\"Zeki\"],[d,m]],[/(android).+[;\\/]\\s+([YR]\\d{2})\\s+build/i,/android.+[;\\/]\\s+(Dragon[\\-\\s]+Touch\\s+|DT)(\\w{5})\\sbuild/i],[[c,\"Dragon Touch\"],s,[d,m]],[/android.+[;\\/]\\s*(NS-?\\w{0,9})\\sbuild/i],[s,[c,\"Insignia\"],[d,m]],[/android.+[;\\/]\\s*((NX|Next)-?\\w{0,9})\\s+build/i],[s,[c,\"NextBook\"],[d,m]],[/android.+[;\\/]\\s*(Xtreme\\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\\s+build/i],[[c,\"Voice\"],s,[d,g]],[/android.+[;\\/]\\s*(LVTEL\\-)?(V1[12])\\s+build/i],[[c,\"LvTel\"],s,[d,g]],[/android.+;\\s(PH-1)\\s/i],[s,[c,\"Essential\"],[d,g]],[/android.+[;\\/]\\s*(V(100MD|700NA|7011|917G).*\\b)\\s+build/i],[s,[c,\"Envizen\"],[d,m]],[/android.+[;\\/]\\s*(Le[\\s\\-]+Pan)[\\s\\-]+(\\w{1,9})\\s+build/i],[c,s,[d,m]],[/android.+[;\\/]\\s*(Trio[\\s\\-]*.*)\\s+build/i],[s,[c,\"MachSpeed\"],[d,m]],[/android.+[;\\/]\\s*(Trinity)[\\-\\s]*(T\\d{3})\\s+build/i],[c,s,[d,m]],[/android.+[;\\/]\\s*TU_(1491)\\s+build/i],[s,[c,\"Rotor\"],[d,m]],[/android.+(KS(.+))\\s+build/i],[s,[c,\"Amazon\"],[d,m]],[/android.+(Gigaset)[\\s\\-]+(Q\\w{1,9})\\s+build/i],[c,s,[d,m]],[/\\s(tablet|tab)[;\\/]/i,/\\s(mobile)(?:[;\\/]|\\ssafari)/i],[[d,v.lowerize],c,s],[/[\\s\\/\\(](smart-?tv)[;\\)]/i],[[d,C]],[/(android[\\w\\.\\s\\-]{0,9});.+build/i],[s,[c,\"Generic\"]]],engine:[[/windows.+\\sedge\\/([\\w\\.]+)/i],[u,[l,\"EdgeHTML\"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[u,[l,\"Blink\"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/\\s]\\(?([\\w\\.]+)/i,/(icab)[\\/\\s]([23]\\.[\\d\\.]+)/i],[l,u],[/rv\\:([\\w\\.]{1,9}).+(gecko)/i],[u,l]],os:[[/microsoft\\s(windows)\\s(vista|xp)/i],[l,u],[/(windows)\\snt\\s6\\.2;\\s(arm)/i,/(windows\\sphone(?:\\sos)*)[\\s\\/]?([\\d\\.\\s\\w]*)/i,/(windows\\smobile|windows)[\\s\\/]?([ntce\\d\\.\\s]+\\w)/i],[l,[u,b.str,S.os.windows.version]],[/(win(?=3|9|n)|win\\s9x\\s)([nt\\d\\.]+)/i],[[l,\"Windows\"],[u,b.str,S.os.windows.version]],[/\\((bb)(10);/i],[[l,\"BlackBerry\"],u],[/(blackberry)\\w*\\/?([\\w\\.]*)/i,/(tizen|kaios)[\\/\\s]([\\w\\.]+)/i,/(android|webos|palm\\sos|qnx|bada|rim\\stablet\\sos|meego|sailfish|contiki)[\\/\\s-]?([\\w\\.]*)/i],[l,u],[/(symbian\\s?os|symbos|s60(?=;))[\\/\\s-]?([\\w\\.]*)/i],[[l,\"Symbian\"],u],[/\\((series40);/i],[l],[/mozilla.+\\(mobile;.+gecko.+firefox/i],[[l,\"Firefox OS\"],u],[/(nintendo|playstation)\\s([wids34portablevu]+)/i,/(mint)[\\/\\s\\(]?(\\w*)/i,/(mageia|vectorlinux)[;\\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\\/\\s-]?(?!chrom)([\\w\\.-]*)/i,/(hurd|linux)\\s?([\\w\\.]*)/i,/(gnu)\\s?([\\w\\.]*)/i],[l,u],[/(cros)\\s[\\w]+\\s([\\w\\.]+\\w)/i],[[l,\"Chromium OS\"],u],[/(sunos)\\s?([\\w\\.\\d]*)/i],[[l,\"Solaris\"],u],[/\\s([frentopc-]{0,4}bsd|dragonfly)\\s?([\\w\\.]*)/i],[l,u],[/(haiku)\\s(\\w+)/i],[l,u],[/cfnetwork\\/.+darwin/i,/ip[honead]{2,4}(?:.*os\\s([\\w]+)\\slike\\smac|;\\sopera)/i],[[u,/_/g,\".\"],[l,\"iOS\"]],[/(mac\\sos\\sx)\\s?([\\w\\s\\.]*)/i,/(macintosh|mac(?=_powerpc)\\s)/i],[[l,\"Mac OS\"],[u,/_/g,\".\"]],[/((?:open)?solaris)[\\/\\s-]?([\\w\\.]*)/i,/(aix)\\s((\\d)(?=\\.|\\)|\\s)[\\w\\.])*/i,/(plan\\s9|minix|beos|os\\/2|amigaos|morphos|risc\\sos|openvms|fuchsia)/i,/(unix)\\s?([\\w\\.]*)/i],[l,u]]},I=function e(i,n){if(\"object\"===a(i)&&(n=i,i=void 0),!(this instanceof e))return new e(i,n).getResult();var r=i||(t&&t.navigator&&t.navigator.userAgent?t.navigator.userAgent:\"\"),o=n?v.extend(y,n):y;return this.getBrowser=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,r,o.browser),e.major=v.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return b.rgx.call(e,r,o.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return b.rgx.call(e,r,o.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,r,o.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return b.rgx.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};I.VERSION=\"0.7.21\",I.BROWSER={NAME:l,MAJOR:\"major\",VERSION:u},I.CPU={ARCHITECTURE:h},I.DEVICE={MODEL:s,VENDOR:c,TYPE:d,CONSOLE:p,MOBILE:g,SMARTTV:C,TABLET:m,WEARABLE:f,EMBEDDED:\"embedded\"},I.ENGINE={NAME:l,VERSION:u},I.OS={NAME:l,VERSION:u},(\"undefined\"==typeof exports?\"undefined\":a(exports))!==r?(a(e)!==r&&e.exports&&(exports=e.exports=I),exports.UAParser=I,t.UAParser=I):\"function\"==typeof define&&i.amdO?define((function(){return I})):t&&(t.UAParser=I);var T=t&&(t.jQuery||t.Zepto);if(T&&!T.ua){var R=new I;T.ua=R.getResult(),T.ua.get=function(){return R.getUA()},T.ua.set=function(e){R.setUA(e);var t=R.getResult();for(var i in t)T.ua[i]=t[i]}}}(\"object\"===(\"undefined\"==typeof window?\"undefined\":a(window))?window:void 0)},8274:(e,t,i)=>{\"use strict\";i.r(t),i.d(t,{Call:()=>Ue,CloudApi:()=>Pr,Conference:()=>za,Contact:()=>Di,Conversation:()=>Ma,ConversationCall:()=>Wi,DataChannel:()=>Et,Enterprise:()=>or,EventCenter:()=>y,EventEmitter:()=>s,MediaDevice:()=>R,Observable:()=>D,PointerSharingRoom:()=>Sn,ReceivedCallInvitation:()=>Xe,ReceivedConversationInvitation:()=>ge,ReceivedConversationJoinRequest:()=>Bt,ReceivedDataChannelInvitation:()=>Pt,ReceivedFileTransferInvitation:()=>at,ReceivedInvitation:()=>ne,ReceivedPointerSharingInvitation:()=>Xt,ReceivedWhiteboardInvitation:()=>ut,SentInvitation:()=>hi,Session:()=>bn,Stream:()=>Hn,UserAgent:()=>Rr,UserData:()=>ii,default:()=>jr}),i(7941),i(2526),i(1817),i(1539),i(2165),i(6992),i(8783),i(3948);var a=i(3173);function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function r(e){return r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},r(e)}function o(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}i(4603),i(4916),i(9714),i(7042),i(561),i(9070),i(8309),i(1038),i(9753);var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}var t,i;return t=e,i=[{key:\"getListeners\",value:function(e){var t,i,a=this._getEvents();if(e instanceof RegExp)for(i in t={},a)a.hasOwnProperty(i)&&e.test(i)&&(t[i]=a[i]);else t=a[e]||(a[e]=[]);return t}},{key:\"flattenListeners\",value:function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i}},{key:\"getListenersAsObject\",value:function(e){var t,i=this.getListeners(e);return i instanceof Array&&((t={})[e]=i),t||i}},{key:\"emit\",value:function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)}},{key:\"addListener\",value:function(e,t){if(!u(t))throw new TypeError(\"listener must be a function\");var i,a=this.getListenersAsObject(e),o=\"object\"===r(t);for(i in a)a.hasOwnProperty(i)&&-1===d(a[i],t)&&a[i].push(o?t:{listener:t,once:!1});if(\"contactListUpdate\"===e){apiRTC.userAgentInstance.currentSession.contactListUpdateListenerSetted=!0;var s,l=function(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,s=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}(apiRTC.userAgentInstance.currentSession.waitingContactListUpdateEvent);try{for(l.s();!(s=l.n()).done;){var c=s.value;this.emit(\"contactListUpdate\",c)}}catch(e){l.e(e)}finally{l.f()}apiRTC.userAgentInstance.currentSession.waitingContactListUpdateEvent=[]}else if(\"mediaDeviceChanged\"===e&&!0===apiRTC.mediaDeviceMgr.mediaDeviceChangedDetected){var h=apiRTC.mediaDeviceMgr.getMediaDeviceListsDiff(apiRTC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiRTC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources);apiRTC.myWebRTC_Event.createMediaDeviceChangedEvent(h,\"updatedOnDeviceChange\",apiRTC.mediaDeviceMgr.realMediaDevicesListInitializationWasAlreadyDone)}return this}},{key:\"addOnceListener\",value:function(e,t){return this.addListener(e,{listener:t,once:!0})}},{key:\"defineEvent\",value:function(e){return this.getListeners(e),this}},{key:\"defineEvents\",value:function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this}},{key:\"removeListener\",value:function(e,t){var i,a,n=this.getListenersAsObject(e);for(a in n)n.hasOwnProperty(a)&&-1!==(i=d(n[a],t))&&n[a].splice(i,1);return this}},{key:\"addListeners\",value:function(e,t){return this.manipulateListeners(!1,e,t)}},{key:\"removeListeners\",value:function(e,t){return this.manipulateListeners(!0,e,t)}},{key:\"manipulateListeners\",value:function(e,t,i){var a,n,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if(\"object\"!==r(t)||t instanceof RegExp)for(a=i.length;a--;)o.call(this,t,i[a]);else for(a in t)t.hasOwnProperty(a)&&(n=t[a])&&(\"function\"==typeof n?o.call(this,a,n):s.call(this,a,n));return this}},{key:\"removeEvent\",value:function(e){var t,i=r(e),a=this._getEvents();if(\"string\"===i)delete a[e];else if(e instanceof RegExp)for(t in a)a.hasOwnProperty(t)&&e.test(t)&&delete a[t];else delete this._events;return this}},{key:\"emitEvent\",value:function(e,t){var i,a,n,r,o=this.getListenersAsObject(e);for(r in o)if(o.hasOwnProperty(r))for(i=o[r].slice(0),n=0;n<i.length;n++)!0===(a=i[n]).once&&this.removeListener(e,a.listener),a.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,a.listener);return this}},{key:\"setOnceReturnValue\",value:function(e){return this._onceReturnValue=e,this}},{key:\"_getOnceReturnValue\",value:function(){return!this.hasOwnProperty(\"_onceReturnValue\")||this._onceReturnValue}},{key:\"_getEvents\",value:function(){return this._events||(this._events={})}}],i&&o(t.prototype,i),e}(),l=s.prototype,d=function(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1},c=function(e){return function(){return this[e].apply(this,arguments)}},u=function e(t){return\"function\"==typeof t||t instanceof RegExp||!(!t||\"object\"!==r(t))&&e(t.listener)};l.on=c(\"addListener\"),l.once=c(\"addOnceListener\"),l.off=c(\"removeListener\"),l.removeAllListeners=c(\"removeEvent\"),l.trigger=c(\"emitEvent\"),i(1249);var h=i(5945),p=i(1549),g=i(4708),m=(p.Y.get(\"ApiCC\"),{});m[1]=\"ERROR\",m[2]=\"WARN\",m[3]=\"INFO\",m[4]=\"DEBUG\",m[5]=\"TRACE\";var C={description:\"ApiRTC Cloud Communication Library\",session:null,jsLoaded:!1,initApiKey:null,initApiCCId:null,extJsLoadingRetryNb:null,extJsLoadingRetryDelay:null,bandwidthTestServer:\"https://cloud.apizee.com\",bandwidthRatingThresholds:[300,500,1e3,1500,2e3],LOG_LEVEL_OFF:0,LOG_LEVEL_ERROR:1,LOG_LEVEL_WARN:2,LOG_LEVEL_INFO:3,LOG_LEVEL_DEBUG:4,LOG_LEVEL_TRACE:5,browser:h.Xh,browser_major_version:h.PR,browser_version:h.dc,osName:h.BF,osVersion:h.MM,osUAParser:h.ag,browserInfo:h.cf,browserDetails:g.wL,parser:h.E2,logStorageActivated:!1,logStorageLevel:3,logStorage:[],eventCenter:null};function f(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var v=p.Y.get(\"EventCenter\"),b=\"eventCenterData\",S=\"[REMOTE-EVENTCENTER]\",y=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.consoleOutputEnabled=!1,this.storageDisabled=!1,\"undefined\"==typeof apiRTC_React&&(document.addEventListener(\"error\",(function(e){t.handleErrorEvent(e)})),document.addEventListener(\"userMediaError\",(function(e){t.handleErrorEvent(e)})))}var t,i;return t=e,i=[{key:\"handleErrorEvent\",value:function(e){var t=e.detail;if(!0!==this.storageDisabled)if(void 0!==t){var i={},a={},n=\"UNKNOWN\";i.type=e.type;for(var r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];\"eventType\"!==s&&(i[s]=t[s])}i.systemInfo={apiRTC:C.version,app:h.$6,device:h.vO,osName:h.BF,osVersion:h.MM,browser:h.Xh,browser_version:h.dc},null!==C.session&&void 0!==C.session?n=C.session.apiCCId:null!==C.initApiCCId&&void 0!==C.initApiCCId&&(n=C.initApiCCId),i.userInfo={apiCCId:n,apiKey:apiRTC.initApiKey};var l=localStorage.getItem(b);(l=l?JSON.parse(l):[]).unshift(i),l.length>100&&l.splice(100,l.length-100),localStorage.setItem(b,JSON.stringify(l)),this.consoleOutputEnabled&&v.error(\"[EVENTCENTER]\",i),\"undefined\"!=typeof Sentry&&(\"USER_MEDIA_ERROR\"!==e.detail.errorCode?(a.type=e.type,e.detail.error&&(a.error=e.detail.error),e.detail.errorInfo&&(a.errorInfo=e.detail.errorInfo),e.detail.errorCode&&(a.errorCode=e.detail.errorCode),e.detail.callId&&(a.callId=e.detail.callId),e.detail.convId&&(a.convId=e.detail.convId),e.detail.gumConfig&&(!1===e.detail.gumConfig.video?a.gumConfigVideo=!1:a.gumConfigVideo=!0),Sentry.withScope((function(e){e.setTag(\"event-center\",!0),e.setTag(\"userId\",C.session.apiCCId),Sentry.captureException(new Error(JSON.stringify(a)))}))):v.debug(\"Filtering error event for USER_MEDIA_ERROR for Sentry\"))}else v.error(\"Can't handle error event: data is undefined\");else v.debug(\"Event Center is disabled\")}},{key:\"handleDataAnswer\",value:function(e){e?e.map((function(e){v.debug(S+\": \",e)})):v.debug(S+\": \"+this.getUsername()+\" has no event records\")}},{key:\"getStoredData\",value:function(){var e=localStorage.getItem(b);return void 0===e?(v.warn(\"No data was stored by event center\"),null):JSON.parse(e)}},{key:\"clearStoredData\",value:function(){localStorage.removeItem(b)}},{key:\"enableConsoleOutput\",value:function(e){this.consoleOutputEnabled=e}},{key:\"disableStorage\",value:function(e){this.storageDisabled=e}}],i&&f(t.prototype,i),e}();function I(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}i(3710);var T=p.Y.get(\"MediaDevice\"),R=function(){function e(t,i,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),T.trace(\"Create \"+i+\" MediaDevice\"),this.id=t,this.type=i,this.label=a,this.capabilities=n}var t,i;return t=e,(i=[{key:\"getId\",value:function(){return this.id.toString()}},{key:\"getType\",value:function(){return this.type}},{key:\"getLabel\",value:function(){return this.label}},{key:\"isCamera\",value:function(){return\"videoinput\"===this.type}},{key:\"isMicrophone\",value:function(){return\"audioinput\"===this.type}},{key:\"isAudioOutput\",value:function(){return\"audiooutput\"===this.type}},{key:\"getCapabilities\",value:function(){return this.capabilities}}])&&I(t.prototype,i),e}(),w=(i(1532),i(4129),i(9653),i(4363),i(2772),i(9554),i(4747),i(8674),i(9575),i(2472),i(2990),i(8927),i(3105),i(5035),i(4345),i(7174),i(2846),i(4731),i(7209),i(6319),i(8867),i(7789),i(3739),i(9368),i(4483),i(2056),i(3462),i(678),i(7462),i(3824),i(5021),i(2974),i(5016),i(2707),i(2564),i(7327),i(9600),i(285),i(1637),i(2479),i(8304),i(489),i(2419),i(8011),i(4819),i(5003),i(1215));function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function M(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var A=new WeakMap,O=new WeakMap,D=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),O.set(this,t),A.set(this,new s)}var t,i,a;return t=e,a=[{key:\"getAvailableEvents\",value:function(){return[]}}],(i=[{key:\"on\",value:function(e,t){return this.constructor.getAvailableEvents().indexOf(e)>-1?A.get(this).on(e,t):O.get(this).error(\"No such event \"+e),this}},{key:\"removeListener\",value:function(e,t){if(this.constructor.getAvailableEvents().indexOf(e)>-1){var i,a=!1,n=function(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return E(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?E(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}(A.get(this).getListeners(e));try{for(n.s();!(i=n.n()).done;)if(i.value.listener===t){a=!0;break}}catch(e){n.e(e)}finally{n.f()}a?A.get(this).off(e,t):O.get(this).trace(\"removeListener() - No such listener for event \"+e)}else O.get(this).error(\"No such event \"+e);return this}}])&&M(t.prototype,i),a&&M(t,a),e}();function k(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return _(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function U(e){return U=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},U(e)}function N(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}i(6699),i(2023),i(6755),i(3843);var P=p.Y.get(\"ApiRTCManager\"),L=[\"sessionReady\",\"incomingCall\",\"callEstablished\",\"userMediaSuccess\",\"userMediaStop\",\"userMediaError\",\"callRestarting\",\"error\",\"receiveIMMessage\",\"updatePresence\",\"webRTCClientCreated\",\"updateUserStatus\",\"channelEvent\",\"groupChatCreation\",\"groupChatInvitation\",\"groupChatMemberUpdate\",\"addUserInGroupChatAnswer\",\"receiveGroupChatMessage\",\"userDataAnswer\",\"fetchUserDataAnswer\",\"receiveConversationList\",\"receiveConversationHistory\",\"receiveConversationDetailReport\",\"receiveContactOccurrencesFromConversationList\",\"receiveMCUSessionInvitation\",\"MCUSessionCreation\",\"MCUAvailableStream\",\"MCUAvailableStreamUpdate\",\"MCURemoveStream\",\"canPlayRemoteVideo\",\"recordedFileAvailable\",\"receiveData\",\"roomCreation\",\"roomJoined\",\"roomInvitation\",\"roomMemberUpdate\",\"receiveRoomMessage\",\"contactListInRoom\",\"snapShotPhotoUploaded\",\"stopRecord\",\"callAttempt\",\"joinMCUSessionAnswer\",\"hangup\",\"desktopCapture\",\"remoteStreamAdded\",\"remoteStreamRemoved\",\"switchStream\",\"sendDataChannelOpen\",\"sendDataChannelClose\",\"sendDataChannelError\",\"receiveDataChannelOpen\",\"receiveDataChannelClose\",\"receiveDataChannelError\",\"connectedUsersListUpdate\",\"onFileSended\",\"onFileSending\",\"onFileReceiving\",\"onFileReceived\",\"onFileProgress\",\"onFilePending\",\"recordedStreamsAvailable\",\"closingWhiteBoard\",\"webRTCPluginInstallation\",\"onQosStatsUpdate\",\"onQosChange\",\"onQosAudioChange\",\"onQosVideoChange\",\"MCURecordedStreamsAvailable\",\"MCURecordingStarted\",\"MCURecordingStopped\",\"ICECandidateTypeUpdate\",\"disconnectionWarning\",\"MCUAvailableComposite\",\"MCUParticipantEjected\",\"MCUStreamingStarted\",\"MCUStreamingStopped\",\"MCUAvailableReplay\",\"MCURoomModeChanged\",\"onCallStatsUpdate\",\"slowLink\",\"localStreamUpdated\",\"remoteStreamUpdated\",\"audioAmplitude\",\"videoQualityChanged\",\"cpuLimited\",\"bandwidthLimited\",\"simulcastFeedChanged\",\"cloudEventOccurred\",\"groupUnsubscribed\",\"transferBegun\",\"transferProgress\",\"transferEnded\"],x=null,W=!1,V=!1,F=function(e){if(null!==x&&x.isInitialized()){if(\"groupUnsubscribed\"===e||\"transferBegun\"===e||\"transferProgress\"===e||\"transferEnded\"===e)return;apiRTC.addEventListener(e,(function(t){P.trace(\"Emiting \"+e,t),x.eventEmitter.emit(e,t)}))}},j=function(e){null!==x&&x.isInitialized()&&apiRTC.removeEventListener(e,(function(t){P.trace(\"Emiting \"+e,t),x.eventEmitter.emit(e,t)}))},B=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),null!==x)throw\"Cannot construct singleton ApiRTCManager\";this.eventEmitter=new s,this.apiRTCSession=null,this.whiteBoardClient=null,this.pointerSharingClient=null,this.webRTCClient=null,this.dataClient=null,this.IMClient=null,this.contactDisconnectionDelay=a.g.CONTACT_DISCONNECTION_DELAY,x=this}var t,i,n;return t=e,i=[{key:\"onEvent\",value:function(e,t){return L.indexOf(e)>-1?this.eventEmitter.on(e,t):P.error(\"No such apiRTC event \"+e),this}},{key:\"onceEvent\",value:function(e,t){L.indexOf(e)>-1?this.eventEmitter.once(e,t):P.error(\"No such apiRTC event \"+e)}},{key:\"sendData\",value:function(e,t){var i=this;return new Promise((function(n,r){null===i.dataClient?r(a.g.ERROR_APIRTC_INITIALISATION_FAILED):i.dataClient.sendData(e,t,(function(e){var t=a.g.ERROR_OTHER;null!=e?\"timeoutReached\"!==e.reason&&\"destNotFound\"!==e.reason?n():(\"timerReached\"===e.reason?t=a.g.ERROR_TIMED_OUT:\"destNotFound\"===e.reason&&(t=a.g.ERROR_NOT_FOUND),r(t)):r(t)}))}))}},{key:\"sendMessage\",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,o){null===i.IMClient?o(a.g.ERROR_APIRTC_INITIALISATION_FAILED):i.IMClient.sendMessage(e,t,(function(e){var t=a.g.ERROR_OTHER;null!=e?\"timeoutReached\"!==e.reason&&\"destNotFound\"!==e.reason?r(e.UUCSeq):(\"timerReached\"===e.reason?t=a.g.ERROR_TIMED_OUT:\"destNotFound\"===e.reason&&(t=a.g.ERROR_NOT_FOUND),o(t)):o(t)}),n)}))}},{key:\"joinGroupChat\",value:function(e){var t=this;return new Promise((function(i,n){if(null===t.IMClient)return n(w.g.createError(a.g.ERROR_WRONG_STATE,\"joinGroupChat() - cannot join group chat\"));t.IMClient.joinGroupChat(e),i()}))}},{key:\"leaveGroupChat\",value:function(e){var t=this;return new Promise((function(i,n){if(null===t.IMClient)return n(w.g.createError(a.g.ERROR_WRONG_STATE,\"leaveGroupChat() - cannot leave group chat\"));t.IMClient.leaveGroupChat(e),i()}))}},{key:\"sendMessageToGroupChat\",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,o){if(null===i.IMClient)o(a.g.ERROR_APIRTC_INITIALISATION_FAILED);else{var s={};w.g.isTypeof(n,\"metadata\",\"object\")&&(s.metadata=n.metadata),i.IMClient.sendMessageToGroupChat(e,t,(function(e){return null!==e&&\"object\"===U(e)?\"ack\"===e.reason?r(e.UUCSeq):\"timeoutReached\"===e.reason?o(a.g.ERROR_TIMED_OUT):\"destNotFound\"===e.reason?o(a.g.ERROR_NOT_FOUND):o(a.g.ERROR_OTHER):o(a.g.ERROR_OTHER)}),s)}}))}},{key:\"removeEventListener\",value:function(e,t){null!=t&&(L.indexOf(e)>-1?this.eventEmitter.off(e,t):P.error(\"No such apiRTC event \"+e))}},{key:\"isInitialized\",value:function(){return W}},{key:\"unsubscribeToPresenceGroup\",value:function(e){null!==this.apiRTCSession?(this.apiRTCSession.unsubscribePresenceGroup([e]),x.eventEmitter.emit(\"groupUnsubscribed\",e)):P.error(\"apiRTC session is not initialized\")}},{key:\"joinAndSubscribeToPresenceGroup\",value:function(e){null!==this.apiRTCSession?(this.apiRTCSession.joinPresenceGroup([e]),this.apiRTCSession.subscribePresenceGroup([e])):P.error(\"apiRTC session is not initialized\")}},{key:\"leaveAndUnsubscribeToPresenceGroup\",value:function(e){null!==this.apiRTCSession?(this.apiRTCSession.leavePresenceGroup([e]),this.unsubscribeToPresenceGroup(e)):P.error(\"apiRTC session is not initialized\")}},{key:\"subscribeToCloudEvent\",value:function(e,t){this.apiRTCSession?this.apiRTCSession.subscribeToCloudEvent(e,t):P.error(\"apiRTC session is not initialized\")}},{key:\"unsubscribeToCloudEvent\",value:function(e,t){this.apiRTCSession?this.apiRTCSession.unsubscribeToCloudEvent(e,t):P.error(\"apiRTC session is not initialized\")}},{key:\"disconnect\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(apiRTC.disconnect(e),W=!1,this.apiRTCSession=null,this.webRTCClient=null,this.dataClient=null,this.IMClient=null,V){var t,i=k(L);try{for(i.s();!(t=i.n()).done;){var a=t.value;j(a)}}catch(e){i.e(e)}finally{i.f()}V=!1}}},{key:\"initializeApiRTC\",value:function(e){return P.info(\"initializeApiRTC()\"),new Promise((function(t,i){if(void 0===e&&void 0===e.apiKey)i(\"Invalid apiRTC initialization params\");else{var n=function(e){switch(P.debug(\"onChannelEventDuringInit()\",e.detail),e.detail.channelEvent){case\"onChannelError\":i(\"Channel Error : \"+e.detail.event);break;case\"onChannelConnectError\":e.detail.event.message.includes(\"access token failure\")&&i(\"Channel Connect Error: \"+e.detail.event.message);break;case\"onChannelOpened\":P.debug(\"onChannelOpened\");break;default:P.debug(\"Unhandle case in onChannelEventDuringInit :\",e.detail.channelEvent)}};apiRTC.addEventListener(\"channelEvent\",n),e.onReady=function(){if(W=!0,x.webRTCClient=apiRTC.session.createWebRTCClient({}),x.webRTCClient.setMCUConnector(e.hasOwnProperty(\"mcu\")?e.mcu:a.g.DEFAULT_MCU),w.g.isPropertyTypeof(e,\"turnServerAddress\",\"string\")&&x.webRTCClient.setClientTurnServer(e.turnServerAddress),x.webRTCClient.setUserAcceptOnIncomingCallBeforeGetUserMedia(!0),w.g.isPropertyTypeof(e,\"userAcceptOnIncomingDataCall\",\"boolean\")?x.webRTCClient.setUserAcceptOnIncomingDataCall(e.userAcceptOnIncomingDataCall):x.webRTCClient.setUserAcceptOnIncomingDataCall(!0),w.g.isPropertyTypeof(e,\"userAcceptOnIncomingScreenSharingCall\",\"boolean\")?x.webRTCClient.setUserAcceptOnIncomingScreenSharingCall(e.userAcceptOnIncomingScreenSharingCall):x.webRTCClient.setUserAcceptOnIncomingScreenSharingCall(!1),x.dataClient=apiRTC.session.createDataClient(),x.IMClient=apiRTC.session.createIMClient(),x.pointerSharingClient=apiRTC.session.createPointerSharingClient(),x.webRTCClient.setAllowMultipleCalls(!0),x.apiRTCSession=apiRTC.session,!V){var i,r=k(L);try{for(r.s();!(i=r.n()).done;){var o=i.value;F(o)}}catch(e){r.e(e)}finally{r.f()}V=!0}apiRTC.removeEventListener(\"channelEvent\",n),t(apiRTC.session.apiCCId)},W=!1,x.apiRTCSession=null,x.webRTCClient=null,x.dataClient=null,x.IMClient=null,apiRTC.init(e)}}))}},{key:\"createWhiteBoard\",value:function(){P.debug(\"createWhiteBoard()\"),x.whiteBoardClient=apiRTC.createWhiteBoard(null,\"invisible\",null,6e4)}},{key:\"getMediaDevices\",value:function(){return P.debug(\"ApiRTCManager::getMediaDevices()\"),new Promise((function(e,t){apiRTC.getMediaDevices().then((function(t){P.debug(\"ApiRTCManager::getMediaDevices(), sources :\",t),e(t)})).catch((function(e){var i=\"getMediaDevices() - error\";P.error(i,e),t(new Error(i))}))}))}},{key:\"getUserMedia\",value:function(e){return new Promise((function(t,i){apiRTC.getUserMedia(e).then((function(e){P.debug(\"ApiRTCManager::getUserMedia() success\"),t(e)})).catch((function(e){P.error(\"ApiRTCManager::getUserMedia() - Could not get user media :\",e),i(new Error(\"ApiRTCManager::getUserMedia() - Could not get user media :\"+e))}))}))}},{key:\"setAudioSourceIdInConstraint\",value:function(e,t){return apiRTC.setAudioSourceIdInConstraint(e,t)}},{key:\"setVideoSourceIdInConstraint\",value:function(e,t){return apiRTC.setVideoSourceIdInConstraint(e,t)}},{key:\"attachMediaStream\",value:function(e,t){apiRTC.attachMediaStream(e,t)}},{key:\"addStreamInDiv\",value:function(e,t,i,a,n,r,o){apiRTC.addStreamInDiv(e,t,i,a,n,r,o)}},{key:\"removeElementFromDiv\",value:function(e,t){P.debug(\"removeElementFromDiv\"),apiRTC.removeElementFromDiv(e,t)}},{key:\"getClientId\",value:function(){return null!==this.apiRTCSession&&null!==this.apiRTCSession.apiCCWebRTCClient?this.apiRTCSession.apiCCWebRTCClient.webRTCClient.clientId:null}},{key:\"getActiveApiKey\",value:function(){return void 0!==apiRTC.session&&null!==apiRTC.session?apiRTC.session.apiKey:null}}],n=[{key:\"get\",value:function(){return null===x&&(x=new e),x}}],i&&N(t.prototype,i),n&&N(t,n),e}();function G(e){return G=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},G(e)}function q(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function H(e,t){return H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},H(e,t)}function J(e,t){if(t&&(\"object\"===G(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function z(e){return z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},z(e)}var X=p.Y.get(\"Invitation\"),K=new WeakMap,Q=[\"statusChange\"],$=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(l,e);var t,i,n,r,o,s=(r=l,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=z(r);if(o){var i=z(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return J(this,e)});function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,l),(e=s.call(this,X)).id=null,K.set(Y(e),a.g.INVITATION_STATUS_STANDBY),e.apiRTCManager=B.get(),e.type=\"not_defined\",e}return t=l,n=[{key:\"getAvailableEvents\",value:function(){return Q}}],(i=[{key:\"setStatus\",value:function(e){K.set(this,e),A.get(this).emit(\"statusChange\",{status:e,id:this.id})}},{key:\"getStatus\",value:function(){return K.get(this)}}])&&q(t.prototype,i),n&&q(t,n),l}(D);function Z(e){return Z=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Z(e)}function ee(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function te(e,t){return te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},te(e,t)}function ie(e,t){if(t&&(\"object\"===Z(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}p.Y.get(\"ReceivedInvitation\");var ne=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(o,e);var t,i,a,n,r=(a=o,n=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(a);if(n){var i=ae(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ie(this,e)});function o(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,o),(i=r.call(this)).id=t,i.sender=e,i.receiveTime=Date.now(),i}return t=o,(i=[{key:\"accept\",value:function(){return new Promise}},{key:\"decline\",value:function(e){}},{key:\"getSender\",value:function(){return this.sender}},{key:\"getReceiveTime\",value:function(){return this.receiveTime}},{key:\"getId\",value:function(){return this.id}}])&&ee(t.prototype,i),o}($);function re(e){return re=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},re(e)}function oe(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function se(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function le(e,t){return le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},le(e,t)}function de(e,t){if(t&&(\"object\"===re(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return ce(e)}function ce(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function ue(e){return ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ue(e)}var he=p.Y.get(\"ReceivedInvitation\"),pe=new WeakMap,ge=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(s,e);var t,i,n,r,o=(n=s,r=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ue(n);if(r){var i=ue(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return de(this,e)});function s(e,t,i){var a,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return oe(this,s),a=o.call(this,e,t.invitationId),he.info(\"Create ReceivedConversationInvitation\"),a.conversation=i,a.type=\"conversation\",a.invitationData=t,pe.set(ce(a),n),a}return t=s,i=[{key:\"accept\",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){return new Promise((function(n,r){var o=pe.get(t);i.hasOwnProperty(\"password\")&&(o.password=i.password),i.hasOwnProperty(\"session\")&&(o.session=i.session),t.conversation.join(o).then((function(){null!=e&&t.conversation.publish(e),n(t.conversation)})).catch((function(e){r(w.g.createError(a.g.ERROR_OTHER,\"accept() - cannot join webconf\",he,{fromError:e}))}))}))},r=function(){return new Promise((function(e,i){t.conversation.joinGroupChat().then((function(){e(t.conversation)})).catch((function(e){i(w.g.createError(a.g.ERROR_OTHER,\"accept() - cannot join groupChat\",he,{fromError:e}))}))}))};return new Promise((function(e,i){return t.getStatus()!==a.g.INVITATION_STATUS_STANDBY?i(w.g.createError(a.g.ERROR_WRONG_STATE,\"accept() - cannot accept invitation\",he)):(t.setStatus(a.g.INVITATION_STATUS_ACCEPTED),t.apiRTCManager.sendData(t.sender.getId(),{event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:t.id,answer:\"accept\"}),t.invitationData&&t.invitationData.conversationTypes?t.invitationData.conversationTypes.indexOf(\"WEBCONF\")>=0?n().then(e).catch(i):t.invitationData.conversationTypes.indexOf(\"GROUP_CHAT\")>=0?r().then(e).catch(i):void 0:n().then(e).catch(i))}))}},{key:\"decline\",value:function(e){this.getStatus()===a.g.INVITATION_STATUS_STANDBY&&(this.setStatus(a.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:e,answer:\"decline\"}))}},{key:\"getConversation\",value:function(){return this.conversation}}],i&&se(t.prototype,i),s}(ne);function me(e){return me=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},me(e)}function Ce(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return fe(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?fe(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function ve(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function be(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Se(e,t){return Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Se(e,t)}function ye(e,t){if(t&&(\"object\"===me(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return Ie(e)}function Ie(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}i(189);var Re=p.Y.get(\"Call\"),we=B.get(),Ee=[\"streamAdded\",\"streamRemoved\",\"response\",\"accepted\",\"declined\",\"hangup\",\"localStreamAvailable\",\"recordAvailable\",\"statsUpdate\",\"error\",\"disconnectionWarning\",\"userMediaError\",\"desktopCapture\",\"remoteStreamUpdated\",\"recordingStarted\",\"recordingStopped\",\"recordingAvailable\"],Me=new Set([\"audioSent\",\"videoSent\",\"audioReceived\",\"videoReceived\",\"quality\"]),Ae=new WeakMap,Oe=new WeakMap,De=new WeakMap,ke=new WeakMap,_e=new WeakMap,Ue=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(l,e);var t,i,n,r,o,s=(r=l,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(r);if(o){var i=Te(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ye(this,e)});function l(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(ve(this,l),i=s.call(this,Re),Re.debug(\"Create Call with id \"+e),Ae.set(Ie(i),e),Oe.set(Ie(i),t),i.publishedStreams=new Map,i.receivedStreams=new Map,i.stats={},De.set(Ie(i),n.hasOwnProperty(\"started\")&&n.started?a.g.CALL_STATUS_ONGOING:a.g.CALL_STATUS_WAITING_FOR_CALLEE),ke.set(Ie(i),!!n.hasOwnProperty(\"isRecorded\")&&n.isRecorded),n.isRecorded){i.confId=null,i.recordingStatus=null;for(var r=we.webRTCClient.webRTCClient.callsTable.length;--r>=0;){var o=we.webRTCClient.webRTCClient.callsTable[r];if(o.callId===e&&o.data){i.confId=o.data.confId;break}}ke.set(Ie(i),!0)}else ke.set(Ie(i),!1);var d={hangup:function(e){i.getId()===e.detail.callId&&i.destroy()},receiveData:function(e){void 0!==e.detail.data.info&&e.detail.data.info===a.g.INVITATION_ANSWER_IDENTIFIER&&e.detail.data.invitationId.toString()===i.getId()&&i.getStatus()===a.g.CALL_STATUS_WAITING_FOR_CALLEE&&(Re.info(\"Call answer from \"+i.getContact().getUsername()+\" for \"+i.getId()),\"accept\"===e.detail.data.answer?(De.set(Ie(i),a.g.CALL_STATUS_ONGOING),A.get(Ie(i)).emit(\"accepted\"),A.get(Ie(i)).emit(\"response\",\"accepted\")):(De.set(Ie(i),a.g.CALL_STATUS_ENDED),A.get(Ie(i)).emit(\"declined\",{reason:\"User_Refused_Call\"}),A.get(Ie(i)).emit(\"response\",\"declined\")))},remoteStreamUpdated:function(e){if(i.getId()===e.detail.callId){var t={callId:e.detail.callId,audio:e.detail.audioIsAvailable&&e.detail.audioIsActive,audioMuted:e.detail.audioIsMuted,audioSilent:e.detail.audioIsSilent,video:e.detail.videoIsAvailable&&e.detail.videoIsActive,videoMuted:e.detail.videoIsMuted,videoSilent:e.detail.videoIsSilent};A.get(Ie(i)).emit(\"remoteStreamUpdated\",t)}},MCURecordingStarted:function(e){if(ke.get(Ie(i))&&e.detail.roomName===i.confId){var t=w.g.parseRecordingEvent(\"MCURecordingStarted\",e.detail);\"COMPOSITE\"===t.callId&&(i.recordingStatus=t,A.get(Ie(i)).emit(\"recordingStarted\",t))}},MCURecordingStopped:function(e){if(ke.get(Ie(i))&&e.detail.roomName===i.confId){var t=w.g.parseRecordingEvent(\"MCURecordingStopped\",e.detail);\"COMPOSITE\"===t.callId&&(delete i.recordingStatus,A.get(Ie(i)).emit(\"recordingStopped\",t))}},MCURecordedStreamsAvailable:function(e){if(ke.get(Ie(i))&&e.detail.roomName===i.confId){var t=w.g.parseRecordingEvent(\"MCURecordedStreamsAvailable\",e.detail);A.get(Ie(i)).emit(\"recordingAvailable\",t)}}};for(var c in d)we.onEvent(c,d[c]);return _e.set(Ie(i),d),i}return t=l,i=[{key:\"destroy\",value:function(){var e=_e.get(this);if(e){for(var t in e)we.removeEventListener(t,e[t]);_e.delete(this)}}},{key:\"getId\",value:function(){return Ae.get(this).toString()}},{key:\"isRecorded\",value:function(){return ke.get(this)}},{key:\"getContact\",value:function(){return Oe.get(this)}},{key:\"getStatus\",value:function(){return De.get(this)}},{key:\"setStatus\",value:function(e){De.set(this,e)}},{key:\"getPublishedStreams\",value:function(){var e,t=[],i=Ce(this.publishedStreams.values());try{for(i.s();!(e=i.n()).done;){var a=e.value;t.push(a)}}catch(e){i.e(e)}finally{i.f()}return t}},{key:\"getReceivedStreams\",value:function(){var e,t=[],i=Ce(this.receivedStreams.values());try{for(i.s();!(e=i.n()).done;){var a=e.value;t.push(a)}}catch(e){i.e(e)}finally{i.f()}return t}},{key:\"hangUp\",value:function(){this.getStatus()===a.g.CALL_STATUS_ENDED?Re.error(\"hangUp() - Call has already ended\"):we.webRTCClient.hangUp(this.getId())}},{key:\"getStats\",value:function(){return w.g.assignObject({},this.stats)}},{key:\"stopPublishedStreams\",value:function(){return we.webRTCClient.webRTCClient.stopMedia(this.getId())}},{key:\"replacePublishedStreams\",value:function(e,t){var i=this,n=function(e){if(Vn.has(e))return Vn.get(e);var t=apiCC.getUserMediaStream(e);if(t){var i=\"audio\";return!0===t.video&&(i=\"video\"),new Hn(t.stream,{type:i,constructor:!0,userMediaStreamId:t.userMediaStreamId})}return null};return new Promise((function(r,o){if(i.getStatus()!==a.g.CALL_STATUS_ONGOING)return o(new Error(\"replacePublishedStreams() - Cannot replace stream as call is not ongoing\"));if(null===e)if(w.g.isPropertyTypeof(t,\"getStream\",\"function\")){var s={getUserMediaStreamId:function(){return t.getStream().then((function(e){return e.userMediaStreamId})).catch(o)}};we.webRTCClient.webRTCClient.addMedia(i.getId(),!0,null,s).then((function(e){return r(n(e))})).catch((function(e){return o(new Error(\"replacePublishedStreams() - \"+e))}))}else we.webRTCClient.webRTCClient.addMedia(i.getId(),!0,null,null).then((function(e){return r(n(e))})).catch((function(e){return o(new Error(\"replacePublishedStreams() - \"+e))}));else we.webRTCClient.webRTCClient.addMedia(i.getId(),!0,e.userMediaStreamId).then((function(e){return r(n(e))})).catch((function(e){return o(new Error(\"replacePublishedStreams() - \"+e))}))}))}},{key:\"getRecordingInfo\",value:function(){return ke.get(this)?this.recordingStatus:null}},{key:\"startRecording\",value:function(){var e=this;return new Promise((function(t,i){if(e.asyncCallbacks)return i(w.g.createError(a.g.ERROR_OTHER,\"startRecording() - busy\",Re));e.asyncCallbacks={},e.asyncCallbacks.timeoutId=setTimeout((function(){return e.asyncCallbacks&&(we.removeEventListener(\"error\",e.asyncCallbacks.error),we.removeEventListener(\"MCURecordingStarted\",e.asyncCallbacks.recordingStarted),delete e.asyncCallbacks),i(w.g.createError(a.g.ERROR_OTHER,\"startRecording() - timeout\",Re))}),a.g.CONVERSATION_RECORDING_STARTED_DELAY),e.asyncCallbacks.error=function(t){if(e.confId===t.detail.roomName&&\"COMPOSITE\"===t.detail.callId&&t.detail.errorCode.indexOf(\"START_RECORD\")>=0)return e.asyncCallbacks&&(we.removeEventListener(\"error\",e.asyncCallbacks.error),we.removeEventListener(\"MCURecordingStarted\",e.asyncCallbacks.recordingStarted),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks),i(w.g.createError(a.g.ERROR_OTHER,\"startRecording() - \"+t.detail.errorInfo,Re))},e.asyncCallbacks.recordingStarted=function(i){if(e.confId===i.detail.roomName&&\"COMPOSITE\"===i.detail.callId){e.asyncCallbacks&&(we.removeEventListener(\"error\",e.asyncCallbacks.error),we.removeEventListener(\"MCURecordingStarted\",e.asyncCallbacks.recordingStarted),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks);var a=w.g.parseRecordingEvent(\"MCURecordingStarted\",i.detail);return t(a)}},we.onEvent(\"error\",e.asyncCallbacks.error),we.onEvent(\"MCURecordingStarted\",e.asyncCallbacks.recordingStarted),we.webRTCClient.startCallRecording(Ae.get(e))}))}},{key:\"stopRecording\",value:function(){var e=this;return new Promise((function(t,i){if(e.asyncCallbacks)return i(w.g.createError(a.g.ERROR_OTHER,\"stopRecording() - busy\",Re));e.asyncCallbacks={},e.asyncCallbacks.timeoutId=setTimeout((function(){return e.asyncCallbacks&&(we.removeEventListener(\"error\",e.asyncCallbacks.error),we.removeEventListener(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),delete e.asyncCallbacks),i(w.g.createError(a.g.ERROR_OTHER,\"stopRecording() - timeout\",Re))}),a.g.CONVERSATION_RECORDING_STOPPED_DELAY),e.asyncCallbacks.error=function(t){if(e.confId===t.detail.roomName&&\"COMPOSITE\"===t.detail.callId&&t.detail.errorCode.indexOf(\"STOP_RECORD\")>=0)return e.asyncCallbacks&&(we.removeEventListener(\"error\",e.asyncCallbacks.error),we.removeEventListener(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks),i(w.g.createError(a.g.ERROR_OTHER,\"stopRecording() - \"+t.detail.errorInfo,Re))},e.asyncCallbacks.recordingStopped=function(i){if(e.confId===i.detail.roomName&&\"COMPOSITE\"===i.detail.callId){e.asyncCallbacks&&(we.removeEventListener(\"error\",e.asyncCallbacks.error),we.removeEventListener(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks);var a=w.g.parseRecordingEvent(\"MCURecordingStopped\",i.detail);return t(a)}},we.onEvent(\"error\",e.asyncCallbacks.error),we.onEvent(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),we.webRTCClient.stopCallRecording(Ae.get(e))}))}},{key:\"manageCallEstablishedEvent\",value:function(e){Re.debug(\"callEstablished\",e.detail,this.getId());var t=e.detail.callId.toString();this.getId()===t&&(Re.info(\"callEstablished from \"+this.getContact().getUsername(),e),this.getStatus()!==a.g.CALL_STATUS_ONGOING&&this.getStatus()!==a.g.CALL_STATUS_ENDED&&(A.get(this).emit(\"accepted\"),A.get(this).emit(\"response\",\"accepted\"),De.set(this,a.g.CALL_STATUS_ONGOING)))}},{key:\"manageRemoteStreamAddedEvent\",value:function(e){Re.debug(\"remoteStreamAdded\",e.detail,this.getId());var t=e.detail.callId.toString();if(this.getId()===t){var i=\"audio\"===e.detail.destCallType?\"audio\":\"video\",a=\"screenSharing\"===e.detail.callType,n=new Hn(e.detail.stream,{screensharing:a,type:i,contact:this.getContact(),streamId:e.detail.stream.id,callId:e.detail.callId,callAudioAvailable:e.detail.audioIsAvailable,callAudioActive:e.detail.audioIsActive,callAudioMuted:e.detail.audioIsMuted,callVideoAvailable:e.detail.videoIsAvailable,callVideoActive:e.detail.videoIsActive,callVideoMuted:e.detail.videoIsMuted,constructor:!0});this.receivedStreams.set(e.detail.stream.id,n),A.get(this).emit(\"streamAdded\",n)}}},{key:\"manageRemoteStreamRemovedEvent\",value:function(e){Re.debug(\"remoteStreamRemoved\",e.detail,this.getId());var t=e.detail.callId.toString();if(this.getId()===t){var i=this.receivedStreams.get(e.detail.stream.id);this.receivedStreams.delete(e.detail.stream.id),A.get(this).emit(\"streamRemoved\",i)}}},{key:\"manageUserMediaSuccessEvent\",value:function(e){Re.debug(\"UserMediaSuccess\",e.detail,this.getId());var t,i=null;if(t=!0===e.detail.videoIsAvailable?\"video\":\"audio\",null!==e.detail.callId&&(i=e.detail.callId.toString()),this.getId()===i){Re.info(\"localStreamAvailable\",e.detail);var a=Vn.get(e.detail.userMediaStreamId);a||(a=new Hn(e.detail.stream,{type:t,constructor:!0,userMediaStreamId:e.detail.userMediaStreamId})),this.publishedStreams.set(w.g.guid(),a),A.get(this).emit(\"localStreamAvailable\",a)}}},{key:\"manageCallStatsUpdateEvent\",value:function(e){if(this.getId()===e.detail.callId){for(var t=0,i=Object.keys(e.detail.stats);t<i.length;t++){var a=i[t];Me.has(a)&&(this.stats[a]=e.detail.stats[a])}A.get(this).emit(\"statsUpdate\",w.g.assignObject({},{stats:this.stats}))}}},{key:\"manageErrorEvent\",value:function(e){if(Re.debug(\"Error\",e.detail,this.getId()),this.getId()===e.detail.callId){var t={errorCode:e.detail.errorCode,errorInfo:e.detail.errorInfo};e.detail.data&&(t.descriptor=e.detail.data),A.get(this).emit(\"error\",t)}}},{key:\"manageDisconnectionWarningEvent\",value:function(e){Re.debug(\"DisconnectionWarning\",e.detail,this.getId()),this.getId()===e.detail.callId&&A.get(this).emit(\"disconnectionWarning\",{tries:e.detail.tries})}},{key:\"manageHangupEvent\",value:function(e){Re.debug(\"hangup\",e.detail,this.getId());var t=e.detail.callId.toString(),i=this.getStatus()===a.g.CALL_STATUS_WAITING_FOR_CALLEE&&\"remote\"===e.detail.hangupType;if(this.getId()===t&&this.getStatus()!==a.g.CALL_STATUS_ENDED){De.set(this,a.g.CALL_STATUS_ENDED),Re.info(\"Hangup from \"+this.getContact().getUsername(),e);var n,r=Ce(this.receivedStreams.keys());try{for(r.s();!(n=r.n()).done;){var o=n.value,s=this.receivedStreams.get(o);this.receivedStreams.delete(o),A.get(this).emit(\"streamRemoved\",s)}}catch(e){r.e(e)}finally{r.f()}A.get(this).emit(\"hangup\",{from:e.detail.hangupType,reason:e.detail.reason}),i&&(A.get(this).emit(\"declined\",{reason:e.detail.reason}),A.get(this).emit(\"response\",\"declined\"))}}},{key:\"manageRecordAvailableEvent\",value:function(e){Re.warn(\"recordedStreamsAvailable\",e.detail,this.getId()),A.get(this).emit(\"recordAvailable\",{mediaURL:e.detail.mediaURL})}},{key:\"manageUserMediaErrorEvent\",value:function(e){Re.warn(\"userMediaError\",e.detail,this.getId()),A.get(this).emit(\"userMediaError\",{callType:e.detail.callType,error:e.detail.error,onCallEstablishment:e.detail.onCallEstablishment,userMediaStreamId:e.detail.userMediaStreamId,tryAudioCallActivated:e.detail.tryAudioCallActivated})}},{key:\"manageDesktopCaptureEvent\",value:function(e){Re.warn(\"desktopCapture\",e.detail,this.getId()),A.get(this).emit(\"desktopCapture\",{event:e.detail.event})}}],n=[{key:\"getAvailableEvents\",value:function(){return Ee}}],i&&be(t.prototype,i),n&&be(t,n),l}(D);function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Pe(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Le=p.Y.get(\"ConversationCatalog\"),xe=null,We=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),null!==xe)throw\"Cannot construct singleton CallCatalog\";this.callList=new Map,xe=this}var t,i,a;return t=e,a=[{key:\"get\",value:function(){return null===xe&&(xe=new e),xe}}],(i=[{key:\"getOrCreateCall\",value:function(e,t,i){var a=null;return null!=e&&(this.callList.has(e.toString())?a=this.callList.get(e.toString()):(a=new Ue(e.toString(),t,i),this.callList.set(e.toString(),a))),a}},{key:\"getCall\",value:function(e,t){var i=null;if(null!=e){if(!this.callList.has(e.toString()))return null;i=this.callList.get(e.toString())}else if(t){var a,n=function(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return Ne(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ne(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}(this.callList.values());try{for(n.s();!(a=n.n()).done;){var r=a.value,o=r.getContact();if(o&&o.getId()===t.getId()){i=r;break}}}catch(e){n.e(e)}finally{n.f()}}return i}},{key:\"removeCallFromList\",value:function(e){Le.log(\"removeCallFromList : av instance.callList :\",xe.callList),xe.callList.has(e)&&xe.callList.delete(e),Le.log(\"removeCallFromList : ap instance.callList :\",xe.callList)}},{key:\"getCalls\",value:function(){return this.callList}}])&&Pe(t.prototype,i),a&&Pe(t,a),e}();function Ve(e){return Ve=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Ve(e)}function Fe(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function je(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Be(e,t){return Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Be(e,t)}function Ge(e,t){if(t&&(\"object\"===Ve(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return qe(e)}function qe(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}var Je=p.Y.get(\"ReceivedInvitation\"),Ye=We.get(),ze=[\"expired\",\"statusChange\"],Xe=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(l,e);var t,i,n,r,o,s=(r=l,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=He(r);if(o){var i=He(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Ge(this,e)});function l(e,t,i){var n,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Fe(this,l),n=s.call(this,e,t),Je.info(\"Create ReceivedCallInvitation with call type \"+i),n.type=\"call\",n.callType=i,n.isRecordedCall=!!r.hasOwnProperty(\"isRecorded\")&&r.isRecorded,n.call=Ye.getOrCreateCall(n.id,n.sender,{isRecorded:n.isRecorded()}),n.apiRTCManager.onEvent(\"hangup\",(function(e){var t=e.detail.callId.toString();n.id.toString()===t&&n.getStatus()===a.g.INVITATION_STATUS_STANDBY&&(n.setStatus(a.g.INVITATION_STATUS_EXPIRED),A.get(qe(n)).emit(\"expired\"))})),n}return t=l,i=[{key:\"getCallType\",value:function(){return this.callType}},{key:\"isRecorded\",value:function(){return this.isRecordedCall}},{key:\"accept\",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){var o=\"audio\"===t.getCallType(),s=!0,l=i;i.hasOwnProperty(\"audioOnly\")&&(o=i.audioOnly,delete i.audioOnly,void 0!==l.mediaTypeForIncomingCall&&null!==l.mediaTypeForIncomingCall||!0===i.audioOnly&&(l.mediaTypeForIncomingCall=\"AUDIO\")),i.hasOwnProperty(\"noStream\")&&(l.mediaTypeForIncomingCall=\"NONE\",s=!1),\"NONE\"===l.mediaTypeForIncomingCall&&(s=!1),t.getStatus()===a.g.INVITATION_STATUS_STANDBY?(t.setStatus(a.g.INVITATION_STATUS_ACCEPTED),t.apiRTCManager.sendData(t.sender.getId(),{event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:t.id,answer:\"accept\"}),t.call.setStatus(a.g.CALL_STATUS_ONGOING),s&&null!==e&&e instanceof Hn&&(Je.debug(\"accept() - A stream was preselected; audio only : \",o),l.userMediaStreamId=e.userMediaStreamId),t.apiRTCManager.webRTCClient.acceptCall(t.id,l),n(t.call)):r(w.g.createError(a.g.ERROR_INVITATION_STATE_INVALID,\"accept() - Cannot join this call, invitation state invalid\",Je))}))}},{key:\"decline\",value:function(e){this.getStatus()===a.g.INVITATION_STATUS_STANDBY&&(this.setStatus(a.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:e,answer:\"decline\"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}},{key:\"getCall\",value:function(){return this.call}}],n=[{key:\"getAvailableEvents\",value:function(){return ze}}],i&&je(t.prototype,i),n&&je(t,n),l}(ne);function Ke(e){return Ke=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Ke(e)}function Qe(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $e(e,t){return $e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$e(e,t)}function Ze(e,t){if(t&&(\"object\"===Ke(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}var tt=p.Y.get(\"ReceivedInvitation\"),it=[\"error\",\"progress\",\"statusChange\"],at=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(l,e);var t,i,n,r,o,s=(r=l,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=et(r);if(o){var i=et(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Ze(this,e)});function l(e,t,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,l),n=s.call(this,e,t),tt.debug(\"Create ReceivedFileTransferInvitation\"),n.type=\"sendFile\",n.fileInfo=i,n.apiRTCManager.onEvent(\"hangup\",(function(e){tt.debug(\"hangup\");var t=e.detail.callId.toString();n.getId()===t&&(tt.debug(\"hangup for ReceivedFileTransferInvitation\"),n.getStatus()===a.g.INVITATION_STATUS_ENDED?tt.debug(\"invitation ended\"):(tt.debug(\"invitation is cancelled\"),n.setStatus(a.g.INVITATION_STATUS_CANCELLED)),apiRTC.userAgentInstance.currentSession.invitationsMap.has(e.detail.remoteId+\"-sendfile-\"+t)&&apiRTC.userAgentInstance.currentSession.invitationsMap.delete(e.detail.remoteId+\"-sendfile-\"+t))})),n}return t=l,n=[{key:\"getAvailableEvents\",value:function(){return it}}],(i=[{key:\"accept\",value:function(){var e=this;return new Promise((function(t,i){if(e.getStatus()!==a.g.INVITATION_STATUS_STANDBY)i(w.g.createError(a.g.ERROR_INVITATION_STATE_INVALID,\"accept() - Cannot join this file transfer session, invitation state invalid\",tt));else{e.setStatus(a.g.INVITATION_STATUS_ACCEPTED),e.apiRTCManager.sendData(e.sender.getId(),{event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:e.id,answer:\"accept\"});var n=e;e.apiRTCManager.onEvent(\"onFileReceived\",(function r(o){if(o.detail.callId.toString()===n.id.toString()){if(tt.debug(\"typeof(e.detail.data.file) :\",Ke(o.detail.data.file)),\"string\"==typeof o.detail.data.file)t({file:o.detail.data.file,name:o.detail.data.name,type:o.detail.data.type});else{var s=new FileReader;s.addEventListener(\"loadend\",(function(){e.setStatus(a.g.INVITATION_STATUS_ENDED),e.apiRTCManager.webRTCClient.hangUp(n.id.toString());try{tt.info(\"accept() - file received from \"+n.sender.getUsername()+\" !\"),t({file:o.detail.data.file,name:o.detail.data.name,type:o.detail.data.type})}catch(e){tt.error(\"File Error\",e),i(w.g.createError(a.g.ERROR_OTHER,\"accept() - Could not read file received\",tt))}})),s.readAsArrayBuffer(o.detail.data.file)}e.apiRTCManager.removeEventListener(\"onFileReceived\",r)}})),e.apiRTCManager.onEvent(\"onFileProgress\",(function(e){e.detail.callId.toString()===n.id.toString()&&(tt.trace(\"file transfering\",e.detail),A.get(n).emit(\"progress\",{uuid:e.detail.uuid,fileSize:e.detail.fileSize,remainingSize:e.detail.remainingSize,percentage:e.detail.percentage,sendChunkNb:e.detail.sendChunkNb,transferDuration:e.detail.transferDuration,lastPacket:e.detail.lastPacket}))})),e.apiRTCManager.onEvent(\"receiveDataChannelError\",(function(e){e.detail.callId.toString()===n.id.toString()&&(tt.warn(\"receiveDataChannelError\",e.detail),A.get(n).emit(\"error\",\"receiveDataChannelError\"))})),e.apiRTCManager.webRTCClient.acceptCall(e.id,{mediaTypeForIncomingCall:\"DATA\"})}}))}},{key:\"getFileInfo\",value:function(){return this.fileInfo}},{key:\"decline\",value:function(e){tt.log(\"decline\"),this.getStatus()===a.g.INVITATION_STATUS_STANDBY&&(this.setStatus(a.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:e,answer:\"decline\"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}}])&&Qe(t.prototype,i),n&&Qe(t,n),l}(ne);function nt(e){return nt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},nt(e)}function rt(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ot(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function st(e,t){return st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},st(e,t)}function lt(e,t){if(t&&(\"object\"===nt(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}var ct=p.Y.get(\"ReceivedInvitation\"),ut=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(s,e);var t,i,n,r,o=(n=s,r=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=dt(n);if(r){var i=dt(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return lt(this,e)});function s(e,t){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return rt(this,s),i=o.call(this,e,t),ct.info(\"Create ReceivedWhiteboardInvitation\"),i.type=\"whiteboard\",a.cloudConvId&&(i.cloudConvId=a.cloudConvId),!0===a.webconf&&(i.webconf=!0),i}return t=s,(i=[{key:\"accept\",value:function(){var e=this;return new Promise((function(t,i){if(e.getStatus()===a.g.INVITATION_STATUS_STANDBY){e.setStatus(a.g.INVITATION_STATUS_ACCEPTED),e.apiRTCManager.sendData(e.sender.getId(),{event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:\"wb-\"+e.id,answer:\"accept\"}),e.apiRTCManager.whiteBoardClient.leaveRoom(),e.apiRTCManager.whiteBoardClient.start();var n={};e.cloudConvId&&(n.convId=e.cloudConvId),!0===e.webconf&&(n.webconf=!0),e.apiRTCManager.whiteBoardClient.joinRoom(e.id,n),t(e.id)}else i(w.g.createError(a.g.ERROR_INVITATION_STATE_INVALID,\"accept() - Cannot join this whiteboard session, invitation state invalid\",ct))}))}},{key:\"decline\",value:function(e){this.getStatus()===a.g.INVITATION_STATUS_STANDBY&&(this.setStatus(a.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:\"wb-\"+this.id,reason:e,answer:\"decline\"}))}}])&&ot(t.prototype,i),s}(ne);function ht(e){return ht=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},ht(e)}function pt(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function gt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function mt(e,t){return mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},mt(e,t)}function Ct(e,t){if(t&&(\"object\"===ht(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return ft(e)}function ft(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function vt(e){return vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vt(e)}var bt=p.Y.get(\"DataChannel\"),St=B.get(),yt=[\"response\",\"accepted\",\"declined\",\"error\",\"opened\",\"closed\",\"error\",\"transferProgress\",\"transferComplete\",\"dataReceived\",\"ended\"],It=new WeakMap,Tt=new WeakMap,Rt=new WeakMap,wt=new WeakMap,Et=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(l,e);var t,i,n,r,o,s=(r=l,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vt(r);if(o){var i=vt(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Ct(this,e)});function l(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return pt(this,l),i=s.call(this,bt),bt.debug(\"Create DataChannel with id \"+e),It.set(ft(i),e),Tt.set(ft(i),t),wt.set(ft(i),a.g.DATACHANNEL_TYPE_RECEIVE),n.hasOwnProperty(\"type\")&&(n.type===a.g.DATACHANNEL_TYPE_RECEIVE?wt.set(ft(i),a.g.DATACHANNEL_TYPE_RECEIVE):n.type===a.g.DATACHANNEL_TYPE_SEND&&wt.set(ft(i),a.g.DATACHANNEL_TYPE_SEND)),Rt.set(ft(i),a.g.DATACHANNEL_STATUS_WAITING),St.onEvent(\"receiveData\",(function(e){void 0!==e.detail.data.info&&e.detail.data.info===a.g.INVITATION_ANSWER_IDENTIFIER&&e.detail.data.invitationId.toString()===i.getId()&&i.getStatus()===a.g.DATACHANNEL_STATUS_WAITING&&(bt.info(\"DataChannel answer from \"+i.getContact().getUsername()+\" for \"+i.getId()),\"accept\"===e.detail.data.answer?A.get(ft(i)).emit(\"accepted\"):(Rt.set(ft(i),a.g.DATACHANNEL_STATUS_ENDED),A.get(ft(i)).emit(\"declined\")),A.get(ft(i)).emit(\"response\"))})).onEvent(\"callEstablished\",(function(e){var t=e.detail.callId.toString();i.getId()===t&&(bt.info(\"callEstablished from \"+i.getContact().getUsername(),e),i.getStatus()!==a.g.DATACHANNEL_STATUS_ONGOING&&i.getStatus()!==a.g.DATACHANNEL_STATUS_ENDED&&A.get(ft(i)).emit(\"accepted\"))})).onEvent(\"hangup\",(function(e){var t=e.detail.callId.toString(),n=i.getStatus()===a.g.DATACHANNEL_STATUS_WAITING&&\"remote\"===e.detail.hangupType;i.getId()===t&&i.getStatus()!==a.g.DATACHANNEL_STATUS_ENDED&&(Rt.set(ft(i),a.g.DATACHANNEL_STATUS_ENDED),bt.info(\"Hangup from \"+i.getContact().getUsername(),e),A.get(ft(i)).emit(\"ended\",{from:e.detail.hangupType}),n&&A.get(ft(i)).emit(\"declined\"))})).onEvent(\"onFileReceived\",(function(e){if(e.detail.callId.toString()===i.getId()){var t=e.detail.data,a=new FileReader;a.addEventListener(\"loadend\",(function(){try{var e=w.g.arrayBuffertoString(a.result);bt.info(\"dataReceived !\"),A.get(ft(i)).emit(\"dataReceived\",{uuid:t.uuid,data:e})}catch(e){bt.error(\"dataReceived Error\",e)}})),a.readAsArrayBuffer(t.file)}})).onEvent(\"onFileProgress\",(function(e){if(e.detail.callId.toString()===i.getId()){var t=e.detail;bt.trace(\"file transfering\",t);var a={uuid:t.uuid,fileSize:t.fileSize,remainingSize:t.remainingSize,percentage:t.percentage,sendChunkNb:t.sendChunkNb,transferDuration:t.transferDuration,lastPacket:t.lastPacket};A.get(ft(i)).emit(\"transferProgress\",a),t.transferEnded&&A.get(ft(i)).emit(\"transferComplete\",a)}})).onEvent(\"receiveDataChannelError\",(function(e){var t=e.detail.callId.toString();i.getId()===t&&A.get(ft(i)).emit(\"error\",\"receiveDataChannelError\")})).onEvent(\"sendDataChannelError\",(function(e){var t=e.detail.callId.toString();i.getId()===t&&A.get(ft(i)).emit(\"error\",\"sendDataChannelError\")})).onEvent(\"receiveDataChannelClose\",(function(e){var t=e.detail.callId.toString();i.getId()===t&&A.get(ft(i)).emit(\"closed\")})).onEvent(\"sendDataChannelClose\",(function(e){var t=e.detail.callId.toString();i.getId()===t&&A.get(ft(i)).emit(\"closed\")})).onEvent(\"receiveDataChannelOpen\",(function(e){var t=e.detail.callId.toString();i.getId()===t&&(Rt.set(ft(i),a.g.DATACHANNEL_STATUS_ONGOING),A.get(ft(i)).emit(\"opened\"))})).onEvent(\"sendDataChannelOpen\",(function(e){var t=e.detail.callId.toString();i.getId()===t&&A.get(ft(i)).emit(\"opened\")})),i}return t=l,n=[{key:\"getAvailableEvents\",value:function(){return yt}}],(i=[{key:\"getId\",value:function(){return It.get(this).toString()}},{key:\"getContact\",value:function(){return Tt.get(this)}},{key:\"getType\",value:function(){return wt.get(this)}},{key:\"getStatus\",value:function(){return Rt.get(this)}},{key:\"sendData\",value:function(e){var t=this;return new Promise((function(i,n){var r=!1;t.getStatus()!==a.g.DATACHANNEL_STATUS_ONGOING?n(w.g.createError(a.g.ERROR_OTHER,\"Cannot send data as datachannel session is not ongoing\",bt)):t.getType()!==a.g.DATACHANNEL_TYPE_SEND?n(w.g.createError(a.g.ERROR_OTHER,\"Cannot send data as datachannel session is receiving only\",bt)):St.webRTCClient.sendDataWithCallId(t.getId(),{file:e},(function(e){r||(r=!0,i(e.uuid)),bt.trace(\"sendData() - progress : \",e);var a={uuid:e.uuid,fileSize:e.fileSize,remainingSize:e.remainingSize,percentage:e.percentage,sendChunkNb:e.sendChunkNb,transferDuration:e.transferDuration,lastPacket:e.lastPacket};A.get(t).emit(\"transferProgress\",a),e.transferEnded&&A.get(t).emit(\"transferComplete\",a)}))}))}},{key:\"close\",value:function(){this.getStatus()===a.g.DATACHANNEL_STATUS_ENDED?bt.error(\"close() - DataChannel session has already ended\"):St.webRTCClient.hangUp(this.getId())}}])&&gt(t.prototype,i),n&&gt(t,n),l}(D);function Mt(e){return Mt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Mt(e)}function At(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ot(e,t){return Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ot(e,t)}function Dt(e,t){if(t&&(\"object\"===Mt(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return kt(e)}function kt(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function _t(e){return _t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_t(e)}var Ut=p.Y.get(\"ReceivedInvitation\"),Nt=[\"expired\",\"statusChange\"],Pt=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(l,e);var t,i,n,r,o,s=(r=l,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_t(r);if(o){var i=_t(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Dt(this,e)});function l(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,l),i=s.call(this,e,t),Ut.info(\"Create ReceivedDataChannelInvitation \"),i.type=\"dataChannel\",i.apiRTCManager.onEvent(\"hangup\",(function(e){var t=e.detail.callId.toString();i.id.toString()===t&&i.getStatus()===a.g.INVITATION_STATUS_STANDBY&&(i.setStatus(a.g.INVITATION_STATUS_EXPIRED),A.get(kt(i)).emit(\"expired\"))})),i}return t=l,n=[{key:\"getAvailableEvents\",value:function(){return Nt}}],(i=[{key:\"accept\",value:function(){var e=this;return new Promise((function(t,i){if(e.getStatus()===a.g.INVITATION_STATUS_STANDBY){e.setStatus(a.g.INVITATION_STATUS_ACCEPTED),e.apiRTCManager.sendData(e.sender.getId(),{event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:e.id,answer:\"accept\"});var n=new Et(e.id,e.sender,{started:!0,type:a.g.DATACHANNEL_TYPE_SEND});e.apiRTCManager.webRTCClient.acceptCall(e.id,{mediaTypeForIncomingCall:\"DATA\"}),t(n)}else i(w.g.createError(a.g.ERROR_INVITATION_STATE_INVALID,\"accept() - Cannot join this datachannel session, invitation state invalid\",Ut))}))}},{key:\"decline\",value:function(e){this.getStatus()===a.g.INVITATION_STATUS_STANDBY&&(this.setStatus(a.g.INVITATION_STATUS_DECLINED),this.apiRTCManager.sendData(this.sender.getId(),{event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:this.id,reason:e,answer:\"decline\"}),this.apiRTCManager.webRTCClient.refuseCall(this.id))}}])&&At(t.prototype,i),n&&At(t,n),l}(ne);function Lt(e){return Lt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Lt(e)}function xt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Wt(e,t){return Wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Wt(e,t)}function Vt(e,t){if(t&&(\"object\"===Lt(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function Ft(e){return Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ft(e)}var jt=p.Y.get(\"ReceivedInvitation\"),Bt=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wt(e,t)}(s,e);var t,i,n,r,o=(n=s,r=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ft(n);if(r){var i=Ft(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Vt(this,e)});function s(e,t,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,s),a=o.call(this,e,i),jt.info(\"Create ReceivedConversationJoinRequest\"),a.type=\"conversationJoinRequest\",a.conversation=t||null,a}return t=s,(i=[{key:\"getConversation\",value:function(){return this.conversation}},{key:\"accept\",value:function(){var e=this;return new Promise((function(t,i){e.getStatus()===a.g.INVITATION_STATUS_STANDBY?(e.setStatus(a.g.INVITATION_STATUS_ACCEPTED),e.conversation?e.conversation.allowEntry(e.sender,{invitationId:e.id,answer:\"accept\",ackEnabled:!0}).then(t).catch(i):(e.apiRTCManager.sendData(e.sender.getId(),{roomname:e.id,event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:e.id,answer:\"accept\",command:\"access\",value:{access:!0}}),t())):i(w.g.createError(a.g.ERROR_INVITATION_STATE_INVALID,\"accept() - Cannot accept request, invitation state invalid\",jt))}))}},{key:\"decline\",value:function(e){var t=this;return new Promise((function(i,n){t.getStatus()===a.g.INVITATION_STATUS_STANDBY?(t.setStatus(a.g.INVITATION_STATUS_DECLINED),t.conversation?t.conversation.denyEntry(t.sender,{invitationId:t.id,answer:\"decline\",reason:e}).then(i).catch(n):(t.apiRTCManager.sendData(t.sender.getId(),{roomname:t.id,event:a.g.INVITATION_ANSWER_IDENTIFIER,invitationId:t.id,reason:e,answer:\"decline\",command:\"access\",value:{access:!1}}),i())):n(w.g.createError(a.g.ERROR_INVITATION_STATE_INVALID,\"decline() - Cannot decline request, invitation state invalid\",jt))}))}}])&&xt(t.prototype,i),s}(ne);function Gt(e){return Gt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Gt(e)}function qt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ht(e,t){return Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ht(e,t)}function Jt(e,t){if(t&&(\"object\"===Gt(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function Yt(e){return Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Yt(e)}var zt=p.Y.get(\"ReceivedInvitation\"),Xt=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(s,e);var t,i,n,r,o=(n=s,r=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yt(n);if(r){var i=Yt(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Jt(this,e)});function s(e,t,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,s),(a=o.call(this,e,t)).session=i,a.type=\"pointerSharing\",a}return t=s,(i=[{key:\"accept\",value:function(){var e=this;return new Promise((function(t,i){e.getStatus()===a.g.INVITATION_STATUS_STANDBY?(e.setStatus(a.g.INVITATION_STATUS_ACCEPTED),e.session.joinPointerSharingRoom(e.id).then(t).catch((function(e){i(w.g.createError(a.g.ERROR_OTHER,\"accept() - cannot accept invitation\",zt))}))):i(w.g.createError(a.g.ERROR_INVITATION_STATE_INVALID,\"accept() - cannot accept invitation\",zt))}))}},{key:\"decline\",value:function(e){this.getStatus()===a.g.INVITATION_STATUS_STANDBY&&this.setStatus(a.g.INVITATION_STATUS_DECLINED)}}])&&qt(t.prototype,i),s}(ne),Kt=i(8364);function Qt(e){return Qt=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Qt(e)}function $t(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Zt(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}i(4723),i(4812),i(9601);var ei=p.Y.get(\"UserData\"),ti=B.get(),ii=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var i in $t(this,e),t)t.hasOwnProperty(i)&&(this[i]=t[i])}var t,i,a;return t=e,a=[{key:\"equals\",value:function(e,t){if(!(e instanceof Object&&t instanceof Object))return!1;for(var i in e){if(void 0===t[i])return!1;if(\"object\"===Qt(t[i])&&!this.equals(t[i],e[i]))return!1;if(t[i]!==e[i])return!1}for(var a in t){if(void 0===e[a])return!1;if(\"object\"===Qt(e[a])&&!this.equals(e[a],t[a]))return!1;if(e[a]!==t[a])return!1}return!0}}],(i=[{key:\"get\",value:function(e){return this.hasOwnProperty(e)&&void 0!==this[e]&&\"null\"!==this[e]&&null!==this[e]?this[e]:null}},{key:\"setToSession\",value:function(){try{var e={};for(var t in this)this.hasOwnProperty(t)&&\"function\"!=typeof this[t]&&(e[t]=this[t]);ti.apiRTCSession.setUserData(e)}catch(e){ei.error(\"setUserData() - could not set userData\")}}},{key:\"setProp\",value:function(e,t){return this[e]=t,this}},{key:\"setProps\",value:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this}}])&&Zt(t.prototype,i),a&&Zt(t,a),e}();function ai(e){return ai=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},ai(e)}function ni(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ri(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function oi(e,t){return oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},oi(e,t)}function si(e,t){if(t&&(\"object\"===ai(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return li(e)}function li(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function di(e){return di=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},di(e)}var ci=p.Y.get(\"SentInvitation\"),ui=[\"response\",\"receive\",\"statusChange\"],hi=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oi(e,t)}(l,e);var t,i,n,r,o,s=(r=l,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=di(r);if(o){var i=di(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return si(this,e)});function l(e,t){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ni(this,l),(i=s.call(this)).conversation=t,ci.info(\"Create SentInvitation\"),i.destination=e,i.id=w.g.guid(),i.sendTime=Date.now(),i.expirationTime=null,i.expirationTimeout=null,n.hasOwnProperty(\"expirationTime\")&&(i.expirationTime=n.expirationTime,i.expirationTimeout=setTimeout((function(){i.getStatus()===a.g.INVITATION_STATUS_STANDBY&&(ci.info(\"Conversation invitation expired\"),i.setStatus(a.g.INVITATION_STATUS_EXPIRED),A.get(li(i)).emit(\"response\",i.getStatus()))}),n.expirationTime)),n.hasOwnProperty(\"receiveNotifier\")&&n.receiveNotifier.on(\"receive\",(function(){A.get(li(i)).emit(\"receive\")})),i.apiRTCManager.onEvent(\"receiveData\",(function(e){void 0!==e.detail.data.event&&e.detail.data.event===a.g.INVITATION_ANSWER_IDENTIFIER&&e.detail.data.invitationId.toString()===i.id.toString()&&i.getStatus()===a.g.INVITATION_STATUS_STANDBY&&(ci.info(\"Received invitation answer for \"+i.id,e.detail.data),null!==i.expirationTimeout&&clearTimeout(i.expirationTimeout),\"accept\"===e.detail.data.answer?i.setStatus(a.g.INVITATION_STATUS_ACCEPTED):i.setStatus(a.g.INVITATION_STATUS_DECLINED),A.get(li(i)).emit(\"response\",i.getStatus()))})),i.apiRTCManager.onEvent(\"hangup\",(function(e){ci.debug(\"hangup\");var t=e.detail.callId.toString();i.getId()===t&&(ci.debug(\"hangup for sentInvitation\"),i.setStatus(a.g.INVITATION_STATUS_ENDED))})),i}return t=l,n=[{key:\"getAvailableEvents\",value:function(){return ui}}],(i=[{key:\"getId\",value:function(){return this.id}},{key:\"onResponse\",value:function(e){this.on(\"response\",e)}},{key:\"cancel\",value:function(){ci.info(\"cancel\"),\"sendFile\"===this.type?(ci.info(\"cancel sendfile\"),this.apiRTCManager.webRTCClient.hangUp(this.id)):ci.warn(\"cancel is not managed for invitation with type :\",this.type)}}])&&ri(t.prototype,i),n&&ri(t,n),l}($);function pi(e){return pi=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},pi(e)}function gi(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return mi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?mi(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Ci(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function fi(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function vi(e,t){return vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vi(e,t)}function bi(e,t){if(t&&(\"object\"===pi(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return Si(e)}function Si(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function yi(e){return yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},yi(e)}var Ii=p.Y.get(\"Contact\"),Ti=B.get(),Ri=new Kt.Z,wi=We.get(),Ei=[\"message\",\"conversationInvitation\",\"data\",\"joinGroup\",\"leaveGroup\",\"whiteboardInvitation\",\"fileSentSuccessfully\",\"fileTransferInvitation\",\"fileTransferProgress\",\"dataChannelInvitation\",\"incomingCall\",\"newMediaAvailable\",\"customEvent\",\"fileTransferError\",\"incomingScreenSharingCall\",\"incomingScreenSharingCallInvitation\"],Mi=new WeakMap,Ai=new WeakMap,Oi=new Map,Di=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vi(e,t)}(l,e);var t,i,n,r,o,s=(r=l,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yi(r);if(o){var i=yi(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return bi(this,e)});function l(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ci(this,l),t=s.call(this,Ii),Ii.debug(\"Create Contact with id \"+e),Ii.debug(\"Create Contact with userData :\",i),Ai.set(Si(t),e.toString()),t.groups=[],t.previousMessages=[],t.userData=new ii(i),t.enterprise=null,t.streams=new Map,t.profile=null,t.fileTransfers=[],t.promises=[],Mi.set(Si(t),[]),Ti.onEvent(\"roomInvitation\",(function(e){if(null!==e.detail.senderId&&void 0!==e.detail.senderId&&\"whiteBoard\"===e.detail.roomType&&e.detail.senderId.toString()===t.getId()){Ii.info(\"Received whiteboard invitation from \"+t.getUsername());var i={};e.detail.cloudConvId&&(i.cloudConvId=e.detail.cloudConvId),!0===e.detail.webconf&&(i.webconf=!0),A.get(Si(t)).emit(\"whiteboardInvitation\",new ut(Si(t),e.detail.roomId,i))}})).onEvent(\"receiveIMMessage\",(function(e){e.detail.senderId.toString()===t.getId()&&(A.get(Si(t)).emit(\"message\",{content:e.detail.message,uuid:e.detail.UUCSeq,time:e.detail.time}),t.addMessageToHistory(e.detail.message,Math.round(e.detail.time.getTime()/1e3),e.detail.UUCSeq,!0))})).onEvent(\"receiveData\",(function(e){if(e.detail.senderId.toString()===t.getId()){Ii.debug(\"Received data e.detail.data : \",e.detail.data);var i=e.detail.data,n=null,r=$a.get();if(void 0!==i.roomname&&(n=r.isConference(i.roomname)?r.getOrCreateConference(r.getNameFromTechnicalName(i.roomname)):r.getOrCreateConversation(r.getNameFromTechnicalName(i.roomname))),void 0!==i.event)switch(i.event){case a.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:case a.g.INVITATION_ANSWER_IDENTIFIER:break;case a.g.CONTACT_SEND_DATA_IDENTIFIER:Ii.trace(\"Received data from \"+t.getUsername(),i.content),A.get(Si(t)).emit(\"data\",i.content);break;case a.g.CONVERSATION_INVITATION_IDENTIFIER:if(null!==n){Ii.debug(\"Received conversation invitation from \"+t.getId());var o={};i.hasOwnProperty(\"password\")&&(o.password=i.password),A.get(Si(t)).emit(\"conversationInvitation\",new ge(Si(t),i,n,o))}break;case a.g.CONTACT_SEND_FILEINFO_IDENTIFIER:Ii.debug(\"Received file info from \"+t.getUsername(),i.fileInfo);var s=i.callId.toString();if(w.g._private.dataCallsFileInfo.set(s,i.fileInfo),w.g._private.dataCallsOnHold.has(s)){var l=null;apiRTC.userAgentInstance.currentSession.invitationsMap.has(t.getId()+\"-sendfile-\"+s)?(l=apiRTC.userAgentInstance.currentSession.invitationsMap.get(t.getId()+\"-sendfile-\"+s),Ii.debug(\"invitation already exist :\",l)):(l=new at(Si(t),s,i.fileInfo),apiRTC.userAgentInstance.currentSession.invitationsMap.set(t.getId()+\"-sendfile-\"+s,l)),A.get(Si(t)).emit(\"fileTransferInvitation\",l)}break;case a.g.CONTACT_DATACHANNEL_INVITATION:Ii.debug(\"Received datachannel invitation from \"+t.getUsername()),w.g._private.dataChannelInvitations.set(i.callId.toString(),!0),w.g._private.dataCallsOnHold.has(i.callId.toString())&&A.get(Si(t)).emit(\"dataChannelInvitation\",new Pt(Si(t),i.callId.toString()));break;case a.g.CONTACT_NEW_MEDIA_IDENTIFIER:Ii.debug(\"New media available from \"+t.getUsername(),i.fileinfo),A.get(Si(t)).emit(\"newMediaAvailable\",{media:i.media});break;case a.g.CONTACT_EVENTCENTER_DATA_REQUEST:Ii.debug(\"New request for event center data from \"+t.getUsername());var d=apiRTC.eventCenter.getStoredData();if(void 0===d)return void Ii.error(\"Can't send event center stored data, it's undefined\");Ii.debug(\"Sending requested event center data\"),t.sendCustomEvent(a.g.CONTACT_EVENTCENTER_DATA_ANSWER,{data:d});break;case a.g.CONTACT_EVENTCENTER_DATA_ANSWER:if(Ii.debug(\"New event center data from \"+t.getUsername()),void 0===i.data)return void Ii.error(\"Can't handle remote event center data, it's undefined\");apiRTC.eventCenter.handleDataAnswer(i.data);break;case a.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER:Ii.debug(\"New getAudioFlowStatus from \"+i.requesterId+\" on stream \"+i.streamId);var c=t.getContact(i.requesterId),u=t.getLocalStreamPublished();if(null===u)return t.sendToContactRemoteStreamError(\"No stream found on remote\",c,i);c.sendCustomEvent(a.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER,{callId:i.callId,streamId:i.streamId,timeout:i.timeout,audioFlowStatus:u.getAudioFlowStatus()});break;case a.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER:Ii.debug(\"New getVideoFlowStatus from \"+i.requesterId+\" on stream \"+i.streamId);var h=t.getContact(i.requesterId),p=t.getLocalStreamPublished();if(null===p)return t.sendToContactRemoteStreamError(\"No stream found on remote\",h,i);h.sendCustomEvent(a.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER,{callId:i.callId,streamId:i.streamId,timeout:i.timeout,videoFlowStatus:p.getVideoFlowStatus()});break;case a.g.CONTACT_GET_SETTINGS_IDENTIFIER:Ii.debug(\"New getSettings from \"+i.requesterId);var g=t.getContact(i.requesterId),m=t.getLocalStreamPublished();if(null===m)return t.sendToContactRemoteStreamError(\"No stream found on remote\",g,i);m.getSettings().then((function(e){g.sendCustomEvent(a.g.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER,{callId:i.callId,streamId:i.streamId,timeout:i.timeout,settings:e})})).catch((function(e){t.sendToContactRemoteStreamError(e.message,g,i)}));break;case a.g.CONTACT_GET_CAPABILITIES_IDENTIFIER:Ii.debug(\"New getCapabilities from \"+i.requesterId);var C=t.getContact(i.requesterId),f=t.getLocalStreamPublished();if(null===f)return t.sendToContactRemoteStreamError(\"No stream found on remote\",C,i);f.getCapabilities().then((function(e){C.sendCustomEvent(a.g.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER,{callId:i.callId,streamId:i.streamId,timeout:i.timeout,capabilities:e})})).catch((function(e){t.sendToContactRemoteStreamError(e.message,C,i)}));break;case a.g.CONTACT_GET_CONSTRAINTS_IDENTIFIER:Ii.debug(\"New getConstraints from \"+i.requesterId);var v=t.getContact(i.requesterId),b=t.getLocalStreamPublished();if(null===b)return t.sendToContactRemoteStreamError(\"No stream found on remote\",v,i);b.getConstraints().then((function(e){v.sendCustomEvent(a.g.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER,{callId:i.callId,streamId:i.streamId,timeout:i.timeout,constraints:e})})).catch((function(e){t.sendToContactRemoteStreamError(e.message,v,i)}));break;case a.g.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER:var S=t.getLocalStreamPublished(),y=t.getContact(i.requesterId);S.applyConstraints(i.constraints).then((function(){y.sendCustomEvent(a.g.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER,{callId:i.callId,streamId:i.streamId,timeout:i.timeout})})).catch((function(e){t.sendToContactRemoteStreamError(e.message,y,i)}));break;case a.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER:Ii.debug(\"getRemoteAudioFlowStatus result :\",i);var I=t.getRemoteStreamSubscribed(i.callId,i.streamId);null===I&&Ii.error(\"Can't find the local stream to resolve the request..\"),I.resolvePendingPromise(i.timeout,i.audioFlowStatus);break;case a.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER:Ii.debug(\"getRemoteVideoFlowStatus result :\",i);var T=t.getRemoteStreamSubscribed(i.callId,i.streamId);null===T&&Ii.error(\"Can't find the local stream to resolve the request..\"),T.resolvePendingPromise(i.timeout,i.videoFlowStatus);break;case a.g.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER:Ii.debug(\"remote getSettings result :\",i);var R=t.getRemoteStreamSubscribed(i.callId,i.streamId);null===R&&Ii.error(\"Can't find the local stream to resolve the request..\"),R.resolvePendingPromise(i.timeout,i.settings);break;case a.g.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER:Ii.debug(\"remote getCapabilities result :\",i);var E=t.getRemoteStreamSubscribed(i.callId,i.streamId);null===E&&Ii.error(\"Can't find the local stream to resolve the request..\"),E.resolvePendingPromise(i.timeout,i.capabilities);break;case a.g.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER:Ii.debug(\"remote getConstraints result :\",i);var M=t.getRemoteStreamSubscribed(i.callId,i.streamId);null===M&&Ii.error(\"Can't find the local stream to resolve the request..\"),M.resolvePendingPromise(i.timeout,i.constraints);break;case a.g.CONTACT_GET_REMOTE_ERROR:Ii.debug(\"remote stream request error:\",i);var O=t.getRemoteStreamSubscribed(i.callId,i.streamId);null===O&&Ii.error(\"Can't find the local stream to reject the request..\"),O.rejectPendingPromise(i.timeout,i.message);break;case a.g.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER:Ii.debug(\"remote applyConstraints result :\",i);var D=t.getRemoteStreamSubscribed(i.callId,i.streamId);null===D&&Ii.error(\"Can't find the local stream to resolve the request..\"),D.resolvePendingPromise(i.timeout,i.constraints);break;default:var k={event:i.event,content:i};null!==n&&(k.conversation=n),A.get(Si(t)).emit(\"customEvent\",k)}}})).onEvent(\"incomingCall\",(function(e){if(e.detail.callerId.toString()===t.getId()){var i=e.detail.callId.toString();if(\"data\"===e.detail.callType)if(Ii.debug(\"Received file transfer invitation from \"+t.getUsername()),w.g._private.dataCallsFileInfo.has(i)){var a=w.g._private.dataCallsFileInfo.get(i),n=null;apiRTC.userAgentInstance.currentSession.invitationsMap.has(t.getId()+\"-sendfile-\"+i)?(n=apiRTC.userAgentInstance.currentSession.invitationsMap.get(t.getId()+\"-sendfile-\"+i),Ii.debug(\"invitation already exist :\",n)):(n=new at(Si(t),i,a),apiRTC.userAgentInstance.currentSession.invitationsMap.set(t.getId()+\"-sendfile-\"+i,n)),A.get(Si(t)).emit(\"fileTransferInvitation\",n)}else w.g._private.dataChannelInvitations.has(i)?A.get(Si(t)).emit(\"dataChannelInvitation\",new Pt(Si(t),i)):(Ii.info(\"File information has not been received yet, putting invitation on hold\"),w.g._private.dataCallsOnHold.set(i));else if(\"screenSharing\"===e.detail.callType)if(!0===apiRTC.session.apiCCWebRTCClient.webRTCClient.userAcceptOnIncomingScreenSharingCall){Ii.debug(\"Received screenSharingCallInvitation from \"+t.getUsername());var r=new Xe(Si(t),i,e.detail.callType,{isRecorded:!!e.detail.hasOwnProperty(\"recordedCall\")&&e.detail.recordedCall});A.get(Si(t)).emit(\"incomingScreenSharingCallInvitation\",r)}else{Ii.debug(\"Received screenSharingCall from \"+t.getUsername());var o=wi.getOrCreateCall(i,Si(t),{started:!0,isRecorded:!!e.detail.hasOwnProperty(\"recordedCall\")&&e.detail.recordedCall});A.get(Si(t)).emit(\"incomingScreenSharingCall\",o)}else Ii.info(\"Received call invitation from \"+t.getUsername()),A.get(Si(t)).emit(\"incomingCall\",new Xe(Si(t),i,e.detail.callType,{isRecorded:!!e.detail.hasOwnProperty(\"recordedCall\")&&e.detail.recordedCall}))}})).onEvent(\"hangup\",(function(e){var i=e.detail.callId.toString();t.getId()===e.detail.remoteId.toString()&&(Ii.debug(\"hangup event :\",e.detail),t.fileTransfers.includes(i)&&(Ii.info(\"File transfer finished from \"+t.getUsername()),t.fileTransfers.splice(t.fileTransfers.indexOf(i),1)))})).onEvent(\"sendDataChannelError\",(function(e){var i=e.detail.callId.toString();t.getId()===e.detail.remoteId.toString()&&t.fileTransfers.includes(i)&&(Ii.info(\"File transfer error from \"+t.getUsername()),A.get(Si(t)).emit(\"fileTransferError\",{error:\"sendDataChannelError\",invitationId:i}))})).onEvent(\"fetchUserDataAnswer\",(function(e){t.getId()===e.detail.id.toString()&&(t.userData=new ii(e.detail.userData),t.promises.forEach((function(t){e.detail.timeout===t.timeout&&(clearTimeout(t.timeout),t.resolve(e.detail.userData))})))})),t}return t=l,i=[{key:\"getId\",value:function(){return Ai.get(this)}},{key:\"id\",get:function(){return Ii.warn(\"contact.id is deprecated, please use contact.getId() instead\"),this.getId()}},{key:\"fetchProfileInformation\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(i,a){null===e.profile||t?Ri.getUserProfile(Ti.getActiveApiKey(),e.getId()).then((function(t){e.profile=t,i(t)})).catch(a):i(e.profile)}))}},{key:\"getActiveStreams\",value:function(){return this.streams.values()}},{key:\"getLocalStreamWithCallId\",value:function(e){for(var t=null,i=Hn.getLocalStreams(),a=i.next();!a.done;){for(var n=a.value,r=n.publishedInConversations.values(),o=r.next();!o.done;)o.value===e&&(t=n),o=r.next();a=i.next()}return t}},{key:\"addMessageToHistory\",value:function(e,t,i,a){-1===Mi.get(this).indexOf(i.toString())&&(this.previousMessages.push({content:e,timestamp:t,uuid:i,fromContact:a}),Mi.get(this).push(i.toString()))}},{key:\"getPreviousMessages\",value:function(){return this.previousMessages.sort((function(e,t){return new Date(t.timestamp)-new Date(e.timestamp)})),this.previousMessages}},{key:\"getUserData\",value:function(){return this.userData}},{key:\"fetchUserData\",value:function(){var e=this;return new Promise((function(t,i){var a=setTimeout((function(){i(\"Timeout error during fetchUserData() process\")}),5e3);e.promises.push({timeout:a,resolve:t}),apiRTC.session.fetchUserData({apiKey:Ti.getActiveApiKey(),id:e.getId(),timeout:a})}))}},{key:\"getUsername\",value:function(){return null!==this.userData.get(\"username\")?this.userData.get(\"username\"):null!==this.userData.get(\"nickname\")?this.userData.get(\"nickname\"):this.getId()}},{key:\"getPhotoUrl\",value:function(){return null!==this.userData.get(\"photo_url\")?this.userData.get(\"photo_url\"):null!==this.userData.get(\"photoUrl\")?this.userData.get(\"photoUrl\"):Ri.getUserPhotoUrl(this.getId())}},{key:\"fetchWebSessionInformation\",value:function(e){var t=this;return new Promise((function(i,n){e instanceof bn?Oi.has(t.getId()+\":\"+e.getId())?i(Oi.get(t.getId()+\":\"+e.getId())):Ri.getWebSession(e,t,Ti.getActiveApiKey()).then((function(a){Oi.set(t.getId()+\":\"+e.getId(),a),i(a)})).catch((function(e){n(w.g.createError(a.g.ERROR_OTHER,\"fetchWebSessionInformation() - could not fetch web session information\",Ii))})):n(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"fetchWebSessionInformation() - parameter is not an instance of apiRTC.Session\",Ii))}))}},{key:\"loadMessageHistory\",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){t.fetchWebSessionInformation(e).then((function(t){return Ri.getSessionHistory(t.webSessionId,e.getToken(),i)})).then((function(e){Ii.debug(\"loadMessageHistory() - got messages\",e.messages);var i,a=gi(e.messages);try{for(a.s();!(i=a.n()).done;){var r=i.value;t.addMessageToHistory(r.value,r.timestamp,r.uuid,r.destId.toString()!==t.getId())}}catch(e){a.e(e)}finally{a.f()}n()})).catch((function(e){r(w.g.createError(a.g.ERROR_OTHER,\"loadMessageHistory() - could not load session history\",Ii))}))}))}},{key:\"addToGroup\",value:function(e){this.inGroup(e)||(this.groups.push(e),A.get(this).emit(\"joinGroup\",e))}},{key:\"removeFromGroup\",value:function(e){this.inGroup(e)&&(this.groups.splice(this.groups.indexOf(e),1),A.get(this).emit(\"leaveGroup\",e))}},{key:\"inGroup\",value:function(e){return this.groups.includes(e)}},{key:\"isOnline\",value:function(){return 0!==this.groups.length}},{key:\"sendData\",value:function(e){var t=this;return this.isOnline()||Ii.warn(\"sendData() - contact \"+this.getUsername()+\" does not seem to be connected.\"),new Promise((function(i,n){Ti.sendData(t.getId(),{event:a.g.CONTACT_SEND_DATA_IDENTIFIER,content:e}).then(i).catch((function(e){switch(e){case a.g.ERROR_TIMED_OUT:n(w.g.createError(a.g.ERROR_TIMED_OUT,\"sendData() - Data transmission timed out \",Ii));break;case a.g.ERROR_NOT_FOUND:n(w.g.createError(a.g.ERROR_NOT_FOUND,\"sendData() - Contact was not found \",Ii));break;default:n(w.g.createError(a.g.ERROR_OTHER,\"sendData() - Data transmission timed out \",Ii))}}))}))}},{key:\"sendCustomEvent\",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isOnline()||Ii.warn(\"sendCustomEvent() - contact \"+this.getUsername()+\" does not seem to be connected.\"),new Promise((function(n,r){var o=i;o.event=e,Ti.sendData(t.getId(),o).then(n).catch((function(e){switch(e){case a.g.ERROR_TIMED_OUT:r(w.g.createError(a.g.ERROR_TIMED_OUT,\"sendCustomEvent() - Data transmission timed out \",Ii));break;case a.g.ERROR_NOT_FOUND:r(w.g.createError(a.g.ERROR_NOT_FOUND,\"sendCustomEvent() - Contact was not found \",Ii));break;default:r(w.g.createError(a.g.ERROR_OTHER,\"sendCustomEvent() - Data transmission timed out \",Ii))}}))}))}},{key:\"sendMessage\",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isOnline()||Ii.warn(\"sendMessage() - contact \"+this.getUsername()+\" does not seem to be connected.\");var n=null,r=function(){return new Promise((function(e,a){i.hasOwnProperty(\"session\")?t.fetchWebSessionInformation(i.session).then((function(t){e({save:!0,cloudSessionId:t.webSessionId,apiRTCId:i.session.getId()})})).catch(a):e({})}))};return new Promise((function(i,o){\"string\"!=typeof e?o(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"sendMessage() - message parameter is not instance of string\",Ii)):r().then((function(i){return n=i,Ii.info(\"sendMessage() - with options :\",n),Ti.sendMessage(t.getId(),e,n)}),(function(e){o(w.g.createError(a.g.ERROR_OTHER,\"sendMessage() - Error occured when fetching options for sending message\",Ii))})).then((function(a){t.addMessageToHistory(e,Math.floor(Date.now()/1e3),a,!1),i(a)}),(function(e){switch(e){case a.g.ERROR_TIMED_OUT:o(w.g.createError(a.g.ERROR_TIMED_OUT,\"sendMessage() - Data transmission timed out \",Ii));break;case a.g.ERROR_NOT_FOUND:o(w.g.createError(a.g.ERROR_NOT_FOUND,\"sendMessage() - Contact was not found \",Ii));break;default:o(w.g.createError(a.g.ERROR_OTHER,\"sendMessage() - Data transmission timed out \",Ii))}}))}))}},{key:\"inviteTo\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.sendConversationInvitation(e,t)}},{key:\"sendConversationInvitation\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e instanceof Ma?e.sendInvitation(this,t):(Ii.error(\"sendConversationInvitation() - Parameter is not a conversation\"),null)}},{key:\"sendWhiteboardInvitation\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ti.whiteBoardClient.roomId!==e&&(Ti.whiteBoardClient.leaveRoom(),Ti.whiteBoardClient.start(),Ti.whiteBoardClient.joinRoom(e));var i=t.context?t.context:null,a={};t.cloudConversationId&&(a.convId=t.cloudConversationId),Ti.whiteBoardClient.inviteInRoom(e,this.getId(),i,a);var n=new hi(this,null);return n.id=\"wb-\"+e,n.type=\"whiteboard\",n}},{key:\"call\",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{mediaTypeForOutgoingCall:\"VIDEO\",record:!1};this.isOnline()||Ii.warn(\"call() - contact \"+this.getUsername()+\" does not seem to be connected.\");var a={},n=w.g.assignObject({},i),r=!!i.hasOwnProperty(\"audioOnly\")&&i.audioOnly;i.hasOwnProperty(\"record\")&&(void 0!==n.record&&null!==n.record||(n.record=i.record)),null!==e&&e instanceof Hn&&(n.userMediaStreamId=e.userMediaStreamId,e.isScreensharing()&&(n.forceCallType=\"screenSharing\")),n.cloudConversationId&&(a.cloudConvId=n.cloudConversationId,delete n.cloudConversationId),t=r?Ti.webRTCClient.callAudio(this.getId(),a,n):Ti.webRTCClient.call(this.getId(),a,n);var o=wi.getOrCreateCall(t,this,{isRecorded:n.record});return o}},{key:\"shareScreen\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isOnline()||Ii.warn(\"call() - contact \"+this.getUsername()+\" does not seem to be connected.\");var t={},i=null,a=e,n=e.captureSourceType;Ii.warn(\"call() - contact \"+this.getUsername()+\" does not seem to be connected.\"),i=Ti.webRTCClient.shareScreen(this.getId(),t,n);var r=wi.getOrCreateCall(i,this,{isRecorded:a.record});return r}},{key:\"startDataChannel\",value:function(){if(this.isOnline()||Ii.warn(\"startDataChannel() - contact \"+this.getUsername()+\" does not seem to be connected.\"),!(\"Edge\"===h.Xh&&h.PR<79)){var e=Ti.webRTCClient.startDataChannel(this.getId());return Ti.sendData(this.getId(),{callId:e,event:a.g.CONTACT_DATACHANNEL_INVITATION}),new Et(e,this,{type:a.g.DATACHANNEL_TYPE_SEND})}Ii.warn(\"Cannot startDataChannel as it is not supported on Edge\")}},{key:\"sendFile\",value:function(e,t){if(this.isOnline()||Ii.warn(\"sendFile() - contact \"+this.getUsername()+\" does not seem to be connected.\"),\"Edge\"===h.Xh&&h.PR<79)return Ii.warn(\"Cannot sendFile as Datachannel is not supported on Edge\"),null;var i=Ti.webRTCClient.startDataChannel(this.getId()),n=this;if(void 0===i)return Ii.warn(\"Error on startDataChannel\"),null;Ti.sendData(this.getId(),{fileInfo:e,callId:i,event:a.g.CONTACT_SEND_FILEINFO_IDENTIFIER});Ti.onEvent(\"sendDataChannelOpen\",(function a(r){Ii.debug(\"sendFile() - DataChannel open\",r.detail),r.detail.callId.toString()===i.toString()&&(Ti.webRTCClient.sendDataWithCallId(i,{file:t,name:e.name,type:e.type},(function(t){Ii.trace(\"sendFile() - progress : \",t);var i={uuid:t.uuid,fileSize:t.fileSize,remainingSize:t.remainingSize,percentage:t.percentage,sendChunkNb:t.sendChunkNb,transferDuration:t.transferDuration,lastPacket:t.lastPacket};A.get(n).emit(\"fileTransferProgress\",{fileInfo:e,transferInformation:i}),t.transferEnded&&A.get(n).emit(\"fileSentSuccessfully\",{fileInfo:e,transferInformation:i})})),Ti.removeEventListener(\"sendDataChannelOpen\",a))})),this.fileTransfers.push(i.toString());var r=new hi(this,null);return r.id=i.toString(),r.type=\"sendFile\",r.on(\"response\",(function(){r.getStatus()!==a.g.INVITATION_STATUS_ACCEPTED&&Ii.log(\"sendFile() - invitation has not been accepted, cleaning listeners\")})),r}},{key:\"pushMedia\",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,o){i.fetchWebSessionInformation(t).then((function(i){return n.token=t.token,Ri.pushConversationMedia(i.conversationId,e,Ti.getActiveApiKey(),n)})).then((function(e){Ti.sendData(i.getId(),{event:a.g.CONTACT_NEW_MEDIA_IDENTIFIER,media:{url:e.url,id:e.id}}),r({url:e.url,id:e.id})})).catch((function(e){o(w.g.createError(a.g.ERROR_OTHER,\"pushMedia() - failed to push media\",Ii))}))}))}},{key:\"fetchMediaList\",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ii.debug(\"fetchMediaList()\"),new Promise((function(n,r){t.fetchWebSessionInformation(e).then((function(t){return i.token=e.getToken(),Ri.getConversationMediaList(t.conversationId,Ti.getActiveApiKey(),i)})).then(n).catch((function(e){r(w.g.createError(a.g.ERROR_OTHER,\"getMediaList() - failed to get media list\",Ii))}))}))}},{key:\"sendEventCenterDataRequest\",value:function(){return this.sendCustomEvent(a.g.CONTACT_EVENTCENTER_DATA_REQUEST)}},{key:\"getLocalStreamPublished\",value:function(){var e=Hn.getLocalStreams().next();return void 0===e.value?null:e.value}},{key:\"getRemoteStreamSubscribed\",value:function(e,t){var i=bn.getActiveSession().getCall(e);if(i){Ii.debug(\"remote stream is associated to a call\");var a,n=gi(i.getReceivedStreams());try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.getId()===t)return r}}catch(e){n.e(e)}finally{n.f()}}else{var o=bn.getActiveSession().getActiveConversations(),s=bn.getActiveSession().getActiveConferences();for(var l in o){var d=o[l].getSubscribedStream(t);if(void 0!==d)return Ii.debug(\"remote stream is associated to a conversation\"),d}for(var c in s){var u=s[c].getSubscribedStream(t);if(void 0!==u)return Ii.debug(\"remote stream is associated to a conference\"),u}}return null}},{key:\"getContact\",value:function(e){return bn.getActiveSession().getOrCreateContact(e)}},{key:\"sendToContactRemoteStreamError\",value:function(e,t,i){Ii.debug(\"sendToContactRemoteStreamError\",e,t,i),t.sendCustomEvent(a.g.CONTACT_GET_REMOTE_ERROR,{callId:i.callId,streamId:i.streamId,timeout:i.timeout,message:e})}}],n=[{key:\"getAvailableEvents\",value:function(){return Ei}}],i&&fi(t.prototype,i),n&&fi(t,n),l}(D);function ki(e){return ki=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},ki(e)}function _i(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ui(e,t){return Ui=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ui(e,t)}function Ni(e,t){if(t&&(\"object\"===ki(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function Pi(e){return Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Pi(e)}var Li=p.Y.get(\"ConversationCall\"),xi=B.get(),Wi=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ui(e,t)}(s,e);var t,i,n,r,o=(n=s,r=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pi(n);if(r){var i=Pi(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return Ni(this,e)});function s(e,t,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,s),(a=o.call(this,Li)).conversation=e,a.callId=t,a.stream=i,a}return t=s,i=[{key:\"getConversation\",value:function(){return this.conversation}},{key:\"getCallId\",value:function(){return this.callId}},{key:\"getStream\",value:function(){return this.stream}},{key:\"isRecorded\",value:function(){return!!this.recordingStatus}},{key:\"getRecordingInfo\",value:function(){return this.isRecorded()?this.recordingStatus:null}},{key:\"isStreamed\",value:function(){return!!this.streamingStatus}},{key:\"getStreamingInfo\",value:function(){return this.isStreamed()?this.streamingStatus:null}},{key:\"startRecordingPublishedStream\",value:function(e){var t=this;return e||(e={}),new Promise((function(i,n){if(t.asyncCallbacks)return n(w.g.createError(a.g.ERROR_OTHER,\"startRecordingPublishedStream() - busy\",Li));t.asyncCallbacks={},t.asyncCallbacks.timeoutId=setTimeout((function(){return t.asyncCallbacks&&(xi.removeEventListener(\"error\",t.asyncCallbacks.error),xi.removeEventListener(\"MCURecordingStarted\",t.asyncCallbacks.recordingStarted),delete t.asyncCallbacks),n(w.g.createError(a.g.ERROR_OTHER,\"startRecordingPublishedStream() - timeout\",Li))}),a.g.CONVERSATION_RECORDING_STARTED_DELAY),t.asyncCallbacks.error=function(e){if(String(e.detail.convId)===t.conversation.getCloudConversationId()&&e.detail.callId===t.callId&&e.detail.errorCode.indexOf(\"START_RECORD\")>=0)return t.asyncCallbacks&&(xi.removeEventListener(\"error\",t.asyncCallbacks.error),xi.removeEventListener(\"MCURecordingStarted\",t.asyncCallbacks.recordingStarted),clearTimeout(t.asyncCallbacks.timeoutId),delete t.asyncCallbacks),n(w.g.createError(a.g.ERROR_OTHER,\"startRecordingPublishedStream() - \"+e.detail.errorInfo,Li))},t.asyncCallbacks.recordingStarted=function(e){if(String(e.detail.convId)===t.conversation.getCloudConversationId()&&e.detail.callId===t.callId){t.asyncCallbacks&&(xi.removeEventListener(\"error\",t.asyncCallbacks.error),xi.removeEventListener(\"MCURecordingStarted\",t.asyncCallbacks.recordingStarted),clearTimeout(t.asyncCallbacks.timeoutId),delete t.asyncCallbacks);var a=w.g.parseRecordingEvent(\"MCURecordingStarted\",e.detail);return i(a)}},xi.onEvent(\"error\",t.asyncCallbacks.error),xi.onEvent(\"MCURecordingStarted\",t.asyncCallbacks.recordingStarted);var r=\"AUDIO-VIDEO\";!0===e.audioOnly?r=\"AUDIO-ONLY\":!0===e.videoOnly&&(r=\"VIDEO-ONLY\");var o=\"userStream\";w.g.isPropertyTypeof(e,\"customIdInFilename\",\"string\")&&(o=e.customIdInFilename);var s={};w.g.isPropertyTypeof(e,\"data\",\"object\")&&(s=Object.assign({},e.data)),w.g.isPropertyTypeof(e,\"ttl\",\"number\")&&e.ttl>0&&(s.ttl=e.ttl),xi.webRTCClient.startRecording(r,o,t.conversation.getCloudConversationId(),t.callId,s)}))}},{key:\"stopRecordingPublishedStream\",value:function(){var e=this;return new Promise((function(t,i){if(e.asyncCallbacks)return i(w.g.createError(a.g.ERROR_OTHER,\"stopRecordingPublishedStream() - busy\",Li));e.asyncCallbacks={},e.asyncCallbacks.timeoutId=setTimeout((function(){return e.asyncCallbacks&&(xi.removeEventListener(\"error\",e.asyncCallbacks.error),xi.removeEventListener(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),delete e.asyncCallbacks),t(e.recordingStatus)}),a.g.CONVERSATION_RECORDING_STOPPED_DELAY),e.asyncCallbacks.error=function(t){if(String(t.detail.convId)===e.conversation.getCloudConversationId()&&t.detail.callId===e.callId&&t.detail.errorCode.indexOf(\"STOP_RECORD\")>=0)return e.asyncCallbacks&&(xi.removeEventListener(\"error\",e.asyncCallbacks.error),xi.removeEventListener(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks),i(w.g.createError(a.g.ERROR_OTHER,\"stopRecordingPublishedStream() - \"+t.detail.errorInfo,Li))},e.asyncCallbacks.recordingStopped=function(i){if(String(i.detail.convId)===e.conversation.getCloudConversationId()&&i.detail.callId===e.callId){e.asyncCallbacks&&(xi.removeEventListener(\"error\",e.asyncCallbacks.error),xi.removeEventListener(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks);var a=w.g.parseRecordingEvent(\"MCURecordingStopped\",i.detail);return t(a)}},xi.onEvent(\"error\",e.asyncCallbacks.error),xi.onEvent(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),xi.webRTCClient.stopRecording(e.callId)}))}},{key:\"replacePublishedStream\",value:function(e,t){var i=this;return new Promise((function(a,n){if(null===e){if(!w.g.isPropertyTypeof(t,\"getStream\",\"function\"))return n(new Error(\"replacePublishedStream() - Cannot replace stream, wrong arguments\"));i.stream.publishedInConversations.delete(i.conversation.getName()),i.conversation.conversationPublishedStreams.delete(i.stream.userMediaStreamId);var r={getUserMediaStreamId:function(){return t.getStream().then((function(e){i.stream=e,e.publishedInConversations.set(i.conversation.getName(),i.callId),i.conversation.callIdToStreamId.set(i.callId,e.userMediaStreamId);var t={contact:null,isRemote:!1,hasAudio:e.hasAudio(),hasVideo:e.hasVideo(),isScreensharing:e.isScreensharing(),streamId:e.userMediaStreamId,callId:i.callId};return i.conversation.conversationPublishedStreams.set(e.userMediaStreamId,t),e.userMediaStreamId})).catch(n)}};xi.webRTCClient.webRTCClient.addMedia(i.callId,!0,null,r).then((function(e){return a(function(e){if(Vn.has(e))return Vn.get(e);var t=apiCC.getUserMediaStream(e);if(t){var i=\"audio\";return!0===t.video&&(i=\"video\"),new Hn(t.stream,{type:i,constructor:!0,userMediaStreamId:t.userMediaStreamId})}return null}(e))})).catch((function(e){return n(new Error(\"replacePublishedStream() - \"+e))}))}else{i.stream.publishedInConversations.delete(i.conversation.getName()),i.conversation.conversationPublishedStreams.delete(i.stream.userMediaStreamId),xi.webRTCClient.webRTCClient.addMedia(i.callId,!0,e.userMediaStreamId).then((function(t){return a(e)})).catch((function(e){return n(new Error(\"replacePublishedStream() - \"+e))})),i.stream=e,e.publishedInConversations.set(i.conversation.getName(),i.callId),i.conversation.callIdToStreamId.set(i.callId,e.userMediaStreamId);var o={contact:null,isRemote:!1,hasAudio:e.hasAudio(),hasVideo:e.hasVideo(),isScreensharing:e.isScreensharing(),streamId:e.userMediaStreamId,callId:i.callId};i.conversation.conversationPublishedStreams.set(e.userMediaStreamId,o)}}))}},{key:\"startStreaming\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(i,n){return e.asyncCallbacks?n(w.g.createError(a.g.ERROR_OTHER,\"startStreaming() - busy\",Li)):xi.webRTCClient.startStreaming(t.service,t.server,t.streamKey,e.callId)?(e.asyncCallbacks={},e.asyncCallbacks.timeoutId=setTimeout((function(){return e.asyncCallbacks&&(xi.removeEventListener(\"MCUStreamingStarted\",e.asyncCallbacks.streamingStarted),delete e.asyncCallbacks),n(w.g.createError(a.g.ERROR_OTHER,\"startStreaming() - timeout\",Li))}),a.g.CONVERSATION_STREAMING_STARTED_DELAY),e.asyncCallbacks.streamingStarted=function(t){if(t.detail.roomName===e.conversation._getTechnicalName()&&t.detail.callId===e.callId){e.asyncCallbacks&&(xi.removeEventListener(\"MCUStreamingStarted\",e.asyncCallbacks.streamingStarted),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks);var a=Wa(\"MCUStreamingStarted\",t.detail);return i(a)}},void xi.onEvent(\"MCUStreamingStarted\",e.asyncCallbacks.streamingStarted)):n(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"startStreaming() - cannot start streaming\",Li))}))}},{key:\"stopStreaming\",value:function(){var e=this;return new Promise((function(t,i){return e.asyncCallbacks?i(w.g.createError(a.g.ERROR_OTHER,\"stopStreaming() - busy\",Li)):xi.webRTCClient.stopStreaming(e.callId)?(e.asyncCallbacks={},e.asyncCallbacks.timeoutId=setTimeout((function(){return e.asyncCallbacks&&(xi.removeEventListener(\"MCUStreamingStopped\",e.asyncCallbacks.streamingStopped),delete e.asyncCallbacks),i(w.g.createError(a.g.ERROR_OTHER,\"stopStreaming() - timeout\",Li))}),a.g.CONVERSATION_STREAMING_STOPPED_DELAY),e.asyncCallbacks.streamingStopped=function(i){if(i.detail.roomName===e.conversation._getTechnicalName()&&i.detail.callId===e.callId){e.asyncCallbacks&&(xi.removeEventListener(\"MCUStreamingStopped\",e.asyncCallbacks.streamingStopped),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks);var a=Wa(\"MCUStreamingStopped\",i.detail);return t(a)}},void xi.onEvent(\"MCUStreamingStopped\",e.asyncCallbacks.streamingStopped)):i(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"stopStreaming() - cannot stop streaming\",Li))}))}},{key:\"changeStreamPriority\",value:function(e){var t=this;return new Promise((function(i,n){return xi.webRTCClient.changeStreamPriority(t.callId,e)?(t.conversation.changeStreamPriority(t.stream.userMediaStreamId,!1,e),i()):n(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"changeStreamPriority() - cannot change stream priority\",Li))}))}},{key:\"updatePublishedStream\",value:function(e,t){var i=this;return new Promise((function(n,r){if(\"audio\"!==e&&\"video\"!==e)return r(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"updatePublishedStream() - wrong type\",Li));var o=t?\"sendonly\":\"inactive\";return xi.webRTCClient.webRTCClient.processUpdateStream(i.callId,e,o)?n():r(w.g.createError(a.g.ERROR_OTHER,\"updatePublishedStream() - cannot update\",Li))}))}}],i&&_i(t.prototype,i),s}(D);function Vi(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return Fi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Fi(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function Fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function ji(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Bi=p.Y.get(\"ContactCatalog\"),Gi=null,qi={},Hi={leftGroup:{},joinedGroup:{},userDataChanged:[]},Ji=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),null!==Gi)throw\"Cannot construct singleton ContactCatalog\";this.contactList=new Map,this.eventEmitter=new s,Gi=this;var t=B.get();t.onEvent(\"connectedUsersListUpdate\",(function(e){var i=apiRTC.session.apiCCId.toString(),a={};switch(e.detail.updateReason){case\"newConnectionState\":if(\"online\"===e.detail.status){Bi.debug(\"new connection\");var n,r=Vi(e.detail.usersList);try{for(r.s();!(n=r.n()).done;)(a={userId:n.value,group:e.detail.group}).userId.toString()!==i&&Xi(a)}catch(e){r.e(e)}finally{r.f()}}else{Bi.debug(\"new disconnection\");var o,s=Vi(e.detail.usersList);try{for(s.s();!(o=s.n()).done;)a={userId:o.value,group:e.detail.group},void 0===qi[a.group]&&(qi[a.group]={}),a.userId.toString()!==i&&(qi[a.group][a.userId.toString()]=setTimeout(Yi(a),t.contactDisconnectionDelay))}catch(e){s.e(e)}finally{s.f()}}break;case\"userDataUpdate\":Bi.debug(\"userDataUpdate\");var l,d=Vi(e.detail.usersList);try{for(d.s();!(l=d.n()).done;)(a={userId:l.value,group:e.detail.group}).userId.toString()!==i&&Ki(a)}catch(e){d.e(e)}finally{d.f()}break;case\"callState\":Bi.debug(\"callState change for user\");break;default:Bi.warn(\"default case for updateReason value\")}})).onEvent(\"groupUnsubscribed\",(function(e){var t,i=Gi.getContacts(e),a=Vi(i.keys());try{for(a.s();!(t=a.n()).done;){var n=t.value;i.get(n).removeFromGroup(e)}}catch(e){a.e(e)}finally{a.f()}}))}var t,i,a;return t=e,i=[{key:\"onUpdate\",value:function(e){this.eventEmitter.on(\"update\",e)}},{key:\"removeUpdateListener\",value:function(e){this.eventEmitter.off(\"update\",e)}},{key:\"getContact\",value:function(e){return null!=e&&this.contactList.has(e.toString())?this.contactList.get(e.toString()):null}},{key:\"getOrCreateContact\",value:function(e){var t=null;if(null!=e)if(this.contactList.has(e.toString()))t=this.contactList.get(e.toString());else try{t=new Di(e.toString(),{}),this.contactList.set(e.toString(),t)}catch(e){Bi.debug(\"Contact not added : \"+e)}return t}},{key:\"getContacts\",value:function(e){if(null==e)return this.contactList;var t,i=new Map,a=Vi(this.contactList.keys());try{for(a.s();!(t=a.n()).done;){var n=t.value;this.contactList.get(n).inGroup(e)&&i.set(n,this.contactList.get(n))}}catch(e){a.e(e)}finally{a.f()}return i}},{key:\"getOnlineContacts\",value:function(e){var t=new Map;if(null==e){var i,a=Vi(this.contactList.keys());try{for(a.s();!(i=a.n()).done;){var n=i.value;this.contactList.get(n).isOnline()&&t.set(n,this.contactList.get(n))}}catch(e){a.e(e)}finally{a.f()}}else{var r,o=Vi(this.contactList.keys());try{for(o.s();!(r=o.n()).done;){var s=r.value;this.contactList.get(s).inGroup(e)&&this.contactList.get(s).isOnline()&&t.set(s,this.contactList.get(s))}}catch(e){o.e(e)}finally{o.f()}}return t}}],a=[{key:\"get\",value:function(){return null===Gi&&(Gi=new e),Gi}}],i&&ji(t.prototype,i),a&&ji(t,a),e}();function Yi(e){return function(){var t=e.userId.toString();if(Bi.info(\"Contact disconnected \"+t+\" from \"+e.group),Gi.contactList.has(t)){var i=Gi.contactList.get(t);if(void 0===i)return void Bi.debug(\"Contact not exist with userId :\",t);i.removeFromGroup(e.group),function(e,t){Bi.debug(\"updateContactListOnUserDisconnect()\"),void 0===Hi.leftGroup[e]&&(Hi.leftGroup[e]=[]),Hi.leftGroup[e].push(t),zi()}(e.group,i),void 0!==qi[e.group]&&void 0!==qi[e.group][t]&&delete qi[e.group][t]}}}function zi(){0===Object.keys(Hi.leftGroup).length&&0===Object.keys(Hi.joinedGroup).length&&0===Hi.userDataChanged.length||(Gi.eventEmitter.emit(\"update\",Hi),Hi={leftGroup:{},joinedGroup:{},userDataChanged:[]})}function Xi(e){Bi.debug(\"updateContactListOnUserConnection()\");var t=e.userId.toString(),i=null,a=apiRTC.session.getConnectedUserInfo(t,\"userData\");Bi.debug(\"userData :\",a);try{e.userData=JSON.parse(a)}catch(e){Bi.warn(\"userData parse error : \"+e)}if(Gi.contactList.has(t))i=Gi.contactList.get(e.userId),ii.equals(i.userData,e.userData)||(i.userData=new ii(e.userData),Hi.userDataChanged.push(i));else{try{i=new Di(t,e.userData),Gi.contactList.set(t,i)}catch(e){Bi.debug(\"Contact not added : \"+e)}i=Gi.contactList.get(t)}void 0!==i?(void 0!==qi[e.group]&&void 0!==qi[e.group][t]&&(clearTimeout(qi[e.group][t]),delete qi[e.group][t]),i.inGroup(e.group)||(i.addToGroup(e.group),void 0===Hi.joinedGroup[e.group]&&(Hi.joinedGroup[e.group]=[]),Hi.joinedGroup[e.group].push(i)),zi()):Bi.debug(\"Contact not exist with userId :\",t)}function Ki(e){Bi.debug(\"updateContactListOnUserDataUpdate()\");var t=e.userId.toString(),i=Gi.contactList.get(e.userId);if(void 0!==i){var a=apiRTC.session.getConnectedUserInfo(t,\"userData\");Bi.debug(\"userData :\",a);try{e.userData=JSON.parse(a)}catch(e){Bi.warn(\"userData parse error : \"+e)}ii.equals(i.userData,e.userData)||(i.userData=new ii(e.userData),Hi.userDataChanged.push(i)),zi()}else Bi.debug(\"Contact not exist with userId :\",t)}function Qi(e){return Qi=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Qi(e)}function $i(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return Zi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Zi(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function Zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function ea(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ta(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ia(e,t){return ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ia(e,t)}function aa(e,t){if(t&&(\"object\"===Qi(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return na(e)}function na(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function ra(e){return ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ra(e)}var oa=p.Y.get(\"Conversation\"),sa=B.get(),la=new Kt.Z,da=Ji.get(),ca=[\"adaptationTriggered\",\"audioAmplitude\",\"availableStreamsUpdated\",\"bandwidthLimited\",\"callStatsUpdate\",\"compositeListChanged\",\"contactJoined\",\"contactJoinedWaitingRoom\",\"contactLeft\",\"contactLeftWaitingRoom\",\"cpuLimited\",\"customEvent\",\"data\",\"disconnectionWarning\",\"entryAllowed\",\"entryDenied\",\"error\",\"hangup\",\"joined\",\"left\",\"localStreamUpdated\",\"message\",\"messageNotDelivered\",\"moderatorConnected\",\"newMediaAvailable\",\"newWhiteboardSession\",\"participantEjected\",\"persistentDataUpdated\",\"pointerLocationChanged\",\"pointerSharingEnabled\",\"recordingAvailable\",\"recordingStarted\",\"recordingStopped\",\"remoteStreamUpdated\",\"replayListChanged\",\"roomModeChanged\",\"simulcastFeedChanged\",\"slowLink\",\"streamAdded\",\"streamListChanged\",\"streamRemoved\",\"streamingStarted\",\"streamingStopped\",\"transferPending\",\"transferBegun\",\"transferEnded\",\"transferProgress\",\"whiteboardRoomMemberUpdate\",\"videoQualityChanged\",\"waitingForModeratorAcceptance\"],ua=new Set([\"CHAT\",\"CALL\",\"GROUP_CHAT\",\"WEBCONF\",\"REPORT\",\"REPORT_PART\",\"TICKET\",\"EVENT\",\"OTHER\",\"BOT\"]),ha=new Set([\"audioSent\",\"videoSent\",\"audioReceived\",\"videoReceived\",\"quality\"]),pa=new Set([\"CALL_ABORTED\",\"SET_LOCAL_DESCRIPTION_FAILURE\",\"SET_REMOTE_DESCRIPTION_FAILURE\"]),ga=new WeakMap,ma=new WeakMap,Ca=new WeakMap,fa=new WeakMap,va=new WeakMap,ba=new WeakMap,Sa=new WeakMap,ya=new WeakMap,Ia=new WeakMap,Ta=new WeakMap,Ra=new WeakMap,wa=new WeakMap,Ea=new WeakMap,Ma=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ia(e,t)}(d,e);var t,i,n,r,o,l=(r=d,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ra(r);if(o){var i=ra(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return aa(this,e)});function d(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ea(this,d),t=l.call(this,oa),oa.debug(\"Create Conversation\"),null==e?ga.set(na(t),w.g.guid().toString()):ga.set(na(t),e.toString()),ma.set(na(t),\"OTHER\"),t.active=!Object.prototype.hasOwnProperty.call(i,\"active\")||\"boolean\"!=typeof i.active||i.active,t.meshModeEnabled=!0===i.meshModeEnabled,t.meshOnlyEnabled=!0===i.meshOnlyEnabled,t.moderationEnabled=!0===i.moderationEnabled,t.moderator=!0===i.moderator,t.conversationCalls=new Map,t.callIdToStreamId=new Map,t.token=null,t.sessionId=null,t.webconfId=null,t.conversationStreams=new Map,t.conversationPublishedStreams=new Map,t.groupChatStatus=a.g.CONVERSATION_STATUS_NOT_JOINED,t.status=a.g.CONVERSATION_STATUS_NOT_JOINED,t.whiteboardStarted=a.g.CONVERSATION_WHITEBOARD_NOT_STARTED,t.pointerSharingState=a.g.STATE_IDLE,t.pointerSharingAutoInvite=!1,t.pgroupWaitingRoomSubscribedTo=!1,va.set(na(t),null),ba.set(na(t),null),Sa.set(na(t),new Map),fa.set(na(t),null),ya.set(na(t),null),Ca.set(na(t),{}),Ra.set(na(t),new Map),Ea.set(na(t),null),wa.set(na(t),null),t.transferCallIds=[],t.uploadCap=null,t.downloadCap=null,t.reservedStreams=[];var n={contactCatalog:{}};for(var r in n.contactCatalog.onUpdate=function(e){oa.debug(\"onUpdate: contactList\",e);var i=t._getTechnicalName();if(void 0!==e.joinedGroup[i]){var n,r=$i(e.joinedGroup[i]);try{for(r.s();!(n=r.n()).done;){var o=n.value;oa.debug(o.getUsername()+\" joined conversation \"+t.getName()),A.get(na(t)).emit(\"contactJoined\",o),t.pointerSharingState===a.g.STATE_ACTIVE&&!0===t.pointerSharingAutoInvite&&sa.pointerSharingClient.inviteInRoom(i,o.getId())}}catch(e){r.e(e)}finally{r.f()}}else oa.debug(\"not an event joinedGroup for conversation\");if(void 0!==e.leftGroup[i]){var s,l=$i(e.leftGroup[i]);try{for(l.s();!(s=l.n()).done;){var d=s.value;oa.debug(d.getUsername()+\" left conversation \"+t.getName()),A.get(na(t)).emit(\"contactLeft\",d)}}catch(e){l.e(e)}finally{l.f()}}else oa.debug(\"not an event leftGroup for conversation\");if(t.getRole()===a.g.CONVERSATION_ROLE_MODERATOR){var c,u=da.getContacts(a.g.CONVERSATION_WAITING_ROOM_PREFIX+i),h=$i(Ra.get(na(t)).keys());try{for(h.s();!(c=h.n()).done;){var p=c.value;if(!u.has(p)){var g=da.getContact(p);null!==g&&(oa.debug(g.getUsername()+\" left waiting room \"+t.getName()),A.get(na(t)).emit(\"contactLeftWaitingRoom\",g))}}}catch(e){h.e(e)}finally{h.f()}u.forEach((function(e,n){Ra.get(na(t)).has(n)||null===e||(oa.debug(e.getUsername()+\" joined waiting room \"+t.getName()),A.get(na(t)).emit(\"contactJoinedWaitingRoom\",e),sa.sendData(n,{event:a.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:\"conversationModeratorConnected\",roomname:i}).catch((function(i){var n=w.g.createError(i,\"Notification not delivered\",oa);A.get(na(t)).emit(\"messageNotDelivered\",{error:n,contact:e,event:a.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:\"conversationModeratorConnected\"})})))})),Ra.set(na(t),u)}},da.onUpdate(n.contactCatalog.onUpdate),A.get(na(t)).on(\"contactJoined\",(function(e){t.getRole()===a.g.CONVERSATION_ROLE_MODERATOR&&sa.sendData(e.getId(),{event:a.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:\"conversationModeratorConnected\",roomname:t._getTechnicalName()}).catch((function(i){var n=w.g.createError(i,\"Notification not delivered\",oa);A.get(na(t)).emit(\"messageNotDelivered\",{error:n,contact:e,event:a.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER,command:\"conversationModeratorConnected\"})}))})),n.apiRTCManager={},n.apiRTCManager.receiveData=function(e){var i=e.detail.data;if(i.roomname===t._getTechnicalName()){var n=da.getOrCreateContact(e.detail.senderId);if(i.event)switch(i.event){case a.g.CONVERSATION_SEND_DATA_IDENTIFIER:if(t.status!==a.g.CONVERSATION_STATUS_JOINED)break;A.get(na(t)).emit(\"data\",{sender:n,content:i.content});break;case a.g.CONVERSATION_NEW_MEDIA_IDENTIFIER:if(t.status!==a.g.CONVERSATION_STATUS_JOINED)break;oa.info(\"New media available in conversation\",i.media),A.get(na(t)).emit(\"newMediaAvailable\",{sender:n,media:i.media});break;case a.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:if(t.status!==a.g.CONVERSATION_STATUS_JOINED)break;t.updateData();break;case a.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER:A.get(na(t)).emit(\"moderatorConnected\",n);break;case a.g.CONVERSATION_CLOSED_IDENTIFIER:i.instanceId===t.getInstanceId()&&(oa.info(\"Conference \"+t.getName()+\" has been closed...\"),A.get(na(t)).emit(\"closed\"),t.leave());break;case a.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER:if(void 0===i.access||null===i.access){oa.error(\"Conversation join answer has no access data\");break}A.get(na(t)).emit(i.access?\"entryAllowed\":\"entryDenied\");break;default:A.get(na(t)).emit(\"customEvent\",{event:i.event,content:i,sender:n})}else if(\"new_snapshot\"===i.command){if(t.status!==a.g.CONVERSATION_STATUS_JOINED)return;oa.info(\"New media available in conversation\",i.value.snapshot),A.get(na(t)).emit(\"newMediaAvailable\",{sender:n,media:i.value.snapshot})}else oa.debug(\"Unprocessed conversation message\",i)}},n.apiRTCManager.receiveGroupChatMessage=function(e){if((t.status===a.g.CONVERSATION_STATUS_JOINED||t.groupChatStatus===a.g.CONVERSATION_STATUS_JOINED)&&e.detail.groupChatId.toString()===t._getTechnicalName()){var i={sender:da.getOrCreateContact(e.detail.senderId),sender_id:e.detail.senderId,content:e.detail.message,time:new Date};w.g.isTypeof(e.detail,\"metadata\",\"object\")&&(i.metadata=e.detail.metadata),A.get(na(t)).emit(\"message\",i)}},n.apiRTCManager.receiveRoomMessage=function(e){if(\"pointerSharing\"===e.detail.roomType&&t.pointerSharingState===a.g.STATE_ACTIVE&&\"pointerLocation\"===e.detail.message.type&&e.detail.roomId===t._getTechnicalName()){var i={sender:da.getOrCreateContact(e.detail.senderId),source:e.detail.message.source,x:e.detail.message.x,y:e.detail.message.y};w.g.isPropertyTypeof(e.detail.message,\"data\",\"object\")&&(i.data=e.detail.message.data),A.get(na(t)).emit(\"pointerLocationChanged\",i)}},n.apiRTCManager.roomInvitation=function(e){if(oa.info(\"roomInvitation event handler \",e),e.detail.roomId.toString()===t._getTechnicalName())if(oa.info(\"roomInvitation for actual conversation\",e),\"whiteBoard\"===e.detail.roomType){if(t.status===a.g.CONVERSATION_STATUS_JOINED){var i=da.getOrCreateContact(e.detail.senderId);A.get(na(t)).emit(\"newWhiteboardSession\",{sender:i})}}else\"pointerSharing\"===e.detail.roomType&&xa(na(t),!1,!0).then((function(){})).catch((function(e){}))},n.apiRTCManager.onFilePending=function(e){if(t.transferCallIds.includes(e.detail.callId)){var i={id:e.detail.callId,name:e.detail.name,rank:e.detail.rank};A.get(na(t)).emit(\"transferPending\",i)}},n.apiRTCManager.onFileSending=function(e){if(t.transferCallIds.includes(e.detail.callId)){var i={id:e.detail.callId,name:e.detail.name};A.get(na(t)).emit(\"transferBegun\",i)}},n.apiRTCManager.onFileProgress=function(e){if(t.transferCallIds.includes(e.detail.callId)){var i={id:e.detail.callId,name:e.detail.name,size:e.detail.fileSize,remBytes:e.detail.remainingSize,percentage:e.detail.percentage};A.get(na(t)).emit(\"transferProgress\",i)}},n.apiRTCManager.onFileSended=function(e){var i=t.transferCallIds.indexOf(e.detail.callId);if(i>=0){var a={id:e.detail.callId,name:e.detail.name};e.detail.error&&(a.error=e.detail.error),A.get(na(t)).emit(\"transferEnded\",a),t.transferCallIds.splice(i,1)}},n.apiRTCManager)sa.onEvent(r,n.apiRTCManager[r]);Ia.set(na(t),n);var o={MCUAvailableStream:function(e){var i,a=$i(e.detail.streams);try{for(a.s();!(i=a.n()).done;){var n=i.value;if(n.room===t._getTechnicalName()){var r={contact:da.getOrCreateContact(n.attributes.callerId),isRemote:e.detail.isRemoteStream,hasAudio:n.audio,hasVideo:n.video,isAudioMuted:n.audioMuted,isVideoMuted:n.videoMuted,isScreensharing:\"screenSharing\"===n.attributes.callType,isSIP:!0===n.sip,isSimulcast:!0===n.simulcast,streamId:n.id,type:\"regular\",callId:n.attributes.callId,descriptor:n.attributes.descriptor,context:n.context};t.conversationStreams.set(r.streamId,r);var o={listEventType:\"added\"};w.g.assignObject(o,r),A.get(na(t)).emit(\"streamListChanged\",o)}}}catch(e){a.e(e)}finally{a.f()}oa.debug(\"Nb stream into conversation :\"+t.conversationStreams.size);var s,l={},d=$i(t.conversationStreams.keys());try{for(d.s();!(s=d.n()).done;){var c=s.value;l[c]=t.conversationStreams.get(c)}}catch(e){d.e(e)}finally{d.f()}A.get(na(t)).emit(\"availableStreamsUpdated\",l)},MCUAvailableStreamUpdate:function(e){var i,a=$i(e.detail.streams);try{for(a.s();!(i=a.n()).done;){var n=i.value;if(n.room===t._getTechnicalName()){var r=t.conversationStreams.get(n.id);if(r&&\"regular\"===r.type){r.hasAudio=n.audio,r.hasVideo=n.video,r.isAudioMuted=n.audioMuted,r.isVideoMuted=n.videoMuted,r.descriptor=n.attributes.descriptor;var o={listEventType:\"updated\"};w.g.assignObject(o,r),A.get(na(t)).emit(\"streamListChanged\",o),r.descriptor&&Object.prototype.hasOwnProperty.call(r.descriptor,\"priority\")&&t.changeStreamPriority(r.streamId,!0,r.descriptor.priority)}}}}catch(e){a.e(e)}finally{a.f()}oa.debug(\"Nb stream into conversation :\"+t.conversationStreams.size);var s,l={},d=$i(t.conversationStreams.keys());try{for(d.s();!(s=d.n()).done;){var c=s.value;l[c]=t.conversationStreams.get(c)}}catch(e){d.e(e)}finally{d.f()}A.get(na(t)).emit(\"availableStreamsUpdated\",l)},MCUAvailableComposite:function(e){var i,a=$i(e.detail.streams);try{for(a.s();!(i=a.n()).done;){var n=i.value;if(n.room===t._getTechnicalName()){var r={isRemote:e.detail.isRemoteStream,hasAudio:n.audio,hasVideo:n.video,isAudioMuted:n.audioMuted,isVideoMuted:n.videoMuted,isScreensharing:\"screenSharing\"===n.attributes.callType,isSIP:!0===n.sip,streamId:n.id,type:\"composite\",callId:n.attributes.callId,descriptor:n.attributes.descriptor,context:n.context};t.conversationStreams.set(r.streamId,r);var o={listEventType:\"added\"};w.g.assignObject(o,r),A.get(na(t)).emit(\"compositeListChanged\",o)}}}catch(e){a.e(e)}finally{a.f()}},MCUAvailableReplay:function(e){var i,a=$i(e.detail.streams);try{for(a.s();!(i=a.n()).done;){var n=i.value;if(n.room===t._getTechnicalName()){var r={contact:da.getOrCreateContact(n.attributes.callerId),isRemote:e.detail.isRemoteStream,hasAudio:n.audio,hasVideo:n.video,isAudioMuted:n.audioMuted,isVideoMuted:n.videoMuted,isScreensharing:\"screenSharing\"===n.attributes.callType,isSIP:!0===n.sip,streamId:n.id,type:\"replay\",callId:n.attributes.callId,descriptor:n.attributes.descriptor,context:n.context};t.conversationStreams.set(r.streamId,r);var o={listEventType:\"added\"};w.g.assignObject(o,r),A.get(na(t)).emit(\"replayListChanged\",o)}}}catch(e){a.e(e)}finally{a.f()}},MCURemoveStream:function(e){if(t.conversationStreams.has(e.detail.streamId)){var i={listEventType:\"removed\"};w.g.assignObject(i,t.conversationStreams.get(e.detail.streamId)),\"regular\"===i.type?A.get(na(t)).emit(\"streamListChanged\",i):\"composite\"===i.type&&A.get(na(t)).emit(\"compositeListChanged\",i),t.conversationStreams.delete(e.detail.streamId),oa.debug(\"Nb stream into conversation :\"+t.conversationStreams.size);var a,n={},r=$i(t.conversationStreams.keys());try{for(r.s();!(a=r.n()).done;){var o=a.value;n[o]=t.conversationStreams.get(o)}}catch(e){r.e(e)}finally{r.f()}A.get(na(t)).emit(\"availableStreamsUpdated\",n)}else oa.debug(\"Not a conversation's stream\")},remoteStreamAdded:function(e){if(t.callIdToStreamId.has(e.detail.callId)){oa.info(\"remoteStreamAdded\",e.detail);var i=da.getOrCreateContact(e.detail.remoteId),a=t.callIdToStreamId.get(e.detail.callId),n=Sa.get(na(t));n.has(a)&&A.get(na(t)).emit(\"streamRemoved\",n.get(a));var r=\"audio\"===e.detail.callType?\"audio\":\"video\",o=\"screenSharing\"===e.detail.callType,s=new Hn(e.detail.stream,{type:r,contact:i,streamId:a,callId:e.detail.callId,callAudioAvailable:e.detail.audioIsAvailable,callAudioActive:e.detail.audioIsActive,callAudioMuted:e.detail.audioIsMuted,callVideoAvailable:e.detail.videoIsAvailable,callVideoActive:e.detail.videoIsActive,callVideoMuted:e.detail.videoIsMuted,screensharing:o,constructor:!0});s.publishedInConversations.set(t.getName(),e.detail.callId),Sa.get(na(t)).set(a,s),A.get(na(t)).emit(\"streamAdded\",s)}},remoteStreamRemoved:function(e){if(t.callIdToStreamId.has(e.detail.callId)){var i=t.callIdToStreamId.get(e.detail.callId),a=Sa.get(na(t));a.has(i)&&(A.get(na(t)).emit(\"streamRemoved\",a.get(i)),a.delete(i))}},roomMemberUpdate:function(e){oa.info(\"roomMemberUpdate event handler \",e);var i,a=[],n=$i(e.detail.contactList);try{for(n.s();!(i=n.n()).done;){var r=i.value;a.push(da.getOrCreateContact(r.contactId))}}catch(e){n.e(e)}finally{n.f()}\"whiteBoard\"===e.detail.roomType&&(oa.info(\"Received whiteboard room member update\"),A.get(na(t)).emit(\"whiteboardRoomMemberUpdate\",{contacts:a,roomId:e.detail.roomId,status:e.detail.status}))},slowLink:function(e){if(t.callIdToStreamId.has(e.detail.callId)){var i=t.callIdToStreamId.get(e.detail.callId),a={callId:e.detail.callId,streamId:i};e.detail.advice&&(a.advice=e.detail.advice),A.get(na(t)).emit(\"slowLink\",a)}},videoQualityChanged:function(e){if(t.callIdToStreamId.has(e.detail.callId)){var i=t.callIdToStreamId.get(e.detail.callId),a={callId:e.detail.callId,streamId:i,hint:e.detail.hint,profileType:e.detail.profileType};e.detail.bitrate&&(a.bitrate=e.detail.bitrate),e.detail.width&&e.detail.height&&(a.width=e.detail.width,a.height=e.detail.height),e.detail.frameRate&&(a.frameRate=e.detail.frameRate),A.get(na(t)).emit(\"videoQualityChanged\",a)}},simulcastFeedChanged:function(e){if(t.callIdToStreamId.has(e.detail.callId)){var i=t.callIdToStreamId.get(e.detail.callId),a={callId:e.detail.callId,streamId:i,simulcast:e.detail.simulcast};A.get(na(t)).emit(\"simulcastFeedChanged\",a)}},localStreamUpdated:function(e){if(e.detail.onCall&&t.callIdToStreamId.has(e.detail.callId)){var i={callId:e.detail.callId,streamId:e.detail.userMediaStreamId,audio:e.detail.audioIsAvailable&&e.detail.audioIsActive,audioMuted:e.detail.audioIsMuted,audioSilent:e.detail.audioIsSilent,video:e.detail.videoIsAvailable&&e.detail.videoIsActive,videoMuted:e.detail.videoIsMuted,videoSilent:e.detail.videoIsSilent,cause:e.detail.cause};A.get(na(t)).emit(\"localStreamUpdated\",i)}},remoteStreamUpdated:function(e){if(t.callIdToStreamId.has(e.detail.callId)){var i=t.callIdToStreamId.get(e.detail.callId),a={callId:e.detail.callId,streamId:i,audio:e.detail.audioIsAvailable&&e.detail.audioIsActive,audioMuted:e.detail.audioIsMuted,audioSilent:e.detail.audioIsSilent,video:e.detail.videoIsAvailable&&e.detail.videoIsActive,videoMuted:e.detail.videoIsMuted,videoSilent:e.detail.videoIsSilent,cause:e.detail.cause};setTimeout((function(){A.get(na(t)).emit(\"remoteStreamUpdated\",a)}))}},MCURecordingStarted:function(e){if(e.detail.roomName===t._getTechnicalName()){var i=w.g.parseRecordingEvent(\"MCURecordingStarted\",e.detail);if(\"COMPOSITE\"===i.callId)t.recordingStatus=i;else{var a=t.conversationCalls.get(i.callId);a&&(a.recordingStatus=i)}A.get(na(t)).emit(\"recordingStarted\",i)}},MCURecordingStopped:function(e){if(e.detail.roomName===t._getTechnicalName()){var i=w.g.parseRecordingEvent(\"MCURecordingStopped\",e.detail);if(\"COMPOSITE\"===i.callId)delete t.recordingStatus;else{var a=t.conversationCalls.get(i.callId);a&&delete a.recordingStatus}A.get(na(t)).emit(\"recordingStopped\",i)}},MCURecordedStreamsAvailable:function(e){if(e.detail.roomName===t._getTechnicalName()){var i=w.g.parseRecordingEvent(\"MCURecordedStreamsAvailable\",e.detail);A.get(na(t)).emit(\"recordingAvailable\",i)}},MCUStreamingStarted:function(e){if(e.detail.roomName===t._getTechnicalName()){var i=Wa(\"MCUStreamingStarted\",e.detail),a=t.conversationCalls.get(i.callId);a&&(a.streamingStatus=i),A.get(na(t)).emit(\"streamingStarted\",i)}},MCUStreamingStopped:function(e){if(e.detail.roomName===t._getTechnicalName()){var i=Wa(\"MCUStreamingStopped\",e.detail),a=t.conversationCalls.get(i.callId);a&&delete a.streamingStatus,A.get(na(t)).emit(\"streamingStopped\",i)}},onCallStatsUpdate:function(e){if(t.callIdToStreamId.has(e.detail.callId)){var i=t.callIdToStreamId.get(e.detail.callId),a={callId:e.detail.callId,streamId:i,stats:{}};e.detail.userId&&(a.mesh=!0,a.userId=e.detail.userId,a.contact=da.getOrCreateContact(e.detail.userId));for(var n=0,r=Object.keys(e.detail.stats);n<r.length;n++){var o=r[n];ha.has(o)&&(a.stats[o]=e.detail.stats[o])}A.get(na(t)).emit(\"callStatsUpdate\",a)}},cpuLimited:function(e){if(t.callIdToStreamId.has(e.detail.callId)){var i=t.callIdToStreamId.get(e.detail.callId),a={callId:e.detail.callId,streamId:i,encodeUsagePercent:e.detail.encodeUsagePercent};A.get(na(t)).emit(\"cpuLimited\",a)}},bandwidthLimited:function(e){if(t.callIdToStreamId.has(e.detail.callId)){var i=t.callIdToStreamId.get(e.detail.callId),a={callId:e.detail.callId,streamId:i,resolutionChanged:!0};A.get(na(t)).emit(\"bandwidthLimited\",a)}},audioAmplitude:function(e){if(t.callIdToStreamId.has(e.detail.callId)){var i=t.callIdToStreamId.get(e.detail.callId),a={callId:e.detail.callId,streamId:i,amplitude:e.detail.descriptor.amplitude,isSpeaking:e.detail.descriptor.isSpeaking,descriptor:{amplitude:e.detail.descriptor.amplitude,isSpeaking:e.detail.descriptor.isSpeaking}};A.get(na(t)).emit(\"audioAmplitude\",a)}},hangup:function(e){if(t.callIdToStreamId.has(e.detail.callId)){var i=t.callIdToStreamId.get(e.detail.callId),a=Sa.get(na(t));a.has(i)&&(A.get(na(t)).emit(\"streamRemoved\",a.get(i)),a.delete(i)),\"restarted\"!==e.detail.reason&&\"disconnected\"!==e.detail.reason&&\"Broken_by_MCU\"!==e.detail.reason&&\"RTC_Setup_Timeout\"!==e.detail.reason&&(t.conversationCalls.has(e.detail.callId)?Na(na(t),e.detail.callId):(t.callIdToStreamId.delete(e.detail.callId),t.releaseResources(i,{isRemote:!0,triggerAdaptation:!0})),A.get(na(t)).emit(\"hangup\",{from:e.detail.hangupType,reason:e.detail.reason,streamId:i}))}},callRestarting:function(e){if(t.callIdToStreamId.has(e.detail.oldCallId)){var i=t.callIdToStreamId.get(e.detail.oldCallId);t.callIdToStreamId.delete(e.detail.oldCallId),t.callIdToStreamId.set(e.detail.newCallId,i)}},MCUParticipantEjected:function(e){if(t._getTechnicalName()===e.detail.roomId){var i=ya.get(na(t));if(e.detail.clientId===i.getId())t.leave().catch((function(e){oa.error(\"leave\",e)})).then((function(){A.get(na(t)).emit(\"participantEjected\",{self:!0})}));else{var a=da.getOrCreateContact(e.detail.clientId);A.get(na(t)).emit(\"participantEjected\",{self:!1,contact:a})}}},MCURoomModeChanged:function(e){t._getTechnicalName()===e.detail.roomId&&A.get(na(t)).emit(\"roomModeChanged\",{oldMode:e.detail.oldMode,newMode:e.detail.newMode,state:e.detail.state})}};return Ta.set(na(t),o),A.get(na(t)).on(\"left\",(function(){t.pgroupWaitingRoomSubscribedTo&&(sa.apiRTCSession.unsubscribePresenceGroup([a.g.CONVERSATION_WAITING_ROOM_PREFIX+t._getTechnicalName()]),t.pgroupWaitingRoomSubscribedTo=!1),va.set(na(t),null),ba.set(na(t),null),ya.set(na(t),null),Ea.set(na(t),null)})),t}return t=d,i=[{key:\"destroy\",value:function(){$a.get().deleteConversation(this.getName());var e=Ia.get(this);if(e){if(e.apiRTCManager)for(var t in e.apiRTCManager)sa.removeEventListener(t,e.apiRTCManager[t]);e.contactCatalog&&da.removeUpdateListener(e.contactCatalog.onUpdate),Ia.delete(this)}}},{key:\"getStatus\",value:function(){return this.status}},{key:\"getName\",value:function(){return ga.get(this).toString()}},{key:\"_getTechnicalName\",value:function(){return ga.get(this).toString()}},{key:\"getRole\",value:function(){return va.get(this)}},{key:\"getInstanceId\",value:function(){return Ea.get(this)}},{key:\"getFriendlyName\",value:function(){return null}},{key:\"getModerator\",value:function(){return ba.get(this)}},{key:\"getType\",value:function(){return ma.get(this)}},{key:\"setType\",value:function(e){return!this.isBound()&&!!ua.has(e)&&(ma.set(this,e),!0)}},{key:\"getCloudConversationId\",value:function(){var e=fa.get(this);return e?e.toString():null}},{key:\"bind\",value:function(e){var t=this;e||(e={});var i=fa.get(this);return null!==i?Promise.resolve(String(i)):new Promise((function(i,n){Oa(t,e).then((function(e){i(String(e.id))})).catch((function(e){n(w.g.createError(a.g.ERROR_HTTP,\"bind() - cannot bind conversation\",oa,{fromError:e}))}))}))}},{key:\"isBound\",value:function(){return null!==fa.get(this)}},{key:\"isGroupChatJoined\",value:function(){return this.groupChatStatus===a.g.CONVERSATION_STATUS_JOINED}},{key:\"joinGroupChat\",value:function(){var e=this;return new Promise((function(t,i){if(e.groupChatStatus!==a.g.CONVERSATION_STATUS_NOT_JOINED)return i(w.g.createError(a.g.ERROR_WRONG_STATE,\"joinGroupChat() - cannot join group chat\",oa));e.bind().then((function(){return new Promise((function(t,i){if(e.asyncCallbacks)return i(w.g.createError(a.g.ERROR_OTHER,\"joinGroupChat() - busy\",oa));e.asyncCallbacks={},e.asyncCallbacks.timeoutId=setTimeout((function(){return sa.removeEventListener(\"groupChatMemberUpdate\",e.asyncCallbacks.groupChatMemberUpdate),delete e.asyncCallbacks,i(w.g.createError(a.g.ERROR_OTHER,\"joinGroupChat() - timeout\",oa))}),a.g.CONVERSATION_GROUP_CHAT_MEMBER_UPDATE_DELAY),e.asyncCallbacks.groupChatMemberUpdate=function(i){if(i.detail.groupChatId===e._getTechnicalName()&&\"online\"===i.detail.status&&function(e,t){for(var i=e.length;--i>=0;)if(e[i].contactId===t)return!0;return!1}(i.detail.contactList,sa.getClientId()))return e.asyncCallbacks&&(sa.removeEventListener(\"groupChatMemberUpdate\",e.asyncCallbacks.groupChatMemberUpdate),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks),t()},sa.onEvent(\"groupChatMemberUpdate\",e.asyncCallbacks.groupChatMemberUpdate),sa.joinGroupChat(e._getTechnicalName())}))})).then((function(){e.groupChatStatus=a.g.CONVERSATION_STATUS_JOINED,sa.joinAndSubscribeToPresenceGroup(e._getTechnicalName()),t()})).catch((function(e){i(w.g.createError(a.g.ERROR_OTHER,\"joinGroupChat() - cannot join group chat\",oa,{fromError:e}))}))}))}},{key:\"leaveGroupChat\",value:function(){var e=this;return new Promise((function(t,i){return e.groupChatStatus!==a.g.CONVERSATION_STATUS_JOINED?i(w.g.createError(a.g.ERROR_WRONG_STATE,\"leaveGroupChat() - group chat not joined\",oa)):e.status!==a.g.CONVERSATION_STATUS_NOT_JOINED?i(w.g.createError(a.g.ERROR_WRONG_STATE,\"leaveGroupChat() - webconf active\",oa)):void sa.leaveGroupChat(e._getTechnicalName()).then((function(){e.groupChatStatus=a.g.CONVERSATION_STATUS_NOT_JOINED,sa.leaveAndUnsubscribeToPresenceGroup(e._getTechnicalName()),t()})).catch((function(e){i(w.g.createError(a.g.ERROR_OTHER,\"leaveGroupChat() - cannot leave group chat\",oa,{fromError:e}))}))}))}},{key:\"isJoined\",value:function(){return this.status===a.g.CONVERSATION_STATUS_JOINED}},{key:\"isPublishedStream\",value:function(e){return e.publishedInConversations.has(this.getName())}},{key:\"publish\",value:function(e,t){var i=this;return t||(t={}),new Promise((function(n,r){if(i.status!==a.g.CONVERSATION_STATUS_JOINED)return r(w.g.createError(a.g.ERROR_OTHER,\"publish() - conversation not joined\",oa));if(!(e instanceof Hn))return r(w.g.createError(a.g.ERROR_OTHER,\"publish() - No stream specified\",oa));if(i.isPublishedStream(e))return r(w.g.createError(a.g.ERROR_OTHER,\"publish() - Stream is already published in this conversation!\",oa));var o={};o.userMediaStreamId=e.userMediaStreamId,null!==t&&\"object\"===Qi(t)&&(o.audioOnly=t.audioOnly,o.videoOnly=t.videoOnly,o.private=t.private,o.record=t.record,o.turnServerAddress=t.turnServerAddress,o.profileType=t.profileType,o.priority=t.priority,o.downgradeProfileList=t.downgradeProfileList,o.distributedBroadcastEnabled=t.distributedBroadcastEnabled),w.g.isPropertyTypeof(t,\"mediaType\",\"string\")&&(o.mediaType=t.mediaType,o.audioOnly&&(o.mediaType=\"AUDIOONLY\"),o.videoOnly&&(o.mediaType=\"VIDEOONLY\")),w.g.isPropertyTypeof(t,\"qos\",\"object\")&&(o.qos={},w.g.isPropertyTypeof(t.qos,\"videoMinBitrate\",\"number\")&&(o.qos.videoMinBitrate=t.qos.videoMinBitrate),w.g.isPropertyTypeof(t.qos,\"videoMinQuality\",\"string\")&&(o.qos.videoMinQuality=t.qos.videoMinQuality),w.g.isPropertyTypeof(t.qos,\"videoStartBitrate\",\"number\")&&(o.qos.videoStartBitrate=t.qos.videoStartBitrate),w.g.isPropertyTypeof(t.qos,\"videoStartQuality\",\"string\")&&(o.qos.videoStartQuality=t.qos.videoStartQuality),w.g.isPropertyTypeof(t.qos,\"videoForbidInactive\",\"boolean\")&&(o.qos.videoForbidInactive=t.qos.videoForbidInactive)),w.g.isPropertyTypeof(t,\"simulcast\",\"object\")&&!o.audioOnly&&(o.simulcast={},w.g.isPropertyTypeof(t.simulcast,\"mode\",\"string\")&&[\"RID\",\"SDP\"].indexOf(t.simulcast.mode)>=0&&(o.simulcast.mode=t.simulcast.mode),w.g.isPropertyTypeof(t.simulcast,\"maxBitrate\",\"number\")?o.simulcast.maxBitrate=t.simulcast.maxBitrate:w.g.isPropertyTypeof(t.simulcast,\"encodings\",\"object\")&&(o.simulcast.encodings=Object.assign({},t.simulcast.encodings))),[\"audioLabels\",\"videoLabels\"].forEach((function(e){w.g.isTypeof(t,e,\"array\")&&(o[e]=[],t[e].forEach((function(t){w.g.isTypeof(t,\"string\")&&o[e].push(t)})))})),w.g.isPropertyTypeof(t,\"context\",\"object\")&&(o.context=t.context);var s=null;if(e.hasVideo()&&i.getNetworkCap({capacity:!0})&&t.profileType&&t.downgradeProfileList)for(var l=t.downgradeProfileList.length;--l>=0;)if(t.downgradeProfileList[l].name===t.profileType){t.downgradeProfileList[l].bitrate&&(s=t.downgradeProfileList[l].bitrate);break}if(s){if(!i.reserveResources(t.profileType,s,e.userMediaStreamId,!1,t.priority,{isVideoOnly:!e.hasAudio(),isVideoMuted:o.audioOnly,control:!0})&&!i.disableLowerPriorityVideo(!1,s,t.priority)){if(!e.hasAudio())return r(w.g.createError(a.g.ERROR_OTHER,\"publish() - not enough bandwidth\",oa));o.audioOnly=!0}i.reserveResources(t.profileType,s,e.userMediaStreamId,!1,t.priority,{isVideoOnly:!e.hasAudio(),isVideoMuted:o.audioOnly})}oa.info(\"callConfiguration:\",o);var d=e.isScreensharing(),c=sa.webRTCClient.publish(i.sessionId,i.sessionId,i.token,o,{},{forceScreenSharingCallType:d});if(!c)return i.releaseResources(e.userMediaStreamId),r(w.g.createError(a.g.ERROR_OTHER,\"publish() - failed to establish call\",oa));i.conversationCalls.set(c,new Wi(i,c,e)),e.publishedInConversations.set(i.getName(),c),i.callIdToStreamId.set(c,e.userMediaStreamId);var u={contact:null,isRemote:!1,hasAudio:e.hasAudio(),hasVideo:e.hasVideo(),isScreensharing:e.isScreensharing(),streamId:e.userMediaStreamId,callId:c};i.conversationPublishedStreams.set(e.userMediaStreamId,u);var h={callEstablishedHandler:function(t){t.detail.callId.toString()===c.toString()&&(sa.removeEventListener(\"callEstablished\",h.callEstablishedHandler),i.removeListener(\"error\",h.errorHandler),n(e))}};sa.onEvent(\"callEstablished\",h.callEstablishedHandler),h.errorHandler=function(t){t.callId===c&&(sa.removeEventListener(\"callEstablished\",h.callEstablishedHandler),i.removeListener(\"error\",h.errorHandler),i.releaseResources(e.userMediaStreamId),r(w.g.createError(a.g.ERROR_OTHER,\"publish() - \"+t.errorInfo,oa)))},i.on(\"error\",h.errorHandler)}))}},{key:\"unpublish\",value:function(e,t){if(t||(t={}),e instanceof Hn)if(this.isPublishedStream(e)){var i=e.publishedInConversations.get(this.getName()),a=!t.noTriggerAdaptation;Na(this,i,{stream:e,triggerAdaptation:a}),sa.webRTCClient.unpublish(i)}else oa.error(\"unpublish() - Stream is not publishing to conversation\");else oa.error(\"unpublish() - No stream specified\",e)}},{key:\"getConversationCall\",value:function(e){if(!e)return null;var t=e.publishedInConversations.get(this.getName());return t?this.conversationCalls.get(t):null}},{key:\"getCallId\",value:function(e){return e.publishedInConversations.get(this.getName())}},{key:\"checkAccess\",value:function(e){var t=this;return e||(e={}),new Promise((function(i,n){if(!0!==e.force&&t.accessStatus)return i(t.accessStatus);e.hasOwnProperty(\"session\")||null===bn.getActiveSession()||(e.session=bn.getActiveSession()),t.bind(e).then((function(i){return e.convId=i,la.checkConferenceAccess(t._getTechnicalName(),sa.getActiveApiKey(),e)})).then((function(e){return e.access!==a.g.CONVERSATION_ACCESS_GRANTED&&e.access!==a.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION&&oa.warn(\"checkAccess() - unknown access response:\",e.access),e.role!==a.g.CONVERSATION_ROLE_MODERATOR&&e.role!==a.g.CONVERSATION_ROLE_CONTRIBUTOR&&e.role!==a.g.CONVERSATION_ROLE_GUEST&&oa.warn(\"checkAccess() - unknown role response:\",e.role),e.hasOwnProperty(\"webconfId\")&&(t.webconfId=e.webconfId,delete e.webconfId),t.accessStatus=w.g.assignObject({},e),i(t.accessStatus)})).catch((function(e){n(w.g.createError(a.g.ERROR_APIRTC_INITIALISATION_FAILED,\"checkAccess() - cannot check access\",oa,{fromError:e}))}))}))}},{key:\"join\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return oa.debug(\"Joining \"+this.getName()),new Promise((function(i,n){if(e.status!==a.g.CONVERSATION_STATUS_NOT_JOINED)return n(w.g.createError(a.g.ERROR_OTHER,\"join() - cannot join conversation\",oa));t=Object.assign({},t);var r=!1;t.qualityAdaptationEnabled&&(r=!0,delete t.qualityAdaptationEnabled);var o=null;t.supportedVideoCodecs&&(o=t.supportedVideoCodecs,delete t.supportedVideoCodecs),e.checkAccess(t).then((function(t){if(!e.conference){if(\"public\"!==t.type)return Promise.reject(w.g.createError(a.g.ERROR_UNAUTHORIZED,\"join() - wrong conference type\",oa));if(t.access!==a.g.CONVERSATION_ACCESS_GRANTED)return Promise.reject(w.g.createError(a.g.ERROR_UNAUTHORIZED,\"join() - access to conference not granted\",oa))}return ka(e,t)})).then((function(i){if(va.set(e,i.role),e.status=a.g.CONVERSATION_STATUS_JOINING,e.conference)return t.hasOwnProperty(\"password\")&&wa.set(e,t.password),e.friendlyName=i.hasOwnProperty(\"friendlyName\")?i.friendlyName:e.friendlyName,Ea.set(e,i.instanceId),Ua(e,ya.get(e),sa.getActiveApiKey())})).then((function(){var t=e,s=function e(r){if(oa.debug(\"joinMCUSessionAnswer\",t._getTechnicalName(),r.detail),r.detail.roomId.toString()===t._getTechnicalName()){if(r.detail.result&&r.detail.result.failed){oa.error(\"Conversation \"+t.getName()+\" join failed\",r.detail),this.status=a.g.CONVERSATION_STATUS_NOT_JOINED;var o=r.detail.result.reason?r.detail.result.reason:\"join failed\";return n(w.g.createError(a.g.ERROR_UNAUTHORIZED,\"join() - \"+o,oa))}oa.info(\"Conversation \"+t.getName()+\" joined\",r.detail),sa.removeEventListener(\"joinMCUSessionAnswer\",e),t.status=a.g.CONVERSATION_STATUS_JOINED,t.token=r.detail.token,t.sessionId=r.detail.sessionId,t.mode=r.detail.mode,t.conversationStreams=new Map;var s=Ta.get(t);sa.onEvent(\"MCUAvailableStream\",s.MCUAvailableStream).onEvent(\"MCUAvailableStreamUpdate\",s.MCUAvailableStreamUpdate).onEvent(\"MCURemoveStream\",s.MCURemoveStream).onEvent(\"MCUAvailableComposite\",s.MCUAvailableComposite).onEvent(\"MCUAvailableReplay\",s.MCUAvailableReplay).onEvent(\"MCUParticipantEjected\",s.MCUParticipantEjected).onEvent(\"remoteStreamAdded\",s.remoteStreamAdded).onEvent(\"remoteStreamRemoved\",s.remoteStreamRemoved).onEvent(\"roomMemberUpdate\",s.roomMemberUpdate).onEvent(\"slowLink\",s.slowLink).onEvent(\"localStreamUpdated\",s.localStreamUpdated).onEvent(\"remoteStreamUpdated\",s.remoteStreamUpdated).onEvent(\"simulcastFeedChanged\",s.simulcastFeedChanged).onEvent(\"MCURecordingStarted\",s.MCURecordingStarted).onEvent(\"MCURecordingStopped\",s.MCURecordingStopped).onEvent(\"MCURecordedStreamsAvailable\",s.MCURecordedStreamsAvailable).onEvent(\"MCUStreamingStarted\",s.MCUStreamingStarted).onEvent(\"MCUStreamingStopped\",s.MCUStreamingStopped).onEvent(\"MCURoomModeChanged\",s.MCURoomModeChanged).onEvent(\"onCallStatsUpdate\",s.onCallStatsUpdate).onEvent(\"hangup\",s.hangup).onEvent(\"callRestarting\",s.callRestarting).onEvent(\"audioAmplitude\",s.audioAmplitude).onEvent(\"videoQualityChanged\",s.videoQualityChanged).onEvent(\"cpuLimited\",s.cpuLimited).onEvent(\"bandwidthLimited\",s.bandwidthLimited),t.conference&&t.updateData(),t.getRole()===a.g.CONVERSATION_ROLE_MODERATOR&&(sa.apiRTCSession.subscribePresenceGroup([a.g.CONVERSATION_WAITING_ROOM_PREFIX+t._getTechnicalName()]),t.pgroupWaitingRoomSubscribedTo=!0),t.groupChatStatus!==a.g.CONVERSATION_STATUS_NOT_JOINED&&(t.groupChatStatus=a.g.CONVERSATION_STATUS_NOT_JOINED),A.get(t).emit(\"joined\");var l={};\"mesh\"===r.detail.mode&&(l.mode=\"mesh\",!0===r.detail.meshOnly&&(l.meshOnly=!0)),i(l)}};sa.onEvent(\"joinMCUSessionAnswer\",s);var l={};l.convId=e.getCloudConversationId(),e.meshModeEnabled&&(l.meshModeEnabled=e.meshModeEnabled),e.meshOnlyEnabled&&(l.meshOnlyEnabled=e.meshOnlyEnabled),e.conference||(e.moderationEnabled&&(l.moderationEnabled=!0),e.getRole()===a.g.CONVERSATION_ROLE_MODERATOR&&(l.moderator=!0)),r&&(l.qualityAdaptationEnabled=!0),o&&(l.supportedVideoCodecs=o);var d=sa.webRTCClient.joinMCUSession(e._getTechnicalName(),l);if(d instanceof Error)return sa.removeEventListener(\"joinMCUSessionAnswer\",s),t.status=a.g.CONVERSATION_STATUS_NOT_JOINED,n(w.g.createError(a.g.ERROR_OTHER,\"join() - cannot join conversation :\"+d.message,oa))})).catch((function(t){return e.status=a.g.CONVERSATION_STATUS_NOT_JOINED,n(w.g.createError(a.g.ERROR_OTHER,\"join() - cannot join conversation\",oa,{fromError:t}))}))}))}},{key:\"cancelJoin\",value:function(){return null!==this.cancelJoin0&&\"function\"==typeof this.cancelJoin0&&this.cancelJoin0()}},{key:\"eject\",value:function(e,t){var i=this;return new Promise((function(n,r){if(i.status!==a.g.CONVERSATION_STATUS_JOINED)return r(w.g.createError(a.g.ERROR_OTHER,\"eject() - conference not joined\",oa));if(i.getRole()!==a.g.CONVERSATION_ROLE_MODERATOR)return r(w.g.createError(a.g.ERROR_UNAUTHORIZED,\"eject() - only moderator can eject a contact\",oa));var o={};o.timeoutId=setTimeout((function(){return o&&(sa.removeEventListener(\"MCUParticipantEjected\",o.ejected),o=!1),r(w.g.createError(a.g.ERROR_OTHER,\"eject() - timeout\",oa))}),a.g.CONVERSATION_PARTICIPANT_EJECTION_DELAY),o.ejected=function(t){if(t.detail.roomId===i._getTechnicalName()&&t.detail.clientId===e.getId())return o&&(clearTimeout(o.timeoutId),sa.removeEventListener(\"MCUParticipantEjected\",o.ejected),o=!1),n()},sa.onEvent(\"MCUParticipantEjected\",o.ejected),sa.webRTCClient.ejectParticipantFromMCUSession(e.getId(),t)}))}},{key:\"allowEntry\",value:function(e,t){var i=this;return t||(t={}),new Promise((function(n,r){if(i.status!==a.g.CONVERSATION_STATUS_JOINED)return r(w.g.createError(a.g.ERROR_OTHER,\"allowEntry() - conference not joined\",oa));if(!(e instanceof Di))return r(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"allowEntry() - parameter is not an instance of apiRTC.Contact\",oa));if(i.getRole()!==a.g.CONVERSATION_ROLE_MODERATOR)return r(w.g.createError(a.g.ERROR_UNAUTHORIZED,\"allowEntry() - only moderator can allow entry to a contact\",oa));var o={roomname:i._getTechnicalName(),event:a.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,access:!0,command:\"access\",value:{access:!0}};if(t.hasOwnProperty(\"invitationId\")&&(o.invitationId=t.invitationId),t.hasOwnProperty(\"answer\")&&(o.answer=t.answer),sa.sendData(e.getId(),o).catch((function(t){var n=w.g.createError(t,\"Notification not delivered\",oa);A.get(i).emit(\"messageNotDelivered\",{error:n,contact:e,event:a.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:\"access\"})})),!0===t.ackEnabled){var s=setInterval((function(){o.command=\"access-new\",sa.sendData(e.getId(),o).catch((function(t){var n=w.g.createError(t,\"Notification not delivered\",oa);A.get(i).emit(\"messageNotDelivered\",{error:n,contact:e,event:a.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:\"access\"})}))}),a.g.CONVERSATION_JOIN_REQUEST_INTERVAL);sa.onEvent(\"receiveData\",(function t(a){var n=da.getOrCreateContact(a.detail.senderId);a.detail.hasOwnProperty(\"data\")&&\"access-ack\"===a.detail.data.command&&a.detail.data.roomname===i._getTechnicalName()&&n.getId()===e.getId()&&(clearInterval(s),sa.removeEventListener(\"receiveData\",t))}))}return n()}))}},{key:\"denyEntry\",value:function(e,t){var i=this;return t||(t={}),new Promise((function(n,r){if(i.status!==a.g.CONVERSATION_STATUS_JOINED)return r(w.g.createError(a.g.ERROR_OTHER,\"denyEntry() - conference not joined\",oa));if(!(e instanceof Di))return r(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"denyEntry() - parameter is not an instance of apiRTC.Contact\",oa));if(i.getRole()!==a.g.CONVERSATION_ROLE_MODERATOR)return r(w.g.createError(a.g.ERROR_UNAUTHORIZED,\"denyEntry() - only moderator can deny entry to a contact\",oa));var o={roomname:i._getTechnicalName(),event:a.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,access:!1,command:\"access\",value:{access:!1}};return t.hasOwnProperty(\"invitationId\")&&(o.invitationId=t.invitationId),t.hasOwnProperty(\"answer\")&&(o.answer=t.answer),t.hasOwnProperty(\"reason\")&&(o.reason=t.reason),sa.sendData(e.getId(),o).catch((function(t){var n=w.g.createError(t,\"Notification not delivered\",oa);A.get(i).emit(\"messageNotDelivered\",{error:n,contact:e,event:a.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER,command:\"access\"})})),n()}))}},{key:\"sendJoinRequest\",value:function(){var e=this;if(this.status===a.g.CONVERSATION_STATUS_WAITING){if(!this.joinRequestIntervalId){var t=Da(this);t&&(sa.sendData(t,{roomname:this._getTechnicalName(),event:a.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,invitationId:this._getTechnicalName(),sendTime:Date.now(),command:\"userWaiting\",value:{username:Aa()}}).catch((function(t){var i=w.g.createError(t,\"Notification not delivered\",oa);A.get(e).emit(\"messageNotDelivered\",{error:i,contact:e.getModerator(),event:a.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,command:\"userWaiting\"})})),this.joinRequestIntervalId=setInterval((function(){sa.sendData(t,{roomname:e._getTechnicalName(),event:a.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,invitationId:e._getTechnicalName(),sendTime:Date.now(),command:\"userWaiting-new\",value:{username:Aa()}}).catch((function(t){var i=w.g.createError(t,\"Notification not delivered\",oa);A.get(e).emit(\"messageNotDelivered\",{error:i,contact:e.getModerator(),event:a.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER,command:\"userWaiting-new\"})}))}),a.g.CONVERSATION_JOIN_REQUEST_INTERVAL))}}else oa.error(\"sendJoinRequest() - Not in conversation's waiting room, cannot send join request\")}},{key:\"leave\",value:function(){var e=this;return new Promise((function(t,i){if(e.status!==a.g.CONVERSATION_STATUS_JOINED)return i(w.g.createError(a.g.ERROR_WRONG_STATE,\"leave() - webconf not joined\",oa));for(var n=Ta.get(e),r=0,o=Object.keys(n);r<o.length;r++){var s=o[r];oa.info(\"Session, removing apiRTCManager event :\",s);var l=n[s];sa.removeEventListener(s,l)}var d,c=$i(e.conversationStreams.keys());try{for(c.s();!(d=c.n()).done;){var u=d.value;oa.trace(\"Leave() - unsubscribe to \"+u),sa.webRTCClient.unsubscribe(u)}}catch(e){c.e(e)}finally{c.f()}xa(e,!1,!1).then((function(){})).catch((function(e){})),sa.IMClient.leaveGroupChat(e._getTechnicalName()),e.whiteboardStarted===a.g.CONVERSATION_WHITEBOARD_STARTED&&sa.whiteBoardClient.roomId===e._getTechnicalName()&&(sa.whiteBoardClient.leaveRoom(),sa.whiteBoardClient.stop(),e.whiteboardStarted=a.g.CONVERSATION_WHITEBOARD_NOT_STARTED),sa.webRTCClient.leaveMCUSession(),e.conversationStreams=new Map,e.status=a.g.CONVERSATION_STATUS_NOT_JOINED,A.get(e).emit(\"left\"),t()}))}},{key:\"subscribeToStream\",value:function(e,t){var i=this;if(t||(t={}),oa.debug(\"subscribeToMedia\",e),!this.isJoined())return Promise.reject(w.g.createError(a.g.ERROR_OTHER,\"subscribeToMedia() - conversation not joined\",oa));var n={};null!==t.turnServerAddress&&void 0!==t.turnServerAddress&&(n.turnServerAddress=t.turnServerAddress),w.g.isPropertyTypeof(t,\"qos\",\"object\")&&(n.qos={},w.g.isPropertyTypeof(t.qos,\"videoForbidInactive\",\"boolean\")&&(n.qos.videoForbidInactive=t.qos.videoForbidInactive));var r=Number(e),o=sa.webRTCClient.getStreamFromList(r),s=this.conversationStreams.get(r);if(!o||!s)return Promise.reject(w.g.createError(a.g.ERROR_OTHER,\"subscribeToMedia() - no such stream\",oa));if(w.g.isPropertyTypeof(t,\"simulcast\",\"object\")){var l=[\"high\",\"medium\",\"low\"];n.simulcast={},t.simulcast.streamQuality&&(l.indexOf(t.simulcast.streamQuality)>=0?n.simulcast.streamQuality=t.simulcast.streamQuality:n.simulcast.streamQuality=\"default\"),t.simulcast.streamFrameRate&&(l.indexOf(t.simulcast.streamFrameRate)>=0?n.simulcast.streamFrameRate=t.simulcast.streamFrameRate:n.simulcast.streamFrameRate=\"default\")}return new Promise((function(l,d){var c=\"VIDEO\";if(s.hasVideo&&i.getNetworkCap({capacity:!0})&&w.g.isPropertyTypeof(s,\"descriptor\",\"object\")){var u=s.descriptor;if(!i.reserveResources(u.profileType,u.bitrate,r,!0,u.priority,{isVideoOnly:!s.hasAudio,isVideoMuted:t.audioOnly,control:!0})&&!i.disableLowerPriorityVideo(!0,u.bitrate,u.priority)){if(!s.hasAudio)return d(w.g.createError(a.g.ERROR_OTHER,\"subscribeToMedia() - not enough bandwidth\",oa));t.audioOnly=!0}i.reserveResources(u.profileType,u.bitrate,r,!0,u.priority,{isVideoOnly:!s.hasAudio,isVideoMuted:t.audioOnly})}!0===t.audioOnly?c=\"AUDIOONLY\":!0===t.videoOnly&&(c=\"VIDEOONLY\");var h=sa.webRTCClient.subscribe([o],c,{},n,t)[0];if(!h)return i.releaseResources(r),d(w.g.createError(a.g.ERROR_OTHER,\"subscribeToMedia() - stream not available\",oa));i.callIdToStreamId.set(h,r),oa.debug(\"Subscribed to stream \"+e+\" through call \"+h);var p={streamAddedHandler:function(e){e.streamId===r&&(i.removeListener(\"streamAdded\",p.streamAddedHandler),i.removeListener(\"error\",p.errorHandler),l(e))}};i.on(\"streamAdded\",p.streamAddedHandler),p.errorHandler=function(e){e.callId===h&&(i.removeListener(\"streamAdded\",p.streamAddedHandler),i.removeListener(\"error\",p.errorHandler),i.releaseResources(r),d(w.g.createError(a.g.ERROR_OTHER,\"subscribeToMedia() - \"+e.errorInfo,oa)))},i.on(\"error\",p.errorHandler)}))}},{key:\"updateSubscribedStream\",value:function(e,t){t||(t={});var i=Number(e);if(!Sa.get(this).has(i))return oa.error(\"updateSubscribedStream() - Conversation stream \"+e+\" does not exist or was not subscribed to\"),Promise.reject(\"wrong streamId\");var a=Sa.get(this).get(i);if(w.g.isTypeof(t.simulcast,\"object\"))return sa.webRTCClient.webRTCClient.updateSimulcastFeedOnCall(a.callId,t.simulcast);var n=\"VIDEO\";return!0===t.audioOnly?n=\"AUDIOONLY\":!0===t.videoOnly&&(n=\"VIDEOONLY\"),sa.webRTCClient.webRTCClient.updateMediaTypeOnCall(a.callId,n)}},{key:\"unsubscribeToStream\",value:function(e,t){t||(t={});var i=Number(e);sa.webRTCClient.unsubscribe(i);var a=!t.noTriggerAdaptation;this.releaseResources(e,{isRemote:!0,triggerAdaptation:a})}},{key:\"subscribeToMedia\",value:function(e,t){return this.subscribeToStream(e,t)}},{key:\"unsubscribeToMedia\",value:function(e){this.unsubscribeToStream(e)}},{key:\"startRecording\",value:function(e){var t=this;return e||(e={}),new Promise((function(i,n){if(t.status!==a.g.CONVERSATION_STATUS_JOINED)return n(w.g.createError(a.g.ERROR_OTHER,\"startRecording() - conversation not joined\",oa));if(t.asyncCallbacks)return n(w.g.createError(a.g.ERROR_OTHER,\"startRecording() - busy\",oa));t.asyncCallbacks={},t.asyncCallbacks.timeoutId=setTimeout((function(){return t.asyncCallbacks&&(sa.removeEventListener(\"error\",t.asyncCallbacks.error),sa.removeEventListener(\"MCURecordingStarted\",t.asyncCallbacks.recordingStarted),delete t.asyncCallbacks),n(w.g.createError(a.g.ERROR_OTHER,\"startRecording() - timeout\",oa))}),a.g.CONVERSATION_RECORDING_STARTED_DELAY),t.asyncCallbacks.error=function(e){if(String(e.detail.convId)===t.getCloudConversationId()&&\"COMPOSITE\"===e.detail.callId&&e.detail.errorCode.indexOf(\"START_RECORD\")>=0)return t.asyncCallbacks&&(sa.removeEventListener(\"error\",t.asyncCallbacks.error),sa.removeEventListener(\"MCURecordingStarted\",t.asyncCallbacks.recordingStarted),clearTimeout(t.asyncCallbacks.timeoutId),delete t.asyncCallbacks),n(w.g.createError(a.g.ERROR_OTHER,\"startRecording() - \"+e.detail.errorInfo,oa))},t.asyncCallbacks.recordingStarted=function(e){if(String(e.detail.convId)===t.getCloudConversationId()&&\"COMPOSITE\"===e.detail.callId){t.asyncCallbacks&&(sa.removeEventListener(\"error\",t.asyncCallbacks.error),sa.removeEventListener(\"MCURecordingStarted\",t.asyncCallbacks.recordingStarted),clearTimeout(t.asyncCallbacks.timeoutId),delete t.asyncCallbacks);var a=w.g.parseRecordingEvent(\"MCURecordingStarted\",e.detail);return i(a)}},sa.onEvent(\"error\",t.asyncCallbacks.error),sa.onEvent(\"MCURecordingStarted\",t.asyncCallbacks.recordingStarted);var r=\"AUDIO-VIDEO\";!0===e.audioOnly?r=\"AUDIO-ONLY\":!0===e.videoOnly&&(r=\"VIDEO-ONLY\");var o=\"composite\";w.g.isPropertyTypeof(e,\"customIdInFilename\",\"string\")&&(o=e.customIdInFilename);var s={};w.g.isPropertyTypeof(e,\"data\",\"object\")&&(s=w.g.assignObject({},e.data)),[\"complete\",\"efficient\",\"audioOnly\"].indexOf(e.mode)>=0?s.mode=e.mode:s.mode=\"complete\",s.labelEnabled=!0===e.labelEnabled,!0===s.labelEnabled&&(s.labels=[],w.g.isTypeof(e.labels,\"array\")&&e.labels.forEach((function(e){w.g.isTypeof(e,\"string\")&&s.labels.push(e)}))),w.g.isTypeof(e,\"ttl\",\"number\")&&e.ttl>0&&(s.ttl=e.ttl),sa.webRTCClient.startCompositeRecording(r,o,t.getCloudConversationId(),s)}))}},{key:\"stopRecording\",value:function(){var e=this;return new Promise((function(t,i){if(e.asyncCallbacks)return i(w.g.createError(a.g.ERROR_OTHER,\"stopRecording() - busy\",oa));e.asyncCallbacks={},e.asyncCallbacks.timeoutId=setTimeout((function(){return e.asyncCallbacks&&(sa.removeEventListener(\"error\",e.asyncCallbacks.error),sa.removeEventListener(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),delete e.asyncCallbacks),t(e.recordingStatus)}),a.g.CONVERSATION_RECORDING_STOPPED_DELAY),e.asyncCallbacks.error=function(t){if(String(t.detail.convId)===e.getCloudConversationId()&&\"COMPOSITE\"===t.detail.callId&&t.detail.errorCode.indexOf(\"STOP_RECORD\")>=0)return e.asyncCallbacks&&(sa.removeEventListener(\"error\",e.asyncCallbacks.error),sa.removeEventListener(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks),i(w.g.createError(a.g.ERROR_OTHER,\"stopRecording() - \"+t.detail.errorInfo,oa))},e.asyncCallbacks.recordingStopped=function(i){if(String(i.detail.convId)===e.getCloudConversationId()&&\"COMPOSITE\"===i.detail.callId){e.asyncCallbacks&&(sa.removeEventListener(\"error\",e.asyncCallbacks.error),sa.removeEventListener(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),clearTimeout(e.asyncCallbacks.timeoutId),delete e.asyncCallbacks);var a=w.g.parseRecordingEvent(\"MCURecordingStopped\",i.detail);return t(a)}},sa.onEvent(\"error\",e.asyncCallbacks.error),sa.onEvent(\"MCURecordingStopped\",e.asyncCallbacks.recordingStopped),sa.webRTCClient.stopCompositeRecording()}))}},{key:\"getContacts\",value:function(){oa.debug(\"getContacts()\");var e={};if(this.isBound()){var t,i=Ji.get().getContacts(this._getTechnicalName()),a=$i(i.keys());try{for(a.s();!(t=a.n()).done;){var n=t.value;e[n]=i.get(n)}}catch(e){a.e(e)}finally{a.f()}}else oa.warn(\"getContacts() - Cannot get contacts as conversation is not joined\");return e}},{key:\"getContactsNumber\",value:function(){oa.debug(\"getContactsNumber()\");var e=0;return this.isBound()?e=Ji.get().getContacts(this._getTechnicalName()).size:oa.warn(\"getContactsNumber() - Cannot get contacts as conversation is not joined\"),e}},{key:\"getData\",value:function(){return oa.debug(\"getData()\"),this.isBound()||oa.warn(\"getData() - Cannot get most recent data as conversation is not joined, you may want to call Conversation.updateData() instead\"),Ca.get(this)}},{key:\"setData\",value:function(e){var t=this;return new Promise((function(i,n){t.bind().then((function(){return la.setConversationData(fa.get(t),JSON.stringify(e),sa.getActiveApiKey(),{token:ya.get(t).token})})).then((function(){Ca.set(t,e),sa.dataClient.sendDataToGroup(t._getTechnicalName(),{event:a.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER,roomname:t._getTechnicalName()}),i()})).catch((function(){n(w.g.createError(a.g.ERROR_OTHER,\"setData() - cannot set conversation data\",oa))}))}))}},{key:\"updateData\",value:function(){var e=this;return new Promise((function(t,i){(e.isBound()?Oa(e):e.bind()).then((function(){t(),A.get(e).emit(\"persistentDataUpdated\",Ca.get(e))})).catch((function(e){i(w.g.createError(a.g.ERROR_OTHER,\"updateData() - cannot update conversation data\",oa,{fromError:e}))}))}))}},{key:\"getAvailableMediaList\",value:function(){return oa.warn(\"Function deprecated, please use Conversation.getAvailableStreamList() instead\"),this.getAvailableStreamList()}},{key:\"getAvailableStreamList\",value:function(){var e,t=[],i=$i(this.conversationStreams.keys());try{for(i.s();!(e=i.n()).done;){var a=e.value;t.push(this.conversationStreams.get(a))}}catch(e){i.e(e)}finally{i.f()}return t}},{key:\"getStreamInfo\",value:function(e){return this.conversationStreams.get(e)}},{key:\"getSubscribedStream\",value:function(e){return Sa.get(this).get(Number(e))}},{key:\"linkWhiteboardClientToConversation\",value:function(){oa.warn(\"DEPRECATED : linkWhiteboardClientToConversation : no more needed\")}},{key:\"startNewWhiteboardSession\",value:function(e,t){var i=this;return oa.debug(\"startNewWhiteboardSession()\"),new Promise((function(n,r){i.bind().then((function(){if(i.asyncCallbacks)return r(w.g.createError(a.g.ERROR_OTHER,\"startNewWhiteboardSession() - busy\",oa));if(i.whiteboardStarted!==a.g.CONVERSATION_WHITEBOARD_NOT_STARTED)return n();sa.whiteBoardClient.start(),i.asyncCallbacks={},i.asyncCallbacks.ackHandler=function(r){var o=r.detail;o.roomId===i._getTechnicalName()&&\"whiteBoard\"===o.roomType&&(\"roomCreation\"===o.eventType&&\"roomCreated\"===o.status||\"roomJoined\"===o.eventType&&\"roomJoined\"===o.status)&&(i.asyncCallbacks&&(sa.removeEventListener(\"roomCreation\",i.asyncCallbacks.ackHandler),sa.removeEventListener(\"roomJoined\",i.asyncCallbacks.ackHandler),clearTimeout(i.asyncCallbacks.timeoutId),delete i.asyncCallbacks),sa.whiteBoardClient.setCanvas(e),null!=t&&sa.whiteBoardClient.setUserCursorColor(t),sa.whiteBoardClient.deleteHistory(),i.whiteboardStarted=a.g.CONVERSATION_WHITEBOARD_STARTED,n())},sa.onEvent(\"roomCreation\",i.asyncCallbacks.ackHandler),sa.onEvent(\"roomJoined\",i.asyncCallbacks.ackHandler),i.asyncCallbacks.timeoutId=setTimeout((function(){return i.asyncCallbacks&&(sa.removeEventListener(\"roomCreation\",i.asyncCallbacks.ackHandler),sa.removeEventListener(\"roomJoined\",i.asyncCallbacks.ackHandler),delete i.asyncCallbacks),r(w.g.createError(a.g.ERROR_OTHER,\"startNewWhiteboardSession() - timeout\",oa))}),a.g.CONVERSATION_WHITEBOARD_START_DELAY);var o=i.getCloudConversationId();sa.whiteBoardClient.joinRoom(i._getTechnicalName(),{convId:o,webconf:!0})})).catch((function(e){r(w.g.createError(a.g.ERROR_OTHER,\"startNewWhiteboardSession() - cannot start whiteboard session\",oa,{fromError:e}))}))}))}},{key:\"stopNewWhiteboardSession\",value:function(){var e=this;return oa.debug(\"stopNewWhiteboardSession()\"),new Promise((function(t,i){e.bind().then((function(){return e.whiteboardStarted!==a.g.CONVERSATION_WHITEBOARD_STARTED?(oa.error(\"Conversation is not joined!\"),i(w.g.createError(a.g.ERROR_WRONG_STATE,\"stopWhiteBoard() - Conversation not joined\",oa))):sa.whiteBoardClient.roomId!==e._getTechnicalName()?(oa.error(\"Whiteboard session is not joined for this conversation!\"),i(w.g.createError(a.g.ERROR_WRONG_STATE,\"stopWhiteBoard() - whiteboard not joined\",oa))):(sa.whiteBoardClient.leaveRoom(),sa.whiteBoardClient.stop(),e.whiteboardStarted=a.g.CONVERSATION_WHITEBOARD_NOT_STARTED,void t())})).catch((function(e){i(w.g.createError(a.g.ERROR_OTHER,\"stopNewWhiteboardSession() - cannot stop whiteboard session\",oa,{fromError:e}))}))}))}},{key:\"enablePointerSharing\",value:function(e){return xa(this,!0,e)}},{key:\"sendPointerLocation\",value:function(e,t,i,a){sa.pointerSharingClient.sendPointerLocation(this._getTechnicalName(),e,t,i,a)}},{key:\"sendData\",value:function(e){var t=this;return new Promise((function(i,n){t.bind().then((function(){sa.dataClient.sendDataToGroup(t._getTechnicalName(),{event:a.g.CONVERSATION_SEND_DATA_IDENTIFIER,content:e,roomname:t._getTechnicalName()}),i()})).catch((function(e){n(w.g.createError(a.g.ERROR_OTHER,\"sendData() - cannot send data\",oa))}))}))}},{key:\"sendRawData\",value:function(e){var t=this;return new Promise((function(i,n){t.bind().then((function(){sa.dataClient.sendDataToGroup(t._getTechnicalName(),e),i()})).catch((function(e){n(w.g.createError(a.g.ERROR_OTHER,\"sendRawData() - cannot send data\",oa))}))}))}},{key:\"sendCustomEvent\",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){t.bind().then((function(){var a=i;a.event=e,a.roomname=t._getTechnicalName(),sa.dataClient.sendDataToGroup(t._getTechnicalName(),a),n()})).catch((function(e){r(w.g.createError(a.g.ERROR_OTHER,\"sendCustomEvent() - cannot send data\",oa))}))}))}},{key:\"sendMessage\",value:function(e,t){var i=this;return t||(t={}),new Promise((function(n,r){return i.groupChatStatus!==a.g.CONVERSATION_STATUS_JOINED&&i.status!==a.g.CONVERSATION_STATUS_JOINED?r(w.g.createError(a.g.ERROR_WRONG_STATE,\"sendMessage() - group chat not joined\",oa)):null===e||\"string\"!=typeof e?r(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"sendMessage() - wrong type of message\",oa)):void i.bind().then((function(){var a={};return w.g.isTypeof(t,\"metadata\",\"object\")&&(a.metadata=t.metadata),sa.sendMessageToGroupChat(i._getTechnicalName(),e,a)})).then((function(a){return function(a){return new Promise((function(n,r){var o=ya.get(i);null!==o?la.saveGroupChatMessage(i,o,sa.getActiveApiKey(),e,a,t).then((function(){n(a)})).catch(r):n(a)}))}(a)})).then(n).catch((function(e){r(w.g.createError(a.g.ERROR_OTHER,\"sendMessage() - cannot send message\",oa,{fromError:e}))}))}))}},{key:\"pushMedia\",value:function(e,t){var i=this;return t||(t={}),new Promise((function(n,r){i.bind().then((function(){return t.hasOwnProperty(\"token\")||(t.token=ya.get(i).token),la.pushConversationMedia(fa.get(i),e,sa.getActiveApiKey(),t)})).then((function(e){sa.dataClient.sendDataToGroup(i._getTechnicalName(),{event:a.g.CONVERSATION_NEW_MEDIA_IDENTIFIER,roomname:i._getTechnicalName(),media:{url:e.url,id:e.id},command:\"new_snapshot\",value:{snapshot:e.url}}),n({url:e.url,id:e.id})})).catch((function(e){r(w.g.createError(a.g.ERROR_OTHER,\"pushMedia() - cannot push media\",oa,{fromError:e}))}))}))}},{key:\"pushData\",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i=w.g.assignObject({},i),new Promise((function(n,r){if(!0!==sa.webRTCClient.webRTCClient.dataChannelCapable||!0===i.forceHTTP){if(!e.file)return r(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"pushData() - missing file\",oa));var o={};if(w.g.isTypeof(e,\"metadata\",\"object\"))try{o.metadata=JSON.stringify(e.metadata)}catch(e){oa.error(\"JSON.stringify\",e)}o.asFile=!0,w.g.isTypeof(e,\"filename\",\"string\")?o.filename=e.filename:o.filename=e.file.name,!0===e.overwrite&&(o.overwrite=!0),w.g.isTypeof(e,\"ttl\",\"number\")&&e.ttl>0&&(o.ttl=e.ttl),t.pushMedia(e.file,o).then(n).catch(r)}else t.bind().then((function(){var o=t._getTechnicalName(),s={};i.hasOwnProperty(\"turnServerAddress\")&&(s.turnServerAddress=i.turnServerAddress,delete i.turnServerAddress);var l=sa.webRTCClient.webRTCClient.pushData(t.getCloudConversationId(),e,s,{success:function(e){if(\"complete\"!==e.state)return r(w.g.createError(a.g.ERROR_OTHER,\"pushData() - cannot push data\",oa));sa.dataClient.sendDataToGroup(o,{event:a.g.CONVERSATION_NEW_MEDIA_IDENTIFIER,roomname:o,media:{url:e.mediaURL,id:e.mediaId},command:\"new_snapshot\",value:{snapshot:e.mediaURL}}),n({url:e.mediaURL,id:e.mediaId})},failure:function(o,s){if(\"iceFailed\"===o){var l=w.g.assignObject({},i);return l.forceHTTP=!0,void t.pushData(e,l).then(n).catch(r)}if(\"timeout\"===o){if(s){var d=t.transferCallIds.indexOf(s);d>=0&&t.transferCallIds.splice(d,1)}return r(w.g.createError(a.g.ERROR_TIMED_OUT,\"pushData() - push data timed out\",oa))}return r(\"canceled\"===o?w.g.createError(a.g.ERROR_OPERATION_CANCELED,\"pushData() - push data canceled\",oa):w.g.createError(a.g.ERROR_OTHER,\"pushData() - cannot push data\",oa,{fromError:o}))}});if(!l)return r(w.g.createError(a.g.ERROR_OTHER,\"pushData() - cannot push data\",oa));t.transferCallIds.push(l)})).catch((function(e){return r(w.g.createError(a.g.ERROR_OTHER,\"pushData() - cannot push data\",oa,{fromError:e}))}))}))}},{key:\"cancelPushData\",value:function(e){var t=this;return new Promise((function(i,n){if(!t.transferCallIds.includes(e))return n(w.g.createError(a.g.ERROR_OTHER,\"cancelPushData() - no such push data\",oa));var r=sa.webRTCClient.webRTCClient.cancelPushData(e);if(r)return n(w.g.createError(a.g.ERROR_OTHER,\"cancelPushData() - \"+r,oa));i()}))}},{key:\"fetchMediaList\",value:function(e,t){var i=this;return t||(t={}),new Promise((function(n,r){i.bind().then((function(){return Object.prototype.hasOwnProperty.call(t,\"token\")||(w.g.isTypeof(e,\"object\")&&e instanceof bn?t.token=e.getToken():t.token=ya.get(i).token),la.getConversationMediaList(fa.get(i),sa.getActiveApiKey(),t)})).then(n).catch((function(e){r(w.g.createError(a.g.ERROR_OTHER,\"fetchMediaList() - cannot fetch media list\",oa,{fromError:e}))}))}))}},{key:\"getWaitingRoomContacts\",value:function(){oa.debug(\"getWaitingRoomContacts()\");var e={};if(this.status!==a.g.CONVERSATION_STATUS_JOINED)oa.error(\"getWaitingRoomContacts() - Conversation is not joined, cannot get waiting room contacts\");else if(this.getRole()!==a.g.CONVERSATION_ROLE_MODERATOR)oa.error(\"getWaitingRoomContacts() - Role is not moderator, cannot get waiting room contacts\");else{var t,i=Ji.get().getContacts(a.g.CONVERSATION_WAITING_ROOM_PREFIX+this._getTechnicalName()),n=$i(i.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r]=i.get(r)}}catch(e){n.e(e)}finally{n.f()}}return e}},{key:\"fetchMessageHistory\",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,r){t.bind().then((function(){return Object.prototype.hasOwnProperty.call(i,\"token\")?la.loadGroupChatMessages(t,null,i.token):(w.g.isTypeof(e,\"object\")&&e instanceof bn||(e=ya.get(t)),la.loadGroupChatMessages(t,e))})).then((function(t){var i=t.map((function(t){var i={content:t.content,timestamp:1e3*t.created_at,date:new Date(1e3*t.created_at),sender_id:t.user_id,display_name:t.display_name};return t.user_id.toString()!==e.getId()&&(i.sender=e.getOrCreateContact(t.user_id)),i}));n(i)})).catch((function(e){r(w.g.createError(a.g.ERROR_OTHER,\"fetchMessageHistory() - cannot fetch message history\",oa))}))}))}},{key:\"sendInvitation\",value:function(e,t){var i=this;if(t||(t={}),e instanceof Di){oa.info(\"Invite \"+e.getId()+\" to \"+this._getTechnicalName()),e.isOnline()||oa.warn(\"sendInvitation() - contact \"+e.getUsername()+\" does not seem to be connected.\");var n={receiveNotifier:new s};t.hasOwnProperty(\"expirationTime\")&&(n.expirationTime=t.expirationTime);var r=new hi(e,this,n);r.type=\"conversation\";var o={event:a.g.CONVERSATION_INVITATION_IDENTIFIER,invitationId:r.id,roomname:this._getTechnicalName(),sendTime:r.sendTime,conversationTypes:[]};return this.status===a.g.CONVERSATION_STATUS_JOINED?o.conversationTypes.push(\"WEBCONF\"):this.groupChatStatus===a.g.CONVERSATION_STATUS_JOINED&&o.conversationTypes.push(\"GROUP_CHAT\"),sa.sendData(e.getId(),o).then((function(){n.receiveNotifier.emit(\"receive\")})).catch((function(t){var n=w.g.createError(t,\"Invitation not delivered\",oa);A.get(i).emit(\"messageNotDelivered\",{error:n,contact:e,event:a.g.CONVERSATION_INVITATION_IDENTIFIER})})),r}return oa.error(\"Parameter is not a contact\"),null}},{key:\"isRecorded\",value:function(){return!!this.recordingStatus}},{key:\"getRecordingInfo\",value:function(){return this.isRecorded()?this.recordingStatus:null}},{key:\"setNetworkCap\",value:function(e,t){return\"number\"!=typeof e||\"number\"!=typeof t?(oa.error(\"setNetworkCap - wrong cap\",e,t),!1):e<=0||t<=0?(this.uploadCap=null,this.downloadCap=null,!0):(this.uploadCap=e,this.downloadCap=t,!0)}},{key:\"getNetworkCap\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.uploadCap||!this.downloadCap)return null;if(e.capacity)return[this.uploadCap,this.downloadCap];for(var t=this.uploadCap,i=this.downloadCap,a=this.reservedStreams.length;--a>=0;)this.reservedStreams[a].isVideoMuted||(this.reservedStreams[a].isRemote?i-=this.reservedStreams[a].resource:t-=this.reservedStreams[a].resource);return[t,i]}},{key:\"getStreamResourceReservation\",value:function(e){for(var t=this.reservedStreams.length;--t>=0;)if(this.reservedStreams[t].streamId===e)return this.reservedStreams[t];return null}},{key:\"reserveResources\",value:function(e,t,i,a,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(oa.debug(\"reserveResources\",i),this.getStreamResourceReservation(i))throw new Error(\"reserveResources - already reserved stream\");var o=!1,s={streamId:i,profileType:e,priority:n,resource:t,isRemote:a};if(s.isVideoOnly=!!r.isVideoOnly,r.isVideoMuted)s.isVideoMuted=!0,o=!0;else{s.isVideoMuted=!1;var l=this.getNetworkCap();o=a?l[1]>=s.resource:l[0]>=s.resource}if(r.control)return o;if(!o)throw new Error(\"reserveResources - no such bandwidth availability\");return this.reservedStreams.push(s),this.reservedStreams.sort((function(e,t){return e.priority>t.priority?-1:e.priority===t.priority?0:1})),oa.debug(\"reservedStreams\",this.reservedStreams),!0}},{key:\"releaseResources\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.getNetworkCap({capacity:!0}))return!1;oa.debug(\"releaseResources\",e);for(var i=!1,a=this.reservedStreams.length;--a>=0;)if(this.reservedStreams[a].streamId===e){this.reservedStreams.splice(a,1),i=!0;break}return oa.debug(\"reservedStreams\",this.reservedStreams),i&&t.triggerAdaptation&&this.enableHigherPriorityVideo(!!t.isRemote),i}},{key:\"changeStreamPriority\",value:function(e,t,i){oa.debug(\"changeStreamPriority\",e,t,i);for(var a=null,n=this.reservedStreams.length;--n>=0;)if(this.reservedStreams[n].isRemote===t&&this.reservedStreams[n].streamId===e){a=this.reservedStreams[n];break}return!(!a||a.priority===i||(a.priority=i,this.reservedStreams.sort((function(e,t){return e.priority>t.priority?-1:e.priority===t.priority?0:1})),oa.debug(\"reservedStreams\",this.reservedStreams),a.isVideoMuted?this.disableLowerPriorityVideo(a.isRemote,a.resource,a.priority)&&La(this,a):this.enableHigherPriorityVideo(a.isRemote,{resource:a.resource,priority:a.priority,control:!0})&&(Pa(this,a),this.enableHigherPriorityVideo(a.isRemote)),0))}},{key:\"disableLowerPriorityVideo\",value:function(e,t,i){oa.debug(\"disableLowerPriorityVideo\",e,t,i);for(var a=[],n=0,r=this.reservedStreams.length;--r>=0&&(this.reservedStreams[r].isRemote!==e||this.reservedStreams[r].isVideoMuted||this.reservedStreams[r].priority>=i||(a.push(this.reservedStreams[r]),!((n+=this.reservedStreams[r].resource)>=t))););if(0===a.length||n<t)return!1;for(var o=a.length;--o>=0;)Pa(this,a[o]);return!0}},{key:\"enableHigherPriorityVideo\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};oa.debug(\"enableHigherPriorityVideo\",e);var i=this.getNetworkCap(),a=e?i[1]:i[0];t.resource&&t.resource>0&&(a+=t.resource);for(var n=[],r=0;r<this.reservedStreams.length;r+=1)this.reservedStreams[r].isRemote===e&&this.reservedStreams[r].isVideoMuted&&(Object.prototype.hasOwnProperty.call(t,\"priority\")&&this.reservedStreams[r].priority<=t.priority||this.reservedStreams[r].resource<=a&&(a-=this.reservedStreams[r].resource,n.push(this.reservedStreams[r])));if(0===n.length)return!1;if(t.control)return!0;for(var o=n.length;--o>=0;)La(this,n[o]);return!0}},{key:\"startComposite\",value:function(){var e=this;return new Promise((function(t,i){if(e.status!==a.g.CONVERSATION_STATUS_JOINED)return i(w.g.createError(a.g.ERROR_OTHER,\"startComposite() - conversation not joined\",oa));sa.webRTCClient.startComposite(e._getTechnicalName()),t()}))}},{key:\"stopComposite\",value:function(){var e=this;return new Promise((function(t,i){if(e.status!==a.g.CONVERSATION_STATUS_JOINED)return i(w.g.createError(a.g.ERROR_OTHER,\"stopComposite() - conversation not joined\",oa));sa.webRTCClient.stopComposite(e._getTechnicalName()),t()}))}},{key:\"manageDisconnectionWarningEvent\",value:function(e){oa.debug(\"manageDisconnectionWarningEvent\",e.detail);var t={};if(this.callIdToStreamId.has(e.detail.callId)){oa.debug(\"call is linked with conversation\");var i=this.callIdToStreamId.get(e.detail.callId);t=\"publish\"===e.detail.settingUpType||\"shareScreen\"===e.detail.settingUpType?this.conversationPublishedStreams.get(i):this.conversationStreams.get(i),A.get(this).emit(\"disconnectionWarning\",{streamInfo:t})}else oa.debug(\"call is not linked with conversation\")}},{key:\"manageErrorEvent\",value:function(e){if(oa.debug(\"manageErrorEvent\",e.detail),\"DISTANT_ICE_CONNECTION_STATE_DISCONNECTED\"===e.detail.errorCode||\"DISTANT_ICE_CONNECTION_STATE_FAILED\"===e.detail.errorCode)A.get(this).emit(\"error\",{errorCode:e.detail.errorCode,errorInfo:e.detail.errorInfo,descriptor:e.detail.data});else if(this.callIdToStreamId.has(e.detail.callId)){oa.debug(\"call is linked with conversation\");var t=this.callIdToStreamId.get(e.detail.callId),i={streamInfo:\"publish\"===e.detail.settingUpType?this.conversationPublishedStreams.get(t):this.conversationStreams.get(t),errorCode:e.detail.errorCode,errorInfo:e.detail.errorInfo,callId:e.detail.callId,streamId:t};if(e.detail.data&&(i.descriptor=e.detail.data),A.get(this).emit(\"error\",i),pa.has(e.detail.errorCode)){var a=this.conversationCalls.get(e.detail.callId);a?this.unpublish(a.stream):(this.unsubscribeToStream(t),\"CALL_ABORTED\"===e.detail.errorCode&&this.callIdToStreamId.delete(e.detail.callId))}}else oa.debug(\"call is not linked with conversation\")}}],n=[{key:\"getAvailableEvents\",value:function(){return ca}}],i&&ta(t.prototype,i),n&&ta(t,n),d}(D),Aa=function(){var e=\"guest\";if(apiRTC.userAgentInstance){var t=apiRTC.userAgentInstance.getUsername();t&&(e=t)}return e},Oa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(i,n){var r=null;if(w.g.isPropertyTypeof(t,\"session\",\"object\")&&t.session instanceof bn)r=t.session;else{if(null===bn.getActiveSession())return n(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"getOrCreateConversation() - missing session\",oa));r=bn.getActiveSession()}var o={};o.token=r.getToken(),o.active=e.active,la.getOrCreateConversation(e,sa.getActiveApiKey(),o).then((function(t){w.g.isTypeof(t,\"public_id\",\"string\")&&(t.id=t.public_id,delete t.public_id),fa.set(e,t.id),Ca.set(e,t.data),w.g.isTypeof(t.typeString,\"string\")&&ua.has(t.typeString)&&ma.set(e,t.typeString),ya.set(e,r),i(t)})).catch((function(t){fa.set(e,null),Ca.set(e,null),ma.set(e,null),n(w.g.createError(a.g.ERROR_HTTP,\"getOrCreateConversation() - cannot get/create conversation\",oa,{fromError:t}))}))}))},Da=function(e){var t=e.getModerator();return t?t.getId():!e.conference&&e.moderationEnabled?\"#\":null},ka=function(e,t){return new Promise((function(i,n){if(e.conference){if(t.access===a.g.CONVERSATION_ACCESS_GRANTED)return i(t);if(t.access!==a.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION)return n(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"You were not allowed to join the conference\"));var r=da.getOrCreateContact(t.moderator);ba.set(e,r),_a(e).then((function(){i(t)})).catch(n)}else{if(!e.moderationEnabled)return i(Object.assign(t,{access:a.g.CONVERSATION_ACCESS_GRANTED,role:a.g.CONVERSATION_ROLE_GUEST}));if(e.moderator)return i(Object.assign(t,{access:a.g.CONVERSATION_ACCESS_GRANTED,role:a.g.CONVERSATION_ROLE_MODERATOR}));_a(e).then((function(){i(Object.assign(t,{access:a.g.CONVERSATION_NEED_MODERATOR_ACCEPTATION,role:a.g.CONVERSATION_ROLE_GUEST}))})).catch(n)}}))},_a=function(e){return new Promise((function(t,i){var n=e.getModerator();e.status=a.g.CONVERSATION_STATUS_WAITING;var r=!1,o=setTimeout((function(){sa.apiRTCSession.joinPresenceGroup([a.g.CONVERSATION_WAITING_ROOM_PREFIX+e._getTechnicalName()]),r=!0}),a.g.JOIN_WAITING_ROOM_PRESENCE_GROUP_TIMEOUT);n&&A.get(e).emit(\"waitingForModeratorAcceptance\",n);var s=new hi(n,e);s.id=e._getTechnicalName(),s.type=e.conference?\"conference\":\"conversation\",e.sendJoinRequest();var l=function s(l){oa.debug(\"dataMessage (waitingRoom)\",l.detail);var d=l.detail.data;if(d.roomname===e._getTechnicalName()){var c=l.detail.senderId.toString();\"access\"===d.command||\"access-new\"===d.command||d.event===a.g.CONVERSATION_JOIN_ANSWER_IDENTIFIER?(delete e.cancelJoin0,e.joinRequestIntervalId&&(clearInterval(e.joinRequestIntervalId),delete e.joinRequestIntervalId),sa.removeEventListener(\"receiveData\",s),!0===r?sa.apiRTCSession.leavePresenceGroup([a.g.CONVERSATION_WAITING_ROOM_PREFIX+e._getTechnicalName()]):o&&clearTimeout(o),d.value.hasOwnProperty(\"access\")&&d.value.access||d.access?(sa.sendData(c,{roomname:e._getTechnicalName(),command:\"access-ack\"}).catch((function(t){var i=w.g.createError(t,\"Notification not delivered\",oa);A.get(e).emit(\"messageNotDelivered\",{error:i,contact:n,command:\"access-ack\"})})),t()):(e.status=a.g.CONVERSATION_STATUS_NOT_JOINED,i(w.g.createError(a.g.ERROR_NOT_ALLOWED,\"You were not allowed to join the conversation\",oa)))):d.event===a.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER&&d.roomname===e._getTechnicalName()&&A.get(e).emit(\"moderatorConnected\",da.getOrCreateContact(c))}};sa.onEvent(\"receiveData\",l),s.onResponse((function(n){sa.removeEventListener(\"receiveData\",l),!0===r?sa.apiRTCSession.leavePresenceGroup([a.g.CONVERSATION_WAITING_ROOM_PREFIX+e._getTechnicalName()]):o&&clearTimeout(o),n===a.g.INVITATION_STATUS_ACCEPTED?t():(e.status=a.g.CONVERSATION_STATUS_NOT_JOINED,i(w.g.createError(a.g.ERROR_NOT_ALLOWED,\"You were not allowed to join the conversation\",oa)))})),e.cancelJoin0=function(){return delete e.cancelJoin0,e.joinRequestIntervalId&&(clearInterval(e.joinRequestIntervalId),delete e.joinRequestIntervalId),sa.removeEventListener(\"receiveData\",l),!0===r?sa.apiRTCSession.leavePresenceGroup([a.g.CONVERSATION_WAITING_ROOM_PREFIX+e._getTechnicalName()]):o&&clearTimeout(o),e.status=a.g.CONVERSATION_STATUS_NOT_JOINED,i(w.g.createError(a.g.ERROR_OPERATION_CANCELED,\"Operation canceled\",oa)),!0}}))},Ua=function(e,t,i){return new Promise((function(a){la.updateConferencePresence(e,t,i).then(a,(function(e){oa.warn(\"updateConferencePresence\",e),a()}))}))},Na=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i.stream;if(!a){var n=e.conversationCalls.get(t);if(!n)return!1;a=n.stream}return i.noTriggerAdaptation?e.releaseResources(a.userMediaStreamId):e.releaseResources(a.userMediaStreamId,{triggerAdaptation:!0}),a.publishedInConversations.delete(e.getName()),e.conversationPublishedStreams.delete(a.userMediaStreamId),e.callIdToStreamId.delete(t),e.conversationCalls.delete(t),!0},Pa=function(e,t){var i={streamId:t.streamId,isRemote:t.isRemote};if(t.isRemote)if(t.isVideoOnly){i.action=\"hangup\";var a=Sa.get(e).get(t.streamId);a&&(i.callId=a.callId),oa.debug(\"disableVideoTrack - hangup\",t.streamId),e.unsubscribeToStream(t.streamId,{noTriggerAdaptation:!0})}else{i.action=\"disableTrack\",i.trackType=\"video\";var n=Sa.get(e).get(t.streamId);n&&(i.callId=n.callId),oa.debug(\"disableVideoTrack - disable video track\",t.streamId),e.updateSubscribedStream(t.streamId,{audioOnly:!0}).catch((function(e){oa.error(\"disableVideoTrack - updateSubscribedStream\",e)})),t.isVideoMuted=!0}else if(t.isVideoOnly){i.action=\"hangup\";var r=Vn.get(t.streamId),o=e.getConversationCall(r);o&&(i.callId=o.callId),oa.debug(\"disableVideoTrack - hangup\",t.streamId),e.unpublish(r,{noTriggerAdaptation:!0})}else{var s=e.getConversationCall(Vn.get(t.streamId));s?(i.action=\"disableTrack\",i.trackType=\"video\",i.callId=s.callId,oa.debug(\"disableVideoTrack - disable video track\",t.streamId),s.updatePublishedStream(\"video\",!1).catch((function(e){oa.error(\"disableVideoTrack - updatePublishedStream\",e)})),t.isVideoMuted=!0):i=null}i&&A.get(e).emit(\"adaptationTriggered\",i)},La=function(e,t){var i={streamId:t.streamId,isRemote:t.isRemote,action:\"enableTrack\",trackType:\"video\"};if(t.isRemote){var a=Sa.get(e).get(t.streamId);a&&(i.callId=a.callId),oa.debug(\"enableVideoTrack - enable video track\",t.streamId),e.updateSubscribedStream(t.streamId,{audioOnly:!1}).catch((function(e){oa.error(\"enableVideoTrack - updateSubscribedStream\",e)})),t.isVideoMuted=!1}else{var n=e.getConversationCall(Vn.get(t.streamId));n?(i.callId=n.callId,oa.debug(\"enableVideoTrack - enable video track\",t.streamId),n.updatePublishedStream(\"video\",!0).catch((function(e){oa.error(\"enableVideoTrack - updatePublishedStream\",e)})),t.isVideoMuted=!1):i=null}i&&A.get(e).emit(\"adaptationTriggered\",i)},xa=function(e,t,i){return!0===i?e.pointerSharingState===a.g.STATE_IDLE?(e.pointerSharingState=a.g.STATE_JOINING,new Promise((function(i,n){sa.pointerSharingClient.joinRoom(e._getTechnicalName(),{success:function(n){e.pointerSharingState=a.g.STATE_ACTIVE,!0===t&&(e.pointerSharingAutoInvite=!0);var r={enabled:!0,roomId:n};A.get(e).emit(\"pointerSharingEnabled\",r),i(),!0===e.pointerSharingAutoInvite&&da.getContacts(e._getTechnicalName()).forEach((function(t){sa.pointerSharingClient.inviteInRoom(e._getTechnicalName(),t.getId())}))},failure:function(t,i){e.pointerSharingState=a.g.STATE_IDLE,e.pointerSharingAutoInvite=!1,n(t)}})}))):Promise.reject(w.g.createError(a.g.ERROR_WRONG_STATE,\"enablePointerSharing() - cannot enable pointer sharing\")):!1===i?e.pointerSharingState===a.g.STATE_ACTIVE?(e.pointerSharingState=a.g.STATE_LEAVING,new Promise((function(t,i){sa.pointerSharingClient.leaveRoom(e._getTechnicalName()),e.pointerSharingState=a.g.STATE_IDLE,e.pointerSharingAutoInvite=!1;var n={enabled:!1,roomId:e._getTechnicalName()};A.get(e).emit(\"pointerSharingEnabled\",n),t()}))):Promise.reject(w.g.createError(a.g.ERROR_WRONG_STATE,\"enablePointerSharing() - cannot disable pointer sharing\")):Promise.reject(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"enablePointerSharing() - cannot enable/disable pointer sharing\"))},Wa=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return[\"roomName\",\"callId\",\"clientId\"].forEach((function(e){t.hasOwnProperty(e)&&(i[e]=String(t[e]))})),i};function Va(e){return Va=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Va(e)}function Fa(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function ja(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ba(e,t,i){return Ba=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ha(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(i):n.value}},Ba(e,t,i||e)}function Ga(e,t){return Ga=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ga(e,t)}function qa(e,t){if(t&&(\"object\"===Va(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return function(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}(e)}function Ha(e){return Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ha(e)}i(2222);var Ja=p.Y.get(\"Conference\"),Ya=Ma.getAvailableEvents().concat([\"closed\"]),za=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ga(e,t)}(d,e);var t,i,n,r,o,l=(r=d,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ha(r);if(o){var i=Ha(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return qa(this,e)});function d(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Fa(this,d),t=l.call(this,e,i),Ja.info(\"Create conference\"),t.conference=!0,t.friendlyName=i.hasOwnProperty(\"friendlyName\")?i.friendlyName:e,t}return t=d,n=[{key:\"getAvailableEvents\",value:function(){return Ya}}],(i=[{key:\"destroy\",value:function(){$a.get().deleteConference(this.getName()),Ba(Ha(d.prototype),\"destroy\",this).call(this)}},{key:\"_getTechnicalName\",value:function(){return Xa()+ga.get(this)}},{key:\"getFriendlyName\",value:function(){return this.friendlyName}},{key:\"getInfo\",value:function(){var e=this;return new Promise((function(t,i){var n={},r=ya.get(e);r&&(n.token=r.getToken()),la.getWebconf(e._getTechnicalName(),n).then((function(e){return t({dtmfCode:e.dtmfCode,endTime:e.end,hasPassword:e.hasPassword,sipNumber:e.sipNumber,startTime:e.start,state:e.state,type:e.type})})).catch((function(e){return i(w.g.createError(a.g.ERROR_OTHER,\"getInfo() - Cannot get conference info\",Ja))}))}))}},{key:\"close\",value:function(){var e=this;return Ja.debug(\"Closing \"+this.getName()),new Promise((function(t,i){e.status!==a.g.CONVERSATION_STATUS_JOINED?i(w.g.createError(a.g.ERROR_OTHER,\"close() - Conversation has to be joined to be closed\",Ja)):e.getRole()!==a.g.CONVERSATION_ROLE_MODERATOR?i(w.g.createError(a.g.ERROR_UNAUTHORIZED,\"close() - Role has to be moderator to close the conversation\",Ja)):la.closeConferenceInstance(e,ya.get(e)).then((function(){Ja.debug(\"Conversation closed successfully\"),sa.dataClient.sendDataToGroup(e._getTechnicalName(),{event:a.g.CONVERSATION_CLOSED_IDENTIFIER,instanceId:e.getInstanceId(),roomname:e._getTechnicalName()}),A.get(e).emit(\"closed\"),e.leave(),t()})).catch((function(e){var t=\"close() - An error occured when closing conversation\",n={error:new Error(t),code:a.g.ERROR_OTHER};Ja.error(t,e),e.hasOwnProperty(\"code\")?n.code=e.code:e.hasOwnProperty(\"http_code\")&&(n.code=e.http_code.toString().startsWith(\"4\")?a.g.ERROR_UNAUTHORIZED:a.g.ERROR_SERVER_UNAVAILABLE),i(n)}))}))}},{key:\"sendInvitation\",value:function(e,t){var i=this;if(t||(t={}),e instanceof Di){Ja.info(\"Invite \"+e.getId()+\" to \"+this._getTechnicalName()),e.isOnline()||Ja.warn(\"sendInvitation() - contact \"+e.getUsername()+\" does not seem to be connected.\");var n={receiveNotifier:new s};t.hasOwnProperty(\"expirationTime\")&&(n.expirationTime=t.expirationTime);var r=new hi(e,this,n),o={event:a.g.CONVERSATION_INVITATION_IDENTIFIER,invitationId:r.id,roomname:this._getTechnicalName(),friendlyName:this.getFriendlyName(),sendTime:r.sendTime};return r.type=\"conference\",null!==wa.get(this)&&(o.password=wa.get(this)),sa.sendData(e.getId(),o).then((function(){n.receiveNotifier.emit(\"receive\")})).catch((function(t){var n=w.g.createError(t,\"Invitation not delivered\",Ja);A.get(i).emit(\"messageNotDelivered\",{error:n,contact:e,event:a.g.CONVERSATION_INVITATION_IDENTIFIER})})),r}return Ja.error(\"Parameter is not a contact\"),null}},{key:\"getTags\",value:function(){var e=this;return new Promise((function(t,i){var n=bn.getActiveSession();if(!n)return i(w.g.createError(a.g.ERROR_NOT_ALLOWED,\"getTags() - no session found\",Ja));var r=n.getUserAgent().getEnterprise();if(!r)return i(w.g.createError(a.g.ERROR_NOT_ALLOWED,\"getTags() - no enterprise found\",Ja));r.getTags(e).then((function(e){for(var i=[],a=0;a<e.length;a+=1)!0===e[a].selected&&i.push(e[a]);return t(i)})).catch((function(e){return i(w.g.createError(a.g.ERROR_NOT_ALLOWED,\"getTags() - cannot get tags\",Ja,{fromError:e}))}))}))}},{key:\"setTags\",value:function(e){var t=this;return new Promise((function(i,n){if(!Array.isArray(e))return n(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"setTags() - wrong tags\",Ja));if(!t.webconfId)return n(w.g.createError(a.g.ERROR_NOT_ALLOWED,\"setTags() - no webconf found\",Ja));var r=bn.getActiveSession();if(!r)return n(w.g.createError(a.g.ERROR_NOT_ALLOWED,\"setTags() - no session found\",Ja));var o=r.getUserAgent().getEnterprise();if(!o)return n(w.g.createError(a.g.ERROR_NOT_ALLOWED,\"setTags() - no enterprise found\",Ja));var s=r.getToken();if(!s)return n(w.g.createError(a.g.ERROR_NOT_ALLOWED,\"setTags() - no token found\",Ja));for(var l=[],d=0;d<e.length;d+=1){if(!e[d].hasOwnProperty(\"id\"))return n(w.g.createError(a.g.ERROR_BAD_PARAMETER,\"setTags() - wrong tags\",Ja));l.push(e[d].id)}la.updateWebconfTags(o.getId(),t.webconfId,l,s).then((function(){return i()})).catch((function(e){return n(w.g.createError(a.g.ERROR_OTHER,\"setTags() - cannot set tags\",Ja,{fromError:e}))}))}))}}])&&ja(t.prototype,i),n&&ja(t,n),d}(Ma),Xa=function(){return sa.getActiveApiKey()+\":\"};function Ka(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}p.Y.get(\"ConversationCatalog\");var Qa=null,$a=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),null!==Qa)throw\"Cannot construct singleton ConversationCatalog\";this.conversationList=new Map,this.conferenceList=new Map,Qa=this}var t,i,a;return t=e,i=[{key:\"deleteConversation\",value:function(e){return!!(w.g.isTypeof(e,\"string\")&&e.length>0)&&this.conversationList.delete(e)}},{key:\"deleteConference\",value:function(e){return!!(w.g.isTypeof(e,\"string\")&&e.length>0)&&this.conferenceList.delete(e)}},{key:\"getOrCreateConversation\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;return null!=e&&\"\"!==e?this.conversationList.has(e.toString())?i=this.conversationList.get(e.toString()):(i=new Ma(e.toString(),t),this.conversationList.set(e.toString(),i)):(i=new Ma(null,t),this.conversationList.set(i.getName(),i)),i}},{key:\"getOrCreateConference\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;return null!=e&&\"\"!==e?this.conferenceList.has(e.toString())?i=this.conferenceList.get(e.toString()):(i=new za(e.toString(),t),this.conferenceList.set(e.toString(),i)):(i=new za(null,t),this.conferenceList.set(i.getName(),i)),i}},{key:\"getConversations\",value:function(){return this.conversationList}},{key:\"getConferences\",value:function(){return this.conferenceList}},{key:\"isConference\",value:function(e){return Za(e).hasOwnProperty(\"apiKey\")}},{key:\"getNameFromTechnicalName\",value:function(e){return Za(e).name}}],a=[{key:\"get\",value:function(){return null===Qa&&(Qa=new e),Qa}}],i&&Ka(t.prototype,i),a&&Ka(t,a),e}();function Za(e){var t=e.match(/^([^:]+)[:]([^:]+)$/);return null===t||t.length<3?{name:e}:{apiKey:t[1],name:t[2]}}function en(e){return en=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},en(e)}function tn(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return an(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?an(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function nn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function rn(e,t){return rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},rn(e,t)}function on(e,t){if(t&&(\"object\"===en(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return sn(e)}function sn(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function ln(e){return ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ln(e)}var dn=p.Y.get(\"Session\"),cn=B.get(),un=new Kt.Z,hn=We.get(),pn=[\"rawData\",\"whiteboardInvitation\",\"fileTransferInvitation\",\"conversationMessage\",\"conversationData\",\"dataChannelInvitation\",\"contactMessage\",\"contactData\",\"customEvent\",\"conversationInvitation\",\"incomingCall\",\"disconnect\",\"error\",\"contactListUpdate\",\"reconnecting\",\"reconnection\",\"conversationJoinRequest\",\"newMediaAvailableFromContact\",\"whiteboardRoomMemberUpdate\",\"incomingScreenSharingCall\",\"pointerSharingInvitation\",\"pointerLocationChanged\",\"incomingScreenSharingCallInvitation\",\"cloudEventOccurred\"],gn=new WeakMap,mn=new WeakMap,Cn=null,fn=new WeakMap,vn=new WeakMap,bn=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(l,e);var t,i,n,r,o,s=(r=l,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ln(r);if(o){var i=ln(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return on(this,e)});function l(e){var t;(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")})(this,l),t=s.call(this,dn),dn.debug(\"Create Session\"),t.id=null,t.token=null,t.ccsToken=null,gn.set(sn(t),e),mn.set(sn(t),null),vn.set(sn(t),{}),t.isRecording=!1,t.userData=new ii,t.contactListUpdateListenerSetted=!1,t.waitingContactListUpdateEvent=[];var i=Ji.get(),n=$a.get(),r={};return t.invitationsMap=new Map,r.channelEvent=function(e){switch(e.detail.channelEvent){case\"onChannelReconnecting\":A.get(sn(t)).emit(\"reconnecting\",e);break;case\"onChannelReconnect\":A.get(sn(t)).emit(\"reconnection\",e);break;case\"onChannelError\":A.get(sn(t)).emit(\"error\",e);break;case\"onChannelDisconnect\":dn.error(\"Session :: onChannelDisconnect\"),A.get(sn(t)).emit(\"disconnect\",e)}},r.incomingCall=function(e){var a=i.getOrCreateContact(e.detail.callerId),n=e.detail.callId.toString();if(\"data\"===e.detail.callType)if(dn.info(\"Received file transfer invitation from \"+a.getUsername()),w.g._private.dataCallsFileInfo.has(n)){var r=w.g._private.dataCallsFileInfo.get(n),o=null;t.invitationsMap.has(e.detail.callerId+\"-sendfile-\"+n)?(o=t.invitationsMap.get(e.detail.callerId+\"-sendfile-\"+n),dn.debug(\"invitation already exist :\",o)):(o=new at(a,n,r),t.invitationsMap.set(e.detail.callerId+\"-sendfile-\"+n,o)),A.get(sn(t)).emit(\"fileTransferInvitation\",o)}else w.g._private.dataChannelInvitations.has(n)?A.get(sn(t)).emit(\"dataChannelInvitation\",new Pt(a,n)):(dn.debug(\"File information has not been received yet, putting invitation on hold\"),w.g._private.dataCallsOnHold.set(n));else if(\"screenSharing\"===e.detail.callType)if(!0===apiRTC.session.apiCCWebRTCClient.webRTCClient.userAcceptOnIncomingScreenSharingCall){dn.debug(\"Received screenSharingCallInvitation from \"+a.getUsername());var s=new Xe(a,n,e.detail.callType,{isRecorded:!!e.detail.hasOwnProperty(\"recordedCall\")&&e.detail.recordedCall});A.get(sn(t)).emit(\"incomingScreenSharingCallInvitation\",s)}else{dn.debug(\"Received screenSharingCall from \"+a.getUsername());var l=hn.getOrCreateCall(n,a,{started:!0,isRecorded:!!e.detail.hasOwnProperty(\"recordedCall\")&&e.detail.recordedCall});A.get(sn(t)).emit(\"incomingScreenSharingCall\",l)}else{dn.info(\"Received call invitation from \"+a.getUsername());var d=new Xe(a,n,e.detail.callType,{isRecorded:!!e.detail.hasOwnProperty(\"recordedCall\")&&e.detail.recordedCall});A.get(sn(t)).emit(\"incomingCall\",d)}},r.roomInvitation=function(e){var a=i.getOrCreateContact(e.detail.senderId);if(\"whiteBoard\"===e.detail.roomType){if(null!==a){dn.info(\"Received whiteboard invitation from \"+a.getUsername());var r={};e.detail.cloudConvId&&(r.cloudConvId=e.detail.cloudConvId),!0===e.detail.webconf&&(r.webconf=!0),A.get(sn(t)).emit(\"whiteboardInvitation\",new ut(a,e.detail.roomId,r))}}else\"pointerSharing\"===e.detail.roomType&&(null===a||n.getConversations().has(e.detail.roomId)||n.getConferences().has(e.detail.roomId)||(dn.info(\"Received pointer sharing invitation from \"+a.getUsername()),A.get(sn(t)).emit(\"pointerSharingInvitation\",new Xt(a,e.detail.roomId,sn(t)))))},r.roomMemberUpdate=function(e){var a,n=[],r=tn(e.detail.contactList);try{for(r.s();!(a=r.n()).done;){var o=a.value;n.push(i.getOrCreateContact(o.contactId))}}catch(e){r.e(e)}finally{r.f()}\"whiteBoard\"===e.detail.roomType&&(dn.info(\"Received whiteboard room member update\"),A.get(sn(t)).emit(\"whiteboardRoomMemberUpdate\",{contacts:n,roomId:e.detail.roomId,status:e.detail.status}))},r.receiveRoomMessage=function(e){if(dn.debug(\"receiveRoomMessage\",e),\"pointerSharing\"===e.detail.roomType&&\"pointerLocation\"===e.detail.message.type&&vn.get(sn(t)).hasOwnProperty(e.detail.roomId)){var a={sender:i.getOrCreateContact(e.detail.senderId),source:e.detail.message.source,x:e.detail.message.x,y:e.detail.message.y};w.g.isPropertyTypeof(e.detail.message,\"data\",\"object\")&&(a.data=e.detail.message.data),A.get(sn(t)).emit(\"pointerLocationChanged\",a)}},r.receiveIMMessage=function(e){var a=i.getOrCreateContact(e.detail.senderId);dn.debug(\"Received IM from \"+a.getUsername()+\" : \",e.detail.message),A.get(sn(t)).emit(\"contactMessage\",{sender:a,content:e.detail.message,uuid:e.detail.UUCSeq,time:e.detail.time})},r.receiveData=function(e){var r=i.getOrCreateContact(e.detail.senderId),o=e.detail.data,s=null;if(void 0!==o.roomname&&(s=n.isConference(o.roomname)?n.getOrCreateConference(n.getNameFromTechnicalName(o.roomname)):n.getOrCreateConversation(n.getNameFromTechnicalName(o.roomname))),dn.trace(\"Received data from \"+r.getId(),e.detail),A.get(sn(t)).emit(\"rawData\",{sender:r,content:o}),void 0!==o.event)switch(o.event){case a.g.INVITATION_ANSWER_IDENTIFIER:case a.g.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER:break;case a.g.CONTACT_SEND_DATA_IDENTIFIER:dn.debug(\"Received contact data from \"+r.getUsername(),o.content),A.get(sn(t)).emit(\"contactData\",{sender:r,content:o.content});break;case a.g.CONVERSATION_SEND_DATA_IDENTIFIER:void 0!==o.roomname&&(dn.debug(\"Received conversation data from \"+r.getUsername(),o.content),A.get(sn(t)).emit(\"conversationData\",{sender:r,conversation:s,content:o.content}));break;case a.g.CONTACT_NEW_MEDIA_IDENTIFIER:A.get(sn(t)).emit(\"newMediaAvailableFromContact\",{sender:r,media:o.media});break;case a.g.CONTACT_DATACHANNEL_INVITATION:dn.debug(\"Received datachannel invitation from \"+r.getUsername()),w.g._private.dataChannelInvitations.set(o.callId.toString(),!0),w.g._private.dataCallsOnHold.has(o.callId.toString())&&A.get(sn(t)).emit(\"dataChannelInvitation\",new Pt(r,o.callId.toString()));break;case a.g.CONTACT_SEND_FILEINFO_IDENTIFIER:dn.debug(\"Received file info from \"+r.getUsername(),o.fileInfo);var l=o.callId.toString();if(w.g._private.dataCallsFileInfo.set(l,o.fileInfo),w.g._private.dataCallsOnHold.has(l)){var d=null;t.invitationsMap.has(r.getId()+\"-sendfile-\"+l)?(d=t.invitationsMap.get(r.getId()+\"-sendfile-\"+l),dn.debug(\"invitation already exist :\",d)):(d=new at(r,l,o.fileInfo),t.invitationsMap.set(e.detail.callerId+\"-sendfile-\"+l,d)),A.get(sn(t)).emit(\"fileTransferInvitation\",d)}else dn.debug(\"no dataCallsOnHold\");break;case a.g.CONVERSATION_INVITATION_IDENTIFIER:if(void 0!==o.roomname){dn.info(\"Received conversation invitation from \"+r.getUsername());var c={session:sn(t)};o.hasOwnProperty(\"password\")&&(c.password=o.password),s?(o.hasOwnProperty(\"friendlyName\")&&s.name===s.friendlyName&&(s.friendlyName=o.friendlyName),A.get(sn(t)).emit(\"conversationInvitation\",new ge(r,o,s,c))):A.get(sn(t)).emit(\"conversationInvitation\",new ge(r,o,null,c))}break;case a.g.CONVERSATION_JOIN_REQUEST_IDENTIFIER:dn.info(\"Received conversation join request from \"+r.getUsername()),s?A.get(sn(t)).emit(\"conversationJoinRequest\",new Bt(r,s,o.invitationId)):A.get(sn(t)).emit(\"conversationJoinRequest\",new Bt(r,null,null));break;case a.g.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER:case a.g.CONVERSATION_CLOSED_IDENTIFIER:break;default:var u={event:o.event,content:o,sender:r};null!==s&&(u.conversation=s),A.get(sn(t)).emit(\"customEvent\",u)}else if(void 0!==o.command)switch(o.command){case\"userWaiting\":case\"userWaiting-new\":dn.info(\"Received conversation join request from \"+r.getUsername()),s?A.get(sn(t)).emit(\"conversationJoinRequest\",new Bt(r,s,null)):A.get(sn(t)).emit(\"conversationJoinRequest\",new Bt(r,null,null))}},r.receiveGroupChatMessage=function(e){var a=i.getOrCreateContact(e.detail.senderId),r=null,o=e.detail.groupChatId.toString();if(void 0!==o&&(r=n.isConference(o)?n.getOrCreateConference(n.getNameFromTechnicalName(o)):n.getOrCreateConversation(n.getNameFromTechnicalName(o))),null!==r){dn.debug(\"Received conversation message from \"+a.getUsername(),e.detail.message);var s={sender:a,conversation:r,content:e.detail.message};w.g.isTypeof(e.detail,\"metadata\",\"object\")&&(s.metadata=e.detail.metadata),A.get(sn(t)).emit(\"conversationMessage\",s)}},r.cloudEventOccurred=function(e){var i={topic:e.detail.topic,target:e.detail.target};A.get(sn(t)).emit(\"cloudEventOccurred\",i)},r.callEstablished=function(e){if(void 0!==e.detail.callId){var t=e.detail.callId.toString();dn.debug(\"callEstablished\",e.detail,t);var i=hn.getCall(t,null,{});null!==i&&i.manageCallEstablishedEvent(e)}else dn.debug(\"callEstablished\",e.detail)},r.remoteStreamAdded=function(e){if(void 0!==e.detail.callId){var t=e.detail.callId.toString();dn.debug(\"remoteStreamAdded\",e.detail,t);var i=hn.getCall(t,null,{});null!==i&&i.manageRemoteStreamAddedEvent(e)}else dn.debug(\"remoteStreamAdded\",e.detail)},r.remoteStreamRemoved=function(e){if(void 0!==e.detail.callId){var t=e.detail.callId.toString();dn.debug(\"remoteStreamRemoved\",e.detail,t);var i=hn.getCall(t,null,{});null!==i&&i.manageRemoteStreamRemovedEvent(e)}else dn.debug(\"remoteStreamRemoved\",e.detail)},r.userMediaSuccess=function(e){var t=null;if(void 0!==e.detail.callId&&null!==e.detail.callId){t=e.detail.callId.toString(),dn.debug(\"userMediaSuccess\",e.detail,t);var i=hn.getCall(t,null,{});null!==i&&i.manageUserMediaSuccessEvent(e)}else dn.debug(\"userMediaSuccess\",e.detail)},r.onCallStatsUpdate=function(e){if(void 0!==e.detail.callId){var t=e.detail.callId.toString(),i=hn.getCall(t,null,{});null!==i&&i.manageCallStatsUpdateEvent(e)}else dn.debug(\"onCallStatsUpdate\",e.detail)},r.error=function(e){if(dn.debug(\"error\",e.detail),null!==e.detail.roomName&&void 0!==e.detail.roomName){dn.debug(\"error on conversation :\",e.detail,e.detail.roomName,e.detail.callId);var i=null;void 0!==e.detail.roomName&&null!==(i=n.isConference(e.detail.roomName)?n.getOrCreateConference(n.getNameFromTechnicalName(e.detail.roomName)):n.getOrCreateConversation(n.getNameFromTechnicalName(e.detail.roomName)))&&i.manageErrorEvent(e)}else if(void 0!==e.detail.callId){var a=e.detail.callId.toString();dn.debug(\"error\",e.detail,a);var r=hn.getCall(a,null,{});null!==r&&(r.manageErrorEvent(e),\"RECORDING_FAILED\"===e.detail.errorCode&&hn.removeCallFromList(r.getId()))}else dn.debug(\"error\",e.detail),A.get(sn(t)).emit(\"error\",e.detail)},r.disconnectionWarning=function(e){if(null!==e.detail.roomName){dn.debug(\"disconnectionWarning on conversation :\",e.detail,e.detail.roomName,e.detail.callId);var t=null;void 0!==e.detail.roomName&&null!==(t=n.isConference(e.detail.roomName)?n.getOrCreateConference(n.getNameFromTechnicalName(e.detail.roomName)):n.getOrCreateConversation(n.getNameFromTechnicalName(e.detail.roomName)))&&t.manageDisconnectionWarningEvent(e)}else if(e.detail.callId){var i=e.detail.callId.toString();dn.debug(\"disconnectionWarning\",e.detail,i);var a=hn.getCall(i,null,{});null!==a&&a.manageDisconnectionWarningEvent(e)}else dn.debug(\"disconnectionWarning\",e.detail)},r.hangup=function(e){if(e.detail.callId){var t=e.detail.callId.toString();dn.debug(\"hangup\",e.detail,t);var i=hn.getCall(t,null,{});null!==i&&(i.manageHangupEvent(e),!1===i.isRecorded()&&hn.removeCallFromList(i.getId()))}else dn.debug(\"hangup\",e.detail)},r.recordedStreamsAvailable=function(e){if(e.detail.userId2){var t=i.getOrCreateContact(e.detail.userId2),a=hn.getCall(null,t);a&&(a.manageRecordAvailableEvent(e),hn.removeCallFromList(a.getId()))}else dn.debug(\"recordedStreamsAvailable\",e.detail)},r.desktopCapture=function(e){if(e.detail.callId){var t=e.detail.callId.toString();dn.warn(\"desktopCapture\",e.detail,t);var i=hn.getCall(t,null,{});null!==i&&(i.manageDesktopCaptureEvent(e),hn.removeCallFromList(i.getId()))}else dn.debug(\"desktopCapture\",e.detail)},r.userMediaError=function(e){if(e.detail.callId){var t=e.detail.callId.toString();dn.warn(\"userMediaError\",e.detail,t);var i=hn.getCall(t,null,{});null!==i&&(i.manageUserMediaErrorEvent(e),!1===e.detail.tryAudioCallActivated&&hn.removeCallFromList(i.getId()))}else dn.debug(\"userMediaError\",e.detail)},dn.debug(\"av apiRTCManager onEvent ...\"),cn.onEvent(\"disconnectionWarning\",r.disconnectionWarning).onEvent(\"incomingCall\",r.incomingCall).onEvent(\"roomInvitation\",r.roomInvitation).onEvent(\"roomMemberUpdate\",r.roomMemberUpdate).onEvent(\"receiveRoomMessage\",r.receiveRoomMessage).onEvent(\"receiveIMMessage\",r.receiveIMMessage).onEvent(\"receiveData\",r.receiveData).onEvent(\"receiveGroupChatMessage\",r.receiveGroupChatMessage).onEvent(\"cloudEventOccurred\",r.cloudEventOccurred).onEvent(\"callEstablished\",r.callEstablished).onEvent(\"remoteStreamAdded\",r.remoteStreamAdded).onEvent(\"remoteStreamRemoved\",r.remoteStreamRemoved).onEvent(\"userMediaSuccess\",r.userMediaSuccess).onEvent(\"onCallStatsUpdate\",r.onCallStatsUpdate).onEvent(\"error\",r.error).onEvent(\"hangup\",r.hangup).onEvent(\"recordedStreamsAvailable\",r.recordedStreamsAvailable).onEvent(\"desktopCapture\",r.desktopCapture).onEvent(\"userMediaError\",r.userMediaError),apiRTC.addEventListener(\"channelEvent\",r.channelEvent),i.onUpdate((function(e){!1===t.contactListUpdateListenerSetted&&(dn.debug(\"No listener for contactListUpdate, storing event ...\"),t.waitingContactListUpdateEvent.push(e)),A.get(sn(t)).emit(\"contactListUpdate\",e)})),fn.set(sn(t),r),t}return t=l,i=[{key:\"getToken\",value:function(){return this.token}},{key:\"getId\",value:function(){return this.id}},{key:\"getUserAgent\",value:function(){return gn.get(this)}},{key:\"getContact\",value:function(e){return dn.warn(\"getContact() - Method deprecated, use Session.getOrCreateContact() instead\"),Ji.get().getOrCreateContact(e)}},{key:\"getOrCreateContact\",value:function(e){return Ji.get().getOrCreateContact(e)}},{key:\"createConversation\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dn.warn(\"createConversation() - Method deprecated, use Session.getConversation() instead\"),this.getConversation(e,t)}},{key:\"getConversation\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dn.trace(\"Getting conversation \"+e,t),$a.get().getOrCreateConversation(e)}},{key:\"getConference\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return dn.trace(\"Getting conference \"+e,t),$a.get().getOrCreateConference(e)}},{key:\"getOrCreateConversation\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=$a.get().getNameFromTechnicalName(e);return $a.get().isConference(e)?$a.get().getOrCreateConference(i,t):$a.get().getOrCreateConversation(i,t)}},{key:\"getOrCreateConference\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.getOrCreateConversation(e,t)}},{key:\"getActiveConversations\",value:function(){var e,t={},i=$a.get().getConversations(),a=tn(i.keys());try{for(a.s();!(e=a.n()).done;){var n=e.value,r=i.get(n);r.isJoined()&&(t[n]=r)}}catch(e){a.e(e)}finally{a.f()}return t}},{key:\"getActiveConferences\",value:function(){var e,t={},i=$a.get().getConferences(),a=tn(i.keys());try{for(a.s();!(e=a.n()).done;){var n=e.value,r=i.get(n);r.isJoined()&&(t[n]=r)}}catch(e){a.e(e)}finally{a.f()}return t}},{key:\"getWhiteboardClient\",value:function(){return dn.trace(\"getWhiteboardClient()\"),cn.whiteBoardClient}},{key:\"setUserData\",value:function(e){this.userData.setProps(e).setToSession()}},{key:\"setUsername\",value:function(e){this.userData.setProp(\"username\",e).setToSession()}},{key:\"setPhotoUrl\",value:function(e){this.userData.setProp(\"photo_url\",e).setToSession()}},{key:\"getUserData\",value:function(){return this.userData}},{key:\"getUsername\",value:function(){return null!==this.userData.get(\"username\")?this.userData.get(\"username\"):null!==this.userData.get(\"nickname\")?this.userData.get(\"nickname\"):this.id.toString()}},{key:\"getPhotoUrl\",value:function(){return null!==this.userData.get(\"photo_url\")?this.userData.get(\"photo_url\"):null!==this.userData.get(\"photoUrl\")?this.userData.get(\"photoUrl\"):this.userId?un.getUserPhotoUrl(this.userId):null}},{key:\"subscribeToGroup\",value:function(e){this.getSubscribedPresenceGroup().includes(e)?dn.debug(\"Already subscribed to this group\"):cn.apiRTCSession.subscribePresenceGroup([e])}},{key:\"unsubscribeToGroup\",value:function(e){this.getSubscribedPresenceGroup().includes(e)?cn.unsubscribeToPresenceGroup(e):dn.debug(\"Not subscribed to this group\")}},{key:\"joinGroup\",value:function(e){this.getPresenceGroup().includes(e)?dn.debug(\"Already joined this group\"):cn.joinAndSubscribeToPresenceGroup(e)}},{key:\"leaveGroup\",value:function(e){this.getPresenceGroup().includes(e)?cn.leaveAndUnsubscribeToPresenceGroup(e):dn.debug(\"Group was not joined\")}},{key:\"subscribeToCloudEvent\",value:function(e,t){cn.subscribeToCloudEvent(e,t)}},{key:\"unsubscribeToCloudEvent\",value:function(e,t){cn.unsubscribeToCloudEvent(e,t)}},{key:\"joinConversationSpace\",value:function(e){cn.apiRTCSession.joinConversationSpace(e)}},{key:\"leaveConversationSpace\",value:function(e){cn.apiRTCSession.leaveConversationSpace(e)}},{key:\"getContacts\",value:function(e){dn.trace(\"getContacts()\");var t,i={},a=Ji.get().getContacts(e),n=tn(a.keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;i[r]=a.get(r)}}catch(e){n.e(e)}finally{n.f()}return i}},{key:\"getContactsArray\",value:function(e){dn.log(\"getContactsArray\");var t=Ji.get().getContacts(e);return Array.from(t.values())}},{key:\"getOnlineContactsArray\",value:function(e){dn.log(\"getOnlineContactsArray\");var t=Ji.get().getOnlineContacts(e);return Array.from(t.values())}},{key:\"getCall\",value:function(e){return dn.trace(\"getCall()\"),We.get().getCall(e)}},{key:\"getCalls\",value:function(){dn.trace(\"getCalls()\");var e,t={},i=We.get().getCalls(),a=tn(i.keys());try{for(a.s();!(e=a.n()).done;){var n=e.value;t[n]=i.get(n)}}catch(e){a.e(e)}finally{a.f()}return t}},{key:\"disconnect\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{invalidateUserToken:!0};return new Promise((function(i,n){if(dn.info(\"disconnect()\"),null===e.token&&null===e.id)dn.error(\"disconnect() - Session is already disconnected\"),n(\"disconnect() - Session is already disconnected\");else{var r,o=tn($a.get().getConversations().keys());try{for(o.s();!(r=o.n()).done;){var s=r.value;s.status===a.g.CONVERSATION_STATUS_JOINED&&s.leave()}}catch(e){o.e(e)}finally{o.f()}if(clearInterval(mn.get(e)),mn.set(e,null),null!==e.token&&t.hasOwnProperty(\"invalidateUserToken\")&&t.invalidateUserToken)un.invalidateUserToken(e.token).then((function(){Cn=null,cn.disconnect({invalidateApiCCId:!0}),e.id=null,e.token=null;for(var t=fn.get(e),a=0,n=Object.keys(t);a<n.length;a++){var r=n[a];dn.info(\"Session, removing apiRTCManager event :\",r);var o=t[r];cn.removeEventListener(r,o)}i()})).catch((function(e){dn.error(\"disconnect() - An error occured during disconnection\",e),n(new Error(\"disconnect() - An error occured during disconnection\"))}));else{Cn=null,cn.disconnect(),e.id=null;for(var l=fn.get(e),d=0,c=Object.keys(l);d<c.length;d++){var u=c[d];dn.info(\"Session, removing apiRTCManager event :\",u);var h=l[u];cn.removeEventListener(u,h)}i()}}}))}},{key:\"cloudRequest\",value:function(e,t,i){return un.cloudRequest(e,t,i)}},{key:\"sendRawData\",value:function(e,t){return new Promise((function(i,n){null!=e?cn.sendData(e.getId(),t).then(i).catch((function(e){switch(e){case a.g.ERROR_TIMED_OUT:n(w.g.createError(a.g.ERROR_TIMED_OUT,\"sendRawData() - Data transmission timed out \",dn));break;case a.g.ERROR_NOT_FOUND:n(w.g.createError(a.g.ERROR_NOT_FOUND,\"sendRawData() - Contact was not found \",dn));break;default:n(w.g.createError(a.g.ERROR_OTHER,\"sendRawData() - Data transmission timed out \",dn))}})):n(w.g.createError(a.g.ERROR_OTHER,\"sendRawData() - Contact undefined\",dn))}))}},{key:\"startRecordingOutgoingStream\",value:function(e,t){this.isRecording?dn.error(\"startRecordingOutgoingStream() - already recording\"):(cn.webRTCClient.startRecording(e,t),this.isRecording=!0)}},{key:\"stopRecordingOutgoingStream\",value:function(){var e=this;return new Promise((function(t,i){e.isRecording?(e.isRecording=!1,cn.onceEvent(\"MCURecordedStreamsAvailable\",(function(e){t({filename:e.detail.recordedFileName,url:a.g.RECORD_PLAY_URL+e.detail.recordedFileName})})),cn.webRTCClient.stopRecording()):(dn.error(\"stopRecordingOutgoingStream() - not recording\"),i(new Error(\"stopRecordingOutgoingStream() - not recording\")))}))}},{key:\"init\",value:function(e){var t=this;this.id=e,Cn=this,null===mn.get(this)&&mn.set(this,setInterval((function(){yn(t)}),3e4))}},{key:\"setMCUServer\",value:function(e){cn.webRTCClient.setMCUConnector(e)}},{key:\"allowMultipleCalls\",value:function(e){cn.webRTCClient.setAllowMultipleCalls(e)}},{key:\"setCallStatsMonitoringEnabled\",value:function(e,t){cn.webRTCClient.enableCallStatsMonitoring(e,t)}},{key:\"setQualityEvaluatingEnabled\",value:function(e,t){cn.webRTCClient.enableQualityEvaluating(e,t)}},{key:\"getContactFromWebSession\",value:function(e){var t=this;return new Promise((function(i,n){un.getSessionHistory(e,t.getToken()).then((function(e){\"1\"!==e.exist.toString()?n(w.g.createError(a.g.ERROR_NOT_FOUND,\"No such web session\",dn)):e.user1.toString()===t.getId()?i(t.getContact(e.user2)):e.user2.toString()===t.getId()?i(t.getContact(e.user1)):n(w.g.createError(a.g.ERROR_UNAUTHORIZED,\"User has no access to this web session\",dn))})).catch((function(e){e.hasOwnProperty(\"code\")?n({code:e.code,error:e.error}):e.hasOwnProperty(\"http_code\")?e.http_code.toString().startsWith(\"4\")?n(w.g.createError(a.g.ERROR_OTHER,\"Error while getting contact from websession\",dn)):n(w.g.createError(a.g.ERROR_SERVER_UNAVAILABLE,\"Error while getting contact from websession\",dn)):n(w.g.createError(a.g.ERROR_OTHER,\"Error while getting contact from websession\",dn))}))}))}},{key:\"joinPointerSharingRoom\",value:function(e){var t=this;return new Promise((function(i,n){if(vn.get(t).hasOwnProperty(e))return n(w.g.createError(a.g.ERROR_WRONG_STATE,\"joinPointerSharingRoom() - cannot join pointer sharing room again\",dn));cn.pointerSharingClient.joinRoom(e,{success:function(e){var a=new Sn(t,e);vn.get(t)[e]=a,i(a)},failure:function(e,t){n(\"timeout\"===e?w.g.createError(a.g.ERROR_TIMED_OUT,\"joinPointerSharingRoom() - cannot join pointer sharing room\",dn):w.g.createError(a.g.ERROR_OTHER,\"joinPointerSharingRoom() - cannot join pointer sharing room\",dn))}})}))}},{key:\"getSubscribedPresenceGroup\",value:function(){return void 0!==apiCC&&null!==apiCC.session&&void 0!==apiCC.session?apiCC.session.subscribeToPresenceGroup:null}},{key:\"getPresenceGroup\",value:function(){return void 0!==apiCC&&null!==apiCC.session&&void 0!==apiCC.session?apiCC.session.presenceGroup:null}}],n=[{key:\"getAvailableEvents\",value:function(){return pn}},{key:\"getActiveSession\",value:function(){return Cn}}],i&&nn(t.prototype,i),n&&nn(t,n),l}(D),Sn=function(e,t){this.session=e,this.roomId=t,this.getRoomId=function(){return this.roomId},this.isActive=function(){return null!==this.session&&null!==this.roomId&&cn.pointerSharingClient.roomActive(this.roomId)},this.leaveRoom=function(){var e=this;return new Promise((function(t,i){if(null===e.session||null===e.roomId)return i(w.g.createError(a.g.ERROR_WRONG_STATE,\"leaveRoom() - cannot leave room again\",dn));cn.pointerSharingClient.leaveRoom(e.roomId),delete vn.get(e.session)[e.roomId],e.session=null,e.roomId=null,t()}))},this.invite=function(e,t){var i=this;return new Promise((function(n,r){if(null===i.session||null===i.roomId)return r(w.g.createError(a.g.ERROR_WRONG_STATE,\"invite() - cannot invite\",dn));cn.pointerSharingClient.inviteInRoom(i.roomId,e.getId(),t),n()}))},this.sendPointerLocation=function(e,t,i,n){var r=this;return new Promise((function(o,s){return null===r.session||null===r.roomId?s(w.g.createError(a.g.ERROR_WRONG_STATE,\"sendPointerLocation() - cannot send pointer location\",dn)):cn.pointerSharingClient.sendPointerLocation(r.roomId,e,t,i,n)?void o():s(w.g.createError(a.g.ERROR_WRONG_STATE,\"sendPointerLocation() - cannot send pointer location\",dn))}))}},yn=function(e){for(var t=e.getActiveConferences(),i=0,a=Object.keys(t);i<a.length;i++){var n=t[a[i]];un.updateConferencePresence(n,e,cn.getActiveApiKey())}};function In(e,t,i){return In=\"undefined\"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var a=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Nn(e)););return e}(e,t);if(a){var n=Object.getOwnPropertyDescriptor(a,t);return n.get?n.get.call(i):n.value}},In(e,t,i||e)}function Tn(e){return Tn=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Tn(e)}function Rn(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return wn(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?wn(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function wn(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function En(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function Mn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function An(e,t,i){return t&&Mn(e.prototype,t),i&&Mn(e,i),e}function On(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}function Dn(e,t){return Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Dn(e,t)}function kn(e){var t=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,a=Nn(e);if(t){var n=Nn(this).constructor;i=Reflect.construct(a,arguments,n)}else i=a.apply(this,arguments);return _n(this,i)}}function _n(e,t){if(t&&(\"object\"===Tn(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return Un(e)}function Un(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function Nn(e){return Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Nn(e)}var Pn=p.Y.get(\"Stream\"),Ln=B.get(),xn=$a.get(),Wn=[\"stopped\",\"trackStopped\",\"audioAmplitude\",\"audioAmplitudeInfo\",\"muteStateChange\",\"activeStateChange\",\"backgroundSubstractionStopVisibilityChange\",\"backgroundSubstractionStopComputeTime\",\"AIESnapshot\",\"AIELog\",\"audioFlowStatusChanged\",\"videoFlowStatusChanged\",\"remoteAudioFlowStatusChanged\",\"remoteVideoFlowStatusChanged\"],Vn=new Map,Fn=new WeakMap,jn=new WeakMap,Bn=new WeakMap,Gn=new WeakMap,qn={},Hn=function(e){On(i,e);var t=kn(i);function i(e){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(En(this,i),a=t.call(this,Pn),!0!==n.constructor)throw new Error(\"Stream constructor should not be used directly, please use a static method of class Stream such as : createStreamFromUserMedia, createStreamFromMediaStream, createScreensharingStream\");if(delete n.constructor,!n.hasOwnProperty(\"type\"))throw new Error(\"Cannot create Stream with no type\");if(Pn.debug(\"Create Stream with options\",n),a.data=e,a.audioInput=n.hasOwnProperty(\"audioInput\")?n.audioInput:null,a.videoInput=n.hasOwnProperty(\"videoInput\")?n.videoInput:null,n.hasOwnProperty(\"userMediaStreamId\")?(a.userMediaStreamId=n.userMediaStreamId,a.isRemote=!1,Vn.set(a.userMediaStreamId,Un(a))):(a.userMediaStreamId=null,a.isRemote=!0),w.g.isPropertyTypeof(n,\"streamId\",\"number\")?a.streamId=n.streamId:null!==a.userMediaStreamId?a.streamId=Number(a.userMediaStreamId):void 0!==Number.MAX_SAFE_INTEGER?a.streamId=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER):a.streamId=Math.floor(1024*Math.random()*1024*1024),a.contact=n.hasOwnProperty(\"contact\")?n.contact:null,n.hasOwnProperty(\"callId\")?(a.callId=n.callId,a.callAudioAvailable=n.callAudioAvailable,a.callAudioActive=n.callAudioActive,a.callAudioMuted=n.callAudioMuted,a.callAudioSilent=n.callAudioSilent,a.callVideoAvailable=n.callVideoAvailable,a.callVideoActive=n.callVideoActive,a.callVideoMuted=n.callVideoMuted,a.callVideoSilent=n.callVideoSilent):a.callId=null,a.publishedInConversations=new Map,a.mediaRecorder=null,a.recordedBlobs=[],Fn.set(Un(a),!!n.hasOwnProperty(\"screensharing\")&&n.screensharing),jn.set(Un(a),null),Bn.set(Un(a),null),a.type=n.type,a.promises=[],\"IE\"!==apiRTC.browser&&null!==a.data){var r,o=function(e){e.addEventListener(\"ended\",(function(t){qn.hasOwnProperty(e.id)||(A.get(Un(a)).emit(\"trackStopped\",{type:e.kind,id:e.id}),qn[e.id]=!0)}))},s=Rn(a.data.getVideoTracks());try{for(s.s();!(r=s.n()).done;){var l=r.value;o(l)}}catch(e){s.e(e)}finally{s.f()}var d,c=Rn(a.data.getAudioTracks());try{for(c.s();!(d=c.n()).done;){var u=d.value;o(u)}}catch(e){c.e(e)}finally{c.f()}}var h={};if(w.g.isTypeof(a.userMediaStreamId,\"string\")?(h.userMediaStop=function(e){if(e.detail.userMediaStreamId===a.userMediaStreamId){var t={streamId:a.streamId,userMediaStreamId:a.userMediaStreamId};A.get(Un(a)).emit(\"stopped\",t);var i=Gn.get(Un(a));if(i)for(var n in i)apiRTC.removeEventListener(n,i[n])}},h.localStreamUpdated=function(e){if(e.detail.userMediaStreamId===a.userMediaStreamId&&null===e.detail.callId){if(e.detail.changeList.indexOf(\"audioIsMuted\")>=0){var t={streamId:a.streamId,userMediaStreamId:a.userMediaStreamId,type:\"audio\",muted:e.detail.audioIsMuted};A.get(Un(a)).emit(\"muteStateChange\",t),a.sendAudioFlowStatusChanged()}if(e.detail.changeList.indexOf(\"videoIsMuted\")>=0){var i={streamId:a.streamId,userMediaStreamId:a.userMediaStreamId,type:\"video\",muted:e.detail.videoIsMuted};A.get(Un(a)).emit(\"muteStateChange\",i),a.sendVideoFlowStatusChanged()}e.detail.changeList.indexOf(\"audioIsSilent\")>=0&&a.sendAudioFlowStatusChanged(),e.detail.changeList.indexOf(\"videoIsSilent\")>=0&&a.sendVideoFlowStatusChanged()}},h.backgroundSubstractionStopVisibilityChange=function(e){if(e.detail.userMediaStreamId===a.userMediaStreamId){var t={streamId:a.streamId,userMediaStreamId:a.userMediaStreamId};A.get(Un(a)).emit(\"backgroundSubstractionStopVisibilityChange\",t)}},h.backgroundSubstractionStopComputeTime=function(e){if(e.detail.userMediaStreamId===a.userMediaStreamId){var t={streamId:a.streamId,userMediaStreamId:a.userMediaStreamId};A.get(Un(a)).emit(\"backgroundSubstractionStopComputeTime\",t)}},h.AIESnapshot=function(e){if(e.detail.userMediaStreamId===a.userMediaStreamId){var t=e.detail.image;A.get(Un(a)).emit(\"AIESnapshot\",t)}},h.AIELog=function(e){if(e.detail.userMediaStreamId===a.userMediaStreamId){var t=e.detail.log;A.get(Un(a)).emit(\"AIELog\",t)}}):w.g.isTypeof(a.callId,\"string\")&&(h.hangup=function(e){if(\"remote\"===e.detail.hangupType&&e.detail.callId===a.callId){var t={streamId:a.streamId,callId:a.callId};A.get(Un(a)).emit(\"stopped\",t);var i=Gn.get(Un(a));for(var n in i)apiRTC.removeEventListener(n,i[n])}},h.remoteStreamUpdated=function(e){if(e.detail.callId===a.callId){if(e.detail.changeList.indexOf(\"audioIsActive\")>=0){a.callAudioActive=e.detail.audioIsActive;var t={streamId:a.streamId,callId:a.callId,type:\"audio\",active:e.detail.audioIsActive};A.get(Un(a)).emit(\"activeStateChange\",t)}if(e.detail.changeList.indexOf(\"audioIsMuted\")>=0){a.callAudioMuted=e.detail.audioIsMuted;var i={streamId:a.streamId,callId:a.callId,type:\"audio\",muted:e.detail.audioIsMuted};A.get(Un(a)).emit(\"muteStateChange\",i),a.sendRemoteAudioFlowStatusChanged({enabled:e.detail.audioIsMuted,muted:e.detail.audioIsSilent})}if(e.detail.changeList.indexOf(\"videoIsActive\")>=0){a.callVideoActive=e.detail.videoIsActive;var n={streamId:a.streamId,callId:a.callId,type:\"video\",active:e.detail.videoIsActive};A.get(Un(a)).emit(\"activeStateChange\",n)}if(e.detail.changeList.indexOf(\"videoIsMuted\")>=0){a.callVideoMuted=e.detail.videoIsMuted;var r={streamId:a.streamId,callId:a.callId,type:\"video\",muted:e.detail.videoIsMuted};A.get(Un(a)).emit(\"muteStateChange\",r),a.sendRemoteVideoFlowStatusChanged({enabled:e.detail.videoIsMuted,muted:e.detail.videoIsSilent})}e.detail.changeList.indexOf(\"audioIsSilent\")>=0&&(a.callAudioSilent=e.detail.audioIsSilent,a.sendRemoteAudioFlowStatusChanged({enabled:e.detail.audioIsMuted,muted:e.detail.audioIsSilent})),e.detail.changeList.indexOf(\"videoIsSilent\")>=0&&(a.callVideoSilent=e.detail.videoIsSilent,a.sendRemoteVideoFlowStatusChanged({enabled:e.detail.videoIsMuted,muted:e.detail.videoIsSilent})),e.detail.changeList.indexOf(\"audioIsSilentLocally\")>=0&&a.sendAudioFlowStatusChanged(),e.detail.changeList.indexOf(\"videoIsSilentLocally\")>=0&&a.sendVideoFlowStatusChanged()}}),Object.keys(h).length>0)for(var p in Gn.set(Un(a),h),h)apiRTC.addEventListener(p,h[p]);return a}return An(i,[{key:\"getContact\",value:function(){return this.contact}},{key:\"getData\",value:function(){return this.data}},{key:\"getConversations\",value:function(){var e,t=[],i=Rn(this.publishedInConversations.keys());try{for(i.s();!(e=i.n()).done;){var a=e.value;t.push(xn.getConversations(a))}}catch(e){i.e(e)}finally{i.f()}return t}},{key:\"isScreensharing\",value:function(){return Fn.get(this)}},{key:\"hasData\",value:function(){return null!==this.data}},{key:\"hasVideo\",value:function(){return this.callId?this.callVideoAvailable&&this.callVideoActive:!!this.hasData()&&this.data.getVideoTracks().length>0}},{key:\"hasAudio\",value:function(){return this.callId?this.callAudioAvailable&&this.callAudioActive:!!this.hasData()&&this.data.getAudioTracks().length>0}},{key:\"isVideoMuted\",value:function(){if(this.callId)return this.callVideoMuted;if(this.hasData()){var e=this.data.getVideoTracks();return e&&e.length>0&&!e[0].enabled}return!1}},{key:\"isAudioMuted\",value:function(){if(this.callId)return this.callAudioMuted;if(this.hasData()){var e=this.data.getAudioTracks();return e&&e.length>0&&!e[0].enabled}return!1}},{key:\"getType\",value:function(){return this.type}},{key:\"release\",value:function(){this.hasData()&&(this.releaseAudio(),this.releaseVideo(),this.data=null,this.userMediaStreamId&&(apiCC.releaseUserMediaStream(this.userMediaStreamId),Vn.delete(this.userMediaStreamId)))}},{key:\"releaseAudio\",value:function(){var e=this;this.hasData()&&(this.disableAudioAnalysis(),this.data.getAudioTracks().forEach((function(t){t.stop(),qn.hasOwnProperty(t.id)||(A.get(e).emit(\"trackStopped\",{type:t.kind,id:t.id}),qn[t.id]=!0)})))}},{key:\"releaseVideo\",value:function(){var e=this;this.hasData()&&this.data.getVideoTracks().forEach((function(t){t.stop(),qn.hasOwnProperty(t.id)||(A.get(e).emit(\"trackStopped\",{type:t.kind,id:t.id}),qn[t.id]=!0)}))}},{key:\"muteAudio\",value:function(){Pn.warn(\"This method is deprecated now, please use Stream.disableAudio() instead\"),this.disableAudio()}},{key:\"muteVideo\",value:function(){Pn.warn(\"This method is deprecated now, please use Stream.disableVideo() instead\"),this.disableVideo()}},{key:\"unmuteAudio\",value:function(){Pn.warn(\"This method is deprecated now, please use Stream.enableAudio() instead\"),this.enableAudio()}},{key:\"unmuteVideo\",value:function(){Pn.warn(\"This method is deprecated now, please use Stream.enableVideo() instead\"),this.enableVideo()}},{key:\"enableAudio\",value:function(){if(this.userMediaStreamId){var e=apiCC.getUserMediaStream(this.userMediaStreamId);e&&e.unMuteAudioOnStreams(\"enabled\")}else this.callId&&this.hasData()&&(this.data.getAudioTracks().forEach((function(e){e.enabled=!0})),this.sendAudioFlowStatusChanged())}},{key:\"disableAudio\",value:function(){if(this.userMediaStreamId){var e=apiCC.getUserMediaStream(this.userMediaStreamId);e&&e.muteAudioOnStreams(\"enabled\")}else this.callId&&this.hasData()&&(this.data.getAudioTracks().forEach((function(e){e.enabled=!1})),this.sendAudioFlowStatusChanged())}},{key:\"enableVideo\",value:function(){if(this.userMediaStreamId){var e=apiCC.getUserMediaStream(this.userMediaStreamId);e&&e.unMuteVideoOnStreams(\"enabled\")}else this.callId&&this.hasData()&&(this.data.getVideoTracks().forEach((function(e){e.enabled=!0})),this.sendVideoFlowStatusChanged(\"enabled\"))}},{key:\"disableVideo\",value:function(){if(this.userMediaStreamId){var e=apiCC.getUserMediaStream(this.userMediaStreamId);e&&e.muteVideoOnStreams(\"enabled\")}else this.callId&&this.hasData()&&(this.data.getVideoTracks().forEach((function(e){e.enabled=!1})),this.sendVideoFlowStatusChanged())}},{key:\"getAudioFlowStatus\",value:function(){var e={};return this.data.getAudioTracks().forEach((function(t){e.enabled=t.enabled,e.muted=t.muted})),e}},{key:\"getVideoFlowStatus\",value:function(){var e={};return this.data.getVideoTracks().forEach((function(t){e.enabled=t.enabled,e.muted=t.muted})),e}},{key:\"getRemoteAudioFlowStatus\",value:function(){var e=this;return new Promise((function(t,i){if(!e.isRemote)return i(\"Please use this function on a remote Stream\");if(Pn.debug(\"getRemoteAudioFlowStatus()\"),null===e.contact)return i(\"No contact associated\");var n=e.addPendingPromise(\"getRemoteAudioFlowStatus\",t,i);e.contact.sendCustomEvent(a.g.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER,{requesterId:bn.getActiveSession().getUserAgent().userId,callId:e.callId,streamId:e.getId(),timeout:n})}))}},{key:\"getRemoteVideoFlowStatus\",value:function(){var e=this;return new Promise((function(t,i){if(!e.isRemote)return i(\"Please use this function on a remote Stream\");if(Pn.debug(\"getRemoteVideoFlowStatus()\"),null===e.contact)return i(\"No contact associated\");var n=e.addPendingPromise(\"getRemoteVideoFlowStatus\",t,i);e.contact.sendCustomEvent(a.g.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER,{requesterId:bn.getActiveSession().getUserAgent().userId,callId:e.callId,streamId:e.getId(),timeout:n})}))}},{key:\"attachToElement\",value:function(e){Pn.debug(\"attachToElement\"),Ln.attachMediaStream(e,this.data)}},{key:\"addInDiv\",value:function(e,t,i,a,n){Pn.debug(\"addInDiv\"),Ln.addStreamInDiv(this.data,this.type,e,t,i,a,n)}},{key:\"removeFromDiv\",value:function(e,t){Pn.debug(\"removeFromDiv\"),Ln.removeElementFromDiv(e,t)}},{key:\"startRecord\",value:function(e){return Pn.info(\"startRecord :\",e),apiCC.recordMgr.record(this.data,e)}},{key:\"stopRecord\",value:function(){return Pn.info(\"stopRecord() - Stopping record\"),apiCC.recordMgr.stop()}},{key:\"pauseRecord\",value:function(){return Pn.info(\"pauseRecord() - Pausing record\"),apiCC.recordMgr.pause()}},{key:\"resumeRecord\",value:function(){return Pn.info(\"resumeRecord() - Resuming record\"),apiCC.recordMgr.resume()}},{key:\"enableAudioAnalysis\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Pn.info(\"enableAudioAnalysis()\");var i=w.g.getAudioContext(),n=null,r=!1,o=Bn.get(this),s=jn.get(this);i?this.hasData()?null!==o||null!==s?Pn.error(\"enableAudioAnalysis() - Audio analysis already enabled\"):(o=i.createMediaStreamSource(this.data),(s=i.createScriptProcessor(2048,1,1)).connect(i.destination),s.onaudioprocess=function(){var i,o=new Uint8Array(s.analyser.frequencyBinCount),l=0;s.analyser.getByteFrequencyData(o);var d,c=Rn(o);try{for(c.s();!(d=c.n()).done;)l+=d.value}catch(e){c.e(e)}finally{c.f()}i=l/o.length,A.get(e).emit(\"audioAmplitude\",i);var u=0;o.sort((function(e,t){return t-e})),o=o.slice(0,50);for(var h=0;h<o.length;h++)u+=o[h];i=u/o.length;var p=\"number\"==typeof t.threshold?t.threshold:a.g.STREAM_AUDIO_ANALYSIS_THRESHOLD;i>p&&(r||(r=!0,A.get(e).emit(\"audioAmplitudeInfo\",{amplitude:i,isSpeaking:!0})),null!==n&&clearTimeout(n),n=setTimeout((function(){A.get(e).emit(\"audioAmplitudeInfo\",{amplitude:i,isSpeaking:!1}),r=!1}),1e3))},s.analyser=i.createAnalyser(),s.analyser.smoothingTimeConstant=.5,s.analyser.fftSize=1024,o.connect(s.analyser),s.analyser.connect(s),jn.set(this,s),Bn.set(this,o)):Pn.error(\"enableAudioAnalysis() - Stream has no data, unable to enable audio analysis\"):Pn.error(\"enableAudioAnalysis() - AudioContext is not available, unable to enable audio analysis\")}},{key:\"disableAudioAnalysis\",value:function(){Pn.info(\"disableAudioAnalysis()\");var e=Bn.get(this),t=jn.get(this);null!==e&&e.disconnect(),null!==t&&(t.analyser.disconnect(),t.disconnect()),jn.set(this,null),Bn.set(this,null)}},{key:\"takeSnapshot\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Pn.info(\"takeSnapshot()\");var i=null,a=null;return new Promise((function(n,r){if(e.hasData()){e.hasVideo()||Pn.warn(\"takeSnapshot() - This stream does not have a video track\"),i=document.createElement(\"video\"),a=function(e){if(o.width=i.videoWidth,o.height=i.videoHeight,t.hasOwnProperty(\"width\")&&(o.width=t.width),t.hasOwnProperty(\"height\")&&(o.height=t.height),t.hasOwnProperty(\"filters\")){for(var a=[],r=0,l=Object.keys(t.filters);r<l.length;r++){var d=l[r];a.push(d+\"(\"+t.filters[d]+\")\")}s.filter=a.join(\" \")}s.drawImage(i,0,0,o.width,o.height),!0===e&&i.remove(),t.hasOwnProperty(\"output\")&&\"blob\"===t.output?void 0!==t.outputMimeType?(Pn.debug(\"options.outputMimeType is defined :\",t.outputMimeType),o.toBlob((function(e){n(e)}),t.outputMimeType,t.outputQualityArgument)):o.toBlob((function(e){n(e)}),\"image/png\"):void 0!==t.outputMimeType?(Pn.debug(\"options.outputMimeType is defined :\",t.outputMimeType),n(o.toDataURL(t.outputMimeType,t.outputQualityArgument))):n(o.toDataURL(\"image/png\"))};var o=document.createElement(\"canvas\"),s=o.getContext(\"2d\");void 0===t.divId||null===t.divId?setTimeout((function(){e.attachToElement(i),i.addEventListener(\"canplay\",(function(){a(!0)})),i.muted=!0,i.play()}),1e3):null===(i=document.getElementById(t.divId))?Pn.error(\"divId not found for snapshot\"):a(!1)}else{var l=\"takeSnapshot() - Stream has no data, cannot get snapshot\";Pn.error(l),r(new Error(l))}}))}},{key:\"getId\",value:function(){return String(this.streamId)}},{key:\"getOwner\",value:function(){return this.contact?this.contact:bn.getActiveSession().getUserAgent()}},{key:\"getLabels\",value:function(){var e={};return this.hasData()&&this.data.getAudioTracks().length>0&&(e.audioSourceLabel=\"\",this.data.getAudioTracks()[0].label&&(e.audioSourceLabel=this.data.getAudioTracks()[0].label)),this.hasData()&&this.data.getVideoTracks().length>0&&(e.videoSourceLabel=\"\",this.data.getVideoTracks()[0].label&&(e.videoSourceLabel=this.data.getVideoTracks()[0].label)),Pn.debug(\"getLabels:\",e),e}},{key:\"checkImageCaptureCompatibility\",value:function(){return\"undefined\"==typeof ImageCapture}},{key:\"getLocalMediaStreamTrack\",value:function(){var e=null;return 1===this.data.getVideoTracks().length&&(e=this.data.getVideoTracks()[0]),e}},{key:\"getLocalMediaStreamAudioTrack\",value:function(){var e=null;return 1===this.data.getAudioTracks().length&&(e=this.data.getAudioTracks()[0]),e}},{key:\"applyConstraints\",value:function(e){var t=this;return new Promise((function(i,n){if(t.isRemote){if(Pn.debug(\"applyConstraints() on a remote stream\"),null===t.contact)return n(\"No contact associated\");var r=t.addPendingPromise(\"applyConstraints\",i,n);t.contact.sendCustomEvent(a.g.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER,{requesterId:bn.getActiveSession().getUserAgent().userId,callId:t.callId,streamId:t.getId(),timeout:r,constraints:e})}else{if(Pn.debug(\"applyConstraints()\"),!MediaStreamTrack.prototype.hasOwnProperty(\"applyConstraints\"))return n(\"Navigator not compatible with this function\");var o=null,s=null;if(void 0===e)return n(\"Missing argument\");void 0!==e.audio&&(o=t.getLocalMediaStreamAudioTrack().applyConstraints(e.audio).catch((function(e){return n(e)}))),void 0!==e.video&&(s=t.getLocalMediaStreamTrack().applyConstraints(e.video).catch((function(e){return n(e)}))),Promise.all([o,s]).then((function(e){return null!==e[0]&&Pn.debug(\"audio constraints applied\"),null!==e[1]&&Pn.debug(\"video constraints applied\"),i()}))}}))}},{key:\"applyConstraint\",value:function(e,t){Pn.error(\"Due to a certain amount of problems with this function it has been desactivated, please use Stream.applyConstraints instead\")}},{key:\"setCapability\",value:function(e,t){Pn.error(\"Due to a certain amount of problems with this function it has been desactivated, please use Stream.applyConstraints instead\")}},{key:\"getSettings\",value:function(){var e=this;return new Promise((function(t,i){if(!e.isRemote)return Pn.debug(\"getSettings()\"),MediaStreamTrack.prototype.hasOwnProperty(\"getSettings\")?t({audio:e.getStreamTrackSettings(e.getLocalMediaStreamAudioTrack()),video:e.getStreamTrackSettings(e.getLocalMediaStreamTrack())}):i(\"Navigator not compatible with this function\");if(Pn.debug(\"getSettings() on a remote stream\"),null===e.contact)return i(\"No contact associated\");var n=e.addPendingPromise(\"getSettings\",t,i);e.contact.sendCustomEvent(a.g.CONTACT_GET_SETTINGS_IDENTIFIER,{requesterId:bn.getActiveSession().getUserAgent().userId,callId:e.callId,streamId:e.getId(),timeout:n})}))}},{key:\"getStreamTrackSettings\",value:function(e){if(null!==e)return e.getSettings()}},{key:\"getCapabilities\",value:function(){var e=this;return new Promise((function(t,i){if(!e.isRemote)return Pn.debug(\"getCapabilities()\"),MediaStreamTrack.prototype.hasOwnProperty(\"getCapabilities\")?t({audio:e.getStreamTrackCapabilities(e.getLocalMediaStreamAudioTrack()),video:e.getStreamTrackCapabilities(e.getLocalMediaStreamTrack())}):i(\"Navigator not compatible with this function\");if(Pn.debug(\"getCapabilities() on a remote stream\"),null===e.contact)return i(\"No contact associated\");var n=e.addPendingPromise(\"getCapabilities\",t,i);e.contact.sendCustomEvent(a.g.CONTACT_GET_CAPABILITIES_IDENTIFIER,{requesterId:bn.getActiveSession().getUserAgent().userId,callId:e.callId,streamId:e.getId(),timeout:n})}))}},{key:\"getStreamTrackCapabilities\",value:function(e){return null!==e?e.getCapabilities():{}}},{key:\"getConstraints\",value:function(){var e=this;return new Promise((function(t,i){if(!e.isRemote)return Pn.debug(\"getConstraints()\"),MediaStreamTrack.prototype.hasOwnProperty(\"getConstraints\")?t({audio:e.getStreamTrackConstraints(e.getLocalMediaStreamAudioTrack()),video:e.getStreamTrackConstraints(e.getLocalMediaStreamTrack())}):i(\"Navigator not compatible with this function\");if(Pn.debug(\"getConstraints() on a remote stream\"),null===e.contact)return i(\"No contact associated\");var n=e.addPendingPromise(\"getConstraints\",t,i);e.contact.sendCustomEvent(a.g.CONTACT_GET_CONSTRAINTS_IDENTIFIER,{requesterId:bn.getActiveSession().getUserAgent().userId,callId:e.callId,streamId:e.getId(),timeout:n})}))}},{key:\"getStreamTrackConstraints\",value:function(e){return null!==e?e.getConstraints():{}}},{key:\"takePhoto\",value:function(){var e=this;return new Promise((function(t,i){if(Pn.debug(\"takePhoto()\"),e.checkImageCaptureCompatibility())i(\"Your navigator is not compatible with takePhoto()\");else{var a=e.getLocalMediaStreamTrack();null!==a?new ImageCapture(a).takePhoto().then((function(e){var i=new Image;i.src=URL.createObjectURL(e),t(i)})).catch((function(e){i(\"takePhoto() error: \",e)})):i(\"No local mediaStreamTrack found\")}}))}},{key:\"activateAIAnnotations\",value:function(){var e=this.getStreamAIE();null!==e&&e.activateAnnotations()}},{key:\"stopAIAnnotations\",value:function(){var e=this.getStreamAIE();null!==e&&e.stopAnnotations()}},{key:\"activateAILogs\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(\"number\"!=typeof e)return Pn.error(\"minLogPeriod parameter must be an integer\");var t=this.getStreamAIE();null!==t&&t.activateLogs(e)}},{key:\"stopAILogs\",value:function(){var e=this.getStreamAIE();null!==e&&e.stopLogs()}},{key:\"activateAISnapshots\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(\"number\"!=typeof e)return Pn.error(\"minSnapshotPeriod parameter must be an integer\");var t=this.getStreamAIE();null!==t&&t.activateSnapshots(e)}},{key:\"stopAISnapshots\",value:function(){var e=this.getStreamAIE();null!==e&&e.stopSnapshots()}},{key:\"getStreamAIE\",value:function(){var e=null;if(void 0!==apiCC){var t=apiCC.getUserMediaStream(this.userMediaStreamId);if(null!==t.mediaFilterManager){var i=t.mediaFilterManager.filters;Object.values(i).forEach((function(t){null!==t.streamAIE&&(e=t.streamAIE)})),null===e&&Pn.error(\"Applied filter is not an AI filter\")}else Pn.error(\"No filter applied on stream\")}return e}},{key:\"addChildren\",value:function(e,t){this.childrenTypeExists(t)?Pn.error(\"This stream already has a sub instance running for this\"):(void 0===this.childrens&&(this.childrens=[]),this.childrens.push(e))}},{key:\"releaseChildren\",value:function(e){void 0!==this.childrens&&this.childrens.forEach((function(t,i){t.childType===e&&t.hasOwnProperty(\"release\")&&t.release()}))}},{key:\"removeChildren\",value:function(e){var t=this;void 0!==this.childrens&&this.childrens.forEach((function(i,a){if(i.childType===e)return t.childrens.splice(a,1)}))}},{key:\"childrenTypeExists\",value:function(e){var t=!1;return void 0!==this.childrens&&this.childrens.forEach((function(i){i.childType===e&&(t=!0)})),t}},{key:\"createChildStreamFromStream\",value:function(e,t){var i=this;return new Promise((function(n,r){Pn.debug(\"createChildStreamFromStream\");var o={};o.type=a.g.STREAM_TYPE_NO_INPUT,e.getAudioTracks().length>0&&(o.type=a.g.STREAM_TYPE_AUDIO),e.getVideoTracks().length>0&&(o.type=a.g.STREAM_TYPE_VIDEO);var s=i;apiRTC.createUserMediaStream({type:\"media\",stream:e,success:function(e){Pn.debug(\"[createChildStreamFromStream] success; userMediaStreamId: \"+e.userMediaStreamId),o.constructor=!0,o.userMediaStreamId=e.userMediaStreamId,n(new Jn(e.stream,o,s,t))},failure:function(e,t){Pn.debug(\"[createChildStreamFromStream] failure :\",t),r()}})}))}},{key:\"loadBlurAPI\",value:function(){return new Promise((function(e,t){var i={async:!0,numRetries:20,reqdelay:200,success:function(){Pn.debug(\"Blur API loaded\"),e()},error:function(e){t(\"Resources loading failed, depsNotFound: \"+e)},retrycb:function(e,t){Pn.warn(\"Blur API model loading retry :\"+e+\" ,delay before retry :\"+t)}};apiCC.resourcesLoader.loadjs([\"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/selfie_segmentation.js\"],\"blur-api\",i)}))}},{key:\"processBlur\",value:function(e,t){t.blurVariables.canvasSegmentedCtx.save(),t.blurVariables.canvasBlurredCtx.save(),t.blurVariables.finalCanvasCtx.save(),t.blurVariables.canvasSegmentedCtx.clearRect(0,0,t.blurVariables.width,t.blurVariables.height),t.blurVariables.canvasBlurredCtx.clearRect(0,0,t.blurVariables.width,t.blurVariables.height),t.blurVariables.finalCanvasCtx.clearRect(0,0,t.blurVariables.width,t.blurVariables.height),t.blurVariables.canvasBlurredCtx.drawImage(e.image,0,0,t.blurVariables.width,t.blurVariables.height),t.blurVariables.canvasSegmentedCtx.drawImage(e.image,0,0,t.blurVariables.width,t.blurVariables.height),t.blurVariables.canvasSegmentedCtx.globalCompositeOperation=\"destination-atop\",t.blurVariables.canvasSegmentedCtx.drawImage(e.segmentationMask,0,0,t.blurVariables.width,t.blurVariables.height),t.blurVariables.finalCanvasCtx.drawImage(t.blurVariables.canvasBlurred,0,0,t.blurVariables.width,t.blurVariables.height),t.blurVariables.finalCanvasCtx.drawImage(t.blurVariables.canvasSegmented,0,0,t.blurVariables.width,t.blurVariables.height),t.blurVariables.canvasSegmentedCtx.restore(),t.blurVariables.canvasBlurredCtx.restore(),t.blurVariables.finalCanvasCtx.restore()}},{key:\"startBlur\",value:function(){var e=this;return new Promise((function(t,i){Pn.debug(\"startBlur\"),e.blurVariables={},e.blurVariables.stopBlur=!1;var a=e.data.getVideoTracks();if(1===a.length){var n=a[0].getSettings();e.blurVariables.height=n.height,e.blurVariables.width=n.width}e.blurVariables.srcVideoElement=document.createElement(\"video\"),e.blurVariables.srcVideoElement.srcObject=e.data,e.blurVariables.srcVideoElement.height=e.blurVariables.height,e.blurVariables.srcVideoElement.width=e.blurVariables.width,e.blurVariables.srcVideoElement.play(),e.blurVariables.canvasSegmented=document.createElement(\"canvas\"),e.blurVariables.canvasSegmentedCtx=e.blurVariables.canvasSegmented.getContext(\"2d\"),e.blurVariables.canvasSegmented.height=e.blurVariables.height,e.blurVariables.canvasSegmented.width=e.blurVariables.width,e.blurVariables.canvasBlurred=document.createElement(\"canvas\"),e.blurVariables.canvasBlurredCtx=e.blurVariables.canvasBlurred.getContext(\"2d\"),e.blurVariables.canvasBlurred.height=e.blurVariables.height,e.blurVariables.canvasBlurred.width=e.blurVariables.width,e.blurVariables.canvasBlurredCtx.filter=\"blur(15px)\",e.blurVariables.finalCanvas=document.createElement(\"canvas\"),e.blurVariables.finalCanvasCtx=e.blurVariables.finalCanvas.getContext(\"2d\"),e.blurVariables.finalCanvas.height=e.blurVariables.height,e.blurVariables.finalCanvas.width=e.blurVariables.width;var r=e;e.loadBlurAPI().then((function(){r.blurVariables.selfieSegmentation=new SelfieSegmentation({locateFile:function(e){return\"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/\".concat(e)}}),r.blurVariables.selfieSegmentation.setOptions({selfieMode:!1,modelSelection:1,effect:\"background\"}),r.blurVariables.selfieSegmentation.onResults((function(e){r.processBlur(e,r)})),r.blurVariables.srcVideoElement.requestVideoFrameCallback((function e(){return new Promise((function(t,i){r.blurVariables.stopBlur||r.blurVariables.selfieSegmentation.send({image:r.blurVariables.srcVideoElement}).then((function(){r.blurVariables.srcVideoElement.requestVideoFrameCallback(e),t()})).catch((function(e){i(e)}))}))})),t(r.blurVariables.finalCanvas.captureStream())}))}))}},{key:\"stopBlur\",value:function(){Pn.debug(\"stopBlur\"),this.blurVariables.stopBlur=!0,this.blurVariables.selfieSegmentation.close()}},{key:\"blur\",value:function(){var e=this;return new Promise((function(t,i){if(!(\"requestVideoFrameCallback\"in HTMLVideoElement.prototype))return i(\"Your navigator is not compatible with this function\");if(e.childrenTypeExists(\"blur\"))return i(\"This stream already has a sub instance running for this\");var a=e;e.startBlur().then((function(i){var n,r=Rn(a.data.getAudioTracks());try{for(r.s();!(n=r.n()).done;){var o=n.value;i.addTrack(o)}}catch(e){r.e(e)}finally{r.f()}a.createChildStreamFromStream(i,\"blur\").then((function(i){e.addChildren(i,\"blur\"),t(i)}))}))}))}},{key:\"unblur\",value:function(){this.childrenTypeExists(\"blur\")?(this.stopBlur(),this.releaseChildren(\"blur\"),this.removeChildren(\"blur\")):Pn.error(\"No blurred instance found for this stream\")}},{key:\"createMediaStreamTrackProcessor\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(Pn.debug(\"mediaStreamTrackProcessor kind: \".concat(e?\"audio\":\"video\",\" created\")),e){var t=this.data.getAudioTracks();if(t.length)return new MediaStreamTrackProcessor({track:t[0]});throw new Error(\"No audio tracks found\")}var i=this.data.getVideoTracks();if(i.length)return new MediaStreamTrackProcessor({track:i[0]});throw new Error(\"No video tracks found\")}},{key:\"createMediaStreamTrackGenerator\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Pn.debug(\"mediaStreamTrackGenerator kind: \".concat(e?\"audio\":\"video\",\" created\")),e?new MediaStreamTrackGenerator({kind:\"audio\"}):new MediaStreamTrackGenerator({kind:\"video\"})}},{key:\"loadSegmentationAPI\",value:function(){return new Promise((function(e,t){var i={async:!0,numRetries:20,reqdelay:200,success:function(){Pn.debug(\"Segmentation API loaded\"),mergeReality.then(e)},error:function(e){t(\"Resources loading failed, depsNotFound: \"+e)},retrycb:function(e,t){Pn.warn(\"Blur API model loading retry :\"+e+\" ,delay before retry :\"+t)}};apiCC.resourcesLoader.loadjs([\"http://dev.cdn.apizee.com/apiRTC/lib/mergereality/v1.0/merge_reality.js\"],\"merge-reality\",i)}))}},{key:\"startMergeReality\",value:function(e){var t=this;this.mergeRealityData={},this.mergeRealityLib=e,this.mergeRealityData.stop=!1,this.mergeRealityData.WIDTH=this.getSettings().width,this.mergeRealityData.HEIGHT=this.getSettings().height,this.mergeRealityData.WEBCAM_CANVAS=new OffscreenCanvas(this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WEBCAM_CTX=this.mergeRealityData.WEBCAM_CANVAS.getContext(\"2d\",{alpha:!1}),this.mergeRealityData.MASK_CANVAS=new OffscreenCanvas(this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.MASK_CTX=this.mergeRealityData.MASK_CANVAS.getContext(\"2d\",{alpha:!0}),this.mergeRealityData.SCREEN_VIDEO=document.createElement(\"video\"),this.mergeRealityData.BG_SUB=new this.mergeRealityLib.BackgroundSubtractor,this.mergeRealityData.background=new this.mergeRealityLib.BackgroundImage(this.mergeRealityData.WEBCAM_CTX.getImageData(0,0,this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.MSTP=this.createMediaStreamTrackProcessor().readable,this.mergeRealityData.MSTG=this.createMediaStreamTrackGenerator(),this.mergeRealityData.SINK=this.mergeRealityData.MSTG.writable,this.mergeRealityData.MASK_TRANSFORMER=new TransformStream({transform:function(e,i){t.mergeRealityData.stop||(t.mergeRealityData.MASK_CTX.save(),t.mergeRealityData.MASK_CTX.clearRect(0,0,t.mergeRealityData.WIDTH,t.mergeRealityData.HEIGHT),t.mergeRealityData.WEBCAM_CTX.clearRect(0,0,t.mergeRealityData.WIDTH,t.mergeRealityData.HEIGHT),t.mergeRealityData.WEBCAM_CTX.drawImage(e,0,0),t.mergeRealityData.MASK_DATA=t.mergeRealityData.BG_SUB.computeMask(t.mergeRealityData.WEBCAM_CTX.getImageData(0,0,t.mergeRealityData.WIDTH,t.mergeRealityData.HEIGHT),t.mergeRealityData.background),t.mergeRealityData.RES=t.mergeRealityData.BG_SUB.applyTransparency(t.mergeRealityData.WEBCAM_CTX.getImageData(0,0,t.mergeRealityData.WIDTH,t.mergeRealityData.HEIGHT),t.mergeRealityData.MASK_DATA),t.mergeRealityData.MASK_CTX.putImageData(t.mergeRealityData.RES,0,0),t.mergeRealityData.MASK_CTX.globalCompositeOperation=\"destination-atop\",t.mergeRealityData.MASK_CTX.drawImage(t.mergeRealityData.SCREEN_VIDEO,0,0,t.mergeRealityData.WIDTH,t.mergeRealityData.HEIGHT),t.mergeRealityData.MASK_CTX.restore(),i.enqueue(new VideoFrame(t.mergeRealityData.MASK_CANVAS))),e.close()}}),this.mergeRealityData.RES_MS=new MediaStream}},{key:\"stopMergeReality\",value:function(){this.mergeRealityData.stop=!0}},{key:\"calibrateBackground\",value:function(){this.childrenTypeExists(\"merge\")?this.mergeRealityData.background=new this.mergeRealityLib.BackgroundImage(this.mergeRealityData.WEBCAM_CTX.getImageData(0,0,this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT),this.mergeRealityData.WIDTH,this.mergeRealityData.HEIGHT):Pn.error(\"No merged instance found for this stream\")}},{key:\"mergeReality\",value:function(e){var t=this;return new Promise((function(i,a){return void 0===window.MediaStreamTrackGenerator||void 0===window.MediaStreamTrackProcessor||void 0===window.TransformStream?a(\"Your browser does not support InsertableStreams\"):t.childrenTypeExists(\"merge\")?a(\"This stream already has a sub instance running for this\"):void t.loadSegmentationAPI().then((function(a){t.startMergeReality(a),e.attachToElement(t.mergeRealityData.SCREEN_VIDEO),t.mergeRealityData.SCREEN_VIDEO.autoplay=!0,t.mergeRealityData.MSTP.pipeThrough(t.mergeRealityData.MASK_TRANSFORMER).pipeTo(t.mergeRealityData.SINK),t.mergeRealityData.RES_MS.addTrack(t.mergeRealityData.MSTG);var n,r=Rn(t.data.getAudioTracks());try{for(r.s();!(n=r.n()).done;){var o=n.value;t.mergeRealityData.RES_MS.addTrack(o)}}catch(e){r.e(e)}finally{r.f()}var s=t;t.createChildStreamFromStream(t.mergeRealityData.RES_MS,\"merge\").then((function(e){s.addChildren(e,\"merge\"),i(e)}))}))}))}},{key:\"unmergeReality\",value:function(){this.childrenTypeExists(\"merge\")?(this.stopMergeReality(),this.releaseChildren(\"merge\"),this.removeChildren(\"merge\")):Pn.error(\"No merged instance found for this stream\")}},{key:\"addPendingPromise\",value:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3,n=function(){i(\"Timeout problem during \".concat(e,\" process on a remote stream\"))},r=setTimeout(n,a);return this.promises.push({timeout:r,resolve:t,reject:i}),r}},{key:\"resolvePendingPromise\",value:function(e,t){this.promises.forEach((function(i){e===i.timeout&&(clearTimeout(e),i.resolve(t))}))}},{key:\"rejectPendingPromise\",value:function(e,t){this.promises.forEach((function(i){e===i.timeout&&(clearTimeout(e),i.reject(t))}))}},{key:\"sendAudioFlowStatusChanged\",value:function(){var e=this.getAudioFlowStatus();A.get(this).emit(\"audioFlowStatusChanged\",e)}},{key:\"sendVideoFlowStatusChanged\",value:function(){var e=this.getVideoFlowStatus();A.get(this).emit(\"videoFlowStatusChanged\",e)}},{key:\"sendRemoteAudioFlowStatusChanged\",value:function(e){e.enabled=!e.enabled,A.get(this).emit(\"remoteAudioFlowStatusChanged\",e)}},{key:\"sendRemoteVideoFlowStatusChanged\",value:function(e){e.enabled=!e.enabled,A.get(this).emit(\"remoteVideoFlowStatusChanged\",e)}}],[{key:\"getAvailableEvents\",value:function(){return Wn}},{key:\"createStreamFromUserMedia\",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Pn.debug(\"createStreamFromUserMedia\"),Pn.debug(\"audioInput :\",e),Pn.debug(\"videoInput :\",t),Pn.debug(\"constraints :\",n),Pn.debug(\"options :\",r),new Promise((function(o,s){var l=!1!==e&&(null!==e||n&&n.hasOwnProperty(\"audio\")),d=!1!==t&&(null!==t||n&&n.hasOwnProperty(\"video\")),c={type:a.g.STREAM_TYPE_NO_INPUT,audioInput:e,videoInput:t},u=\"media\";d?c.type=a.g.STREAM_TYPE_VIDEO:l&&(c.type=a.g.STREAM_TYPE_AUDIO),l&&!d?u=\"audio\":!l&&d&&(u=\"videoOnly\"),l&&!0===r.enhancedAudioActivated&&(Pn.debug(\"Enhanced Audio is activated\"),\"Chrome\"!==apiRTC.browser?Pn.debug(\"enhancedAudioActivated option is only available for Chrome\"):(void 0===n&&(n={}),n.audio&&\"object\"===Tn(n.audio)||(n.audio={}),void 0===n.video&&(n.video={}),n.audio.echoCancellation=!1,n.audio.autoGainControl=!1,n.audio.noiseSuppression=!1)),apiRTC.createUserMediaStream({audioSourceId:e,videoSourceId:t,facingMode:r.facingMode,gum_config:n,filters:r.filters,type:u,success:function(e){Pn.debug(\"[createStreamFromUserMedia] success; userMediaStreamId: \"+e.userMediaStreamId),c.constructor=!0,c.userMediaStreamId=e.userMediaStreamId,o(new i(e.stream,c))},failure:function(e,t){Pn.debug(\"[createStreamFromUserMedia] failure :\",t),s(t)}})}))}},{key:\"createStreamFromMediaStream\",value:function(e){return Pn.debug(\"createStreamFromMediaStream\"),new Promise((function(t,n){var r={};r.type=a.g.STREAM_TYPE_NO_INPUT,e.getAudioTracks().length>0&&(r.type=a.g.STREAM_TYPE_AUDIO),e.getVideoTracks().length>0&&(r.type=a.g.STREAM_TYPE_VIDEO),apiRTC.createUserMediaStream({type:\"media\",stream:e,success:function(e){Pn.debug(\"[createStreamFromUserMedia] success; userMediaStreamId: \"+e.userMediaStreamId),r.constructor=!0,r.userMediaStreamId=e.userMediaStreamId,t(new i(e.stream,r))},failure:function(e,t){Pn.debug(\"[createStreamFromUserMedia] failure :\",t),n()}})}))}},{key:\"createScreensharingStream\",value:function(e){return new Promise((function(t,n){apiRTC.createUserMediaStream({type:\"screenSharing\",captureSourceType:e,success:function(e){Pn.debug(\"[createStreamFromUserMedia] success; userMediaStreamId: \"+e.userMediaStreamId);var n=new i(e.stream,{constructor:!0,type:a.g.STREAM_TYPE_VIDEO,userMediaStreamId:e.userMediaStreamId});Fn.set(n,!0),t(n)},failure:function(e,t){Pn.debug(\"[createStreamFromUserMedia] failure :\",t),n(t)}})}))}},{key:\"createDisplayMediaStream\",value:function(e,t){return new Promise((function(n,r){apiRTC.createUserMediaStream({type:\"screenSharing\",captureSourceType:e,displayMediaStreamConstraints:e,forceExtensionOnChrome:t,success:function(e){Pn.debug(\"[createStreamFromUserMedia] success; userMediaStreamId: \"+e.userMediaStreamId);var t=new i(e.stream,{constructor:!0,type:a.g.STREAM_TYPE_VIDEO,userMediaStreamId:e.userMediaStreamId});Fn.set(t,!0),n(t)},failure:function(e,t){Pn.debug(\"[createStreamFromUserMedia] failure :\",t),r(t)}})}))}},{key:\"getLocalStreams\",value:function(){return Vn.values()}},{key:\"getStream\",value:function(e){return null!=e&&Vn.has(e.toString())?Vn.get(e.toString()):null}}]),i}(D),Jn=function(e){On(i,e);var t=kn(i);function i(e,a,n,r){var o;return En(this,i),(o=t.call(this,e,a)).parent=n,o.childType=r,o}return An(i,[{key:\"release\",value:function(){this.parent.stopBlur(),this.parent.removeChildren(this.childType);var e=this.data.getAudioTracks();e.length>0&&this.data.removeTrack(e[0]),In(Nn(i.prototype),\"release\",this).call(this)}}]),i}(Hn);function Yn(e,t){var i=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if(\"string\"==typeof e)return zn(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?zn(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){i&&(e=i);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var r,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw r}}}}function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Xn(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Kn=p.Y.get(\"Session\"),Qn=B.get(),$n=new Kt.Z,Zn=Ji.get(),er=$a.get(),tr=Symbol(\"ENTERPRISE_NOT_LOADED\"),ir=Symbol(\"ENTERPRISE_LOADED\"),ar=new WeakMap,nr=new WeakMap,rr=new WeakMap,or=function(){function e(t,i,a){if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),Kn.info(\"Create Enterprise\"),!(a instanceof bn))throw\"Cannot create Enterprise without a session\";ar.set(this,a),rr.set(this,i),nr.set(this,t),this.status=tr}var t,i,n;return t=e,i=[{key:\"getSession\",value:function(){return ar.get(this)}},{key:\"getId\",value:function(){return nr.get(this).toString()}},{key:\"getApiKey\",value:function(){return rr.get(this).toString()}},{key:\"load\",value:function(){var e=this;return new Promise((function(t,i){$n.getEnterpriseUserList(e.getId(),e.getSession().getToken()).then((function(i){Kn.info(\"Enterprise loaded!\",i);var a,n=Yn(i.users);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(e.getSession().user.userId.toString()!==r.id.toString()){var o=Zn.getOrCreateContact(r.id);o.profile=r,o.enterprise=e,null===o.userData.get(\"username\")&&o.userData.setProp(\"username\",r.username),null===o.userData.get(\"photo_url\")&&o.userData.setProp(\"photo_url\",r.photo_url)}}}catch(e){n.e(e)}finally{n.f()}e.status=ir,t()})).catch((function(e){var t=\"load() - Enterprise load error\",n={error:new Error(t),code:a.g.ERROR_OTHER};e.hasOwnProperty(\"code\")?n.code=e.code:e.hasOwnProperty(\"http_code\")&&(e.http_code.toString().startsWith(\"4\")?n.code=a.g.ERROR_INVALID_CREDENTIALS:n.code=a.g.ERROR_SERVER_UNAVAILABLE),Kn.error(t,e),i(n)}))}))}},{key:\"getContacts\",value:function(){var e={};if(this.status!==ir)Kn.error(\"Enterprise is not loaded, unable to getContacts\");else{var t,i=Zn.getContacts(),a=Yn(i.keys());try{for(a.s();!(t=a.n()).done;){var n=t.value,r=i.get(n);null!==r.enterprise&&r.enterprise.id.toString()===this.getId()&&(e[r.getId()]=r)}}catch(e){a.e(e)}finally{a.f()}}return e}},{key:\"getConfiguration\",value:function(){return null}},{key:\"uploadFile\",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){Kn.info(\"uploadFile()\"),t.status===ir?$n.uploadFile(e,t.getSession().getToken(),i).then((function(e){a(e.url)})).catch((function(e){Kn.error(e),n(e)})):(Kn.error(\"Enterprise is not loaded, cannot upload file\"),n(new Error(\"Enterprise is not loaded, cannot upload file\")))}))}},{key:\"getAvailableConferences\",value:function(){var e=this;return Kn.info(\"getAvailableConferences()\"),new Promise((function(t,i){var a={};$n.getConferenceList(e.getSession().getToken()).then((function(e){var i,n=Yn(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;a[r.hash]=er.getOrCreateConference(r.hash),a[r.hash].friendlyName=r.friendlyName}}catch(e){n.e(e)}finally{n.f()}t(a)})).catch((function(e){Kn.error(e),i(e)}))}))}},{key:\"getConference\",value:function(e){var t=this;return new Promise((function(i,a){var n={};n.token=t.getSession().getToken(),$n.getWebconf(e,n).then((function(e){return i(er.getOrCreateConference(e.hash))})).catch((function(e){return Kn.error(\"getConference\",e),a(e)}))}))}},{key:\"createPrivateConference\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Kn.info(\"createPrivateConference()\"),new Promise((function(i,a){var n=t.hasOwnProperty(\"friendlyName\")?t.friendlyName:w.g.guid(),r=null,o=e.getSession().getToken();$n.createConference(o,n,t).then((function(i){(r=er.getOrCreateConference(i.hash)).friendlyName=n;var a=t.hasOwnProperty(\"password\")?t.password:\"\";return r.join({password:a,session:e.getSession()})})).then((function(){i(r)})).catch((function(e){var t=\"createPrivateConference() - Could not create conference\";Kn.error(t,e),a(new Error(t))}))}))}},{key:\"getTags\",value:function(e){var t=this;return new Promise((function(i,n){var r={};e&&e.hasOwnProperty(\"webconfId\")&&(r.webconfId=e.webconfId),$n.getEnterpriseTagList(t.getId(),t.getSession().getToken(),r).then((function(e){return e.hasOwnProperty(\"tags\")&&Array.isArray(e.tags)?i(e.tags):n(w.g.createError(a.g.ERROR_OTHER,\"getTags() - unexpected response\",Kn))})).catch((function(e){return n(w.g.createError(a.g.ERROR_OTHER,\"getTags() - cannot get tags\",Kn,{fromError:e}))}))}))}}],n=[{key:\"fetchEnterpriseInformation\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.hasOwnProperty(\"cloudUrl\")&&$n.setCloudURL(e.cloudUrl),$n.getEnterpriseInformation(e)}},{key:\"fetchSiteAgents\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(i,n){t.hasOwnProperty(\"cloudUrl\")&&$n.setCloudURL(t.cloudUrl);var r=[];$n.getSiteAgents(Qn.getActiveApiKey(),e,t).then((function(e){var t,a=Yn(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;r.push({contact:Zn.getOrCreateContact(n.id),title:n.title,nickname:n.nickname,isPrefered:n.isPrefered})}}catch(e){a.e(e)}finally{a.f()}i(r)})).catch((function(e){n(w.g.createError(a.g.ERROR_OTHER,\"fetchSiteAgents() - could not fetch site agents\",Kn))}))}))}}],i&&Xn(t.prototype,i),n&&Xn(t,n),e}();function sr(e){return sr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},sr(e)}function lr(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function dr(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function cr(e,t){return cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},cr(e,t)}function ur(e,t){if(t&&(\"object\"===sr(t)||\"function\"==typeof t))return t;if(void 0!==t)throw new TypeError(\"Derived constructors may only return object or undefined\");return hr(e)}function hr(e){if(void 0===e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return e}function pr(e){return pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},pr(e)}i(3123);var gr=p.Y.get(\"UserAgent\"),mr=B.get(),Cr=new Kt.Z,fr=\"apizee:\",vr=\"apirtc:\",br=\"token:\",Sr=\"apzkey:\",yr=\"apiKey:\",Ir=new WeakMap,Tr=[\"mediaDeviceChanged\",\"externalJsLoadingStatus\",\"ccsConnectionStatus\",\"userMediaError\"],Rr=function(e){!function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function\");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cr(e,t)}(l,e);var t,i,n,r,o,s=(r=l,o=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pr(r);if(o){var i=pr(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return ur(this,e)});function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};lr(this,l),e=s.call(this,gr),gr.debug(\"Create UserAgent\"),e.uri=t.hasOwnProperty(\"uri\")?t.uri:null,e.userId=null,e.username=null,e.profile=null,e.preRegisterUserData=new ii,e.callStatsMonitoringEnabled=null,e.callStatsMonitoringInterval=null,e.meshModeEnabled=null,e.apiRTCMediaDeviceDetectionEnabled=!!t.hasOwnProperty(\"apiRTCMediaDeviceDetectionEnabled\")&&t.apiRTCMediaDeviceDetectionEnabled,e.apiRTCMediaDeviceDetectionDelay=t.hasOwnProperty(\"apiRTCMediaDeviceDetectionDelay\")?t.apiRTCMediaDeviceDetectionDelay:a.g.APIRTC_MEDIA_DEVICE_DETECTION_DELAY,e.targetBandwidthUsage=0,e.videoBandwidthSettings={overallIncoming:3e3,overallOutgoing:3e3},e.currentSession=null,e.enterprise=null,e.capabilities={whiteboardCursor:\"ON\",mediaDeviceChanged:\"ON\",webRTCCompliant:\"ON\",screenSharingCompliant:\"ON\",qoSStatCompliant:\"ON\",backgroundRemoval:\"ON\",streamCapabilities:\"ON\"},e.browser=apiRTC.browser,e.browser_major_version=apiRTC.browser_major_version,e.browser_version=apiRTC.browser_version,e.osName=apiRTC.osName,e.osVersion=apiRTC.osVersion,e.browserInfo=apiRTC.browserInfo,e.browserDetails=apiRTC.browserDetails,Ir.set(hr(e),null),mr.createWhiteBoard(),apiCC.activateScreenSharing();var i=function(t){A.get(hr(e)).emit(\"mediaDeviceChanged\",{added:t.detail.diff.added,removed:t.detail.diff.removed,updated:t.detail.diff.updated,updateReason:t.detail.updateReason,firstMediaDeviceListInitialization:t.detail.firstMediaDeviceListInitialization})};apiRTC.addEventListener(\"mediaDeviceChanged\",i);var n=function(t){A.get(hr(e)).emit(\"externalJsLoadingStatus\",{extjs:t.detail.extjs,status:t.detail.status})};apiRTC.addEventListener(\"externalJsLoadingStatus\",n);var r=function(t){var i=null;\"onChannelOpened\"===t.detail.channelEvent?i=\"connected\":\"onChannelDisconnect\"===t.detail.channelEvent?i=\"disconnected\":\"onChannelReconnecting\"===t.detail.channelEvent?i=\"retry\":(\"onChannelConnectError\"===t.detail.channelEvent||\"onChannelError\"===t.detail.channelEvent)&&(i=\"error\"),null!==i&&A.get(hr(e)).emit(\"ccsConnectionStatus\",{status:i})};apiRTC.addEventListener(\"channelEvent\",r);var o=function(t){var i={error:t.detail.error};\"media\"===t.detail.callType?(i.audio=!0,i.video=!0,i.screenSharing=!1):\"audio\"===t.detail.callType?(i.audio=!0,i.video=!1,i.screenSharing=!1):\"videoOnly\"===t.detail.callType?(i.audio=!1,i.video=!0,i.screenSharing=!1):\"screenSharing\"===t.detail.callType?(i.audio=!1,i.video=!0,i.screenSharing=!0):\"screenSharingWithAudio\"===t.detail.callType&&(i.audio=!0,i.video=!0,i.screenSharing=!0),A.get(hr(e)).emit(\"userMediaError\",i)};return apiRTC.addEventListener(\"userMediaError\",o),e.checkUACapabilities(),\"OFF\"===e.capabilities.mediaDeviceChanged&&(gr.debug(\"mediaDeviceChanged is not supported\"),!0===e.apiRTCMediaDeviceDetectionEnabled&&(gr.debug(\"apiRTCMediaDeviceDetectionEnabled is activated, starting process\"),setInterval((function(){apiCC.mediaDeviceMgr.getMediaDevices()}),e.apiRTCMediaDeviceDetectionDelay))),apiRTC.userAgentInstance=hr(e),e}return t=l,i=[{key:\"fetchUserMediaDevices\",value:function(){return gr.warn(\"DEPRECATION WARNING : fetchUserMediaDevices() is now deprecated, use getUserMediaDevices() instead\"),new Promise((function(e,t){\"IE\"===apiCC.browser&&apiCC.browser_version>8?(apiCC.getMediaDevicesWithCB(apiCC.mediaDeviceMgr.gotSources),e(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray)):apiCC.getMediaDevices().then((function(t){apiCC.mediaDeviceMgr.gotSources(t),e(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray)})).catch((function(){gr.log(\"Error on MediaDeviceManager::getMediaDevices\"),apiCC.mediaDeviceMgr.gotSources(null),t(w.g.createError(a.g.ERROR_OTHER,\"fetchUserMediaDevices() - Could not get media devices\",gr))}))}))}},{key:\"getUserMediaDevices\",value:function(){return apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray}},{key:\"createStream\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gr.info(\"createStream() with option :\",e),Hn.createStreamFromUserMedia(e.audioInputId,e.videoInputId,e.constraints,e)}},{key:\"createStreamFromMediaStream\",value:function(e){return gr.info(\"createStreamFromMediaStream()\"),Hn.createStreamFromMediaStream(e)}},{key:\"fetchNetworkInformation_v2\",value:function(e,t){gr.debug(\"fetchNetworkInformation Version 2 :\",e);var i=Cr.cloudUrl;null!=e&&(i=e);var a={testServer:i,httpPing:{},upload:{},download:{}};return null!=t&&Array.isArray(t)?(apiRTC.bandwidthRatingThresholds=t,gr.debug(\"New bandwidthRatingThresholds is defined :\",apiRTC.bandwidthRatingThresholds)):gr.debug(\"Using default bandwidthRatingThresholds :\",apiRTC.bandwidthRatingThresholds),apiRTC.bandwidthTestServer=i,gr.info(\"Start Network test\"),new Promise((function(e,t){apiRTC.testUserPing((function(i,n){null!==i?t(i):(a.httpPing=n,apiRTC.testUserUpload(25e4,(function(i,n){null!==i?t(i):(a.upload.kbps=8*n.kBPerSec,a.upload.rating=n.rating,apiRTC.testUserUploadLoop(5e5,a.upload,(function(i,n){null!==i?t(i):(a.upload.kbps=8*n.kBPerSec,a.upload.rating=n.rating,apiRTC.testUserDownload(256,(function(i,n){null!==i?t(i):(a.download.kbps=8*n.kBPerSec,a.download.rating=n.rating,apiRTC.testUserDownloadLoop(1e3,a.download,(function(i,n){null!==i?t(i):(a.download.kbps=8*n.kBPerSec,a.download.rating=n.rating,e(a))})))})))})))})))}))}))}},{key:\"fetchNetworkInformation_v1\",value:function(e,t){gr.debug(\"fetchNetworkInformation Version 1 :\",e);var i=Cr.cloudUrl;null!=e&&(i=e);var a={testServer:i,httpPing:{},upload:{},download:{}};return null!=t&&Array.isArray(t)?(apiRTC.bandwidthRatingThresholds=t,gr.debug(\"New bandwidthRatingThresholds is defined :\",apiRTC.bandwidthRatingThresholds)):gr.debug(\"Using default bandwidthRatingThresholds :\",apiRTC.bandwidthRatingThresholds),apiRTC.bandwidthTestServer=i,gr.info(\"Start Network test\"),new Promise((function(e,t){apiRTC.testUserPing((function(i,n){null!==i?t(i):(a.httpPing=n,apiRTC.testUserUpload(25e4,(function(i,n){null!==i?t(i):(a.upload.kbps=8*n.kBPerSec,a.upload.rating=n.rating,a.upload.kbps>=1e3&&apiRTC.testUserUpload(5e5,(function(e,i){null!==e?t(e):(a.upload.kbps=8*i.kBPerSec,a.upload.rating=i.rating)})),apiRTC.testUserDownload(256,(function(i,n){null!==i?t(i):(a.download.kbps=8*n.kBPerSec,a.download.rating=n.rating,a.download.kbps>=500&&a.download.kbps<1500?apiRTC.testUserDownload(500,(function(i,n){null!==i?t(i):(a.download.kbps=8*n.kBPerSec,a.download.rating=n.rating,e(a))})):a.download.kbps>=1500?apiRTC.testUserDownload(768,(function(i,n){null!==i?t(i):(a.download.kbps=8*n.kBPerSec,a.download.rating=n.rating,e(a))})):e(a))})))})))}))}))}},{key:\"fetchNetworkInformation\",value:function(e,t){return this.fetchNetworkInformation_v1(e,t)}},{key:\"fetchGeolocationInformation\",value:function(e){return null==e&&(e={enableHighAccuracy:!1,timeout:1/0,maximumAge:0}),new Promise((function(t,i){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){t(e)}),(function(e){i(e)}),e)}))}},{key:\"setUserData\",value:function(e){this.currentSession&&this.currentSession.setUserData(e)}},{key:\"setUsername\",value:function(e){this.currentSession?this.currentSession.setUsername(e):this.preRegisterUserData.setProp(\"username\",e)}},{key:\"setPhotoUrl\",value:function(e){this.currentSession?this.currentSession.setPhotoUrl(e):this.preRegisterUserData.setProp(\"photo_url\",e)}},{key:\"getUserData\",value:function(){return this.currentSession?this.currentSession.getUserData():this.preRegisterUserData}},{key:\"getUsername\",value:function(){return this.currentSession?this.currentSession.getUsername():null!==this.preRegisterUserData.get(\"username\")?this.preRegisterUserData.get(\"username\"):null!==this.preRegisterUserData.get(\"nickname\")?this.preRegisterUserData.get(\"nickname\"):this.username}},{key:\"getPhotoUrl\",value:function(){return this.currentSession?this.currentSession.getPhotoUrl():null!==this.preRegisterUserData.get(\"photo_url\")?this.preRegisterUserData.get(\"photo_url\"):null!==this.preRegisterUserData.get(\"photoUrl\")?this.preRegisterUserData.get(\"photoUrl\"):this.userId?Cr.getUserPhotoUrl(this.userId):null}},{key:\"fetchProfileInformation\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(i,a){var n=null;null===e.profile||t?e.userId&&null!==(n=mr.getActiveApiKey())?Cr.getUserProfile(n,e.userId).then((function(t){e.profile=t,i(t)})).catch(a):a(\"fetchProfileInformation() - missing registration\"):i(e.profile)}))}},{key:\"getEnterprise\",value:function(){return Ir.get(this)}},{key:\"getCurrentSession\",value:function(){return this.currentSession}},{key:\"getEventCenter\",value:function(){return apiRTC.eventCenter}},{key:\"startWhiteboard\",value:function(e,t){gr.trace(\"startWhiteboard()\"),mr.whiteBoardClient.start(),mr.whiteBoardClient.setCanvas(e),null!=t&&mr.whiteBoardClient.setUserCursorColor(t)}},{key:\"stopWhiteboard\",value:function(){gr.trace(\"stopWhiteboard()\"),mr.whiteBoardClient.stop()}},{key:\"getWhiteboardClient\",value:function(){return gr.trace(\"getWhiteboardClient()\"),mr.whiteBoardClient}},{key:\"register\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(i,n){if(gr.info(\"Register \"+e.uri),t.hasOwnProperty(\"uri\")&&(e.uri=t.uri),t.hasOwnProperty(\"cloudUrl\")&&Cr.setCloudURL(t.cloudUrl),t.hasOwnProperty(\"cloudFetchRetries\")&&Cr.setFetchRetries(t.cloudFetchRetries),t.hasOwnProperty(\"cloudFetchRetryDelay\")&&Cr.setFetchRetryDelay(t.cloudFetchRetryDelay),null!==e.uri)if(e.currentSession)n(w.g.createError(a.g.ERROR_APIRTC_SESSION_ALREADY_ON,\"register() - Session already ON\",gr));else if(e.uri.startsWith(br))Er(e,t,i,n);else if(e.uri.startsWith(fr)||e.uri.startsWith(vr))wr(e,t,i,n);else if(e.uri.startsWith(Sr)||e.uri.startsWith(yr))Mr(e,t,i,n);else{var r=e.uri.split(\":\")[0];n(w.g.createError(a.g.ERROR_REGISTRATION_URI_INVALID,\"register() - prefix invalid used for uri :\"+r,gr))}else n(w.g.createError(a.g.ERROR_REGISTRATION_URI_INVALID,\"register() - Cannot register UserAgent, no uri was specified\",gr))}))}},{key:\"unregister\",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{invalidateUserToken:!0};return new Promise((function(i,n){null!==e.currentSession?e.currentSession.disconnect(t).then((function(){e.currentSession=null,Ir.set(e,null),i()})).catch((function(e){n(w.g.createError(a.g.ERROR_OTHER,\"unregister() - unregistration error\",gr))})):n(w.g.createError(a.g.ERROR_OTHER,\"unregister() - no current session\",gr))}))}},{key:\"isRegistered\",value:function(){return null!==this.currentSession}},{key:\"getDefaultDevices\",value:function(){return{audioInput:apiCC.mediaDeviceMgr.defaultAudioInput,audioOutput:apiCC.mediaDeviceMgr.defaultAudioOuput,videoInput:apiCC.mediaDeviceMgr.defaultVideoInput}}},{key:\"enableCallStatsMonitoring\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};[\"chrome\",\"firefox\"].indexOf(apiCC.browserDetails.type)<0?gr.warn(\"enableCallStatsMonitoring() is only supported on Chrome and Firefox, support on other browsers will be added soon\"):!0===e?(this.callStatsMonitoringEnabled=!0,w.g.isPropertyTypeof(t,\"interval\",\"number\")&&t.interval>=1e3&&(this.callStatsMonitoringInterval=t.interval),this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.enableCallStatsMonitoring(!0,this.callStatsMonitoringInterval)):(this.callStatsMonitoringEnabled=!1,this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.enableCallStatsMonitoring(!1))}},{key:\"enableActiveSpeakerDetecting\",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0===e?w.g.isPropertyTypeof(t,\"threshold\",\"number\")&&t.threshold>0?apiRTC.enableActiveSpeakerDetecting(!0,t.threshold):apiRTC.enableActiveSpeakerDetecting(!0):apiRTC.enableActiveSpeakerDetecting(!1)}},{key:\"enableMeshRoomMode\",value:function(e){!1===e||!0===e?(this.meshModeEnabled=e,this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.enableMeshRoomMode(e)):gr.error(\"Wrong value\",e)}},{key:\"setTargetBandwidthUsage\",value:function(e){\"number\"!=typeof e&&!isNaN(e)&&e>0?(this.targetBandwidthUsage=e,this.isRegistered&&mr.webRTCClient.setVideoBandwidth(e)):gr.error(\"Unvalid target bandwidth usage value\",e)}},{key:\"setOverallIncomingVideoBandwidth\",value:function(e){e>0?(this.videoBandwidthSettings.overallIncoming=e,this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.setOverallIncomingVideoBandwidth(e)):(delete this.videoBandwidthSettings.overallIncoming,this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.setOverallIncomingVideoBandwidth(0))}},{key:\"setOverallOutgoingVideoBandwidth\",value:function(e){e>0?(this.videoBandwidthSettings.overallOutgoing=e,this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.setOverallOutgoingVideoBandwidth(e)):(delete this.videoBandwidthSettings.overallOutgoing,this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.setOverallOutgoingVideoBandwidth(0))}},{key:\"setPerCallIncomingVideoBandwidth\",value:function(e){e>0?(this.videoBandwidthSettings.perCallIncoming=e,this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.setPerCallIncomingVideoBandwidth(e)):(delete this.videoBandwidthSettings.perCallIncoming,this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.setPerCallIncomingVideoBandwidth(0))}},{key:\"setPerCallOutgoingVideoBandwidth\",value:function(e){e>0?(this.videoBandwidthSettings.perCallOutgoing=e,this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.setPerCallOutgoingVideoBandwidth(e)):(delete this.videoBandwidthSettings.perCallOutgoing,this.isRegistered&&mr.webRTCClient&&mr.webRTCClient.setPerCallOutgoingVideoBandwidth(0))}},{key:\"updateMediaOnCall\",value:function(e,t){mr.webRTCClient.updateMediaDeviceOnCall(e,t)}},{key:\"getCapabilities\",value:function(){return this.capabilities}},{key:\"getBrowser\",value:function(){return this.capabilities}},{key:\"getBrowserMajorVersion\",value:function(){return this.browser_major_version}},{key:\"getBrowserVersion\",value:function(){return this.browser_version}},{key:\"getOsName\",value:function(){return this.osName}},{key:\"getOsVersion\",value:function(){return this.osVersion}},{key:\"getBrowserInfo\",value:function(){return this.browserInfo}},{key:\"getBrowserDetails\",value:function(){return this.browserDetails}},{key:\"checkUACapabilities\",value:function(){gr.debug(\"checkUACapabilities\"),\"iOS\"===apiRTC.osName&&(gr.debug(\"Deactivating whiteboardCursor for iOS\"),this.capabilities.whiteboardCursor=\"OFF\"),\"Android\"===apiRTC.osName&&\"Chrome\"===apiRTC.browser&&(gr.debug(\"mediaDeviceChanged not supported on Chrome/Android\"),this.capabilities.mediaDeviceChanged=\"OFF\"),\"Safari\"!==h.Xh&&\"Mobile Safari\"!==h.Xh||(gr.debug(\"mediaDeviceChanged not supported on Safari\"),this.capabilities.mediaDeviceChanged=\"OFF\"),!1===apiRTC.webRTCCompliant&&(gr.debug(\"WebRTC not compliant\"),this.capabilities.webRTCCompliant=\"OFF\"),!1===apiRTC.screenSharingCompliant&&(gr.debug(\"screenSharing not compliant\"),this.capabilities.screenSharingCompliant=\"OFF\"),!1===apiRTC.qoSStatCompliant&&(gr.debug(\"qoS Stat not compliant\"),this.capabilities.qoSStatCompliant=\"OFF\"),\"requestVideoFrameCallback\"in HTMLVideoElement.prototype||(gr.debug(\"background removal not compliant\"),this.capabilities.backgroundRemoval=\"OFF\"),\"getCapabilities\"in MediaStreamTrack.prototype||(gr.debug(\"Stream capabilities not compliant\"),this.capabilities.streamCapabilities=\"OFF\")}},{key:\"startPrecallTest\",value:function(e,t,i,a,n){mr.webRTCClient.startPrecallTest(e,t,i,a,n)}},{key:\"sendLogToCloud\",value:function(e,t,i,a){apiCC.sendLogToCloud(e,t,i,a)}}],n=[{key:\"getAvailableEvents\",value:function(){return Tr}}],i&&dr(t.prototype,i),n&&dr(t,n),l}(D),wr=function(e,t,i,n){var r=e.uri.split(\":\");gr.debug(\"register() - Registration using prefix :\"+r[0]);var o=r[1];null!==t.password&&\"string\"==typeof t.password?Cr.authentication(o,t.password).then((function(i){return Ar(e,i.token,t)})).then((function(e){i(e)})).catch((function(e){var t=\"register() - An error occured during cloud credentials registration :\"+JSON.stringify(e),i={error:new Error(t),code:a.g.ERROR_OTHER};gr.error(t,e),e.hasOwnProperty(\"code\")?i.code=e.code:e.hasOwnProperty(\"http_code\")&&(e.http_code.toString().startsWith(\"4\")?i.code=a.g.ERROR_INVALID_CREDENTIALS:i.code=a.g.ERROR_SERVER_UNAVAILABLE),n(i)})):n(w.g.createError(a.g.ERROR_INVALID_CREDENTIALS,\"register() - No password was specified for apizee: UserAgent registration\",gr))},Er=function(e,t,i,n){gr.debug(\"register() - Registration using prefix :token:\");var r=e.uri.split(\":\")[1];Cr.checkUserToken(r).then((function(i){return Ar(e,r,t)})).then(i).catch((function(e){n(w.g.createError(a.g.ERROR_OTHER,\"register() - An error occured during cloud token registration\",gr))}))},Mr=function(e,t,i,n){var r=e.uri.split(\":\");gr.debug(\"register() - Registration using prefix :\"+r[0]);var o=r[1];new Promise((function(e,i){t.ccs?e(t.ccs):Cr.getPreferredCCS(o).then((function(t){e(t.ccs)})).catch((function(){i(w.g.createError(a.g.ERROR_OTHER,\"register() - Could not get preferred CCS\",gr))}))})).then((function(i){e.currentSession=new bn(e),e.currentSession.user=e,e.currentSession.token=null,w.g.isPropertyTypeof(t,\"nickname\",\"string\")?e.username=t.nickname:e.username=\"guest-\"+w.g.guid().substr(0,13),e.preRegisterUserData.setProp(\"username\",e.username),e.preRegisterUserData.setProp(\"userConfId\",e.username+Date.now()),t.userData&&e.preRegisterUserData.setProps(t.userData);var n={apiKey:o,MCUActivated:!0,mcu:t.hasOwnProperty(\"mcu\")?t.mcu:a.g.DEFAULT_MCU,nickname:e.username,ccsServer:i,bandwidthTestServer:Cr.cloudUrl,webRTCPluginActivated:!0,userData:e.preRegisterUserData,tryAudioCallAfterUserMediaError:!0,extJsLoadingRetryNb:t.extJsLoadingRetryNb,extJsLoadingRetryDelay:t.extJsLoadingRetryDelay,ccsConnectionRetryNb:t.ccsConnectionRetryNb,ccsConnectionRetryDelay:t.ccsConnectionRetryDelay,turnServerAddress:t.turnServerAddress,userAcceptOnIncomingDataCall:t.userAcceptOnIncomingDataCall,userAcceptOnIncomingScreenSharingCall:t.userAcceptOnIncomingScreenSharingCall};return t.hasOwnProperty(\"id\")&&(n.apiCCId=t.id),w.g.isPropertyTypeof(t,\"idPersistenceTimeout\",\"number\")&&t.idPersistenceTimeout>=0&&(n.apiCCIdPersistenceTimeout=t.idPersistenceTimeout),t.hasOwnProperty(\"groups\")&&(n.presenceGroup=t.groups),t.hasOwnProperty(\"subscribeTo\")&&(n.subscribeToPresenceGroup=t.subscribeTo),t.hasOwnProperty(\"contactDisconnectionDelay\")&&(gr.debug(\"Setting contactDisconnectionDelay :\",t.contactDisconnectionDelay),mr.contactDisconnectionDelay=t.contactDisconnectionDelay),n.idConversionActivated=!1,t.hasOwnProperty(\"idConversionActivated\")&&(n.idConversionActivated=t.idConversionActivated),t.hasOwnProperty(\"conversationSpace\")&&(n.conversationSpace=t.conversationSpace),t.hasOwnProperty(\"token\")&&(n.token=t.token,e.currentSession.ccsToken=t.token),mr.initializeApiRTC(n)})).then((function(t){!1!==e.callStatsMonitoringEnabled&&!0!==e.callStatsMonitoringEnabled||mr.webRTCClient.enableCallStatsMonitoring(e.callStatsMonitoringEnabled,e.callStatsMonitoringInterval),!1!==e.meshModeEnabled&&!0!==e.meshModeEnabled||mr.webRTCClient.enableMeshRoomMode(e.meshModeEnabled),e.targetBandwidthUsage>0&&mr.webRTCClient.setVideoBandwidth(e.targetBandwidthUsage),e.videoBandwidthSettings.overallIncoming>0&&mr.webRTCClient.setOverallIncomingVideoBandwidth(e.videoBandwidthSettings.overallIncoming),e.videoBandwidthSettings.overallOutgoing>0&&mr.webRTCClient.setOverallOutgoingVideoBandwidth(e.videoBandwidthSettings.overallOutgoing),e.videoBandwidthSettings.perCallIncoming>0&&mr.webRTCClient.setPerCallIncomingVideoBandwidth(e.videoBandwidthSettings.perCallIncoming),e.videoBandwidthSettings.perCallOutgoing>0&&mr.webRTCClient.setPerCallOutgoingVideoBandwidth(e.videoBandwidthSettings.perCallOutgoing),e.userId=t,e.currentSession.init(t),gr.log(\"register() - APIRTC init OK\",t),void 0!==mr.apiRTCSession.userData&&null!==mr.apiRTCSession.userData&&(e.currentSession.userData=new ii(mr.apiRTCSession.userData)),i(e.currentSession)})).catch((function(t){n(w.g.createError(a.g.ERROR_APIRTC_INITIALISATION_FAILED,\"register() - ApiRTC Initialization error : \"+t,gr)),delete e.currentSession,e.currentSession=null}))},Ar=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=null,r=null;return gr.debug(\"initializeCloudUASession :\",i),new Promise((function(o,s){Cr.getConnectedUserInformation(t).then((function(t){if(r=t,gr.debug(\"Connected user information : \",t),e.currentSession=new bn(e),e.currentSession.user=e,e.currentSession.token=t.token,i.hasOwnProperty(\"idPersistenceTimeout\")&&(e.currentSession.idPersistenceTimeout=i.idPersistenceTimeout),e.username=t.nickname,e.preRegisterUserData.setProp(\"username\",e.username),e.preRegisterUserData.setProp(\"nickname\",e.username),e.preRegisterUserData.setProp(\"photo_url\",t.photo_url),t.mail&&e.preRegisterUserData.setProp(\"mail\",t.mail),e.preRegisterUserData.setProp(\"userConfId\",e.username+Date.now()),i.userData&&e.preRegisterUserData.setProps(i.userData),!i.hasOwnProperty(\"overLoadedApiRTCKey\")||null===i.overLoadedApiRTCKey||void 0===i.overLoadedApiRTCKey||t.apiKey===i.overLoadedApiRTCKey)return e.userId=t.userId,n=new or(t.enterpriseId,t.apiKey,e.currentSession),Ir.set(e,n),n.load();gr.debug(\"overLoadedApiRTCKey is defined :\",i.overLoadedApiRTCKey),n=new or(t.enterpriseId,i.overLoadedApiRTCKey,e.currentSession),delete i.id,e.userId=null,Ir.set(e,n),gr.debug(\"... no enterprise users data loading\")})).then((function(){var t={apiKey:n.getApiKey(),ccsServer:i.ccs||r.ccs,MCUActivated:!0,mcu:i.hasOwnProperty(\"mcu\")?i.mcu:a.g.DEFAULT_MCU,nickname:e.username,bandwidthTestServer:Cr.cloudUrl,webRTCPluginActivated:!0,apiCCId:i.hasOwnProperty(\"id\")?i.id:e.userId,userData:e.preRegisterUserData,tryAudioCallAfterUserMediaError:!0,presenceGroup:[\"agent\"],subscribeToPresenceGroup:[\"agent\",\"visitor\"],extJsLoadingRetryNb:i.extJsLoadingRetryNb,extJsLoadingRetryDelay:i.extJsLoadingRetryDelay,ccsConnectionRetryNb:i.ccsConnectionRetryNb,ccsConnectionRetryDelay:i.ccsConnectionRetryDelay,turnServerAddress:i.turnServerAddress,userAcceptOnIncomingDataCall:i.userAcceptOnIncomingDataCall,userAcceptOnIncomingScreenSharingCall:i.userAcceptOnIncomingScreenSharingCall};return w.g.isPropertyTypeof(i,\"idPersistenceTimeout\",\"number\")&&i.idPersistenceTimeout>=0&&(t.apiCCIdPersistenceTimeout=i.idPersistenceTimeout),i.hasOwnProperty(\"groups\")&&(t.presenceGroup=i.groups),i.hasOwnProperty(\"subscribeTo\")&&(t.subscribeToPresenceGroup=i.subscribeTo),i.hasOwnProperty(\"contactDisconnectionDelay\")&&(gr.debug(\"Setting contactDisconnectionDelay :\",i.contactDisconnectionDelay),mr.contactDisconnectionDelay=i.contactDisconnectionDelay),t.idConversionActivated=!1,i.hasOwnProperty(\"idConversionActivated\")&&(t.idConversionActivated=i.idConversionActivated),i.hasOwnProperty(\"conversationSpace\")&&(t.conversationSpace=i.conversationSpace),mr.initializeApiRTC(t)})).then((function(t){!1!==e.callStatsMonitoringEnabled&&!0!==e.callStatsMonitoringEnabled||mr.webRTCClient.enableCallStatsMonitoring(e.callStatsMonitoringEnabled,e.callStatsMonitoringInterval),!1!==e.meshModeEnabled&&!0!==e.meshModeEnabled||mr.webRTCClient.enableMeshRoomMode(e.meshModeEnabled),e.targetBandwidthUsage>0&&mr.webRTCClient.setVideoBandwidth(e.targetBandwidthUsage),e.videoBandwidthSettings.overallIncoming>0&&mr.webRTCClient.setOverallIncomingVideoBandwidth(e.videoBandwidthSettings.overallIncoming),e.videoBandwidthSettings.overallOutgoing>0&&mr.webRTCClient.setOverallOutgoingVideoBandwidth(e.videoBandwidthSettings.overallOutgoing),e.videoBandwidthSettings.perCallIncoming>0&&mr.webRTCClient.setPerCallIncomingVideoBandwidth(e.videoBandwidthSettings.perCallIncoming),e.videoBandwidthSettings.perCallOutgoing>0&&mr.webRTCClient.setPerCallOutgoingVideoBandwidth(e.videoBandwidthSettings.perCallOutgoing),e.currentSession.init(t),gr.info(\"APIRTC init OK\",t),void 0!==mr.apiRTCSession.userData&&null!==mr.apiRTCSession.userData&&(e.currentSession.userData=new ii(mr.apiRTCSession.userData)),o(e.currentSession)})).catch((function(e){gr.error(e),s(e)}))}))};function Or(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Dr=p.Y.get(\"ResourcesLoader\"),kr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),this.loadedJsLinks=[]}var t,i;return t=e,i=[{key:\"loadjs\",value:function(e){function t(t,i,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,i){var a=this;Dr.info(\"Load js resources\",e),Dr.debug(\"Already loaded js\",this.loadedJsLinks);var n=i.success;if(0===(e=e.filter((function(e){return!a.loadedJsLinks.includes(e)}))).length)return Dr.debug(\"Skip resources loading, all resources previously loaded\"),void(n instanceof Function&&n());Dr.debug(\"Filtered resources to load\",e),i.success=function(){a.loadedJsLinks.push.apply(a.loadedJsLinks,e),n instanceof Function&&n()},loadjs(e,t,i)}))},{key:\"unloadjs\",value:function(e){var t=this;Dr.info(\"Unload js\",e),e.forEach((function(e){var i=document.querySelector('script[src=\"'+e+'\"]');void 0!==i&&(i.remove(),t.loadedJsLinks=t.loadedJsLinks.filter((function(t){return t!==e})))})),Dr.debug(\"Scripts unloaded, currently loaded js\",this.loadedJsLinks)}},{key:\"reset\",value:function(){unloadjs(this.loadedJsLinks),this.loadedJsLinks=[]}}],i&&Or(t.prototype,i),e}();!function(e){var t,i,a=null,n=null,r=[];function o(){return Math.random().toString(36).substr(2)}t=function(){if(\"undefined\"!=typeof apiRTC_React)return\"react-native\";var e,t=navigator.appName,i=navigator.userAgent,a=i.match(/(opera|chrome|safari|firefox|msie)\\/?\\s*(\\.?\\d+(\\.\\d+)*)/i);return a&&null!==(e=i.match(/version\\/([\\.\\d]+)/i))&&(a[2]=e[1]),(a=a?[a[1],a[2]]:[t,navigator.appVersion,\"-?\"])[0]}(),i=function(){if(\"undefined\"!=typeof apiRTC_React)return 1;var e,t=navigator.appName,i=navigator.userAgent,a=i.match(/(opera|chrome|safari|firefox|msie)\\/?\\s*(\\.?\\d+(\\.\\d+)*)/i);return a&&null!==(e=i.match(/version\\/([\\.\\d]+)/i))&&(a[2]=e[1]),(a=a?[a[1],a[2]]:[t,navigator.appVersion,\"-?\"])[1]}(),n=new function(){(\"MSIE\"===t&&i>8||\"Netscape\"===t)&&function(){function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent(\"CustomEvent\");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}t.prototype=e.CustomEvent.prototype,e.CustomEvent=t}(),this.eventDispatchMgr=function(e,a){if(\"undefined\"!=typeof apiRTC_React){var n={type:e,detail:a};eventManager.dispatchEvent(n)}else if(\"MSIE\"===t&&i<=8)\"undefined\"!=typeof $jqApz?$jqApz.event.trigger({type:e,detail:a}):\"undefined\"!=typeof jQuery&&jQuery.event.trigger({type:e,detail:a});else{var r=new CustomEvent(e,{detail:a,bubbles:!0,cancelable:!0});document.dispatchEvent(r)}},this.createGetUserFromIdAnswerEvent=function(e){var t={eventType:\"getUserFromIdAnswer\",time:new Date,message:e};this.eventDispatchMgr(\"getUserFromIdAnswer\",t)},this.createGetAllUsersAnswerEvent=function(e){var t={eventType:\"getAllUsersAnswer\",time:new Date,message:e};this.eventDispatchMgr(\"getAllUsersAnswer\",t)},this.createErrorEvent=function(e){var t={eventType:\"error :\",time:new Date,errorInfo:e};this.eventDispatchMgr(\"error\",t)},this.createSearchUserAnswerEvent=function(e,t,i){var a={eventType:\"searchUserAnswer :\",time:new Date,searchStr:e,searchAnswerList:t,group:i};this.eventDispatchMgr(\"searchUserAnswer\",a)}},(a={version:\"1.0.4\",description:\"ApiRTC DataBase Library\"}).init=function(e){this.socket=e,this.socket.on(\"getUserFromIdAnswer\",this.callback(this,\"onGetUserFromIdAnswer\")).on(\"getAllUsersAnswer\",this.callback(this,\"onGetAllUsersAnswer\")).on(\"searchUserAnswer\",this.callback(this,\"onSearchUserAnswer\"))},a.createUser=function(e){if(null!==e&&null!==e.mail&&null!==e.id){var t=JSON.stringify(e);this.socket.emit(\"createUser\",t)}},a.searchUserInGroup=function(e,t,i,a){var n=null,s=null,l=o();(void 0===t||\"all\"!==t&&\"connected\"!==t&&\"disconnected\"!==t)&&(t=\"all\"),null!==e&&(n={searchStr:e,presenceState:t,group:i},void 0!==a&&(n.callbackId=l,r[l]=a),s=JSON.stringify(n),this.socket.emit(\"searchUser\",s))},a.searchUser=function(e,t,i,n){var r=null;\"function\"==typeof i?(r=i,a.searchUserInGroup(e,t,void 0,r)):a.searchUserInGroup(e,t,i,n)},a.onSearchUserAnswer=function(e){var t=JSON.parse(e);void 0!==t.callbackId&&t.callbackId in r?(r[t.callbackId](t.searchStr,t.searchAnswerList),r.splice(t.callbackId,1)):n.createSearchUserAnswerEvent(t.searchStr,t.searchAnswerList,t.group)},a.getUserFromId=function(e,t){var i=null,a=null,n=o();null!==e&&(i={id:e},void 0!==t&&(i.callbackId=n,r[n]=t),a=JSON.stringify(i),this.socket.emit(\"getUserFromId\",a))},a.onGetUserFromIdAnswer=function(e){null!==e&&void 0!==e.callbackId&&e.callbackId in r?(r[e.callbackId](e),r.splice(e.callbackId,1)):n.createGetUserFromIdAnswerEvent(e)},a.getAllUsers=function(){var e,t;e={},t=JSON.stringify(e),this.socket.emit(\"getAllUsers\",t)},a.onGetAllUsersAnswer=function(e){n.createGetAllUsersAnswerEvent(e)},a.setPresenceStatus=function(e,t,i){var a,n;a={id:e,presenceStatus:t,commentStatus:i},n=JSON.stringify(a),this.socket.emit(\"setPresenceStatus\",n)},a.setUserStatus=function(e,t){var i;t.id=e,i=JSON.stringify(t),this.socket.emit(\"setUserStatus\",i)},a.setUserInfos=function(e){var t,i;t=e,i=JSON.stringify(t),this.socket.emit(\"setUserInfos\",i)},a.addEventListener=function(e,t){\"undefined\"!=typeof apiRTC_React?eventManager.addEventListener(e,t):\"getUserFromIdAnswer\"!==e||\"error\"!==e||\"getAllUsersAnswer\"!==e||\"searchUserAnswer\"!==e?document.addEventListener(e,t,!1):n.createErrorEvent(\"ERROR: Trying to add a listener on an unknow event\")},a.callback=function(e,t){return this.closureHandler=function(i){return e[t](i)},this.closureHandler},e.apiDB=a}(window);var _r=p.Y.get(\"Init\"),Ur=p.Y.get(\"MediaDeviceManager\");function Nr(e){return Nr=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},Nr(e)}e=i.hmd(e),null!==console&&void 0!==console&&console.info&&console.info(\"Loading APIRTC_MODULE\"),window.Prototype&&delete Array.prototype.toJSON;var Pr=new Kt.Z;C.version=\"4.7.1\",C.utils={},C.eventCenter=new y,C.resourcesLoader=new kr;for(var Lr=0,xr=Object.keys(a.g);Lr<xr.length;Lr++){var Wr=xr[Lr];C[Wr]=a.g[Wr]}C.utils.EventEmitter=s,C.utils.EventCenter=y,C.MediaDevice=R,C.Stream=Hn,C.Call=Ue,C.Conversation=Ma,C.ConversationCall=Wi,C.Conference=za,C.Contact=Di,C.Enterprise=or,C.SentInvitation=hi,C.ReceivedInvitation=ne,C.ReceivedCallInvitation=Xe,C.ReceivedConversationJoinRequest=Bt,C.ReceivedConversationInvitation=ge,C.ReceivedFileTransferInvitation=at,C.ReceivedWhiteboardInvitation=ut,C.ReceivedDataChannelInvitation=Pt,C.ReceivedPointerSharingInvitation=Xt,C.PointerSharingRoom=Sn,C.Session=bn,C.UserAgent=Rr,C.UserData=ii,C.CloudApi=Pr,C.DataChannel=Et,C.Observable=D,C.setLogLevel=function(e){p.Y.setLogLevel(e)};var Vr=!1;if(void 0===window.apiRTC){if(\"object\"===Nr(e)&&e.exports)e.exports=C;else if(\"function\"==typeof define&&i.amdO){var Fr=C;define((function(){return window.apiRTC2=window.apiRTC=Fr}))}window.apiRTC2=window.apiRTC=window.apiCC=window.CC=C,Vr=!0}else console.info(\"APIRTC_MODULE already loaded with version :\",apiRTC.version);!0===Vr&&(C.init=function(e){var t,i;if(_r.info(\"apiRTC initialization, version is :\"+apiCC.version),_r.info(\"osName :\"+apiCC.osName),_r.info(\"osVersion :\"+apiCC.osVersion),_r.info(\"browser :\"+apiCC.browser),_r.info(\"browser_version :\"+apiCC.browser_version),!0===(t=e.apiKey,i=!0,_r.info(\"apiKey :\",t),-1!==t.indexOf(\"[\")&&(i=!1),i))if(e.hasOwnProperty(\"apiCCId\")&&null!==e.apiCCId&&\"\"!==e.apiCCId&&!0!==function(e){if(null!==e){var t=e;if(\"number\"==typeof t&&(t=String(t)),\"string\"==typeof t)return t.length<=128}return!1}(e.apiCCId))_r.error(\"apiCCId format is not correct, leaving connection process\");else{var a=\"\";if(a=void 0!==window&&void 0!==window.location&&void 0!==window.location.protocol&&\"https:\"!=window.location.protocol?\"http\":\"https\",\"iOS\"!==h.ag.name&&\"Android\"!==h.ag.name||(_r.log(h.ag.name+\" detected forcing protocol to https\"),a=\"https\"),void 0===e.ccsServer?(_r.debug(\"Setting ccsServer\"),void 0!==window&&void 0!==window.location&&void 0!==window.location.protocol?\"https:\"==window.location.protocol||\"iOS\"===h.ag.name||\"Android\"===h.ag.name?e.ccsServer=\"ccs5.apizee.com:443\":e.ccsServer=\"ccs5.apizee.com:80\":e.ccsServer=\"ccs5.apizee.com:443\"):_r.log(\"ccsServer is defined on init()\"),null!==e.bandwidthTestServer&&void 0!==e.bandwidthTestServer?(_r.log(\"bandwidthTestServer is defined :\",e.bandwidthTestServer),apiCC.bandwidthTestServer=e.bandwidthTestServer):_r.log(\"bandwidthTestServer is not defined\"),void 0!==e.userData&&_r.log(\"userData :\",e.userData),apiCC.extJsLoadingRetryNb=e.extJsLoadingRetryNb,apiCC.extJsLoadingRetryDelay=e.extJsLoadingRetryDelay,!1===apiCC.jsLoaded){apiCC.initApiKey=e.apiKey,apiCC.initApiCCId=e.apiCCId;var n={success:function(){_r.log(\"sio loaded\"),apiCC.jsLoaded=!0,apiCC.session=new apiCC.ApiCCSession(e),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent(\"sio\",\"loaded\")},error:function(){_r.error(\"sio loading error\"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent(\"sio\",\"error\")},retrycb:function(){_r.warn(\"sio retry\"),apiCC.myWebRTC_Event.createExternalJsLoadingStatusEvent(\"sio\",\"retry\")}};apiRTC_sioLoader.load(a,e,n)}else _r.log(\"apiRTC JS Librairies already loaded\"),_r.log(\"initParameters have changed, need to reload session connection\"),apiCC.addEventListener(\"sessionReady\",e.onReady),_r.log(\"initParameters.userData :\",e.userData),void 0!==e.apiCCId&&\"\"!==e.apiCCId&&null!==e.apiCCId||(_r.log(\"keeping apiCCId defined by apiRTC :\"+e.apiCCId),e.apiCCId=apiCC.session.apiCCId),_r.log(\"initParameters.apiCCId :\"+e.apiCCId),null!==e.userData&&void 0!==e.userData?(_r.log(\"userData is defined :\",e.userData),apiCC.session.userData=e.userData):_r.log(\"userData is not defined\"),_r.log(\"apiCC.session.userData :\",apiCC.session.userData),null!==e.token&&void 0!==e.token?(_r.log(\"token is defined :\"+e.token),apiCC.session.token=e.token):(_r.log(\"token is not defined\"),apiCC.session.token=null),null!==e.conversationSpace&&void 0!==e.conversationSpace?(_r.log(\"conversationSpace is defined :\"+e.conversationSpace),apiCC.session.conversationSpace=e.conversationSpace):(_r.log(\"conversationSpace is not defined\"),apiCC.session.conversationSpace=null),apiCC.session.reOpenChannel(e.apiCCId,e.apiKey),null!==e.nickname&&void 0!==e.nickname?(_r.log(\"Nickname is defined :\"+e.nickname),apiCC.session.nickname=e.nickname):(_r.log(\"Nickname is not defined, setting to apiCCId value :\"+apiCC.session.apiCCId),apiCC.session.nickname=apiCC.session.apiCCId),null!==e.photoURL&&void 0!==e.photoURL?(_r.log(\"photoURL is defined :\"+e.photoURL),apiCC.session.photoURL=e.photoURL):(_r.log(\"photoURL is not defined\"),apiCC.session.photoURL=null),null!==e.presenceGroup&&void 0!==e.presenceGroup?(_r.log(\"presenceGroup is defined :\"+e.presenceGroup),JSON.stringify(apiCC.session.presenceGroup)!==JSON.stringify(e.presenceGroup)&&(_r.log(\"presenceGroup updated on initParameters\"),apiCC.session.channel.updatePresenceGroupIsNeeded=!0,null===apiCC.session.channel.oldPresenceGroup&&(apiCC.session.channel.oldPresenceGroup=apiCC.session.presenceGroup),apiCC.session.channel.newPresenceGroup=e.presenceGroup,apiCC.session.presenceGroup=e.presenceGroup)):(_r.log('presenceGroup is not defined, setting to [\"default\"]'),JSON.stringify(apiCC.session.presenceGroup)!==JSON.stringify([\"default\"])&&(_r.log(\"presenceGroup updated on initParameters\"),apiCC.session.channel.updatePresenceGroupIsNeeded=!0,null===apiCC.session.channel.oldPresenceGroup&&(apiCC.session.channel.oldPresenceGroup=apiCC.session.presenceGroup),apiCC.session.channel.newPresenceGroup=[\"default\"],apiCC.session.presenceGroup=[\"default\"])),null!==e.subscribeToPresenceGroup&&void 0!==e.subscribeToPresenceGroup?(_r.log(\"subscribeToPresenceGroup is defined :\"+e.subscribeToPresenceGroup),JSON.stringify(apiCC.session.subscribeToPresenceGroup)!==JSON.stringify(e.subscribeToPresenceGroup)&&(_r.log(\"subscribeToPresenceGroup updated on initParameters\"),apiCC.session.channel.updateSubscribeToPresenceGroupIsNeeded=!0,null===apiCC.session.channel.oldSubscribeToPresenceGroup&&(apiCC.session.channel.oldSubscribeToPresenceGroup=apiCC.session.subscribeToPresenceGroup),apiCC.session.channel.newSubscribeToPresenceGroup=e.subscribeToPresenceGroup,apiCC.session.subscribeToPresenceGroup=e.subscribeToPresenceGroup)):(_r.log('subscribeToPresenceGroup is not defined, setting to [\"default\"]'),JSON.stringify(apiCC.session.subscribeToPresenceGroup)!==JSON.stringify([\"default\"])&&(_r.log(\"subscribeToPresenceGroup updated on initParameters\"),apiCC.session.channel.updateSubscribeToPresenceGroupIsNeeded=!0,null===apiCC.session.channel.oldSubscribeToPresenceGroup&&(apiCC.session.channel.oldSubscribeToPresenceGroup=apiCC.session.subscribeToPresenceGroup),apiCC.session.channel.newSubscribeToPresenceGroup=[\"default\"],apiCC.session.subscribeToPresenceGroup=[\"default\"])),apiCC.initApiKey=e.apiKey,apiCC.initApiCCId=e.apiCCId}else _r.error(\"Apikey format is not correct, leaving connection process\")},i(2719),C.mediaDeviceMgr=new function(){this.audioDevicePresent=!0,this.videoDevicePresent=!0,this.audioOutputPresent=!0,this.mediaSourceInfos=null,this.mediaDeviceChangedDetected=!1,this.mediaDeviceSourceInfosArray={audioinput:{},audiooutput:{},videoinput:{}},this.mediaDeviceSourceInfosArrayBeforeGotSources=null,this.defaultVideoInput=null,this.defaultAudioInput=null,this.defaultAudioOuput=null,this.realMediaDevicesListInitialization=!1,this.realMediaDevicesListInitializationWasAlreadyDone=!1,Ur.debug(\"MediaDeviceManager\"),null!==navigator.mediaDevices&&void 0!==navigator.mediaDevices&&(navigator.mediaDevices.ondevicechange=function(e){Ur.debug(\"Media device have changed\"),apiCC.mediaDeviceMgr.getMediaDevices(\"updatedOnDeviceChange\")}),this.gotSources=function(e,t){Ur.debug(\"gotSources : sourceInfos :\",e),apiCC.mediaDeviceMgr.audioDevicePresent=!1,apiCC.mediaDeviceMgr.videoDevicePresent=!1,apiCC.mediaDeviceMgr.audioOutputPresent=!1;var i=!1;apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources=apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray;var a={},n=!1;(0,g.fS)(apiCC.mediaDeviceMgr.mediaSourceInfos,e)||(Ur.debug(\"MediaDevices change detected\"),i=!0);var r,o=null,s=0,l=0,d=0,c=null;if(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray={audioinput:{},audiooutput:{},videoinput:{}},apiCC.mediaDeviceMgr.mediaSourceInfos=e,null!==e)for(r=0;r!==e.length;++r)null!==(o=e[r]).deviceId&&\"\"!==o.deviceId?(c=new R(o.deviceId,o.kind),null!==o.label&&void 0!==o.label&&(this.realMediaDevicesListInitialization=!0)):(Ur.debug(\"MediaDevices change but deviceId is not correct, using fakedeviceId :\",r),c=new R(r,o.kind)),\"audio\"===o.kind||\"audioinput\"===o.kind?(apiCC.mediaDeviceMgr.audioDevicePresent||(apiCC.mediaDeviceMgr.audioDevicePresent=!0),c.label=o.label||\"microphone \"+ ++s,null===apiCC.mediaDeviceMgr.defaultAudioInput&&(apiCC.mediaDeviceMgr.defaultAudioInput=c),null!==o.getCapabilities&&void 0!==o.getCapabilities?c.capabilities=o.getCapabilities():Ur.debug(\"getCapabilities not defined\")):\"video\"===o.kind||\"videoinput\"===o.kind?(apiCC.mediaDeviceMgr.videoDevicePresent||(apiCC.mediaDeviceMgr.videoDevicePresent=!0),c.label=o.label||\"camera \"+ ++l,null===apiCC.mediaDeviceMgr.defaultVideoInput&&(apiCC.mediaDeviceMgr.defaultVideoInput=c),null!==o.getCapabilities&&void 0!==o.getCapabilities?c.capabilities=o.getCapabilities():Ur.debug(\"getCapabilities not defined\")):\"audiooutput\"===o.kind?(apiCC.mediaDeviceMgr.audioOutputPresent||(apiCC.mediaDeviceMgr.audioOutputPresent=!0),c.label=o.label||\"audio output \"+ ++d,null===apiCC.mediaDeviceMgr.defaultAudioOuput&&(apiCC.mediaDeviceMgr.defaultAudioOuput=c)):(c.label=o.label||\"other source \"+o.deviceId,Ur.trace(\"Detected some other kind of source : \"+o.kind)),Ur.trace(\"Local device : \"+c.label+\" - \"+c.id),void 0===apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[c.type]&&(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[c.type]={}),apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray[c.type][c.id]=c;else Ur.warn(\"Media detection is not supported by browser, considering micro and camera present\"),apiCC.mediaDeviceMgr.audioDevicePresent=!0,apiCC.mediaDeviceMgr.videoDevicePresent=!0,apiCC.mediaDeviceMgr.audioOutputPresent=!0;if(Ur.log(\"Audio device detected :\"+apiCC.mediaDeviceMgr.audioDevicePresent),Ur.log(\"Video device detected :\"+apiCC.mediaDeviceMgr.videoDevicePresent),Ur.log(\"audio Output device detected :\"+apiCC.mediaDeviceMgr.audioOutputPresent),Ur.debug(\"mediaDeviceSourceInfosArray :\",apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray),!1===apiCC.mediaDeviceMgr.audioDevicePresent?!1===apiCC.mediaDeviceMgr.videoDevicePresent?apiCC.myWebRTC_Event.createErrorEvent(\"Video device is not present\",\"NO_AUDIO_NO_VIDEO_DEVICE\"):apiCC.myWebRTC_Event.createErrorEvent(\"Audio device is not present\",\"NO_AUDIO_DEVICE\"):!1===apiCC.mediaDeviceMgr.videoDevicePresent&&apiCC.myWebRTC_Event.createErrorEvent(\"Video device is not present\",\"NO_VIDEO_DEVICE\"),(0,g.fS)(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources)||(Ur.debug(\"mediaDeviceSourceInfosArray change detected\"),i=!0),!0===i){Ur.debug(\"fireMediaChangedEvent :\",i);var u=this.getMediaDeviceListsDiff(apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArray,apiCC.mediaDeviceMgr.mediaDeviceSourceInfosArrayBeforeGotSources);!0===this.realMediaDevicesListInitialization&&!1===this.realMediaDevicesListInitializationWasAlreadyDone&&(Ur.debug(\"This is the first real initialization of media device list\"),n=!0),!0===this.realMediaDevicesListInitialization&&(this.realMediaDevicesListInitializationWasAlreadyDone=!0),this.mediaDeviceChangedDetected=!0,null!==apiCC.myWebRTC_Event&&apiCC.myWebRTC_Event.createMediaDeviceChangedEvent(u,t,n),Ur.debug(\"fireMediaChangedEvent :\",apiCC.mediaDeviceMgr.mediaSourceInfos)}apiCC.session&&apiCC.session.apiCCWebRTCClient&&(apiCC.session.apiCCWebRTCClient.webRTCClient.setGumConfigWithDevicePresent(),a.audioDevicePresent=apiCC.mediaDeviceMgr.audioDevicePresent,a.videoDevicePresent=apiCC.mediaDeviceMgr.videoDevicePresent,apiCC.session.setUserData(a))},this.getMediaDevices=function(e){Ur.debug(\"MediaDeviceManager::getMediaDevices : updateReason :\",e),\"IE\"===apiCC.browser&&apiCC.browser_version>8?apiCC.getMediaDevicesWithCB(apiCC.mediaDeviceMgr.gotSources):apiCC.getMediaDevices().then((function(t){apiCC.mediaDeviceMgr.gotSources(t,e)})).catch((function(){Ur.log(\"Error on MediaDeviceManager::getMediaDevices\"),apiCC.mediaDeviceMgr.gotSources(null,e)}))},this.getMediaDeviceListsDiff=function(e,t){void 0!==t&&t||(t={}),void 0!==e&&e||(e={});for(var i=[],a=[],n=[],r=0,o=Object.keys(t);r<o.length;r++){var s=o[r];if(void 0===e[s])a[s]=t[s];else for(var l=0,d=Object.keys(t[s]);l<d.length;l++){var c=d[l];void 0===e[s][c]&&(void 0===a[s]&&(a[s]={}),a[s][c]=t[s][c])}}for(var u=0,h=Object.keys(e);u<h.length;u++)for(var p=h[u],g=0,m=Object.keys(e[p]);g<m.length;g++){var C=m[g];void 0!==t[p]&&void 0!==t[p][C]||(void 0===i[p]&&(i[p]={}),i[p][C]=e[p][C]),void 0!==t[p]&&void 0!==t[p][C]&&e[p][C].label!==t[p][C].label&&(void 0===n[p]&&(n[p]={}),n[p][C]=e[p][C])}return{added:Object.keys(i).length>0?i:null,removed:Object.keys(a).length>0?a:null,updated:Object.keys(n).length>0?n:null}}},C.mediaDeviceMgr.getMediaDevices(),C.webRTCCompliant=C.isWebRTCCompliant(),C.qoSStatCompliant=C.isQoSStatCompliant(),C.screenSharingCompliant=C.isScreenSharingCompliant());const jr=apiRTC},1549:(e,t,i)=>{\"use strict\";i.d(t,{Y:()=>c}),i(6992),i(1532),i(1539),i(8783),i(3948),i(2772),i(4916),i(5306),i(2222),i(5268),i(3710),i(3161),i(9653),i(9070),i(9753),i(2526),i(1817),i(2165),i(1038),i(7042),i(8309);var a=i(3173);function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if(\"undefined\"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e[\"@@iterator\"])return Array.from(e)}(e)||function(e,t){if(e){if(\"string\"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===i&&e.constructor&&(i=e.constructor.name),\"Map\"===i||\"Set\"===i?Array.from(e):\"Arguments\"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function o(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var s=new Map,l=a.g.LOG_LEVEL_WARN,d=function(e){var t,i=null,a=null;for(t=0;t<e.length;t++)\"string\"==typeof e[t]&&(-1!==e[t].indexOf('\"type\":\"invite\"')?-1===e[t].indexOf(\"candidate\")?-1===e[t].indexOf(\"S->C:\")?e[t]=\"invite C->S: without candidate\":e[t]=\"invite S->C: without candidate\":-1===e[t].indexOf(\"S->C:\")?e[t]=\"invite C->S: with candidate\":e[t]=\"invite S->C: with candidate\":-1!==e[t].indexOf('\"type\":\"200OK\"')?-1===e[t].indexOf(\"candidate\")?-1===e[t].indexOf(\"S->C:\")?e[t]=\"200OK C->S: without candidate\":e[t]=\"200OK S->C: without candidate\":-1===e[t].indexOf(\"S->C:\")?e[t]=\"200OK C->S: with candidate\":e[t]=\"200OK S->C: with candidate\":-1!==e[t].indexOf('\"type\":\"candidate\"')&&(-1===e[t].indexOf(\"S->C:\")?(i=e[t].replace(/C->S: /g,\"\"),a=JSON.parse(i),e[t]=\"candidate C->S:\"+a.candidate):(i=e[t].replace(/onChannelMessage S->C: /g,\"\"),a=JSON.parse(i),e[t]=\"candidate S->C:\"+a.candidate)));return e},c=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e),s.has(t))throw new Error(\"Cannot construct singleton Logger\");this.category=t,s.set(t,this)}var t,i,r;return t=e,i=[{key:\"trace\",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage.apply(this,[a.g.LOG_LEVEL_TRACE].concat(t))}},{key:\"log\",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage.apply(this,[a.g.LOG_LEVEL_DEBUG].concat(t))}},{key:\"debug\",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage.apply(this,[a.g.LOG_LEVEL_DEBUG].concat(t))}},{key:\"info\",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage.apply(this,[a.g.LOG_LEVEL_INFO].concat(t))}},{key:\"warn\",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage.apply(this,[a.g.LOG_LEVEL_WARN].concat(t))}},{key:\"error\",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage.apply(this,[a.g.LOG_LEVEL_ERROR].concat(t))}},{key:\"logMessage\",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];if(null!==console&&void 0!==console){if(e<=l){var o=\"[\".concat((new Date).toISOString(),\"]\");switch(e in a.g.LOG_LEVEL_LABELS&&(o+=\"[\".concat(a.g.LOG_LEVEL_LABELS[e],\"]\")),o+=a.g.LOG_PREFIX+\"(\".concat(this.category,\")\"),e){case a.g.LOG_LEVEL_ERROR:var s;console.error&&(s=console).error.apply(s,[o].concat(n(i)));break;case a.g.LOG_LEVEL_WARN:var c;console.warn&&(c=console).warn.apply(c,[o].concat(n(i)));break;case a.g.LOG_LEVEL_INFO:var u;console.info&&(u=console).info.apply(u,[o].concat(n(i)));break;default:var h;console.log&&(h=console).log.apply(h,[o].concat(n(i)))}}\"undefined\"!=typeof apiCC&&apiCC.logStorageActivated&&e<=apiCC.logStorageLevel&&(i=d(i),apiCC.logStorage.push(JSON.stringify({name:\"log\",args:{0:\"(\".concat(this.category,\")\")+\":\"+i}})))}}}],r=[{key:\"get\",value:function(t){return s.has(t)?s.get(t):new e(t)}},{key:\"setLogLevel\",value:function(e){if(!Number.isInteger(e)||e<0)throw\"Log level invalid\";l=e}},{key:\"getLogLevel\",value:function(){return l}}],i&&o(t.prototype,i),r&&o(t,r),e}()},3173:(e,t,i)=>{\"use strict\";i.d(t,{g:()=>a}),i(2526),i(1817),i(1539);var a={LOG_PREFIX:\"apiRTC\",LOG_LEVEL_OFF:0,LOG_LEVEL_ERROR:1,LOG_LEVEL_WARN:2,LOG_LEVEL_INFO:3,LOG_LEVEL_DEBUG:4,LOG_LEVEL_TRACE:5,LOG_LEVEL_LABELS:{}};a.LOG_LEVEL_LABELS[a.LOG_LEVEL_ERROR]=\"ERROR\",a.LOG_LEVEL_LABELS[a.LOG_LEVEL_WARN]=\"WARN\",a.LOG_LEVEL_LABELS[a.LOG_LEVEL_INFO]=\"INFO\",a.LOG_LEVEL_LABELS[a.LOG_LEVEL_DEBUG]=\"DEBUG\",a.LOG_LEVEL_LABELS[a.LOG_LEVEL_TRACE]=\"TRACE\",a.ERROR_OTHER=0,a.ERROR_INVALID_CREDENTIALS=1,a.ERROR_NETWORK_UNAVAILABLE=2,a.ERROR_SERVER_UNAVAILABLE=3,a.ERROR_UNAUTHORIZED=4,a.ERROR_APIRTC_INITIALISATION_FAILED=5,a.ERROR_APIRTC_SESSION_ALREADY_ON=6,a.ERROR_REGISTRATION_URI_INVALID=7,a.ERROR_NOT_FOUND=8,a.ERROR_BAD_PARAMETER=9,a.ERROR_INVITATION_STATE_INVALID=10,a.ERROR_TIMED_OUT=11,a.ERROR_STREAM_RECORD=12,a.ERROR_HTTP=13,a.ERROR_NOT_ALLOWED=14,a.ERROR_OPERATION_CANCELED=15,a.ERROR_WRONG_STATE=16,a.MEDIA_TYPE_PHOTO=0,a.MEDIA_TYPE_VIDEO=1,a.MEDIA_TYPE_AUDIO=2,a.MEDIA_TYPE_DOC=3,a.CONTACT_SEND_DATA_IDENTIFIER=\"contact_data\",a.CONTACT_NEW_MEDIA_IDENTIFIER=\"contact_new_media\",a.CONTACT_SEND_FILEINFO_IDENTIFIER=\"contact_file_info\",a.CONTACT_DATACHANNEL_INVITATION=\"contact_datachannel_invitation\",a.CONTACT_EVENTCENTER_DATA_REQUEST=\"contact_event_center_data_request\",a.CONTACT_EVENTCENTER_DATA_ANSWER=\"contact_event_center_data_answer\",a.CONTACT_GET_CAPABILITIES_IDENTIFIER=\"contact_get_capabilities\",a.CONTACT_GET_CAPABILITIES_RESULT_IDENTIFIER=\"contact_get_capabilities_result\",a.CONTACT_GET_SETTINGS_IDENTIFIER=\"contact_get_settings\",a.CONTACT_GET_SETTINGS_RESULT_IDENTIFIER=\"contact_get_settings_result\",a.CONTACT_GET_CONSTRAINTS_IDENTIFIER=\"contact_get_constraints\",a.CONTACT_GET_CONSTRAINTS_RESULT_IDENTIFIER=\"contact_get_constraints_result\",a.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_IDENTIFIER=\"contact_get_remote_audio_flow_status\",a.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_IDENTIFIER=\"contact_get_remote_video_flow_status\",a.CONTACT_GET_REMOTE_AUDIO_FLOW_STATUS_RESULT_IDENTIFIER=\"contact_get_remote_audio_flow_status_result\",a.CONTACT_GET_REMOTE_VIDEO_FLOW_STATUS_RESULT_IDENTIFIER=\"contact_get_remote_video_flow_status_result\",a.CONTACT_GET_REMOTE_ERROR=\"contact_get_remote_error\",a.CONTACT_APPLY_CONSTRAINTS_IDENTIFIER=\"contact_apply_constraints_identifier\",a.CONTACT_APPLY_CONSTRAINTS_RESULT_IDENTIFIER=\"contact_apply_constraints_result_identifier\",a.CONVERSATION_ACCESS_GRANTED=\"GRANTED\",a.CONVERSATION_NEED_MODERATOR_ACCEPTATION=\"NEED_MODERATOR_ACCEPTATION\",a.CONVERSATION_ROLE_MODERATOR=\"moderator\",a.CONVERSATION_ROLE_CONTRIBUTOR=\"contributor\",a.CONVERSATION_ROLE_GUEST=\"guest\",a.CONVERSATION_WAITING_ROOM_PREFIX=\"waiting-room-\",a.CONVERSATION_SEND_DATA_IDENTIFIER=\"conv_data\",a.CONVERSATION_PERSISTENT_DATA_UPDATE_IDENTIFIER=\"conv_persistent_data_update\",a.CONVERSATION_JOIN_REQUEST_IDENTIFIER=\"conv_join_req\",a.CONVERSATION_JOIN_ANSWER_IDENTIFIER=\"conv_join_ans\",a.CONVERSATION_MODERATOR_CONNECTED_IDENTIFIER=\"conv_moderator_connected\",a.CONVERSATION_NEW_MEDIA_IDENTIFIER=\"conv_new_media\",a.CONVERSATION_CLOSED_IDENTIFIER=\"conv_closed\",a.CONVERSATION_INVITATION_IDENTIFIER=\"conv_invite\",a.INVITATION_ANSWER_IDENTIFIER=\"invite_ans\",a.RECORD_BASE_URL=\"https://data2.apizee.com:10000/videoManager\",a.RECORD_PLAY_URL=a.RECORD_BASE_URL+\"?action=play&recordedFileName=\",a.DEFAULT_MCU=\"mcu4.apizee.com\",a.DEFAULT_TURNADDRESS=\"mp1.apizee.com\",a.CALL_STATUS_WAITING_FOR_CALLEE=Symbol(\"CALL_STATUS_WAITING_FOR_CALLEE\"),a.CALL_STATUS_ONGOING=Symbol(\"CALL_STATUS_ONGOING\"),a.CALL_STATUS_ENDED=Symbol(\"CALL_STATUS_ENDED\"),a.DATACHANNEL_STATUS_WAITING=Symbol(\"DATACHANNEL_STATUS_WAITING\"),a.DATACHANNEL_STATUS_ONGOING=Symbol(\"DATACHANNEL_STATUS_ONGOING\"),a.DATACHANNEL_STATUS_ENDED=Symbol(\"DATACHANNEL_STATUS_ENDED\"),a.DATACHANNEL_TYPE_RECEIVE=Symbol(\"DATACHANNEL_TYPE_RECEIVE\"),a.DATACHANNEL_TYPE_SEND=Symbol(\"DATACHANNEL_TYPE_SEND\"),a.CONVERSATION_STATUS_JOINED=Symbol(\"CONVERSATION_STATUS_JOINED\"),a.CONVERSATION_STATUS_NOT_JOINED=Symbol(\"CONVERSATION_STATUS_NOT_JOINED\"),a.CONVERSATION_STATUS_WAITING=Symbol(\"CONVERSATION_STATUS_WAITING\"),a.CONVERSATION_STATUS_JOINING=Symbol(\"CONVERSATION_STATUS_JOINING\"),a.CONVERSATION_WHITEBOARD_STARTED=Symbol(\"CONVERSATION_WHITEBOARD_STARTED\"),a.CONVERSATION_WHITEBOARD_NOT_STARTED=Symbol(\"CONVERSATION_WHITEBOARD_NOT_STARTED\"),a.STATE_IDLE=Symbol(\"STATE_IDLE\"),a.STATE_JOINING=Symbol(\"STATE_JOINING\"),a.STATE_ACTIVE=Symbol(\"STATE_ACTIVE\"),a.STATE_LEAVING=Symbol(\"STATE_LEAVING\"),a.INVITATION_STATUS_ACCEPTED=Symbol(\"INVITATION_STATUS_ACCEPTED\"),a.INVITATION_STATUS_DECLINED=Symbol(\"INVITATION_STATUS_DECLINED\"),a.INVITATION_STATUS_STANDBY=Symbol(\"INVITATION_STATUS_STANDBY\"),a.INVITATION_STATUS_EXPIRED=Symbol(\"INVITATION_STATUS_EXPIRED\"),a.INVITATION_STATUS_CANCELLED=Symbol(\"INVITATION_STATUS_CANCELLED\"),a.INVITATION_STATUS_ENDED=Symbol(\"INVITATION_STATUS_ENDED\"),a.STREAM_TYPE_NO_INPUT=\"no_input\",a.STREAM_TYPE_AUDIO=\"audio\",a.STREAM_TYPE_VIDEO=\"video\",a.STREAM_AUDIO_ANALYSIS_THRESHOLD=100,a.CONTACT_DISCONNECTION_DELAY=1e4,a.CONVERSATION_JOIN_REQUEST_INTERVAL=5e3,a.APIRTC_MEDIA_DEVICE_DETECTION_DELAY=1e4,a.CONVERSATION_GROUP_CHAT_MEMBER_UPDATE_DELAY=5e3,a.CONVERSATION_WHITEBOARD_START_DELAY=5e3,a.CONVERSATION_RECORDING_STARTED_DELAY=1e4,a.CONVERSATION_RECORDING_STOPPED_DELAY=5e3,a.CONVERSATION_STREAMING_STARTED_DELAY=1e4,a.CONVERSATION_STREAMING_STOPPED_DELAY=1e4,a.CONVERSATION_PARTICIPANT_EJECTION_DELAY=5e3,a.JOIN_WAITING_ROOM_PRESENCE_GROUP_TIMEOUT=3e3},1215:(e,t,i)=>{\"use strict\";function a(e){return a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e},a(e)}function n(e,t){return 3===arguments.length?r(arguments[0],arguments[1],arguments[2]):\"null\"===t?null===e:\"array\"===t?null!==e&&\"object\"===a(e)&&Array.isArray(e):null!==e&&a(e)===t}function r(e,t,i){if(null!==t&&\"object\"===a(t)&&Array.isArray(t)&&t.length>=1){var o=t[0];if(t.length>1)return n(e,\"object\")&&n(o,\"string\")&&e.hasOwnProperty(o)&&n(e[o],\"object\")&&r(e[o],t.slice(1),i);t=o}return\"undefined\"===i?n(e,\"object\")&&n(t,\"string\")&&!e.hasOwnProperty(t)&&n(e[t],i):n(e,\"object\")&&n(t,\"string\")&&e.hasOwnProperty(t)&&n(e[t],i)}i.d(t,{g:()=>o}),i(4916),i(5306),i(3710),i(1539),i(9714),i(7941),i(9575),i(6716),i(9554),i(6992),i(1532),i(8783),i(3948),i(9753),i(7042),i(3843),i(2564),i(2526),i(1817),i(2165);var o={assignObject:function(e,t){var i,a,n;for(null==e&&(e={}),i=1;i<arguments.length;i+=1)for(a in n=arguments[i])n.hasOwnProperty(a)&&(e[a]=n[a]);return e},throttle:function(e,t){var i,a,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=null,s=0,l=function(){s=!1===r.leading?0:Date.now(),o=null,n=e.apply(i,a),o||(i=a=null)};return function(){var d=Date.now();s||!1!==r.leading||(s=d);var c=t-(d-s);return i=this,a=arguments,c<=0||c>t?(o&&(clearTimeout(o),o=null),s=d,n=e.apply(i,a),o||(i=a=null)):o||!1===r.trailing||(o=setTimeout(l,c)),n}},guid:function(){return\"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return(\"x\"===e?t:3&t|8).toString(16)}))},hashString:function(e){for(var t=0,i=0,a=e.length;i<a;)t=(t<<5)-t+e.charCodeAt(i++)<<0;return Math.abs(t)},arrayBuffertoString:function(e){var t=new DataView(e);return new TextDecoder(\"utf-8\").decode(t)},getAudioContext:function(){return apiRTC.getAudioContext()},parseRecordingEvent:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return[\"roomName\",\"callId\",\"recordType\",\"convId\",\"mediaId\",\"mediaURL\",\"recordedFileName\"].forEach((function(e){t.hasOwnProperty(e)&&(i[e]=String(t[e]))})),\"AUDIO-ONLY\"===t.mediaType?(i.audioOnly=!0,i.videoOnly=!1):\"VIDEO-ONLY\"===t.mediaType?(i.audioOnly=!1,i.videoOnly=!0):(i.audioOnly=!1,i.videoOnly=!1),\"composite\"===i.recordType&&(t.hasOwnProperty(\"mode\")?i.mode=t.mode:i.mode=\"complete\",t.hasOwnProperty(\"labelEnabled\")?(i.labelEnabled=!0===t.labelEnabled,!0===i.labelEnabled&&t.hasOwnProperty(\"labels\")&&(i.labels=t.labels)):i.labelEnabled=!1),i},paramsToQueryString:function(e){for(var t=\"\",i=0,a=Object.keys(e);i<a.length;i++){var n=a[i];t+=\"\"===t?\"?\":\"&\",null===e[n]||void 0===e[n]?console.warn(\"apiRTC Utils - paramsToQueryString : \"+n+\" is undefined!\"):t+=n+\"=\"+e[n].toString()}return t},createError:function(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};i&&i.error(t);var r={code:e};return t instanceof String?r.error=new Error(t):t instanceof Error?r.error=t:r.error=new Error(String(t)),n(a,\"object\")&&(a.hasOwnProperty(\"fromError\")&&(r.fromError=a.fromError),a.hasOwnProperty(\"httpCode\")&&(r.httpCode=a.httpCode)),r},isSet:function(e){return null!=e},isTypeof:n,isPropertyTypeof:r,_private:{dataCallsOnHold:new Map,dataChannelInvitations:new Map,dataCallsFileInfo:new Map}}},9662:(e,t,i)=>{var a=i(7854),n=i(614),r=i(6330),o=a.TypeError;e.exports=function(e){if(n(e))return e;throw o(r(e)+\" is not a function\")}},9483:(e,t,i)=>{var a=i(7854),n=i(4411),r=i(6330),o=a.TypeError;e.exports=function(e){if(n(e))return e;throw o(r(e)+\" is not a constructor\")}},6077:(e,t,i)=>{var a=i(7854),n=i(614),r=a.String,o=a.TypeError;e.exports=function(e){if(\"object\"==typeof e||n(e))return e;throw o(\"Can't set \"+r(e)+\" as a prototype\")}},1223:(e,t,i)=>{var a=i(5112),n=i(30),r=i(3070),o=a(\"unscopables\"),s=Array.prototype;null==s[o]&&r.f(s,o,{configurable:!0,value:n(null)}),e.exports=function(e){s[o][e]=!0}},1530:(e,t,i)=>{\"use strict\";var a=i(8710).charAt;e.exports=function(e,t,i){return t+(i?a(e,t).length:1)}},5787:(e,t,i)=>{var a=i(7854),n=i(7976),r=a.TypeError;e.exports=function(e,t){if(n(t,e))return e;throw r(\"Incorrect invocation\")}},9670:(e,t,i)=>{var a=i(7854),n=i(111),r=a.String,o=a.TypeError;e.exports=function(e){if(n(e))return e;throw o(r(e)+\" is not an object\")}},4019:e=>{e.exports=\"undefined\"!=typeof ArrayBuffer&&\"undefined\"!=typeof DataView},260:(e,t,i)=>{\"use strict\";var a,n,r,o=i(4019),s=i(9781),l=i(7854),d=i(614),c=i(111),u=i(2597),h=i(648),p=i(6330),g=i(8880),m=i(1320),C=i(3070).f,f=i(7976),v=i(9518),b=i(7674),S=i(5112),y=i(9711),I=l.Int8Array,T=I&&I.prototype,R=l.Uint8ClampedArray,w=R&&R.prototype,E=I&&v(I),M=T&&v(T),A=Object.prototype,O=l.TypeError,D=S(\"toStringTag\"),k=y(\"TYPED_ARRAY_TAG\"),_=y(\"TYPED_ARRAY_CONSTRUCTOR\"),U=o&&!!b&&\"Opera\"!==h(l.opera),N=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},L={BigInt64Array:8,BigUint64Array:8},x=function(e){if(!c(e))return!1;var t=h(e);return u(P,t)||u(L,t)};for(a in P)(r=(n=l[a])&&n.prototype)?g(r,_,n):U=!1;for(a in L)(r=(n=l[a])&&n.prototype)&&g(r,_,n);if((!U||!d(E)||E===Function.prototype)&&(E=function(){throw O(\"Incorrect invocation\")},U))for(a in P)l[a]&&b(l[a],E);if((!U||!M||M===A)&&(M=E.prototype,U))for(a in P)l[a]&&b(l[a].prototype,M);if(U&&v(w)!==M&&b(w,M),s&&!u(M,D))for(a in N=!0,C(M,D,{get:function(){return c(this)?this[k]:void 0}}),P)l[a]&&g(l[a],k,a);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:U,TYPED_ARRAY_CONSTRUCTOR:_,TYPED_ARRAY_TAG:N&&k,aTypedArray:function(e){if(x(e))return e;throw O(\"Target is not a typed array\")},aTypedArrayConstructor:function(e){if(d(e)&&(!b||f(E,e)))return e;throw O(p(e)+\" is not a typed array constructor\")},exportTypedArrayMethod:function(e,t,i){if(s){if(i)for(var a in P){var n=l[a];if(n&&u(n.prototype,e))try{delete n.prototype[e]}catch(e){}}M[e]&&!i||m(M,e,i?t:U&&T[e]||t)}},exportTypedArrayStaticMethod:function(e,t,i){var a,n;if(s){if(b){if(i)for(a in P)if((n=l[a])&&u(n,e))try{delete n[e]}catch(e){}if(E[e]&&!i)return;try{return m(E,e,i?t:U&&E[e]||t)}catch(e){}}for(a in P)!(n=l[a])||n[e]&&!i||m(n,e,t)}},isView:function(e){if(!c(e))return!1;var t=h(e);return\"DataView\"===t||u(P,t)||u(L,t)},isTypedArray:x,TypedArray:E,TypedArrayPrototype:M}},3331:(e,t,i)=>{\"use strict\";var a=i(7854),n=i(1702),r=i(9781),o=i(4019),s=i(6530),l=i(8880),d=i(2248),c=i(7293),u=i(5787),h=i(9303),p=i(7466),g=i(7067),m=i(1179),C=i(9518),f=i(7674),v=i(8006).f,b=i(3070).f,S=i(1285),y=i(206),I=i(8003),T=i(9909),R=s.PROPER,w=s.CONFIGURABLE,E=T.get,M=T.set,A=\"ArrayBuffer\",O=\"Wrong index\",D=a.ArrayBuffer,k=D,_=k&&k.prototype,U=a.DataView,N=U&&U.prototype,P=Object.prototype,L=a.Array,x=a.RangeError,W=n(S),V=n([].reverse),F=m.pack,j=m.unpack,B=function(e){return[255&e]},G=function(e){return[255&e,e>>8&255]},q=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},H=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},J=function(e){return F(e,23,4)},Y=function(e){return F(e,52,8)},z=function(e,t){b(e.prototype,t,{get:function(){return E(this)[t]}})},X=function(e,t,i,a){var n=g(i),r=E(e);if(n+t>r.byteLength)throw x(O);var o=E(r.buffer).bytes,s=n+r.byteOffset,l=y(o,s,s+t);return a?l:V(l)},K=function(e,t,i,a,n,r){var o=g(i),s=E(e);if(o+t>s.byteLength)throw x(O);for(var l=E(s.buffer).bytes,d=o+s.byteOffset,c=a(+n),u=0;u<t;u++)l[d+u]=c[r?u:t-u-1]};if(o){var Q=R&&D.name!==A;if(c((function(){D(1)}))&&c((function(){new D(-1)}))&&!c((function(){return new D,new D(1.5),new D(NaN),Q&&!w})))Q&&w&&l(D,\"name\",A);else{(k=function(e){return u(this,_),new D(g(e))}).prototype=_;for(var $,Z=v(D),ee=0;Z.length>ee;)($=Z[ee++])in k||l(k,$,D[$]);_.constructor=k}f&&C(N)!==P&&f(N,P);var te=new U(new k(2)),ie=n(N.setInt8);te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||d(N,{setInt8:function(e,t){ie(this,e,t<<24>>24)},setUint8:function(e,t){ie(this,e,t<<24>>24)}},{unsafe:!0})}else _=(k=function(e){u(this,_);var t=g(e);M(this,{bytes:W(L(t),0),byteLength:t}),r||(this.byteLength=t)}).prototype,N=(U=function(e,t,i){u(this,N),u(e,_);var a=E(e).byteLength,n=h(t);if(n<0||n>a)throw x(\"Wrong offset\");if(n+(i=void 0===i?a-n:p(i))>a)throw x(\"Wrong length\");M(this,{buffer:e,byteLength:i,byteOffset:n}),r||(this.buffer=e,this.byteLength=i,this.byteOffset=n)}).prototype,r&&(z(k,\"byteLength\"),z(U,\"buffer\"),z(U,\"byteLength\"),z(U,\"byteOffset\")),d(N,{getInt8:function(e){return X(this,1,e)[0]<<24>>24},getUint8:function(e){return X(this,1,e)[0]},getInt16:function(e){var t=X(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=X(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return H(X(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return H(X(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return j(X(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return j(X(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){K(this,1,e,B,t)},setUint8:function(e,t){K(this,1,e,B,t)},setInt16:function(e,t){K(this,2,e,G,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){K(this,2,e,G,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){K(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){K(this,4,e,q,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){K(this,4,e,J,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){K(this,8,e,Y,t,arguments.length>2?arguments[2]:void 0)}});I(k,A),I(U,\"DataView\"),e.exports={ArrayBuffer:k,DataView:U}},1048:(e,t,i)=>{\"use strict\";var a=i(7908),n=i(1400),r=i(6244),o=Math.min;e.exports=[].copyWithin||function(e,t){var i=a(this),s=r(i),l=n(e,s),d=n(t,s),c=arguments.length>2?arguments[2]:void 0,u=o((void 0===c?s:n(c,s))-d,s-l),h=1;for(d<l&&l<d+u&&(h=-1,d+=u-1,l+=u-1);u-- >0;)d in i?i[l]=i[d]:delete i[l],l+=h,d+=h;return i}},1285:(e,t,i)=>{\"use strict\";var a=i(7908),n=i(1400),r=i(6244);e.exports=function(e){for(var t=a(this),i=r(t),o=arguments.length,s=n(o>1?arguments[1]:void 0,i),l=o>2?arguments[2]:void 0,d=void 0===l?i:n(l,i);d>s;)t[s++]=e;return t}},8533:(e,t,i)=>{\"use strict\";var a=i(2092).forEach,n=i(9341)(\"forEach\");e.exports=n?[].forEach:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}},7745:e=>{e.exports=function(e,t){for(var i=0,a=t.length,n=new e(a);a>i;)n[i]=t[i++];return n}},8457:(e,t,i)=>{\"use strict\";var a=i(7854),n=i(9974),r=i(6916),o=i(7908),s=i(3411),l=i(7659),d=i(4411),c=i(6244),u=i(6135),h=i(8554),p=i(1246),g=a.Array;e.exports=function(e){var t=o(e),i=d(this),a=arguments.length,m=a>1?arguments[1]:void 0,C=void 0!==m;C&&(m=n(m,a>2?arguments[2]:void 0));var f,v,b,S,y,I,T=p(t),R=0;if(!T||this==g&&l(T))for(f=c(t),v=i?new this(f):g(f);f>R;R++)I=C?m(t[R],R):t[R],u(v,R,I);else for(y=(S=h(t,T)).next,v=i?new this:[];!(b=r(y,S)).done;R++)I=C?s(S,m,[b.value,R],!0):b.value,u(v,R,I);return v.length=R,v}},1318:(e,t,i)=>{var a=i(5656),n=i(1400),r=i(6244),o=function(e){return function(t,i,o){var s,l=a(t),d=r(l),c=n(o,d);if(e&&i!=i){for(;d>c;)if((s=l[c++])!=s)return!0}else for(;d>c;c++)if((e||c in l)&&l[c]===i)return e||c||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},2092:(e,t,i)=>{var a=i(9974),n=i(1702),r=i(8361),o=i(7908),s=i(6244),l=i(5417),d=n([].push),c=function(e){var t=1==e,i=2==e,n=3==e,c=4==e,u=6==e,h=7==e,p=5==e||u;return function(g,m,C,f){for(var v,b,S=o(g),y=r(S),I=a(m,C),T=s(y),R=0,w=f||l,E=t?w(g,T):i||h?w(g,0):void 0;T>R;R++)if((p||R in y)&&(b=I(v=y[R],R,S),e))if(t)E[R]=b;else if(b)switch(e){case 3:return!0;case 5:return v;case 6:return R;case 2:d(E,v)}else switch(e){case 4:return!1;case 7:d(E,v)}return u?-1:n||c?c:E}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterReject:c(7)}},6583:(e,t,i)=>{\"use strict\";var a=i(2104),n=i(5656),r=i(9303),o=i(6244),s=i(9341),l=Math.min,d=[].lastIndexOf,c=!!d&&1/[1].lastIndexOf(1,-0)<0,u=s(\"lastIndexOf\"),h=c||!u;e.exports=h?function(e){if(c)return a(d,this,arguments)||0;var t=n(this),i=o(t),s=i-1;for(arguments.length>1&&(s=l(s,r(arguments[1]))),s<0&&(s=i+s);s>=0;s--)if(s in t&&t[s]===e)return s||0;return-1}:d},1194:(e,t,i)=>{var a=i(7293),n=i(5112),r=i(7392),o=n(\"species\");e.exports=function(e){return r>=51||!a((function(){var t=[];return(t.constructor={})[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},9341:(e,t,i)=>{\"use strict\";var a=i(7293);e.exports=function(e,t){var i=[][e];return!!i&&a((function(){i.call(null,t||function(){throw 1},1)}))}},3671:(e,t,i)=>{var a=i(7854),n=i(9662),r=i(7908),o=i(8361),s=i(6244),l=a.TypeError,d=function(e){return function(t,i,a,d){n(i);var c=r(t),u=o(c),h=s(c),p=e?h-1:0,g=e?-1:1;if(a<2)for(;;){if(p in u){d=u[p],p+=g;break}if(p+=g,e?p<0:h<=p)throw l(\"Reduce of empty array with no initial value\")}for(;e?p>=0:h>p;p+=g)p in u&&(d=i(d,u[p],p,c));return d}};e.exports={left:d(!1),right:d(!0)}},206:(e,t,i)=>{var a=i(1702);e.exports=a([].slice)},4362:(e,t,i)=>{var a=i(206),n=Math.floor,r=function(e,t){var i=e.length,l=n(i/2);return i<8?o(e,t):s(e,r(a(e,0,l),t),r(a(e,l),t),t)},o=function(e,t){for(var i,a,n=e.length,r=1;r<n;){for(a=r,i=e[r];a&&t(e[a-1],i)>0;)e[a]=e[--a];a!==r++&&(e[a]=i)}return e},s=function(e,t,i,a){for(var n=t.length,r=i.length,o=0,s=0;o<n||s<r;)e[o+s]=o<n&&s<r?a(t[o],i[s])<=0?t[o++]:i[s++]:o<n?t[o++]:i[s++];return e};e.exports=r},7475:(e,t,i)=>{var a=i(7854),n=i(3157),r=i(4411),o=i(111),s=i(5112)(\"species\"),l=a.Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(r(t)&&(t===l||n(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?l:t}},5417:(e,t,i)=>{var a=i(7475);e.exports=function(e,t){return new(a(e))(0===t?0:t)}},3411:(e,t,i)=>{var a=i(9670),n=i(9212);e.exports=function(e,t,i,r){try{return r?t(a(i)[0],i[1]):t(i)}catch(t){n(e,\"throw\",t)}}},7072:(e,t,i)=>{var a=i(5112)(\"iterator\"),n=!1;try{var r=0,o={next:function(){return{done:!!r++}},return:function(){n=!0}};o[a]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var i=!1;try{var r={};r[a]=function(){return{next:function(){return{done:i=!0}}}},e(r)}catch(e){}return i}},4326:(e,t,i)=>{var a=i(1702),n=a({}.toString),r=a(\"\".slice);e.exports=function(e){return r(n(e),8,-1)}},648:(e,t,i)=>{var a=i(7854),n=i(1694),r=i(614),o=i(4326),s=i(5112)(\"toStringTag\"),l=a.Object,d=\"Arguments\"==o(function(){return arguments}());e.exports=n?o:function(e){var t,i,a;return void 0===e?\"Undefined\":null===e?\"Null\":\"string\"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=l(e),s))?i:d?o(t):\"Object\"==(a=o(t))&&r(t.callee)?\"Arguments\":a}},5631:(e,t,i)=>{\"use strict\";var a=i(3070).f,n=i(30),r=i(2248),o=i(9974),s=i(5787),l=i(408),d=i(654),c=i(6340),u=i(9781),h=i(2423).fastKey,p=i(9909),g=p.set,m=p.getterFor;e.exports={getConstructor:function(e,t,i,d){var c=e((function(e,a){s(e,p),g(e,{type:t,index:n(null),first:void 0,last:void 0,size:0}),u||(e.size=0),null!=a&&l(a,e[d],{that:e,AS_ENTRIES:i})})),p=c.prototype,C=m(t),f=function(e,t,i){var a,n,r=C(e),o=v(e,t);return o?o.value=i:(r.last=o={index:n=h(t,!0),key:t,value:i,previous:a=r.last,next:void 0,removed:!1},r.first||(r.first=o),a&&(a.next=o),u?r.size++:e.size++,\"F\"!==n&&(r.index[n]=o)),e},v=function(e,t){var i,a=C(e),n=h(t);if(\"F\"!==n)return a.index[n];for(i=a.first;i;i=i.next)if(i.key==t)return i};return r(p,{clear:function(){for(var e=C(this),t=e.index,i=e.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete t[i.index],i=i.next;e.first=e.last=void 0,u?e.size=0:this.size=0},delete:function(e){var t=this,i=C(t),a=v(t,e);if(a){var n=a.next,r=a.previous;delete i.index[a.index],a.removed=!0,r&&(r.next=n),n&&(n.previous=r),i.first==a&&(i.first=n),i.last==a&&(i.last=r),u?i.size--:t.size--}return!!a},forEach:function(e){for(var t,i=C(this),a=o(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:i.first;)for(a(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!v(this,e)}}),r(p,i?{get:function(e){var t=v(this,e);return t&&t.value},set:function(e,t){return f(this,0===e?0:e,t)}}:{add:function(e){return f(this,e=0===e?0:e,e)}}),u&&a(p,\"size\",{get:function(){return C(this).size}}),c},setStrong:function(e,t,i){var a=t+\" Iterator\",n=m(t),r=m(a);d(e,t,(function(e,t){g(this,{type:a,target:e,state:n(e),kind:t,last:void 0})}),(function(){for(var e=r(this),t=e.kind,i=e.last;i&&i.removed;)i=i.previous;return e.target&&(e.last=i=i?i.next:e.state.first)?\"keys\"==t?{value:i.key,done:!1}:\"values\"==t?{value:i.value,done:!1}:{value:[i.key,i.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),i?\"entries\":\"values\",!i,!0),c(t)}}},9320:(e,t,i)=>{\"use strict\";var a=i(1702),n=i(2248),r=i(2423).getWeakData,o=i(9670),s=i(111),l=i(5787),d=i(408),c=i(2092),u=i(2597),h=i(9909),p=h.set,g=h.getterFor,m=c.find,C=c.findIndex,f=a([].splice),v=0,b=function(e){return e.frozen||(e.frozen=new S)},S=function(){this.entries=[]},y=function(e,t){return m(e.entries,(function(e){return e[0]===t}))};S.prototype={get:function(e){var t=y(this,e);if(t)return t[1]},has:function(e){return!!y(this,e)},set:function(e,t){var i=y(this,e);i?i[1]=t:this.entries.push([e,t])},delete:function(e){var t=C(this.entries,(function(t){return t[0]===e}));return~t&&f(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,i,a){var c=e((function(e,n){l(e,h),p(e,{type:t,id:v++,frozen:void 0}),null!=n&&d(n,e[a],{that:e,AS_ENTRIES:i})})),h=c.prototype,m=g(t),C=function(e,t,i){var a=m(e),n=r(o(t),!0);return!0===n?b(a).set(t,i):n[a.id]=i,e};return n(h,{delete:function(e){var t=m(this);if(!s(e))return!1;var i=r(e);return!0===i?b(t).delete(e):i&&u(i,t.id)&&delete i[t.id]},has:function(e){var t=m(this);if(!s(e))return!1;var i=r(e);return!0===i?b(t).has(e):i&&u(i,t.id)}}),n(h,i?{get:function(e){var t=m(this);if(s(e)){var i=r(e);return!0===i?b(t).get(e):i?i[t.id]:void 0}},set:function(e,t){return C(this,e,t)}}:{add:function(e){return C(this,e,!0)}}),c}}},7710:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(7854),r=i(1702),o=i(4705),s=i(1320),l=i(2423),d=i(408),c=i(5787),u=i(614),h=i(111),p=i(7293),g=i(7072),m=i(8003),C=i(9587);e.exports=function(e,t,i){var f=-1!==e.indexOf(\"Map\"),v=-1!==e.indexOf(\"Weak\"),b=f?\"set\":\"add\",S=n[e],y=S&&S.prototype,I=S,T={},R=function(e){var t=r(y[e]);s(y,e,\"add\"==e?function(e){return t(this,0===e?0:e),this}:\"delete\"==e?function(e){return!(v&&!h(e))&&t(this,0===e?0:e)}:\"get\"==e?function(e){return v&&!h(e)?void 0:t(this,0===e?0:e)}:\"has\"==e?function(e){return!(v&&!h(e))&&t(this,0===e?0:e)}:function(e,i){return t(this,0===e?0:e,i),this})};if(o(e,!u(S)||!(v||y.forEach&&!p((function(){(new S).entries().next()})))))I=i.getConstructor(t,e,f,b),l.enable();else if(o(e,!0)){var w=new I,E=w[b](v?{}:-0,1)!=w,M=p((function(){w.has(1)})),A=g((function(e){new S(e)})),O=!v&&p((function(){for(var e=new S,t=5;t--;)e[b](t,t);return!e.has(-0)}));A||((I=t((function(e,t){c(e,y);var i=C(new S,e,I);return null!=t&&d(t,i[b],{that:i,AS_ENTRIES:f}),i}))).prototype=y,y.constructor=I),(M||O)&&(R(\"delete\"),R(\"has\"),f&&R(\"get\")),(O||E)&&R(b),v&&y.clear&&delete y.clear}return T[e]=I,a({global:!0,forced:I!=S},T),m(I,e),v||i.setStrong(I,e,f),I}},9920:(e,t,i)=>{var a=i(2597),n=i(3887),r=i(1236),o=i(3070);e.exports=function(e,t){for(var i=n(t),s=o.f,l=r.f,d=0;d<i.length;d++){var c=i[d];a(e,c)||s(e,c,l(t,c))}}},4964:(e,t,i)=>{var a=i(5112)(\"match\");e.exports=function(e){var t=/./;try{\"/./\"[e](t)}catch(i){try{return t[a]=!1,\"/./\"[e](t)}catch(e){}}return!1}},8544:(e,t,i)=>{var a=i(7293);e.exports=!a((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},4994:(e,t,i)=>{\"use strict\";var a=i(3383).IteratorPrototype,n=i(30),r=i(9114),o=i(8003),s=i(7497),l=function(){return this};e.exports=function(e,t,i){var d=t+\" Iterator\";return e.prototype=n(a,{next:r(1,i)}),o(e,d,!1,!0),s[d]=l,e}},8880:(e,t,i)=>{var a=i(9781),n=i(3070),r=i(9114);e.exports=a?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},9114:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6135:(e,t,i)=>{\"use strict\";var a=i(4948),n=i(3070),r=i(9114);e.exports=function(e,t,i){var o=a(t);o in e?n.f(e,o,r(0,i)):e[o]=i}},5573:(e,t,i)=>{\"use strict\";var a=i(7854),n=i(1702),r=i(7293),o=i(6650).start,s=a.RangeError,l=Math.abs,d=Date.prototype,c=d.toISOString,u=n(d.getTime),h=n(d.getUTCDate),p=n(d.getUTCFullYear),g=n(d.getUTCHours),m=n(d.getUTCMilliseconds),C=n(d.getUTCMinutes),f=n(d.getUTCMonth),v=n(d.getUTCSeconds);e.exports=r((function(){return\"0385-07-25T07:06:39.999Z\"!=c.call(new Date(-50000000000001))}))||!r((function(){c.call(new Date(NaN))}))?function(){if(!isFinite(u(this)))throw s(\"Invalid time value\");var e=this,t=p(e),i=m(e),a=t<0?\"-\":t>9999?\"+\":\"\";return a+o(l(t),a?6:4,0)+\"-\"+o(f(e)+1,2,0)+\"-\"+o(h(e),2,0)+\"T\"+o(g(e),2,0)+\":\"+o(C(e),2,0)+\":\"+o(v(e),2,0)+\".\"+o(i,3,0)+\"Z\"}:c},654:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(6916),r=i(1913),o=i(6530),s=i(614),l=i(4994),d=i(9518),c=i(7674),u=i(8003),h=i(8880),p=i(1320),g=i(5112),m=i(7497),C=i(3383),f=o.PROPER,v=o.CONFIGURABLE,b=C.IteratorPrototype,S=C.BUGGY_SAFARI_ITERATORS,y=g(\"iterator\"),I=\"keys\",T=\"values\",R=\"entries\",w=function(){return this};e.exports=function(e,t,i,o,g,C,E){l(i,t,o);var M,A,O,D=function(e){if(e===g&&P)return P;if(!S&&e in U)return U[e];switch(e){case I:case T:case R:return function(){return new i(this,e)}}return function(){return new i(this)}},k=t+\" Iterator\",_=!1,U=e.prototype,N=U[y]||U[\"@@iterator\"]||g&&U[g],P=!S&&N||D(g),L=\"Array\"==t&&U.entries||N;if(L&&(M=d(L.call(new e)))!==Object.prototype&&M.next&&(r||d(M)===b||(c?c(M,b):s(M[y])||p(M,y,w)),u(M,k,!0,!0),r&&(m[k]=w)),f&&g==T&&N&&N.name!==T&&(!r&&v?h(U,\"name\",T):(_=!0,P=function(){return n(N,this)})),g)if(A={values:D(T),keys:C?P:D(I),entries:D(R)},E)for(O in A)(S||_||!(O in U))&&p(U,O,A[O]);else a({target:t,proto:!0,forced:S||_},A);return r&&!E||U[y]===P||p(U,y,P,{name:g}),m[t]=P,A}},7235:(e,t,i)=>{var a=i(857),n=i(2597),r=i(6061),o=i(3070).f;e.exports=function(e){var t=a.Symbol||(a.Symbol={});n(t,e)||o(t,e,{value:r.f(e)})}},9781:(e,t,i)=>{var a=i(7293);e.exports=!a((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:(e,t,i)=>{var a=i(7854),n=i(111),r=a.document,o=n(r)&&n(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},8324:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8509:(e,t,i)=>{var a=i(317)(\"span\").classList,n=a&&a.constructor&&a.constructor.prototype;e.exports=n===Object.prototype?void 0:n},8886:(e,t,i)=>{var a=i(8113).match(/firefox\\/(\\d+)/i);e.exports=!!a&&+a[1]},7871:e=>{e.exports=\"object\"==typeof window},256:(e,t,i)=>{var a=i(8113);e.exports=/MSIE|Trident/.test(a)},1528:(e,t,i)=>{var a=i(8113),n=i(7854);e.exports=/ipad|iphone|ipod/i.test(a)&&void 0!==n.Pebble},6833:(e,t,i)=>{var a=i(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(a)},2805:(e,t,i)=>{var a=i(4326),n=i(7854);e.exports=\"process\"==a(n.process)},1036:(e,t,i)=>{var a=i(8113);e.exports=/web0s(?!.*chrome)/i.test(a)},8113:(e,t,i)=>{var a=i(5005);e.exports=a(\"navigator\",\"userAgent\")||\"\"},7392:(e,t,i)=>{var a,n,r=i(7854),o=i(8113),s=r.process,l=r.Deno,d=s&&s.versions||l&&l.version,c=d&&d.v8;c&&(n=(a=c.split(\".\"))[0]>0&&a[0]<4?1:+(a[0]+a[1])),!n&&o&&(!(a=o.match(/Edge\\/(\\d+)/))||a[1]>=74)&&(a=o.match(/Chrome\\/(\\d+)/))&&(n=+a[1]),e.exports=n},8008:(e,t,i)=>{var a=i(8113).match(/AppleWebKit\\/(\\d+)\\./);e.exports=!!a&&+a[1]},748:e=>{e.exports=[\"constructor\",\"hasOwnProperty\",\"isPrototypeOf\",\"propertyIsEnumerable\",\"toLocaleString\",\"toString\",\"valueOf\"]},2109:(e,t,i)=>{var a=i(7854),n=i(1236).f,r=i(8880),o=i(1320),s=i(3505),l=i(9920),d=i(4705);e.exports=function(e,t){var i,c,u,h,p,g=e.target,m=e.global,C=e.stat;if(i=m?a:C?a[g]||s(g,{}):(a[g]||{}).prototype)for(c in t){if(h=t[c],u=e.noTargetGet?(p=n(i,c))&&p.value:i[c],!d(m?c:g+(C?\".\":\"#\")+c,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;l(h,u)}(e.sham||u&&u.sham)&&r(h,\"sham\",!0),o(i,c,h,e)}}},7293:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},7007:(e,t,i)=>{\"use strict\";i(4916);var a=i(1702),n=i(1320),r=i(2261),o=i(7293),s=i(5112),l=i(8880),d=s(\"species\"),c=RegExp.prototype;e.exports=function(e,t,i,u){var h=s(e),p=!o((function(){var t={};return t[h]=function(){return 7},7!=\"\"[e](t)})),g=p&&!o((function(){var t=!1,i=/a/;return\"split\"===e&&((i={}).constructor={},i.constructor[d]=function(){return i},i.flags=\"\",i[h]=/./[h]),i.exec=function(){return t=!0,null},i[h](\"\"),!t}));if(!p||!g||i){var m=a(/./[h]),C=t(h,\"\"[e],(function(e,t,i,n,o){var s=a(e),l=t.exec;return l===r||l===c.exec?p&&!o?{done:!0,value:m(t,i,n)}:{done:!0,value:s(i,t,n)}:{done:!1}}));n(String.prototype,e,C[0]),n(c,h,C[1])}u&&l(c[h],\"sham\",!0)}},6677:(e,t,i)=>{var a=i(7293);e.exports=!a((function(){return Object.isExtensible(Object.preventExtensions({}))}))},2104:e=>{var t=Function.prototype,i=t.apply,a=t.bind,n=t.call;e.exports=\"object\"==typeof Reflect&&Reflect.apply||(a?n.bind(i):function(){return n.apply(i,arguments)})},9974:(e,t,i)=>{var a=i(1702),n=i(9662),r=a(a.bind);e.exports=function(e,t){return n(e),void 0===t?e:r?r(e,t):function(){return e.apply(t,arguments)}}},7065:(e,t,i)=>{\"use strict\";var a=i(7854),n=i(1702),r=i(9662),o=i(111),s=i(2597),l=i(206),d=a.Function,c=n([].concat),u=n([].join),h={},p=function(e,t,i){if(!s(h,t)){for(var a=[],n=0;n<t;n++)a[n]=\"a[\"+n+\"]\";h[t]=d(\"C,a\",\"return new C(\"+u(a,\",\")+\")\")}return h[t](e,i)};e.exports=d.bind||function(e){var t=r(this),i=t.prototype,a=l(arguments,1),n=function(){var i=c(a,l(arguments));return this instanceof n?p(t,i.length,i):t.apply(e,i)};return o(i)&&(n.prototype=i),n}},6916:e=>{var t=Function.prototype.call;e.exports=t.bind?t.bind(t):function(){return t.apply(t,arguments)}},6530:(e,t,i)=>{var a=i(9781),n=i(2597),r=Function.prototype,o=a&&Object.getOwnPropertyDescriptor,s=n(r,\"name\"),l=s&&\"something\"===function(){}.name,d=s&&(!a||a&&o(r,\"name\").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:d}},1702:e=>{var t=Function.prototype,i=t.bind,a=t.call,n=i&&i.bind(a);e.exports=i?function(e){return e&&n(a,e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},5005:(e,t,i)=>{var a=i(7854),n=i(614),r=function(e){return n(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?r(a[e]):a[e]&&a[e][t]}},1246:(e,t,i)=>{var a=i(648),n=i(8173),r=i(7497),o=i(5112)(\"iterator\");e.exports=function(e){if(null!=e)return n(e,o)||n(e,\"@@iterator\")||r[a(e)]}},8554:(e,t,i)=>{var a=i(7854),n=i(6916),r=i(9662),o=i(9670),s=i(6330),l=i(1246),d=a.TypeError;e.exports=function(e,t){var i=arguments.length<2?l(e):t;if(r(i))return o(n(i,e));throw d(s(e)+\" is not iterable\")}},8173:(e,t,i)=>{var a=i(9662);e.exports=function(e,t){var i=e[t];return null==i?void 0:a(i)}},647:(e,t,i)=>{var a=i(1702),n=i(7908),r=Math.floor,o=a(\"\".charAt),s=a(\"\".replace),l=a(\"\".slice),d=/\\$([$&'`]|\\d{1,2}|<[^>]*>)/g,c=/\\$([$&'`]|\\d{1,2})/g;e.exports=function(e,t,i,a,u,h){var p=i+e.length,g=a.length,m=c;return void 0!==u&&(u=n(u),m=d),s(h,m,(function(n,s){var d;switch(o(s,0)){case\"$\":return\"$\";case\"&\":return e;case\"`\":return l(t,0,i);case\"'\":return l(t,p);case\"<\":d=u[l(s,1,-1)];break;default:var c=+s;if(0===c)return n;if(c>g){var h=r(c/10);return 0===h?n:h<=g?void 0===a[h-1]?o(s,1):a[h-1]+o(s,1):n}d=a[c-1]}return void 0===d?\"\":d}))}},7854:(e,t,i)=>{var a=function(e){return e&&e.Math==Math&&e};e.exports=a(\"object\"==typeof globalThis&&globalThis)||a(\"object\"==typeof window&&window)||a(\"object\"==typeof self&&self)||a(\"object\"==typeof i.g&&i.g)||function(){return this}()||Function(\"return this\")()},2597:(e,t,i)=>{var a=i(1702),n=i(7908),r=a({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return r(n(e),t)}},3501:e=>{e.exports={}},842:(e,t,i)=>{var a=i(7854);e.exports=function(e,t){var i=a.console;i&&i.error&&(1==arguments.length?i.error(e):i.error(e,t))}},490:(e,t,i)=>{var a=i(5005);e.exports=a(\"document\",\"documentElement\")},4664:(e,t,i)=>{var a=i(9781),n=i(7293),r=i(317);e.exports=!a&&!n((function(){return 7!=Object.defineProperty(r(\"div\"),\"a\",{get:function(){return 7}}).a}))},1179:(e,t,i)=>{var a=i(7854).Array,n=Math.abs,r=Math.pow,o=Math.floor,s=Math.log,l=Math.LN2;e.exports={pack:function(e,t,i){var d,c,u,h=a(i),p=8*i-t-1,g=(1<<p)-1,m=g>>1,C=23===t?r(2,-24)-r(2,-77):0,f=e<0||0===e&&1/e<0?1:0,v=0;for((e=n(e))!=e||e===1/0?(c=e!=e?1:0,d=g):(d=o(s(e)/l),e*(u=r(2,-d))<1&&(d--,u*=2),(e+=d+m>=1?C/u:C*r(2,1-m))*u>=2&&(d++,u/=2),d+m>=g?(c=0,d=g):d+m>=1?(c=(e*u-1)*r(2,t),d+=m):(c=e*r(2,m-1)*r(2,t),d=0));t>=8;h[v++]=255&c,c/=256,t-=8);for(d=d<<t|c,p+=t;p>0;h[v++]=255&d,d/=256,p-=8);return h[--v]|=128*f,h},unpack:function(e,t){var i,a=e.length,n=8*a-t-1,o=(1<<n)-1,s=o>>1,l=n-7,d=a-1,c=e[d--],u=127&c;for(c>>=7;l>0;u=256*u+e[d],d--,l-=8);for(i=u&(1<<-l)-1,u>>=-l,l+=t;l>0;i=256*i+e[d],d--,l-=8);if(0===u)u=1-s;else{if(u===o)return i?NaN:c?-1/0:1/0;i+=r(2,t),u-=s}return(c?-1:1)*i*r(2,u-t)}}},8361:(e,t,i)=>{var a=i(7854),n=i(1702),r=i(7293),o=i(4326),s=a.Object,l=n(\"\".split);e.exports=r((function(){return!s(\"z\").propertyIsEnumerable(0)}))?function(e){return\"String\"==o(e)?l(e,\"\"):s(e)}:s},9587:(e,t,i)=>{var a=i(614),n=i(111),r=i(7674);e.exports=function(e,t,i){var o,s;return r&&a(o=t.constructor)&&o!==i&&n(s=o.prototype)&&s!==i.prototype&&r(e,s),e}},2788:(e,t,i)=>{var a=i(1702),n=i(614),r=i(5465),o=a(Function.toString);n(r.inspectSource)||(r.inspectSource=function(e){return o(e)}),e.exports=r.inspectSource},2423:(e,t,i)=>{var a=i(2109),n=i(1702),r=i(3501),o=i(111),s=i(2597),l=i(3070).f,d=i(8006),c=i(1156),u=i(9711),h=i(6677),p=!1,g=u(\"meta\"),m=0,C=Object.isExtensible||function(){return!0},f=function(e){l(e,g,{value:{objectID:\"O\"+m++,weakData:{}}})},v=e.exports={enable:function(){v.enable=function(){},p=!0;var e=d.f,t=n([].splice),i={};i[g]=1,e(i).length&&(d.f=function(i){for(var a=e(i),n=0,r=a.length;n<r;n++)if(a[n]===g){t(a,n,1);break}return a},a({target:\"Object\",stat:!0,forced:!0},{getOwnPropertyNames:c.f}))},fastKey:function(e,t){if(!o(e))return\"symbol\"==typeof e?e:(\"string\"==typeof e?\"S\":\"P\")+e;if(!s(e,g)){if(!C(e))return\"F\";if(!t)return\"E\";f(e)}return e[g].objectID},getWeakData:function(e,t){if(!s(e,g)){if(!C(e))return!0;if(!t)return!1;f(e)}return e[g].weakData},onFreeze:function(e){return h&&p&&C(e)&&!s(e,g)&&f(e),e}};r[g]=!0},9909:(e,t,i)=>{var a,n,r,o=i(8536),s=i(7854),l=i(1702),d=i(111),c=i(8880),u=i(2597),h=i(5465),p=i(6200),g=i(3501),m=\"Object already initialized\",C=s.TypeError,f=s.WeakMap;if(o||h.state){var v=h.state||(h.state=new f),b=l(v.get),S=l(v.has),y=l(v.set);a=function(e,t){if(S(v,e))throw new C(m);return t.facade=e,y(v,e,t),t},n=function(e){return b(v,e)||{}},r=function(e){return S(v,e)}}else{var I=p(\"state\");g[I]=!0,a=function(e,t){if(u(e,I))throw new C(m);return t.facade=e,c(e,I,t),t},n=function(e){return u(e,I)?e[I]:{}},r=function(e){return u(e,I)}}e.exports={set:a,get:n,has:r,enforce:function(e){return r(e)?n(e):a(e,{})},getterFor:function(e){return function(t){var i;if(!d(t)||(i=n(t)).type!==e)throw C(\"Incompatible receiver, \"+e+\" required\");return i}}}},7659:(e,t,i)=>{var a=i(5112),n=i(7497),r=a(\"iterator\"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[r]===e)}},3157:(e,t,i)=>{var a=i(4326);e.exports=Array.isArray||function(e){return\"Array\"==a(e)}},614:e=>{e.exports=function(e){return\"function\"==typeof e}},4411:(e,t,i)=>{var a=i(1702),n=i(7293),r=i(614),o=i(648),s=i(5005),l=i(2788),d=function(){},c=[],u=s(\"Reflect\",\"construct\"),h=/^\\s*(?:class|function)\\b/,p=a(h.exec),g=!h.exec(d),m=function(e){if(!r(e))return!1;try{return u(d,c,e),!0}catch(e){return!1}};e.exports=!u||n((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?function(e){if(!r(e))return!1;switch(o(e)){case\"AsyncFunction\":case\"GeneratorFunction\":case\"AsyncGeneratorFunction\":return!1}return g||!!p(h,l(e))}:m},5032:(e,t,i)=>{var a=i(2597);e.exports=function(e){return void 0!==e&&(a(e,\"value\")||a(e,\"writable\"))}},4705:(e,t,i)=>{var a=i(7293),n=i(614),r=/#|\\.prototype\\./,o=function(e,t){var i=l[s(e)];return i==c||i!=d&&(n(t)?a(t):!!t)},s=o.normalize=function(e){return String(e).replace(r,\".\").toLowerCase()},l=o.data={},d=o.NATIVE=\"N\",c=o.POLYFILL=\"P\";e.exports=o},5988:(e,t,i)=>{var a=i(111),n=Math.floor;e.exports=Number.isInteger||function(e){return!a(e)&&isFinite(e)&&n(e)===e}},111:(e,t,i)=>{var a=i(614);e.exports=function(e){return\"object\"==typeof e?null!==e:a(e)}},1913:e=>{e.exports=!1},7850:(e,t,i)=>{var a=i(111),n=i(4326),r=i(5112)(\"match\");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[r])?!!t:\"RegExp\"==n(e))}},2190:(e,t,i)=>{var a=i(7854),n=i(5005),r=i(614),o=i(7976),s=i(3307),l=a.Object;e.exports=s?function(e){return\"symbol\"==typeof e}:function(e){var t=n(\"Symbol\");return r(t)&&o(t.prototype,l(e))}},408:(e,t,i)=>{var a=i(7854),n=i(9974),r=i(6916),o=i(9670),s=i(6330),l=i(7659),d=i(6244),c=i(7976),u=i(8554),h=i(1246),p=i(9212),g=a.TypeError,m=function(e,t){this.stopped=e,this.result=t},C=m.prototype;e.exports=function(e,t,i){var a,f,v,b,S,y,I,T=i&&i.that,R=!(!i||!i.AS_ENTRIES),w=!(!i||!i.IS_ITERATOR),E=!(!i||!i.INTERRUPTED),M=n(t,T),A=function(e){return a&&p(a,\"normal\",e),new m(!0,e)},O=function(e){return R?(o(e),E?M(e[0],e[1],A):M(e[0],e[1])):E?M(e,A):M(e)};if(w)a=e;else{if(!(f=h(e)))throw g(s(e)+\" is not iterable\");if(l(f)){for(v=0,b=d(e);b>v;v++)if((S=O(e[v]))&&c(C,S))return S;return new m(!1)}a=u(e,f)}for(y=a.next;!(I=r(y,a)).done;){try{S=O(I.value)}catch(e){p(a,\"throw\",e)}if(\"object\"==typeof S&&S&&c(C,S))return S}return new m(!1)}},9212:(e,t,i)=>{var a=i(6916),n=i(9670),r=i(8173);e.exports=function(e,t,i){var o,s;n(e);try{if(!(o=r(e,\"return\"))){if(\"throw\"===t)throw i;return i}o=a(o,e)}catch(e){s=!0,o=e}if(\"throw\"===t)throw i;if(s)throw o;return n(o),i}},3383:(e,t,i)=>{\"use strict\";var a,n,r,o=i(7293),s=i(614),l=i(30),d=i(9518),c=i(1320),u=i(5112),h=i(1913),p=u(\"iterator\"),g=!1;[].keys&&(\"next\"in(r=[].keys())?(n=d(d(r)))!==Object.prototype&&(a=n):g=!0),null==a||o((function(){var e={};return a[p].call(e)!==e}))?a={}:h&&(a=l(a)),s(a[p])||c(a,p,(function(){return this})),e.exports={IteratorPrototype:a,BUGGY_SAFARI_ITERATORS:g}},7497:e=>{e.exports={}},6244:(e,t,i)=>{var a=i(7466);e.exports=function(e){return a(e.length)}},5948:(e,t,i)=>{var a,n,r,o,s,l,d,c,u=i(7854),h=i(9974),p=i(1236).f,g=i(261).set,m=i(6833),C=i(1528),f=i(1036),v=i(2805),b=u.MutationObserver||u.WebKitMutationObserver,S=u.document,y=u.process,I=u.Promise,T=p(u,\"queueMicrotask\"),R=T&&T.value;R||(a=function(){var e,t;for(v&&(e=y.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?o():r=void 0,e}}r=void 0,e&&e.enter()},m||v||f||!b||!S?!C&&I&&I.resolve?((d=I.resolve(void 0)).constructor=I,c=h(d.then,d),o=function(){c(a)}):v?o=function(){y.nextTick(a)}:(g=h(g,u),o=function(){g(a)}):(s=!0,l=S.createTextNode(\"\"),new b(a).observe(l,{characterData:!0}),o=function(){l.data=s=!s})),e.exports=R||function(e){var t={fn:e,next:void 0};r&&(r.next=t),n||(n=t,o()),r=t}},3366:(e,t,i)=>{var a=i(7854);e.exports=a.Promise},133:(e,t,i)=>{var a=i(7392),n=i(7293);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&a&&a<41}))},590:(e,t,i)=>{var a=i(7293),n=i(5112),r=i(1913),o=n(\"iterator\");e.exports=!a((function(){var e=new URL(\"b?a=1&b=2&c=3\",\"http://a\"),t=e.searchParams,i=\"\";return e.pathname=\"c%20d\",t.forEach((function(e,a){t.delete(\"b\"),i+=a+e})),r&&!e.toJSON||!t.sort||\"http://a/c%20d?a=1&c=3\"!==e.href||\"3\"!==t.get(\"c\")||\"a=1\"!==String(new URLSearchParams(\"?a=1\"))||!t[o]||\"a\"!==new URL(\"https://a@b\").username||\"b\"!==new URLSearchParams(new URLSearchParams(\"a=b\")).get(\"a\")||\"xn--e1aybc\"!==new URL(\"http://\").host||\"#%D0%B1\"!==new URL(\"http://a#\").hash||\"a1c3\"!==i||\"x\"!==new URL(\"http://x\",void 0).host}))},8536:(e,t,i)=>{var a=i(7854),n=i(614),r=i(2788),o=a.WeakMap;e.exports=n(o)&&/native code/.test(r(o))},8523:(e,t,i)=>{\"use strict\";var a=i(9662),n=function(e){var t,i;this.promise=new e((function(e,a){if(void 0!==t||void 0!==i)throw TypeError(\"Bad Promise constructor\");t=e,i=a})),this.resolve=a(t),this.reject=a(i)};e.exports.f=function(e){return new n(e)}},3929:(e,t,i)=>{var a=i(7854),n=i(7850),r=a.TypeError;e.exports=function(e){if(n(e))throw r(\"The method doesn't accept regular expressions\");return e}},3009:(e,t,i)=>{var a=i(7854),n=i(7293),r=i(1702),o=i(1340),s=i(3111).trim,l=i(1361),d=a.parseInt,c=a.Symbol,u=c&&c.iterator,h=/^[+-]?0x/i,p=r(h.exec),g=8!==d(l+\"08\")||22!==d(l+\"0x16\")||u&&!n((function(){d(Object(u))}));e.exports=g?function(e,t){var i=s(o(e));return d(i,t>>>0||(p(h,i)?16:10))}:d},1574:(e,t,i)=>{\"use strict\";var a=i(9781),n=i(1702),r=i(6916),o=i(7293),s=i(1956),l=i(5181),d=i(5296),c=i(7908),u=i(8361),h=Object.assign,p=Object.defineProperty,g=n([].concat);e.exports=!h||o((function(){if(a&&1!==h({b:1},h(p({},\"a\",{enumerable:!0,get:function(){p(this,\"b\",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},i=Symbol(),n=\"abcdefghijklmnopqrst\";return e[i]=7,n.split(\"\").forEach((function(e){t[e]=e})),7!=h({},e)[i]||s(h({},t)).join(\"\")!=n}))?function(e,t){for(var i=c(e),n=arguments.length,o=1,h=l.f,p=d.f;n>o;)for(var m,C=u(arguments[o++]),f=h?g(s(C),h(C)):s(C),v=f.length,b=0;v>b;)m=f[b++],a&&!r(p,C,m)||(i[m]=C[m]);return i}:h},30:(e,t,i)=>{var a,n=i(9670),r=i(6048),o=i(748),s=i(3501),l=i(490),d=i(317),c=i(6200)(\"IE_PROTO\"),u=function(){},h=function(e){return\"<script>\"+e+\"<\\/script>\"},p=function(e){e.write(h(\"\")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{a=new ActiveXObject(\"htmlfile\")}catch(e){}var e,t;g=\"undefined\"!=typeof document?document.domain&&a?p(a):((t=d(\"iframe\")).style.display=\"none\",l.appendChild(t),t.src=String(\"javascript:\"),(e=t.contentWindow.document).open(),e.write(h(\"document.F=Object\")),e.close(),e.F):p(a);for(var i=o.length;i--;)delete g.prototype[o[i]];return g()};s[c]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(u.prototype=n(e),i=new u,u.prototype=null,i[c]=e):i=g(),void 0===t?i:r(i,t)}},6048:(e,t,i)=>{var a=i(9781),n=i(3070),r=i(9670),o=i(5656),s=i(1956);e.exports=a?Object.defineProperties:function(e,t){r(e);for(var i,a=o(t),l=s(t),d=l.length,c=0;d>c;)n.f(e,i=l[c++],a[i]);return e}},3070:(e,t,i)=>{var a=i(7854),n=i(9781),r=i(4664),o=i(9670),s=i(4948),l=a.TypeError,d=Object.defineProperty;t.f=n?d:function(e,t,i){if(o(e),t=s(t),o(i),r)try{return d(e,t,i)}catch(e){}if(\"get\"in i||\"set\"in i)throw l(\"Accessors not supported\");return\"value\"in i&&(e[t]=i.value),e}},1236:(e,t,i)=>{var a=i(9781),n=i(6916),r=i(5296),o=i(9114),s=i(5656),l=i(4948),d=i(2597),c=i(4664),u=Object.getOwnPropertyDescriptor;t.f=a?u:function(e,t){if(e=s(e),t=l(t),c)try{return u(e,t)}catch(e){}if(d(e,t))return o(!n(r.f,e,t),e[t])}},1156:(e,t,i)=>{var a=i(4326),n=i(5656),r=i(8006).f,o=i(206),s=\"object\"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&\"Window\"==a(e)?function(e){try{return r(e)}catch(e){return o(s)}}(e):r(n(e))}},8006:(e,t,i)=>{var a=i(6324),n=i(748).concat(\"length\",\"prototype\");t.f=Object.getOwnPropertyNames||function(e){return a(e,n)}},5181:(e,t)=>{t.f=Object.getOwnPropertySymbols},9518:(e,t,i)=>{var a=i(7854),n=i(2597),r=i(614),o=i(7908),s=i(6200),l=i(8544),d=s(\"IE_PROTO\"),c=a.Object,u=c.prototype;e.exports=l?c.getPrototypeOf:function(e){var t=o(e);if(n(t,d))return t[d];var i=t.constructor;return r(i)&&t instanceof i?i.prototype:t instanceof c?u:null}},7976:(e,t,i)=>{var a=i(1702);e.exports=a({}.isPrototypeOf)},6324:(e,t,i)=>{var a=i(1702),n=i(2597),r=i(5656),o=i(1318).indexOf,s=i(3501),l=a([].push);e.exports=function(e,t){var i,a=r(e),d=0,c=[];for(i in a)!n(s,i)&&n(a,i)&&l(c,i);for(;t.length>d;)n(a,i=t[d++])&&(~o(c,i)||l(c,i));return c}},1956:(e,t,i)=>{var a=i(6324),n=i(748);e.exports=Object.keys||function(e){return a(e,n)}},5296:(e,t)=>{\"use strict\";var i={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,n=a&&!i.call({1:2},1);t.f=n?function(e){var t=a(this,e);return!!t&&t.enumerable}:i},7674:(e,t,i)=>{var a=i(1702),n=i(9670),r=i(6077);e.exports=Object.setPrototypeOf||(\"__proto__\"in{}?function(){var e,t=!1,i={};try{(e=a(Object.getOwnPropertyDescriptor(Object.prototype,\"__proto__\").set))(i,[]),t=i instanceof Array}catch(e){}return function(i,a){return n(i),r(a),t?e(i,a):i.__proto__=a,i}}():void 0)},4699:(e,t,i)=>{var a=i(9781),n=i(1702),r=i(1956),o=i(5656),s=n(i(5296).f),l=n([].push),d=function(e){return function(t){for(var i,n=o(t),d=r(n),c=d.length,u=0,h=[];c>u;)i=d[u++],a&&!s(n,i)||l(h,e?[i,n[i]]:n[i]);return h}};e.exports={entries:d(!0),values:d(!1)}},288:(e,t,i)=>{\"use strict\";var a=i(1694),n=i(648);e.exports=a?{}.toString:function(){return\"[object \"+n(this)+\"]\"}},2140:(e,t,i)=>{var a=i(7854),n=i(6916),r=i(614),o=i(111),s=a.TypeError;e.exports=function(e,t){var i,a;if(\"string\"===t&&r(i=e.toString)&&!o(a=n(i,e)))return a;if(r(i=e.valueOf)&&!o(a=n(i,e)))return a;if(\"string\"!==t&&r(i=e.toString)&&!o(a=n(i,e)))return a;throw s(\"Can't convert object to primitive value\")}},3887:(e,t,i)=>{var a=i(5005),n=i(1702),r=i(8006),o=i(5181),s=i(9670),l=n([].concat);e.exports=a(\"Reflect\",\"ownKeys\")||function(e){var t=r.f(s(e)),i=o.f;return i?l(t,i(e)):t}},857:(e,t,i)=>{var a=i(7854);e.exports=a},2534:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},9478:(e,t,i)=>{var a=i(9670),n=i(111),r=i(8523);e.exports=function(e,t){if(a(e),n(t)&&t.constructor===e)return t;var i=r.f(e);return(0,i.resolve)(t),i.promise}},2248:(e,t,i)=>{var a=i(1320);e.exports=function(e,t,i){for(var n in t)a(e,n,t[n],i);return e}},1320:(e,t,i)=>{var a=i(7854),n=i(614),r=i(2597),o=i(8880),s=i(3505),l=i(2788),d=i(9909),c=i(6530).CONFIGURABLE,u=d.get,h=d.enforce,p=String(String).split(\"String\");(e.exports=function(e,t,i,l){var d,u=!!l&&!!l.unsafe,g=!!l&&!!l.enumerable,m=!!l&&!!l.noTargetGet,C=l&&void 0!==l.name?l.name:t;n(i)&&(\"Symbol(\"===String(C).slice(0,7)&&(C=\"[\"+String(C).replace(/^Symbol\\(([^)]*)\\)/,\"$1\")+\"]\"),(!r(i,\"name\")||c&&i.name!==C)&&o(i,\"name\",C),(d=h(i)).source||(d.source=p.join(\"string\"==typeof C?C:\"\"))),e!==a?(u?!m&&e[t]&&(g=!0):delete e[t],g?e[t]=i:o(e,t,i)):g?e[t]=i:s(t,i)})(Function.prototype,\"toString\",(function(){return n(this)&&u(this).source||l(this)}))},7651:(e,t,i)=>{var a=i(7854),n=i(6916),r=i(9670),o=i(614),s=i(4326),l=i(2261),d=a.TypeError;e.exports=function(e,t){var i=e.exec;if(o(i)){var a=n(i,e,t);return null!==a&&r(a),a}if(\"RegExp\"===s(e))return n(l,e,t);throw d(\"RegExp#exec called on incompatible receiver\")}},2261:(e,t,i)=>{\"use strict\";var a,n,r=i(6916),o=i(1702),s=i(1340),l=i(7066),d=i(2999),c=i(2309),u=i(30),h=i(9909).get,p=i(9441),g=i(7168),m=c(\"native-string-replace\",String.prototype.replace),C=RegExp.prototype.exec,f=C,v=o(\"\".charAt),b=o(\"\".indexOf),S=o(\"\".replace),y=o(\"\".slice),I=(n=/b*/g,r(C,a=/a/,\"a\"),r(C,n,\"a\"),0!==a.lastIndex||0!==n.lastIndex),T=d.UNSUPPORTED_Y||d.BROKEN_CARET,R=void 0!==/()??/.exec(\"\")[1];(I||R||T||p||g)&&(f=function(e){var t,i,a,n,o,d,c,p=this,g=h(p),w=s(e),E=g.raw;if(E)return E.lastIndex=p.lastIndex,t=r(f,E,w),p.lastIndex=E.lastIndex,t;var M=g.groups,A=T&&p.sticky,O=r(l,p),D=p.source,k=0,_=w;if(A&&(O=S(O,\"y\",\"\"),-1===b(O,\"g\")&&(O+=\"g\"),_=y(w,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&\"\\n\"!==v(w,p.lastIndex-1))&&(D=\"(?: \"+D+\")\",_=\" \"+_,k++),i=new RegExp(\"^(?:\"+D+\")\",O)),R&&(i=new RegExp(\"^\"+D+\"$(?!\\\\s)\",O)),I&&(a=p.lastIndex),n=r(C,A?i:p,_),A?n?(n.input=y(n.input,k),n[0]=y(n[0],k),n.index=p.lastIndex,p.lastIndex+=n[0].length):p.lastIndex=0:I&&n&&(p.lastIndex=p.global?n.index+n[0].length:a),R&&n&&n.length>1&&r(m,n[0],i,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n&&M)for(n.groups=d=u(null),o=0;o<M.length;o++)d[(c=M[o])[0]]=n[c[1]];return n}),e.exports=f},7066:(e,t,i)=>{\"use strict\";var a=i(9670);e.exports=function(){var e=a(this),t=\"\";return e.global&&(t+=\"g\"),e.ignoreCase&&(t+=\"i\"),e.multiline&&(t+=\"m\"),e.dotAll&&(t+=\"s\"),e.unicode&&(t+=\"u\"),e.sticky&&(t+=\"y\"),t}},2999:(e,t,i)=>{var a=i(7293),n=i(7854).RegExp;t.UNSUPPORTED_Y=a((function(){var e=n(\"a\",\"y\");return e.lastIndex=2,null!=e.exec(\"abcd\")})),t.BROKEN_CARET=a((function(){var e=n(\"^r\",\"gy\");return e.lastIndex=2,null!=e.exec(\"str\")}))},9441:(e,t,i)=>{var a=i(7293),n=i(7854).RegExp;e.exports=a((function(){var e=n(\".\",\"s\");return!(e.dotAll&&e.exec(\"\\n\")&&\"s\"===e.flags)}))},7168:(e,t,i)=>{var a=i(7293),n=i(7854).RegExp;e.exports=a((function(){var e=n(\"(?<a>b)\",\"g\");return\"b\"!==e.exec(\"b\").groups.a||\"bc\"!==\"b\".replace(e,\"$<a>c\")}))},4488:(e,t,i)=>{var a=i(7854).TypeError;e.exports=function(e){if(null==e)throw a(\"Can't call method on \"+e);return e}},1150:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},3505:(e,t,i)=>{var a=i(7854),n=Object.defineProperty;e.exports=function(e,t){try{n(a,e,{value:t,configurable:!0,writable:!0})}catch(i){a[e]=t}return t}},6340:(e,t,i)=>{\"use strict\";var a=i(5005),n=i(3070),r=i(5112),o=i(9781),s=r(\"species\");e.exports=function(e){var t=a(e),i=n.f;o&&t&&!t[s]&&i(t,s,{configurable:!0,get:function(){return this}})}},8003:(e,t,i)=>{var a=i(3070).f,n=i(2597),r=i(5112)(\"toStringTag\");e.exports=function(e,t,i){e&&!n(e=i?e:e.prototype,r)&&a(e,r,{configurable:!0,value:t})}},6200:(e,t,i)=>{var a=i(2309),n=i(9711),r=a(\"keys\");e.exports=function(e){return r[e]||(r[e]=n(e))}},5465:(e,t,i)=>{var a=i(7854),n=i(3505),r=\"__core-js_shared__\",o=a[r]||n(r,{});e.exports=o},2309:(e,t,i)=>{var a=i(1913),n=i(5465);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})(\"versions\",[]).push({version:\"3.19.0\",mode:a?\"pure\":\"global\",copyright:\" 2021 Denis Pushkarev (zloirock.ru)\"})},6707:(e,t,i)=>{var a=i(9670),n=i(9483),r=i(5112)(\"species\");e.exports=function(e,t){var i,o=a(e).constructor;return void 0===o||null==(i=a(o)[r])?t:n(i)}},8710:(e,t,i)=>{var a=i(1702),n=i(9303),r=i(1340),o=i(4488),s=a(\"\".charAt),l=a(\"\".charCodeAt),d=a(\"\".slice),c=function(e){return function(t,i){var a,c,u=r(o(t)),h=n(i),p=u.length;return h<0||h>=p?e?\"\":void 0:(a=l(u,h))<55296||a>56319||h+1===p||(c=l(u,h+1))<56320||c>57343?e?s(u,h):a:e?d(u,h,h+2):c-56320+(a-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},6650:(e,t,i)=>{var a=i(1702),n=i(7466),r=i(1340),o=i(8415),s=i(4488),l=a(o),d=a(\"\".slice),c=Math.ceil,u=function(e){return function(t,i,a){var o,u,h=r(s(t)),p=n(i),g=h.length,m=void 0===a?\" \":r(a);return p<=g||\"\"==m?h:((u=l(m,c((o=p-g)/m.length))).length>o&&(u=d(u,0,o)),e?h+u:u+h)}};e.exports={start:u(!1),end:u(!0)}},3197:(e,t,i)=>{\"use strict\";var a=i(7854),n=i(1702),r=2147483647,o=/[^\\0-\\u007E]/,s=/[.\\u3002\\uFF0E\\uFF61]/g,l=\"Overflow: input needs wider integers to process\",d=a.RangeError,c=n(s.exec),u=Math.floor,h=String.fromCharCode,p=n(\"\".charCodeAt),g=n([].join),m=n([].push),C=n(\"\".replace),f=n(\"\".split),v=n(\"\".toLowerCase),b=function(e){return e+22+75*(e<26)},S=function(e,t,i){var a=0;for(e=i?u(e/700):e>>1,e+=u(e/t);e>455;a+=36)e=u(e/35);return u(a+36*e/(e+38))},y=function(e){var t=[];e=function(e){for(var t=[],i=0,a=e.length;i<a;){var n=p(e,i++);if(n>=55296&&n<=56319&&i<a){var r=p(e,i++);56320==(64512&r)?m(t,((1023&n)<<10)+(1023&r)+65536):(m(t,n),i--)}else m(t,n)}return t}(e);var i,a,n=e.length,o=128,s=0,c=72;for(i=0;i<e.length;i++)(a=e[i])<128&&m(t,h(a));var C=t.length,f=C;for(C&&m(t,\"-\");f<n;){var v=r;for(i=0;i<e.length;i++)(a=e[i])>=o&&a<v&&(v=a);var y=f+1;if(v-o>u((r-s)/y))throw d(l);for(s+=(v-o)*y,o=v,i=0;i<e.length;i++){if((a=e[i])<o&&++s>r)throw d(l);if(a==o){for(var I=s,T=36;;T+=36){var R=T<=c?1:T>=c+26?26:T-c;if(I<R)break;var w=I-R,E=36-R;m(t,h(b(R+w%E))),I=u(w/E)}m(t,h(b(I))),c=S(s,y,f==C),s=0,++f}}++s,++o}return g(t,\"\")};e.exports=function(e){var t,i,a=[],n=f(C(v(e),s,\".\"),\".\");for(t=0;t<n.length;t++)i=n[t],m(a,c(o,i)?\"xn--\"+y(i):i);return g(a,\".\")}},8415:(e,t,i)=>{\"use strict\";var a=i(7854),n=i(9303),r=i(1340),o=i(4488),s=a.RangeError;e.exports=function(e){var t=r(o(this)),i=\"\",a=n(e);if(a<0||a==1/0)throw s(\"Wrong number of repetitions\");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(i+=t);return i}},6091:(e,t,i)=>{var a=i(6530).PROPER,n=i(7293),r=i(1361);e.exports=function(e){return n((function(){return!!r[e]()||\"\"!==\"\"[e]()||a&&r[e].name!==e}))}},3111:(e,t,i)=>{var a=i(1702),n=i(4488),r=i(1340),o=i(1361),s=a(\"\".replace),l=\"[\"+o+\"]\",d=RegExp(\"^\"+l+l+\"*\"),c=RegExp(l+l+\"*$\"),u=function(e){return function(t){var i=r(n(t));return 1&e&&(i=s(i,d,\"\")),2&e&&(i=s(i,c,\"\")),i}};e.exports={start:u(1),end:u(2),trim:u(3)}},261:(e,t,i)=>{var a,n,r,o,s=i(7854),l=i(2104),d=i(9974),c=i(614),u=i(2597),h=i(7293),p=i(490),g=i(206),m=i(317),C=i(6833),f=i(2805),v=s.setImmediate,b=s.clearImmediate,S=s.process,y=s.Dispatch,I=s.Function,T=s.MessageChannel,R=s.String,w=0,E={};try{a=s.location}catch(e){}var M=function(e){if(u(E,e)){var t=E[e];delete E[e],t()}},A=function(e){return function(){M(e)}},O=function(e){M(e.data)},D=function(e){s.postMessage(R(e),a.protocol+\"//\"+a.host)};v&&b||(v=function(e){var t=g(arguments,1);return E[++w]=function(){l(c(e)?e:I(e),void 0,t)},n(w),w},b=function(e){delete E[e]},f?n=function(e){S.nextTick(A(e))}:y&&y.now?n=function(e){y.now(A(e))}:T&&!C?(o=(r=new T).port2,r.port1.onmessage=O,n=d(o.postMessage,o)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&a&&\"file:\"!==a.protocol&&!h(D)?(n=D,s.addEventListener(\"message\",O,!1)):n=\"onreadystatechange\"in m(\"script\")?function(e){p.appendChild(m(\"script\")).onreadystatechange=function(){p.removeChild(this),M(e)}}:function(e){setTimeout(A(e),0)}),e.exports={set:v,clear:b}},863:(e,t,i)=>{var a=i(1702);e.exports=a(1..valueOf)},1400:(e,t,i)=>{var a=i(9303),n=Math.max,r=Math.min;e.exports=function(e,t){var i=a(e);return i<0?n(i+t,0):r(i,t)}},7067:(e,t,i)=>{var a=i(7854),n=i(9303),r=i(7466),o=a.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),i=r(t);if(t!==i)throw o(\"Wrong length or index\");return i}},5656:(e,t,i)=>{var a=i(8361),n=i(4488);e.exports=function(e){return a(n(e))}},9303:e=>{var t=Math.ceil,i=Math.floor;e.exports=function(e){var a=+e;return a!=a||0===a?0:(a>0?i:t)(a)}},7466:(e,t,i)=>{var a=i(9303),n=Math.min;e.exports=function(e){return e>0?n(a(e),9007199254740991):0}},7908:(e,t,i)=>{var a=i(7854),n=i(4488),r=a.Object;e.exports=function(e){return r(n(e))}},4590:(e,t,i)=>{var a=i(7854),n=i(3002),r=a.RangeError;e.exports=function(e,t){var i=n(e);if(i%t)throw r(\"Wrong offset\");return i}},3002:(e,t,i)=>{var a=i(7854),n=i(9303),r=a.RangeError;e.exports=function(e){var t=n(e);if(t<0)throw r(\"The argument can't be less than 0\");return t}},7593:(e,t,i)=>{var a=i(7854),n=i(6916),r=i(111),o=i(2190),s=i(8173),l=i(2140),d=i(5112),c=a.TypeError,u=d(\"toPrimitive\");e.exports=function(e,t){if(!r(e)||o(e))return e;var i,a=s(e,u);if(a){if(void 0===t&&(t=\"default\"),i=n(a,e,t),!r(i)||o(i))return i;throw c(\"Can't convert object to primitive value\")}return void 0===t&&(t=\"number\"),l(e,t)}},4948:(e,t,i)=>{var a=i(7593),n=i(2190);e.exports=function(e){var t=a(e,\"string\");return n(t)?t:t+\"\"}},1694:(e,t,i)=>{var a={};a[i(5112)(\"toStringTag\")]=\"z\",e.exports=\"[object z]\"===String(a)},1340:(e,t,i)=>{var a=i(7854),n=i(648),r=a.String;e.exports=function(e){if(\"Symbol\"===n(e))throw TypeError(\"Cannot convert a Symbol value to a string\");return r(e)}},6330:(e,t,i)=>{var a=i(7854).String;e.exports=function(e){try{return a(e)}catch(e){return\"Object\"}}},9843:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(7854),r=i(6916),o=i(9781),s=i(3832),l=i(260),d=i(3331),c=i(5787),u=i(9114),h=i(8880),p=i(5988),g=i(7466),m=i(7067),C=i(4590),f=i(4948),v=i(2597),b=i(648),S=i(111),y=i(2190),I=i(30),T=i(7976),R=i(7674),w=i(8006).f,E=i(7321),M=i(2092).forEach,A=i(6340),O=i(3070),D=i(1236),k=i(9909),_=i(9587),U=k.get,N=k.set,P=O.f,L=D.f,x=Math.round,W=n.RangeError,V=d.ArrayBuffer,F=V.prototype,j=d.DataView,B=l.NATIVE_ARRAY_BUFFER_VIEWS,G=l.TYPED_ARRAY_CONSTRUCTOR,q=l.TYPED_ARRAY_TAG,H=l.TypedArray,J=l.TypedArrayPrototype,Y=l.aTypedArrayConstructor,z=l.isTypedArray,X=\"BYTES_PER_ELEMENT\",K=\"Wrong length\",Q=function(e,t){Y(e);for(var i=0,a=t.length,n=new e(a);a>i;)n[i]=t[i++];return n},$=function(e,t){P(e,t,{get:function(){return U(this)[t]}})},Z=function(e){var t;return T(F,e)||\"ArrayBuffer\"==(t=b(e))||\"SharedArrayBuffer\"==t},ee=function(e,t){return z(e)&&!y(t)&&t in e&&p(+t)&&t>=0},te=function(e,t){return t=f(t),ee(e,t)?u(2,e[t]):L(e,t)},ie=function(e,t,i){return t=f(t),!(ee(e,t)&&S(i)&&v(i,\"value\"))||v(i,\"get\")||v(i,\"set\")||i.configurable||v(i,\"writable\")&&!i.writable||v(i,\"enumerable\")&&!i.enumerable?P(e,t,i):(e[t]=i.value,e)};o?(B||(D.f=te,O.f=ie,$(J,\"buffer\"),$(J,\"byteOffset\"),$(J,\"byteLength\"),$(J,\"length\")),a({target:\"Object\",stat:!0,forced:!B},{getOwnPropertyDescriptor:te,defineProperty:ie}),e.exports=function(e,t,i){var o=e.match(/\\d+$/)[0]/8,l=e+(i?\"Clamped\":\"\")+\"Array\",d=\"get\"+e,u=\"set\"+e,p=n[l],f=p,v=f&&f.prototype,b={},y=function(e,t){P(e,t,{get:function(){return function(e,t){var i=U(e);return i.view[d](t*o+i.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,a){var n=U(e);i&&(a=(a=x(a))<0?0:a>255?255:255&a),n.view[u](t*o+n.byteOffset,a,!0)}(this,t,e)},enumerable:!0})};B?s&&(f=t((function(e,t,i,a){return c(e,v),_(S(t)?Z(t)?void 0!==a?new p(t,C(i,o),a):void 0!==i?new p(t,C(i,o)):new p(t):z(t)?Q(f,t):r(E,f,t):new p(m(t)),e,f)})),R&&R(f,H),M(w(p),(function(e){e in f||h(f,e,p[e])})),f.prototype=v):(f=t((function(e,t,i,a){c(e,v);var n,s,l,d=0,u=0;if(S(t)){if(!Z(t))return z(t)?Q(f,t):r(E,f,t);n=t,u=C(i,o);var h=t.byteLength;if(void 0===a){if(h%o)throw W(K);if((s=h-u)<0)throw W(K)}else if((s=g(a)*o)+u>h)throw W(K);l=s/o}else l=m(t),n=new V(s=l*o);for(N(e,{buffer:n,byteOffset:u,byteLength:s,length:l,view:new j(n)});d<l;)y(e,d++)})),R&&R(f,H),v=f.prototype=I(J)),v.constructor!==f&&h(v,\"constructor\",f),h(v,G,f),q&&h(v,q,l),b[l]=f,a({global:!0,forced:f!=p,sham:!B},b),X in f||h(f,X,o),X in v||h(v,X,o),A(l)}):e.exports=function(){}},3832:(e,t,i)=>{var a=i(7854),n=i(7293),r=i(7072),o=i(260).NATIVE_ARRAY_BUFFER_VIEWS,s=a.ArrayBuffer,l=a.Int8Array;e.exports=!o||!n((function(){l(1)}))||!n((function(){new l(-1)}))||!r((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||n((function(){return 1!==new l(new s(2),1,void 0).length}))},3074:(e,t,i)=>{var a=i(7745),n=i(6304);e.exports=function(e,t){return a(n(e),t)}},7321:(e,t,i)=>{var a=i(9974),n=i(6916),r=i(9483),o=i(7908),s=i(6244),l=i(8554),d=i(1246),c=i(7659),u=i(260).aTypedArrayConstructor;e.exports=function(e){var t,i,h,p,g,m,C=r(this),f=o(e),v=arguments.length,b=v>1?arguments[1]:void 0,S=void 0!==b,y=d(f);if(y&&!c(y))for(m=(g=l(f,y)).next,f=[];!(p=n(m,g)).done;)f.push(p.value);for(S&&v>2&&(b=a(b,arguments[2])),i=s(f),h=new(u(C))(i),t=0;i>t;t++)h[t]=S?b(f[t],t):f[t];return h}},6304:(e,t,i)=>{var a=i(260),n=i(6707),r=a.TYPED_ARRAY_CONSTRUCTOR,o=a.aTypedArrayConstructor;e.exports=function(e){return o(n(e,e[r]))}},9711:(e,t,i)=>{var a=i(1702),n=0,r=Math.random(),o=a(1..toString);e.exports=function(e){return\"Symbol(\"+(void 0===e?\"\":e)+\")_\"+o(++n+r,36)}},3307:(e,t,i)=>{var a=i(133);e.exports=a&&!Symbol.sham&&\"symbol\"==typeof Symbol.iterator},6061:(e,t,i)=>{var a=i(5112);t.f=a},5112:(e,t,i)=>{var a=i(7854),n=i(2309),r=i(2597),o=i(9711),s=i(133),l=i(3307),d=n(\"wks\"),c=a.Symbol,u=c&&c.for,h=l?c:c&&c.withoutSetter||o;e.exports=function(e){if(!r(d,e)||!s&&\"string\"!=typeof d[e]){var t=\"Symbol.\"+e;s&&r(c,e)?d[e]=c[e]:d[e]=l&&u?u(t):h(t)}return d[e]}},1361:e=>{e.exports=\"\\t\\n\\v\\f\\r \\u2028\\u2029\\ufeff\"},8264:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(7854),r=i(3331),o=i(6340),s=r.ArrayBuffer;a({global:!0,forced:n.ArrayBuffer!==s},{ArrayBuffer:s}),o(\"ArrayBuffer\")},9575:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(1702),r=i(7293),o=i(3331),s=i(9670),l=i(1400),d=i(7466),c=i(6707),u=o.ArrayBuffer,h=o.DataView,p=h.prototype,g=n(u.prototype.slice),m=n(p.getUint8),C=n(p.setUint8);a({target:\"ArrayBuffer\",proto:!0,unsafe:!0,forced:r((function(){return!new u(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(g&&void 0===t)return g(s(this),e);for(var i=s(this).byteLength,a=l(e,i),n=l(void 0===t?i:t,i),r=new(c(this,u))(d(n-a)),o=new h(this),p=new h(r),f=0;a<n;)C(p,f++,m(o,a++));return r}})},2222:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(7854),r=i(7293),o=i(3157),s=i(111),l=i(7908),d=i(6244),c=i(6135),u=i(5417),h=i(1194),p=i(5112),g=i(7392),m=p(\"isConcatSpreadable\"),C=9007199254740991,f=\"Maximum allowed index exceeded\",v=n.TypeError,b=g>=51||!r((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),S=h(\"concat\"),y=function(e){if(!s(e))return!1;var t=e[m];return void 0!==t?!!t:o(e)};a({target:\"Array\",proto:!0,forced:!b||!S},{concat:function(e){var t,i,a,n,r,o=l(this),s=u(o,0),h=0;for(t=-1,a=arguments.length;t<a;t++)if(y(r=-1===t?o:arguments[t])){if(h+(n=d(r))>C)throw v(f);for(i=0;i<n;i++,h++)i in r&&c(s,h,r[i])}else{if(h>=C)throw v(f);c(s,h++,r)}return s.length=h,s}})},3290:(e,t,i)=>{var a=i(2109),n=i(1285),r=i(1223);a({target:\"Array\",proto:!0},{fill:n}),r(\"fill\")},7327:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(2092).filter;a({target:\"Array\",proto:!0,forced:!i(1194)(\"filter\")},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},9826:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(2092).find,r=i(1223),o=\"find\",s=!0;o in[]&&Array(1).find((function(){s=!1})),a({target:\"Array\",proto:!0,forced:s},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},9554:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(8533);a({target:\"Array\",proto:!0,forced:[].forEach!=n},{forEach:n})},1038:(e,t,i)=>{var a=i(2109),n=i(8457);a({target:\"Array\",stat:!0,forced:!i(7072)((function(e){Array.from(e)}))},{from:n})},6699:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(1318).includes,r=i(1223);a({target:\"Array\",proto:!0},{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(\"includes\")},2772:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(1702),r=i(1318).indexOf,o=i(9341),s=n([].indexOf),l=!!s&&1/s([1],1,-0)<0,d=o(\"indexOf\");a({target:\"Array\",proto:!0,forced:l||!d},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return l?s(this,e,t)||0:r(this,e,t)}})},9753:(e,t,i)=>{i(2109)({target:\"Array\",stat:!0},{isArray:i(3157)})},6992:(e,t,i)=>{\"use strict\";var a=i(5656),n=i(1223),r=i(7497),o=i(9909),s=i(654),l=\"Array Iterator\",d=o.set,c=o.getterFor(l);e.exports=s(Array,\"Array\",(function(e,t){d(this,{type:l,target:a(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,i=e.kind,a=e.index++;return!t||a>=t.length?(e.target=void 0,{value:void 0,done:!0}):\"keys\"==i?{value:a,done:!1}:\"values\"==i?{value:t[a],done:!1}:{value:[a,t[a]],done:!1}}),\"values\"),r.Arguments=r.Array,n(\"keys\"),n(\"values\"),n(\"entries\")},9600:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(1702),r=i(8361),o=i(5656),s=i(9341),l=n([].join),d=r!=Object,c=s(\"join\",\",\");a({target:\"Array\",proto:!0,forced:d||!c},{join:function(e){return l(o(this),void 0===e?\",\":e)}})},1249:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(2092).map;a({target:\"Array\",proto:!0,forced:!i(1194)(\"map\")},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},7042:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(7854),r=i(3157),o=i(4411),s=i(111),l=i(1400),d=i(6244),c=i(5656),u=i(6135),h=i(5112),p=i(1194),g=i(206),m=p(\"slice\"),C=h(\"species\"),f=n.Array,v=Math.max;a({target:\"Array\",proto:!0,forced:!m},{slice:function(e,t){var i,a,n,h=c(this),p=d(h),m=l(e,p),b=l(void 0===t?p:t,p);if(r(h)&&(i=h.constructor,(o(i)&&(i===f||r(i.prototype))||s(i)&&null===(i=i[C]))&&(i=void 0),i===f||void 0===i))return g(h,m,b);for(a=new(void 0===i?f:i)(v(b-m,0)),n=0;m<b;m++,n++)m in h&&u(a,n,h[m]);return a.length=n,a}})},2707:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(1702),r=i(9662),o=i(7908),s=i(6244),l=i(1340),d=i(7293),c=i(4362),u=i(9341),h=i(8886),p=i(256),g=i(7392),m=i(8008),C=[],f=n(C.sort),v=n(C.push),b=d((function(){C.sort(void 0)})),S=d((function(){C.sort(null)})),y=u(\"sort\"),I=!d((function(){if(g)return g<70;if(!(h&&h>3)){if(p)return!0;if(m)return m<603;var e,t,i,a,n=\"\";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(a=0;a<47;a++)C.push({k:t+a,v:i})}for(C.sort((function(e,t){return t.v-e.v})),a=0;a<C.length;a++)t=C[a].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return\"DGBEFHACIJK\"!==n}}));a({target:\"Array\",proto:!0,forced:b||!S||!y||!I},{sort:function(e){void 0!==e&&r(e);var t=o(this);if(I)return void 0===e?f(t):f(t,e);var i,a,n=[],d=s(t);for(a=0;a<d;a++)a in t&&v(n,t[a]);for(c(n,function(e){return function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:l(t)>l(i)?1:-1}}(e)),i=n.length,a=0;a<i;)t[a]=n[a++];for(;a<d;)delete t[a++];return t}})},561:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(7854),r=i(1400),o=i(9303),s=i(6244),l=i(7908),d=i(5417),c=i(6135),u=i(1194)(\"splice\"),h=n.TypeError,p=Math.max,g=Math.min,m=9007199254740991,C=\"Maximum allowed length exceeded\";a({target:\"Array\",proto:!0,forced:!u},{splice:function(e,t){var i,a,n,u,f,v,b=l(this),S=s(b),y=r(e,S),I=arguments.length;if(0===I?i=a=0:1===I?(i=0,a=S-y):(i=I-2,a=g(p(o(t),0),S-y)),S+i-a>m)throw h(C);for(n=d(b,a),u=0;u<a;u++)(f=y+u)in b&&c(n,u,b[f]);if(n.length=a,i<a){for(u=y;u<S-a;u++)v=u+i,(f=u+a)in b?b[v]=b[f]:delete b[v];for(u=S;u>S-a+i;u--)delete b[u-1]}else if(i>a)for(u=S-a;u>y;u--)v=u+i-1,(f=u+a-1)in b?b[v]=b[f]:delete b[v];for(u=0;u<i;u++)b[u+y]=arguments[u+2];return b.length=S-a+i,n}})},6716:(e,t,i)=>{var a=i(2109),n=i(3331);a({global:!0,forced:!i(4019)},{DataView:n.DataView})},3843:(e,t,i)=>{var a=i(2109),n=i(7854),r=i(1702),o=n.Date,s=r(o.prototype.getTime);a({target:\"Date\",stat:!0},{now:function(){return s(new o)}})},5268:(e,t,i)=>{var a=i(2109),n=i(5573);a({target:\"Date\",proto:!0,forced:Date.prototype.toISOString!==n},{toISOString:n})},5735:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(7293),r=i(7908),o=i(7593);a({target:\"Date\",proto:!0,forced:n((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}))},{toJSON:function(e){var t=r(this),i=o(t,\"number\");return\"number\"!=typeof i||isFinite(i)?t.toISOString():null}})},3710:(e,t,i)=>{var a=i(1702),n=i(1320),r=Date.prototype,o=\"Invalid Date\",s=a(r.toString),l=a(r.getTime);String(new Date(NaN))!=o&&n(r,\"toString\",(function(){var e=l(this);return e==e?s(this):o}))},4812:(e,t,i)=>{i(2109)({target:\"Function\",proto:!0},{bind:i(7065)})},8309:(e,t,i)=>{var a=i(9781),n=i(6530).EXISTS,r=i(1702),o=i(3070).f,s=Function.prototype,l=r(s.toString),d=/^\\s*function ([^ (]*)/,c=r(d.exec);a&&!n&&o(s,\"name\",{configurable:!0,get:function(){try{return c(d,l(this))[1]}catch(e){return\"\"}}})},1532:(e,t,i)=>{\"use strict\";i(7710)(\"Map\",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i(5631))},658:(e,t,i)=>{var a=i(2109),n=Math.log,r=Math.LOG10E;a({target:\"Math\",stat:!0},{log10:function(e){return n(e)*r}})},9653:(e,t,i)=>{\"use strict\";var a=i(9781),n=i(7854),r=i(1702),o=i(4705),s=i(1320),l=i(2597),d=i(9587),c=i(7976),u=i(2190),h=i(7593),p=i(7293),g=i(8006).f,m=i(1236).f,C=i(3070).f,f=i(863),v=i(3111).trim,b=\"Number\",S=n.Number,y=S.prototype,I=n.TypeError,T=r(\"\".slice),R=r(\"\".charCodeAt),w=function(e){var t=h(e,\"number\");return\"bigint\"==typeof t?t:E(t)},E=function(e){var t,i,a,n,r,o,s,l,d=h(e,\"number\");if(u(d))throw I(\"Cannot convert a Symbol value to a number\");if(\"string\"==typeof d&&d.length>2)if(d=v(d),43===(t=R(d,0))||45===t){if(88===(i=R(d,2))||120===i)return NaN}else if(48===t){switch(R(d,1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+d}for(o=(r=T(d,2)).length,s=0;s<o;s++)if((l=R(r,s))<48||l>n)return NaN;return parseInt(r,a)}return+d};if(o(b,!S(\" 0o1\")||!S(\"0b1\")||S(\"+0x1\"))){for(var M,A=function(e){var t=arguments.length<1?0:S(w(e)),i=this;return c(y,i)&&p((function(){f(i)}))?d(Object(t),i,A):t},O=a?g(S):\"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range\".split(\",\"),D=0;O.length>D;D++)l(S,M=O[D])&&!l(A,M)&&C(A,M,m(S,M));A.prototype=y,y.constructor=A,s(n,b,A)}},3161:(e,t,i)=>{i(2109)({target:\"Number\",stat:!0},{isInteger:i(5988)})},4363:(e,t,i)=>{i(2109)({target:\"Number\",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},9601:(e,t,i)=>{var a=i(2109),n=i(1574);a({target:\"Object\",stat:!0,forced:Object.assign!==n},{assign:n})},8011:(e,t,i)=>{i(2109)({target:\"Object\",stat:!0,sham:!i(9781)},{create:i(30)})},9070:(e,t,i)=>{var a=i(2109),n=i(9781);a({target:\"Object\",stat:!0,forced:!n,sham:!n},{defineProperty:i(3070).f})},9720:(e,t,i)=>{var a=i(2109),n=i(4699).entries;a({target:\"Object\",stat:!0},{entries:function(e){return n(e)}})},5003:(e,t,i)=>{var a=i(2109),n=i(7293),r=i(5656),o=i(1236).f,s=i(9781),l=n((function(){o(1)}));a({target:\"Object\",stat:!0,forced:!s||l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o(r(e),t)}})},489:(e,t,i)=>{var a=i(2109),n=i(7293),r=i(7908),o=i(9518),s=i(8544);a({target:\"Object\",stat:!0,forced:n((function(){o(1)})),sham:!s},{getPrototypeOf:function(e){return o(r(e))}})},7941:(e,t,i)=>{var a=i(2109),n=i(7908),r=i(1956);a({target:\"Object\",stat:!0,forced:i(7293)((function(){r(1)}))},{keys:function(e){return r(n(e))}})},8304:(e,t,i)=>{i(2109)({target:\"Object\",stat:!0},{setPrototypeOf:i(7674)})},1539:(e,t,i)=>{var a=i(1694),n=i(1320),r=i(288);a||n(Object.prototype,\"toString\",r,{unsafe:!0})},2479:(e,t,i)=>{var a=i(2109),n=i(4699).values;a({target:\"Object\",stat:!0},{values:function(e){return n(e)}})},1058:(e,t,i)=>{var a=i(2109),n=i(3009);a({global:!0,forced:parseInt!=n},{parseInt:n})},8674:(e,t,i)=>{\"use strict\";var a,n,r,o,s=i(2109),l=i(1913),d=i(7854),c=i(5005),u=i(6916),h=i(3366),p=i(1320),g=i(2248),m=i(7674),C=i(8003),f=i(6340),v=i(9662),b=i(614),S=i(111),y=i(5787),I=i(2788),T=i(408),R=i(7072),w=i(6707),E=i(261).set,M=i(5948),A=i(9478),O=i(842),D=i(8523),k=i(2534),_=i(9909),U=i(4705),N=i(5112),P=i(7871),L=i(2805),x=i(7392),W=N(\"species\"),V=\"Promise\",F=_.get,j=_.set,B=_.getterFor(V),G=h&&h.prototype,q=h,H=G,J=d.TypeError,Y=d.document,z=d.process,X=D.f,K=X,Q=!!(Y&&Y.createEvent&&d.dispatchEvent),$=b(d.PromiseRejectionEvent),Z=\"unhandledrejection\",ee=!1,te=U(V,(function(){var e=I(q),t=e!==String(q);if(!t&&66===x)return!0;if(l&&!H.finally)return!0;if(x>=51&&/native code/.test(e))return!1;var i=new q((function(e){e(1)})),a=function(e){e((function(){}),(function(){}))};return(i.constructor={})[W]=a,!(ee=i.then((function(){}))instanceof a)||!t&&P&&!$})),ie=te||!R((function(e){q.all(e).catch((function(){}))})),ae=function(e){var t;return!(!S(e)||!b(t=e.then))&&t},ne=function(e,t){if(!e.notified){e.notified=!0;var i=e.reactions;M((function(){for(var a=e.value,n=1==e.state,r=0;i.length>r;){var o,s,l,d=i[r++],c=n?d.ok:d.fail,h=d.resolve,p=d.reject,g=d.domain;try{c?(n||(2===e.rejection&&le(e),e.rejection=1),!0===c?o=a:(g&&g.enter(),o=c(a),g&&(g.exit(),l=!0)),o===d.promise?p(J(\"Promise-chain cycle\")):(s=ae(o))?u(s,o,h,p):h(o)):p(a)}catch(e){g&&!l&&g.exit(),p(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},re=function(e,t,i){var a,n;Q?((a=Y.createEvent(\"Event\")).promise=t,a.reason=i,a.initEvent(e,!1,!0),d.dispatchEvent(a)):a={promise:t,reason:i},!$&&(n=d[\"on\"+e])?n(a):e===Z&&O(\"Unhandled promise rejection\",i)},oe=function(e){u(E,d,(function(){var t,i=e.facade,a=e.value;if(se(e)&&(t=k((function(){L?z.emit(\"unhandledRejection\",a,i):re(Z,i,a)})),e.rejection=L||se(e)?2:1,t.error))throw t.value}))},se=function(e){return 1!==e.rejection&&!e.parent},le=function(e){u(E,d,(function(){var t=e.facade;L?z.emit(\"rejectionHandled\",t):re(\"rejectionhandled\",t,e.value)}))},de=function(e,t,i){return function(a){e(t,a,i)}},ce=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=2,ne(e,!0))},ue=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw J(\"Promise can't be resolved itself\");var a=ae(t);a?M((function(){var i={done:!1};try{u(a,t,de(ue,i,e),de(ce,i,e))}catch(t){ce(i,t,e)}})):(e.value=t,e.state=1,ne(e,!1))}catch(t){ce({done:!1},t,e)}}};if(te&&(H=(q=function(e){y(this,H),v(e),u(a,this);var t=F(this);try{e(de(ue,t),de(ce,t))}catch(e){ce(t,e)}}).prototype,(a=function(e){j(this,{type:V,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=g(H,{then:function(e,t){var i=B(this),a=i.reactions,n=X(w(this,q));return n.ok=!b(e)||e,n.fail=b(t)&&t,n.domain=L?z.domain:void 0,i.parent=!0,a[a.length]=n,0!=i.state&&ne(i,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),n=function(){var e=new a,t=F(e);this.promise=e,this.resolve=de(ue,t),this.reject=de(ce,t)},D.f=X=function(e){return e===q||e===r?new n(e):K(e)},!l&&b(h)&&G!==Object.prototype)){o=G.then,ee||(p(G,\"then\",(function(e,t){var i=this;return new q((function(e,t){u(o,i,e,t)})).then(e,t)}),{unsafe:!0}),p(G,\"catch\",H.catch,{unsafe:!0}));try{delete G.constructor}catch(e){}m&&m(G,H)}s({global:!0,wrap:!0,forced:te},{Promise:q}),C(q,V,!1,!0),f(V),r=c(V),s({target:V,stat:!0,forced:te},{reject:function(e){var t=X(this);return u(t.reject,void 0,e),t.promise}}),s({target:V,stat:!0,forced:l||te},{resolve:function(e){return A(l&&this===r?q:this,e)}}),s({target:V,stat:!0,forced:ie},{all:function(e){var t=this,i=X(t),a=i.resolve,n=i.reject,r=k((function(){var i=v(t.resolve),r=[],o=0,s=1;T(e,(function(e){var l=o++,d=!1;s++,u(i,t,e).then((function(e){d||(d=!0,r[l]=e,--s||a(r))}),n)})),--s||a(r)}));return r.error&&n(r.value),i.promise},race:function(e){var t=this,i=X(t),a=i.reject,n=k((function(){var n=v(t.resolve);T(e,(function(e){u(n,t,e).then(i.resolve,a)}))}));return n.error&&a(n.value),i.promise}})},2419:(e,t,i)=>{var a=i(2109),n=i(5005),r=i(2104),o=i(7065),s=i(9483),l=i(9670),d=i(111),c=i(30),u=i(7293),h=n(\"Reflect\",\"construct\"),p=Object.prototype,g=[].push,m=u((function(){function e(){}return!(h((function(){}),[],e)instanceof e)})),C=!u((function(){h((function(){}))})),f=m||C;a({target:\"Reflect\",stat:!0,forced:f,sham:f},{construct:function(e,t){s(e),l(t);var i=arguments.length<3?e:s(arguments[2]);if(C&&!m)return h(e,t,i);if(e==i){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var a=[null];return r(g,a,t),new(r(o,e,a))}var n=i.prototype,u=c(d(n)?n:p),f=r(e,u,t);return d(f)?f:u}})},4819:(e,t,i)=>{var a=i(2109),n=i(6916),r=i(111),o=i(9670),s=i(5032),l=i(1236),d=i(9518);a({target:\"Reflect\",stat:!0},{get:function e(t,i){var a,c,u=arguments.length<3?t:arguments[2];return o(t)===u?t[i]:(a=l.f(t,i))?s(a)?a.value:void 0===a.get?void 0:n(a.get,u):r(c=d(t))?e(c,i,u):void 0}})},4603:(e,t,i)=>{var a=i(9781),n=i(7854),r=i(1702),o=i(4705),s=i(9587),l=i(8880),d=i(3070).f,c=i(8006).f,u=i(7976),h=i(7850),p=i(1340),g=i(7066),m=i(2999),C=i(1320),f=i(7293),v=i(2597),b=i(9909).enforce,S=i(6340),y=i(5112),I=i(9441),T=i(7168),R=y(\"match\"),w=n.RegExp,E=w.prototype,M=n.SyntaxError,A=r(g),O=r(E.exec),D=r(\"\".charAt),k=r(\"\".replace),_=r(\"\".indexOf),U=r(\"\".slice),N=/^\\?<[^\\s\\d!#%&*+<=>@^][^\\s!#%&*+<=>@^]*>/,P=/a/g,L=/a/g,x=new w(P)!==P,W=m.UNSUPPORTED_Y;if(o(\"RegExp\",a&&(!x||W||I||T||f((function(){return L[R]=!1,w(P)!=P||w(L)==L||\"/a/i\"!=w(P,\"i\")}))))){for(var V=function(e,t){var i,a,n,r,o,d,c=u(E,this),g=h(e),m=void 0===t,C=[],f=e;if(!c&&g&&m&&e.constructor===V)return e;if((g||u(E,e))&&(e=e.source,m&&(t=\"flags\"in f?f.flags:A(f))),e=void 0===e?\"\":p(e),t=void 0===t?\"\":p(t),f=e,I&&\"dotAll\"in P&&(a=!!t&&_(t,\"s\")>-1)&&(t=k(t,/s/g,\"\")),i=t,W&&\"sticky\"in P&&(n=!!t&&_(t,\"y\")>-1)&&(t=k(t,/y/g,\"\")),T&&(r=function(e){for(var t,i=e.length,a=0,n=\"\",r=[],o={},s=!1,l=!1,d=0,c=\"\";a<=i;a++){if(\"\\\\\"===(t=D(e,a)))t+=D(e,++a);else if(\"]\"===t)s=!1;else if(!s)switch(!0){case\"[\"===t:s=!0;break;case\"(\"===t:O(N,U(e,a+1))&&(a+=2,l=!0),n+=t,d++;continue;case\">\"===t&&l:if(\"\"===c||v(o,c))throw new M(\"Invalid capture group name\");o[c]=!0,r[r.length]=[c,d],l=!1,c=\"\";continue}l?c+=t:n+=t}return[n,r]}(e),e=r[0],C=r[1]),o=s(w(e,t),c?this:E,V),(a||n||C.length)&&(d=b(o),a&&(d.dotAll=!0,d.raw=V(function(e){for(var t,i=e.length,a=0,n=\"\",r=!1;a<=i;a++)\"\\\\\"!==(t=D(e,a))?r||\".\"!==t?(\"[\"===t?r=!0:\"]\"===t&&(r=!1),n+=t):n+=\"[\\\\s\\\\S]\":n+=t+D(e,++a);return n}(e),i)),n&&(d.sticky=!0),C.length&&(d.groups=C)),e!==f)try{l(o,\"source\",\"\"===f?\"(?:)\":f)}catch(e){}return o},F=function(e){e in V||d(V,e,{configurable:!0,get:function(){return w[e]},set:function(t){w[e]=t}})},j=c(w),B=0;j.length>B;)F(j[B++]);E.constructor=V,V.prototype=E,C(n,\"RegExp\",V)}S(\"RegExp\")},4916:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(2261);a({target:\"RegExp\",proto:!0,forced:/./.exec!==n},{exec:n})},9714:(e,t,i)=>{\"use strict\";var a=i(1702),n=i(6530).PROPER,r=i(1320),o=i(9670),s=i(7976),l=i(1340),d=i(7293),c=i(7066),u=\"toString\",h=RegExp.prototype,p=h.toString,g=a(c),m=d((function(){return\"/a/b\"!=p.call({source:\"a\",flags:\"b\"})})),C=n&&p.name!=u;(m||C)&&r(RegExp.prototype,u,(function(){var e=o(this),t=l(e.source),i=e.flags;return\"/\"+t+\"/\"+l(void 0===i&&s(h,e)&&!(\"flags\"in h)?g(e):i)}),{unsafe:!0})},189:(e,t,i)=>{\"use strict\";i(7710)(\"Set\",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i(5631))},2023:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(1702),r=i(3929),o=i(4488),s=i(1340),l=i(4964),d=n(\"\".indexOf);a({target:\"String\",proto:!0,forced:!l(\"includes\")},{includes:function(e){return!!~d(s(o(this)),s(r(e)),arguments.length>1?arguments[1]:void 0)}})},8783:(e,t,i)=>{\"use strict\";var a=i(8710).charAt,n=i(1340),r=i(9909),o=i(654),s=\"String Iterator\",l=r.set,d=r.getterFor(s);o(String,\"String\",(function(e){l(this,{type:s,string:n(e),index:0})}),(function(){var e,t=d(this),i=t.string,n=t.index;return n>=i.length?{value:void 0,done:!0}:(e=a(i,n),t.index+=e.length,{value:e,done:!1})}))},4723:(e,t,i)=>{\"use strict\";var a=i(6916),n=i(7007),r=i(9670),o=i(7466),s=i(1340),l=i(4488),d=i(8173),c=i(1530),u=i(7651);n(\"match\",(function(e,t,i){return[function(t){var i=l(this),n=null==t?void 0:d(t,e);return n?a(n,t,i):new RegExp(t)[e](s(i))},function(e){var a=r(this),n=s(e),l=i(t,a,n);if(l.done)return l.value;if(!a.global)return u(a,n);var d=a.unicode;a.lastIndex=0;for(var h,p=[],g=0;null!==(h=u(a,n));){var m=s(h[0]);p[g]=m,\"\"===m&&(a.lastIndex=c(n,o(a.lastIndex),d)),g++}return 0===g?null:p}]}))},5306:(e,t,i)=>{\"use strict\";var a=i(2104),n=i(6916),r=i(1702),o=i(7007),s=i(7293),l=i(9670),d=i(614),c=i(9303),u=i(7466),h=i(1340),p=i(4488),g=i(1530),m=i(8173),C=i(647),f=i(7651),v=i(5112)(\"replace\"),b=Math.max,S=Math.min,y=r([].concat),I=r([].push),T=r(\"\".indexOf),R=r(\"\".slice),w=\"$0\"===\"a\".replace(/./,\"$0\"),E=!!/./[v]&&\"\"===/./[v](\"a\",\"$0\");o(\"replace\",(function(e,t,i){var r=E?\"$\":\"$0\";return[function(e,i){var a=p(this),r=null==e?void 0:m(e,v);return r?n(r,e,a,i):n(t,h(a),e,i)},function(e,n){var o=l(this),s=h(e);if(\"string\"==typeof n&&-1===T(n,r)&&-1===T(n,\"$<\")){var p=i(t,o,s,n);if(p.done)return p.value}var m=d(n);m||(n=h(n));var v=o.global;if(v){var w=o.unicode;o.lastIndex=0}for(var E=[];;){var M=f(o,s);if(null===M)break;if(I(E,M),!v)break;\"\"===h(M[0])&&(o.lastIndex=g(s,u(o.lastIndex),w))}for(var A,O=\"\",D=0,k=0;k<E.length;k++){for(var _=h((M=E[k])[0]),U=b(S(c(M.index),s.length),0),N=[],P=1;P<M.length;P++)I(N,void 0===(A=M[P])?A:String(A));var L=M.groups;if(m){var x=y([_],N,U,s);void 0!==L&&I(x,L);var W=h(a(n,void 0,x))}else W=C(_,s,U,N,L,n);U>=D&&(O+=R(s,D,U)+W,D=U+_.length)}return O+R(s,D)}]}),!!s((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:\"7\"},e},\"7\"!==\"\".replace(e,\"$<a>\")}))||!w||E)},4765:(e,t,i)=>{\"use strict\";var a=i(6916),n=i(7007),r=i(9670),o=i(4488),s=i(1150),l=i(1340),d=i(8173),c=i(7651);n(\"search\",(function(e,t,i){return[function(t){var i=o(this),n=null==t?void 0:d(t,e);return n?a(n,t,i):new RegExp(t)[e](l(i))},function(e){var a=r(this),n=l(e),o=i(t,a,n);if(o.done)return o.value;var d=a.lastIndex;s(d,0)||(a.lastIndex=0);var u=c(a,n);return s(a.lastIndex,d)||(a.lastIndex=d),null===u?-1:u.index}]}))},3123:(e,t,i)=>{\"use strict\";var a=i(2104),n=i(6916),r=i(1702),o=i(7007),s=i(7850),l=i(9670),d=i(4488),c=i(6707),u=i(1530),h=i(7466),p=i(1340),g=i(8173),m=i(206),C=i(7651),f=i(2261),v=i(2999),b=i(7293),S=v.UNSUPPORTED_Y,y=4294967295,I=Math.min,T=[].push,R=r(/./.exec),w=r(T),E=r(\"\".slice),M=!b((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i=\"ab\".split(e);return 2!==i.length||\"a\"!==i[0]||\"b\"!==i[1]}));o(\"split\",(function(e,t,i){var r;return r=\"c\"==\"abbc\".split(/(b)*/)[1]||4!=\"test\".split(/(?:)/,-1).length||2!=\"ab\".split(/(?:ab)*/).length||4!=\".\".split(/(.?)(.?)/).length||\".\".split(/()()/).length>1||\"\".split(/.?/).length?function(e,i){var r=p(d(this)),o=void 0===i?y:i>>>0;if(0===o)return[];if(void 0===e)return[r];if(!s(e))return n(t,r,e,o);for(var l,c,u,h=[],g=(e.ignoreCase?\"i\":\"\")+(e.multiline?\"m\":\"\")+(e.unicode?\"u\":\"\")+(e.sticky?\"y\":\"\"),C=0,v=new RegExp(e.source,g+\"g\");(l=n(f,v,r))&&!((c=v.lastIndex)>C&&(w(h,E(r,C,l.index)),l.length>1&&l.index<r.length&&a(T,h,m(l,1)),u=l[0].length,C=c,h.length>=o));)v.lastIndex===l.index&&v.lastIndex++;return C===r.length?!u&&R(v,\"\")||w(h,\"\"):w(h,E(r,C)),h.length>o?m(h,0,o):h}:\"0\".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:n(t,this,e,i)}:t,[function(t,i){var a=d(this),o=null==t?void 0:g(t,e);return o?n(o,t,a,i):n(r,p(a),t,i)},function(e,a){var n=l(this),o=p(e),s=i(r,n,o,a,r!==t);if(s.done)return s.value;var d=c(n,RegExp),g=n.unicode,m=(n.ignoreCase?\"i\":\"\")+(n.multiline?\"m\":\"\")+(n.unicode?\"u\":\"\")+(S?\"g\":\"y\"),f=new d(S?\"^(?:\"+n.source+\")\":n,m),v=void 0===a?y:a>>>0;if(0===v)return[];if(0===o.length)return null===C(f,o)?[o]:[];for(var b=0,T=0,R=[];T<o.length;){f.lastIndex=S?0:T;var M,A=C(f,S?E(o,T):o);if(null===A||(M=I(h(f.lastIndex+(S?T:0)),o.length))===b)T=u(o,T,g);else{if(w(R,E(o,b,T)),R.length===v)return R;for(var O=1;O<=A.length-1;O++)if(w(R,A[O]),R.length===v)return R;T=b=M}}return w(R,E(o,b)),R}]}),!M,S)},6755:(e,t,i)=>{\"use strict\";var a,n=i(2109),r=i(1702),o=i(1236).f,s=i(7466),l=i(1340),d=i(3929),c=i(4488),u=i(4964),h=i(1913),p=r(\"\".startsWith),g=r(\"\".slice),m=Math.min,C=u(\"startsWith\");n({target:\"String\",proto:!0,forced:!(!h&&!C&&(a=o(String.prototype,\"startsWith\"),a&&!a.writable)||C)},{startsWith:function(e){var t=l(c(this));d(e);var i=s(m(arguments.length>1?arguments[1]:void 0,t.length)),a=l(e);return p?p(t,a,i):g(t,i,i+a.length)===a}})},3210:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(3111).trim;a({target:\"String\",proto:!0,forced:i(6091)(\"trim\")},{trim:function(){return n(this)}})},1817:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(9781),r=i(7854),o=i(1702),s=i(2597),l=i(614),d=i(7976),c=i(1340),u=i(3070).f,h=i(9920),p=r.Symbol,g=p&&p.prototype;if(n&&l(p)&&(!(\"description\"in g)||void 0!==p().description)){var m={},C=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:c(arguments[0]),t=d(g,this)?new p(e):void 0===e?p():p(e);return\"\"===e&&(m[t]=!0),t};h(C,p),C.prototype=g,g.constructor=C;var f=\"Symbol(test)\"==String(p(\"test\")),v=o(g.toString),b=o(g.valueOf),S=/^Symbol\\((.*)\\)[^)]+$/,y=o(\"\".replace),I=o(\"\".slice);u(g,\"description\",{configurable:!0,get:function(){var e=b(this),t=v(e);if(s(m,e))return\"\";var i=f?I(t,7,-1):y(t,S,\"$1\");return\"\"===i?void 0:i}}),a({global:!0,forced:!0},{Symbol:C})}},2165:(e,t,i)=>{i(7235)(\"iterator\")},2526:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(7854),r=i(5005),o=i(2104),s=i(6916),l=i(1702),d=i(1913),c=i(9781),u=i(133),h=i(7293),p=i(2597),g=i(3157),m=i(614),C=i(111),f=i(7976),v=i(2190),b=i(9670),S=i(7908),y=i(5656),I=i(4948),T=i(1340),R=i(9114),w=i(30),E=i(1956),M=i(8006),A=i(1156),O=i(5181),D=i(1236),k=i(3070),_=i(5296),U=i(206),N=i(1320),P=i(2309),L=i(6200),x=i(3501),W=i(9711),V=i(5112),F=i(6061),j=i(7235),B=i(8003),G=i(9909),q=i(2092).forEach,H=L(\"hidden\"),J=\"Symbol\",Y=V(\"toPrimitive\"),z=G.set,X=G.getterFor(J),K=Object.prototype,Q=n.Symbol,$=Q&&Q.prototype,Z=n.TypeError,ee=n.QObject,te=r(\"JSON\",\"stringify\"),ie=D.f,ae=k.f,ne=A.f,re=_.f,oe=l([].push),se=P(\"symbols\"),le=P(\"op-symbols\"),de=P(\"string-to-symbol-registry\"),ce=P(\"symbol-to-string-registry\"),ue=P(\"wks\"),he=!ee||!ee.prototype||!ee.prototype.findChild,pe=c&&h((function(){return 7!=w(ae({},\"a\",{get:function(){return ae(this,\"a\",{value:7}).a}})).a}))?function(e,t,i){var a=ie(K,t);a&&delete K[t],ae(e,t,i),a&&e!==K&&ae(K,t,a)}:ae,ge=function(e,t){var i=se[e]=w($);return z(i,{type:J,tag:e,description:t}),c||(i.description=t),i},me=function(e,t,i){e===K&&me(le,t,i),b(e);var a=I(t);return b(i),p(se,a)?(i.enumerable?(p(e,H)&&e[H][a]&&(e[H][a]=!1),i=w(i,{enumerable:R(0,!1)})):(p(e,H)||ae(e,H,R(1,{})),e[H][a]=!0),pe(e,a,i)):ae(e,a,i)},Ce=function(e,t){b(e);var i=y(t),a=E(i).concat(Se(i));return q(a,(function(t){c&&!s(fe,i,t)||me(e,t,i[t])})),e},fe=function(e){var t=I(e),i=s(re,this,t);return!(this===K&&p(se,t)&&!p(le,t))&&(!(i||!p(this,t)||!p(se,t)||p(this,H)&&this[H][t])||i)},ve=function(e,t){var i=y(e),a=I(t);if(i!==K||!p(se,a)||p(le,a)){var n=ie(i,a);return!n||!p(se,a)||p(i,H)&&i[H][a]||(n.enumerable=!0),n}},be=function(e){var t=ne(y(e)),i=[];return q(t,(function(e){p(se,e)||p(x,e)||oe(i,e)})),i},Se=function(e){var t=e===K,i=ne(t?le:y(e)),a=[];return q(i,(function(e){!p(se,e)||t&&!p(K,e)||oe(a,se[e])})),a};if(u||(Q=function(){if(f($,this))throw Z(\"Symbol is not a constructor\");var e=arguments.length&&void 0!==arguments[0]?T(arguments[0]):void 0,t=W(e),i=function(e){this===K&&s(i,le,e),p(this,H)&&p(this[H],t)&&(this[H][t]=!1),pe(this,t,R(1,e))};return c&&he&&pe(K,t,{configurable:!0,set:i}),ge(t,e)},N($=Q.prototype,\"toString\",(function(){return X(this).tag})),N(Q,\"withoutSetter\",(function(e){return ge(W(e),e)})),_.f=fe,k.f=me,D.f=ve,M.f=A.f=be,O.f=Se,F.f=function(e){return ge(V(e),e)},c&&(ae($,\"description\",{configurable:!0,get:function(){return X(this).description}}),d||N(K,\"propertyIsEnumerable\",fe,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!u,sham:!u},{Symbol:Q}),q(E(ue),(function(e){j(e)})),a({target:J,stat:!0,forced:!u},{for:function(e){var t=T(e);if(p(de,t))return de[t];var i=Q(t);return de[t]=i,ce[i]=t,i},keyFor:function(e){if(!v(e))throw Z(e+\" is not a symbol\");if(p(ce,e))return ce[e]},useSetter:function(){he=!0},useSimple:function(){he=!1}}),a({target:\"Object\",stat:!0,forced:!u,sham:!c},{create:function(e,t){return void 0===t?w(e):Ce(w(e),t)},defineProperty:me,defineProperties:Ce,getOwnPropertyDescriptor:ve}),a({target:\"Object\",stat:!0,forced:!u},{getOwnPropertyNames:be,getOwnPropertySymbols:Se}),a({target:\"Object\",stat:!0,forced:h((function(){O.f(1)}))},{getOwnPropertySymbols:function(e){return O.f(S(e))}}),te&&a({target:\"JSON\",stat:!0,forced:!u||h((function(){var e=Q();return\"[null]\"!=te([e])||\"{}\"!=te({a:e})||\"{}\"!=te(Object(e))}))},{stringify:function(e,t,i){var a=U(arguments),n=t;if((C(t)||void 0!==e)&&!v(e))return g(t)||(t=function(e,t){if(m(n)&&(t=s(n,this,e,t)),!v(t))return t}),a[1]=t,o(te,null,a)}}),!$[Y]){var ye=$.valueOf;N($,Y,(function(e){return s(ye,this)}))}B(Q,J),x[H]=!0},2990:(e,t,i)=>{\"use strict\";var a=i(1702),n=i(260),r=a(i(1048)),o=n.aTypedArray;(0,n.exportTypedArrayMethod)(\"copyWithin\",(function(e,t){return r(o(this),e,t,arguments.length>2?arguments[2]:void 0)}))},8927:(e,t,i)=>{\"use strict\";var a=i(260),n=i(2092).every,r=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"every\",(function(e){return n(r(this),e,arguments.length>1?arguments[1]:void 0)}))},3105:(e,t,i)=>{\"use strict\";var a=i(260),n=i(6916),r=i(1285),o=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"fill\",(function(e){var t=arguments.length;return n(r,o(this),e,t>1?arguments[1]:void 0,t>2?arguments[2]:void 0)}))},5035:(e,t,i)=>{\"use strict\";var a=i(260),n=i(2092).filter,r=i(3074),o=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"filter\",(function(e){var t=n(o(this),e,arguments.length>1?arguments[1]:void 0);return r(this,t)}))},7174:(e,t,i)=>{\"use strict\";var a=i(260),n=i(2092).findIndex,r=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"findIndex\",(function(e){return n(r(this),e,arguments.length>1?arguments[1]:void 0)}))},4345:(e,t,i)=>{\"use strict\";var a=i(260),n=i(2092).find,r=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"find\",(function(e){return n(r(this),e,arguments.length>1?arguments[1]:void 0)}))},2846:(e,t,i)=>{\"use strict\";var a=i(260),n=i(2092).forEach,r=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"forEach\",(function(e){n(r(this),e,arguments.length>1?arguments[1]:void 0)}))},4731:(e,t,i)=>{\"use strict\";var a=i(260),n=i(1318).includes,r=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"includes\",(function(e){return n(r(this),e,arguments.length>1?arguments[1]:void 0)}))},7209:(e,t,i)=>{\"use strict\";var a=i(260),n=i(1318).indexOf,r=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"indexOf\",(function(e){return n(r(this),e,arguments.length>1?arguments[1]:void 0)}))},6319:(e,t,i)=>{\"use strict\";var a=i(7854),n=i(1702),r=i(6530).PROPER,o=i(260),s=i(6992),l=i(5112)(\"iterator\"),d=a.Uint8Array,c=n(s.values),u=n(s.keys),h=n(s.entries),p=o.aTypedArray,g=o.exportTypedArrayMethod,m=d&&d.prototype[l],C=!!m&&\"values\"===m.name,f=function(){return c(p(this))};g(\"entries\",(function(){return h(p(this))})),g(\"keys\",(function(){return u(p(this))})),g(\"values\",f,r&&!C),g(l,f,r&&!C)},8867:(e,t,i)=>{\"use strict\";var a=i(260),n=i(1702),r=a.aTypedArray,o=a.exportTypedArrayMethod,s=n([].join);o(\"join\",(function(e){return s(r(this),e)}))},7789:(e,t,i)=>{\"use strict\";var a=i(260),n=i(2104),r=i(6583),o=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"lastIndexOf\",(function(e){var t=arguments.length;return n(r,o(this),t>1?[e,arguments[1]]:[e])}))},3739:(e,t,i)=>{\"use strict\";var a=i(260),n=i(2092).map,r=i(6304),o=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"map\",(function(e){return n(o(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(r(e))(t)}))}))},4483:(e,t,i)=>{\"use strict\";var a=i(260),n=i(3671).right,r=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"reduceRight\",(function(e){var t=arguments.length;return n(r(this),e,t,t>1?arguments[1]:void 0)}))},9368:(e,t,i)=>{\"use strict\";var a=i(260),n=i(3671).left,r=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"reduce\",(function(e){var t=arguments.length;return n(r(this),e,t,t>1?arguments[1]:void 0)}))},2056:(e,t,i)=>{\"use strict\";var a=i(260),n=a.aTypedArray,r=a.exportTypedArrayMethod,o=Math.floor;r(\"reverse\",(function(){for(var e,t=this,i=n(t).length,a=o(i/2),r=0;r<a;)e=t[r],t[r++]=t[--i],t[i]=e;return t}))},3462:(e,t,i)=>{\"use strict\";var a=i(7854),n=i(260),r=i(6244),o=i(4590),s=i(7908),l=i(7293),d=a.RangeError,c=n.aTypedArray;(0,n.exportTypedArrayMethod)(\"set\",(function(e){c(this);var t=o(arguments.length>1?arguments[1]:void 0,1),i=this.length,a=s(e),n=r(a),l=0;if(n+t>i)throw d(\"Wrong length\");for(;l<n;)this[t+l]=a[l++]}),l((function(){new Int8Array(1).set({})})))},678:(e,t,i)=>{\"use strict\";var a=i(260),n=i(6304),r=i(7293),o=i(206),s=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"slice\",(function(e,t){for(var i=o(s(this),e,t),a=n(this),r=0,l=i.length,d=new a(l);l>r;)d[r]=i[r++];return d}),r((function(){new Int8Array(1).slice()})))},7462:(e,t,i)=>{\"use strict\";var a=i(260),n=i(2092).some,r=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"some\",(function(e){return n(r(this),e,arguments.length>1?arguments[1]:void 0)}))},3824:(e,t,i)=>{\"use strict\";var a=i(7854),n=i(1702),r=i(7293),o=i(9662),s=i(4362),l=i(260),d=i(8886),c=i(256),u=i(7392),h=i(8008),p=a.Array,g=l.aTypedArray,m=l.exportTypedArrayMethod,C=a.Uint16Array,f=C&&n(C.prototype.sort),v=!(!f||r((function(){f(new C(2),null)}))&&r((function(){f(new C(2),{})}))),b=!!f&&!r((function(){if(u)return u<74;if(d)return d<67;if(c)return!0;if(h)return h<602;var e,t,i=new C(516),a=p(516);for(e=0;e<516;e++)t=e%4,i[e]=515-e,a[e]=e-2*t+3;for(f(i,(function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(i[e]!==a[e])return!0}));m(\"sort\",(function(e){return void 0!==e&&o(e),b?f(this,e):s(g(this),function(e){return function(t,i){return void 0!==e?+e(t,i)||0:i!=i?-1:t!=t?1:0===t&&0===i?1/t>0&&1/i<0?1:-1:t>i}}(e))}),!b||v)},5021:(e,t,i)=>{\"use strict\";var a=i(260),n=i(7466),r=i(1400),o=i(6304),s=a.aTypedArray;(0,a.exportTypedArrayMethod)(\"subarray\",(function(e,t){var i=s(this),a=i.length,l=r(e,a);return new(o(i))(i.buffer,i.byteOffset+l*i.BYTES_PER_ELEMENT,n((void 0===t?a:r(t,a))-l))}))},2974:(e,t,i)=>{\"use strict\";var a=i(7854),n=i(2104),r=i(260),o=i(7293),s=i(206),l=a.Int8Array,d=r.aTypedArray,c=r.exportTypedArrayMethod,u=[].toLocaleString,h=!!l&&o((function(){u.call(new l(1))}));c(\"toLocaleString\",(function(){return n(u,h?s(d(this)):d(this),s(arguments))}),o((function(){return[1,2].toLocaleString()!=new l([1,2]).toLocaleString()}))||!o((function(){l.prototype.toLocaleString.call([1,2])})))},5016:(e,t,i)=>{\"use strict\";var a=i(260).exportTypedArrayMethod,n=i(7293),r=i(7854),o=i(1702),s=r.Uint8Array,l=s&&s.prototype||{},d=[].toString,c=o([].join);n((function(){d.call({})}))&&(d=function(){return c(this)});var u=l.toString!=d;a(\"toString\",d,u)},2472:(e,t,i)=>{i(9843)(\"Uint8\",(function(e){return function(t,i,a){return e(this,t,i,a)}}))},9743:(e,t,i)=>{i(9843)(\"Uint8\",(function(e){return function(t,i,a){return e(this,t,i,a)}}),!0)},4129:(e,t,i)=>{\"use strict\";var a,n=i(7854),r=i(1702),o=i(2248),s=i(2423),l=i(7710),d=i(9320),c=i(111),u=i(9909).enforce,h=i(8536),p=!n.ActiveXObject&&\"ActiveXObject\"in n,g=Object.isExtensible,m=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},C=l(\"WeakMap\",m,d);if(h&&p){a=d.getConstructor(m,\"WeakMap\",!0),s.enable();var f=C.prototype,v=r(f.delete),b=r(f.has),S=r(f.get),y=r(f.set);o(f,{delete:function(e){if(c(e)&&!g(e)){var t=u(this);return t.frozen||(t.frozen=new a),v(this,e)||t.frozen.delete(e)}return v(this,e)},has:function(e){if(c(e)&&!g(e)){var t=u(this);return t.frozen||(t.frozen=new a),b(this,e)||t.frozen.has(e)}return b(this,e)},get:function(e){if(c(e)&&!g(e)){var t=u(this);return t.frozen||(t.frozen=new a),b(this,e)?S(this,e):t.frozen.get(e)}return S(this,e)},set:function(e,t){if(c(e)&&!g(e)){var i=u(this);i.frozen||(i.frozen=new a),b(this,e)?y(this,e,t):i.frozen.set(e,t)}else y(this,e,t);return this}})}},4747:(e,t,i)=>{var a=i(7854),n=i(8324),r=i(8509),o=i(8533),s=i(8880),l=function(e){if(e&&e.forEach!==o)try{s(e,\"forEach\",o)}catch(t){e.forEach=o}};for(var d in n)n[d]&&l(a[d]&&a[d].prototype);l(r)},3948:(e,t,i)=>{var a=i(7854),n=i(8324),r=i(8509),o=i(6992),s=i(8880),l=i(5112),d=l(\"iterator\"),c=l(\"toStringTag\"),u=o.values,h=function(e,t){if(e){if(e[d]!==u)try{s(e,d,u)}catch(t){e[d]=u}if(e[c]||s(e,c,t),n[t])for(var i in o)if(e[i]!==o[i])try{s(e,i,o[i])}catch(t){e[i]=o[i]}}};for(var p in n)h(a[p]&&a[p].prototype,p);h(r,\"DOMTokenList\")},2564:(e,t,i)=>{var a=i(2109),n=i(7854),r=i(2104),o=i(614),s=i(8113),l=i(206),d=/MSIE .\\./.test(s),c=n.Function,u=function(e){return function(t,i){var a=arguments.length>2,n=a?l(arguments,2):void 0;return e(a?function(){r(o(t)?t:c(t),this,n)}:t,i)}};a({global:!0,bind:!0,forced:d},{setTimeout:u(n.setTimeout),setInterval:u(n.setInterval)})},1637:(e,t,i)=>{\"use strict\";i(6992);var a=i(2109),n=i(7854),r=i(5005),o=i(6916),s=i(1702),l=i(590),d=i(1320),c=i(2248),u=i(8003),h=i(4994),p=i(9909),g=i(5787),m=i(614),C=i(2597),f=i(9974),v=i(648),b=i(9670),S=i(111),y=i(1340),I=i(30),T=i(9114),R=i(8554),w=i(1246),E=i(5112),M=i(4362),A=E(\"iterator\"),O=\"URLSearchParams\",D=\"URLSearchParamsIterator\",k=p.set,_=p.getterFor(O),U=p.getterFor(D),N=r(\"fetch\"),P=r(\"Request\"),L=r(\"Headers\"),x=P&&P.prototype,W=L&&L.prototype,V=n.RegExp,F=n.TypeError,j=n.decodeURIComponent,B=n.encodeURIComponent,G=s(\"\".charAt),q=s([].join),H=s([].push),J=s(\"\".replace),Y=s([].shift),z=s([].splice),X=s(\"\".split),K=s(\"\".slice),Q=/\\+/g,$=Array(4),Z=function(e){return $[e-1]||($[e-1]=V(\"((?:%[\\\\da-f]{2}){\"+e+\"})\",\"gi\"))},ee=function(e){try{return j(e)}catch(t){return e}},te=function(e){var t=J(e,Q,\" \"),i=4;try{return j(t)}catch(e){for(;i;)t=J(t,Z(i--),ee);return t}},ie=/[!'()~]|%20/g,ae={\"!\":\"%21\",\"'\":\"%27\",\"(\":\"%28\",\")\":\"%29\",\"~\":\"%7E\",\"%20\":\"+\"},ne=function(e){return ae[e]},re=function(e){return J(B(e),ie,ne)},oe=function(e,t){if(t)for(var i,a,n=X(t,\"&\"),r=0;r<n.length;)(i=n[r++]).length&&(a=X(i,\"=\"),H(e,{key:te(Y(a)),value:te(q(a,\"=\"))}))},se=function(e){this.entries.length=0,oe(this.entries,e)},le=function(e,t){if(e<t)throw F(\"Not enough arguments\")},de=h((function(e,t){k(this,{type:D,iterator:R(_(e).entries),kind:t})}),\"Iterator\",(function(){var e=U(this),t=e.kind,i=e.iterator.next(),a=i.value;return i.done||(i.value=\"keys\"===t?a.key:\"values\"===t?a.value:[a.key,a.value]),i})),ce=function(){g(this,ue);var e,t,i,a,n,r,s,l,d,c=arguments.length>0?arguments[0]:void 0,u=this,h=[];if(k(u,{type:O,entries:h,updateURL:function(){},updateSearchParams:se}),void 0!==c)if(S(c))if(e=w(c))for(i=(t=R(c,e)).next;!(a=o(i,t)).done;){if(r=(n=R(b(a.value))).next,(s=o(r,n)).done||(l=o(r,n)).done||!o(r,n).done)throw F(\"Expected sequence with length 2\");H(h,{key:y(s.value),value:y(l.value)})}else for(d in c)C(c,d)&&H(h,{key:d,value:y(c[d])});else oe(h,\"string\"==typeof c?\"?\"===G(c,0)?K(c,1):c:y(c))},ue=ce.prototype;if(c(ue,{append:function(e,t){le(arguments.length,2);var i=_(this);H(i.entries,{key:y(e),value:y(t)}),i.updateURL()},delete:function(e){le(arguments.length,1);for(var t=_(this),i=t.entries,a=y(e),n=0;n<i.length;)i[n].key===a?z(i,n,1):n++;t.updateURL()},get:function(e){le(arguments.length,1);for(var t=_(this).entries,i=y(e),a=0;a<t.length;a++)if(t[a].key===i)return t[a].value;return null},getAll:function(e){le(arguments.length,1);for(var t=_(this).entries,i=y(e),a=[],n=0;n<t.length;n++)t[n].key===i&&H(a,t[n].value);return a},has:function(e){le(arguments.length,1);for(var t=_(this).entries,i=y(e),a=0;a<t.length;)if(t[a++].key===i)return!0;return!1},set:function(e,t){le(arguments.length,1);for(var i,a=_(this),n=a.entries,r=!1,o=y(e),s=y(t),l=0;l<n.length;l++)(i=n[l]).key===o&&(r?z(n,l--,1):(r=!0,i.value=s));r||H(n,{key:o,value:s}),a.updateURL()},sort:function(){var e=_(this);M(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,i=_(this).entries,a=f(e,arguments.length>1?arguments[1]:void 0),n=0;n<i.length;)a((t=i[n++]).value,t.key,this)},keys:function(){return new de(this,\"keys\")},values:function(){return new de(this,\"values\")},entries:function(){return new de(this,\"entries\")}},{enumerable:!0}),d(ue,A,ue.entries,{name:\"entries\"}),d(ue,\"toString\",(function(){for(var e,t=_(this).entries,i=[],a=0;a<t.length;)e=t[a++],H(i,re(e.key)+\"=\"+re(e.value));return q(i,\"&\")}),{enumerable:!0}),u(ce,O),a({global:!0,forced:!l},{URLSearchParams:ce}),!l&&m(L)){var he=s(W.has),pe=s(W.set),ge=function(e){if(S(e)){var t,i=e.body;if(v(i)===O)return t=e.headers?new L(e.headers):new L,he(t,\"content-type\")||pe(t,\"content-type\",\"application/x-www-form-urlencoded;charset=UTF-8\"),I(e,{body:T(0,y(i)),headers:T(0,t)})}return e};if(m(N)&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return N(e,arguments.length>1?ge(arguments[1]):{})}}),m(P)){var me=function(e){return g(this,x),new P(e,arguments.length>1?ge(arguments[1]):{})};x.constructor=me,me.prototype=x,a({global:!0,forced:!0},{Request:me})}}e.exports={URLSearchParams:ce,getState:_}},285:(e,t,i)=>{\"use strict\";i(8783);var a,n=i(2109),r=i(9781),o=i(590),s=i(7854),l=i(9974),d=i(6916),c=i(1702),u=i(6048),h=i(1320),p=i(5787),g=i(2597),m=i(1574),C=i(8457),f=i(206),v=i(8710).codeAt,b=i(3197),S=i(1340),y=i(8003),I=i(1637),T=i(9909),R=T.set,w=T.getterFor(\"URL\"),E=I.URLSearchParams,M=I.getState,A=s.URL,O=s.TypeError,D=s.parseInt,k=Math.floor,_=Math.pow,U=c(\"\".charAt),N=c(/./.exec),P=c([].join),L=c(1..toString),x=c([].pop),W=c([].push),V=c(\"\".replace),F=c([].shift),j=c(\"\".split),B=c(\"\".slice),G=c(\"\".toLowerCase),q=c([].unshift),H=\"Invalid scheme\",J=\"Invalid host\",Y=\"Invalid port\",z=/[a-z]/i,X=/[\\d+-.a-z]/i,K=/\\d/,Q=/^0x/i,$=/^[0-7]+$/,Z=/^\\d+$/,ee=/^[\\da-f]+$/i,te=/[\\0\\t\\n\\r #%/:<>?@[\\\\\\]^|]/,ie=/[\\0\\t\\n\\r #/:<>?@[\\\\\\]^|]/,ae=/^[\\u0000-\\u0020]+|[\\u0000-\\u0020]+$/g,ne=/[\\t\\n\\r]/g,re=function(e,t){var i,a,n;if(\"[\"==U(t,0)){if(\"]\"!=U(t,t.length-1))return J;if(!(i=se(B(t,1,-1))))return J;e.host=i}else if(me(e)){if(t=b(t),N(te,t))return J;if(null===(i=oe(t)))return J;e.host=i}else{if(N(ie,t))return J;for(i=\"\",a=C(t),n=0;n<a.length;n++)i+=pe(a[n],de);e.host=i}},oe=function(e){var t,i,a,n,r,o,s,l=j(e,\".\");if(l.length&&\"\"==l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(i=[],a=0;a<t;a++){if(\"\"==(n=l[a]))return e;if(r=10,n.length>1&&\"0\"==U(n,0)&&(r=N(Q,n)?16:8,n=B(n,8==r?1:2)),\"\"===n)o=0;else{if(!N(10==r?Z:8==r?$:ee,n))return e;o=D(n,r)}W(i,o)}for(a=0;a<t;a++)if(o=i[a],a==t-1){if(o>=_(256,5-t))return null}else if(o>255)return null;for(s=x(i),a=0;a<i.length;a++)s+=i[a]*_(256,3-a);return s},se=function(e){var t,i,a,n,r,o,s,l=[0,0,0,0,0,0,0,0],d=0,c=null,u=0,h=function(){return U(e,u)};if(\":\"==h()){if(\":\"!=U(e,1))return;u+=2,c=++d}for(;h();){if(8==d)return;if(\":\"!=h()){for(t=i=0;i<4&&N(ee,h());)t=16*t+D(h(),16),u++,i++;if(\".\"==h()){if(0==i)return;if(u-=i,d>6)return;for(a=0;h();){if(n=null,a>0){if(!(\".\"==h()&&a<4))return;u++}if(!N(K,h()))return;for(;N(K,h());){if(r=D(h(),10),null===n)n=r;else{if(0==n)return;n=10*n+r}if(n>255)return;u++}l[d]=256*l[d]+n,2!=++a&&4!=a||d++}if(4!=a)return;break}if(\":\"==h()){if(u++,!h())return}else if(h())return;l[d++]=t}else{if(null!==c)return;u++,c=++d}}if(null!==c)for(o=d-c,d=7;0!=d&&o>0;)s=l[d],l[d--]=l[c+o-1],l[c+--o]=s;else if(8!=d)return;return l},le=function(e){var t,i,a,n;if(\"number\"==typeof e){for(t=[],i=0;i<4;i++)q(t,e%256),e=k(e/256);return P(t,\".\")}if(\"object\"==typeof e){for(t=\"\",a=function(e){for(var t=null,i=1,a=null,n=0,r=0;r<8;r++)0!==e[r]?(n>i&&(t=a,i=n),a=null,n=0):(null===a&&(a=r),++n);return n>i&&(t=a,i=n),t}(e),i=0;i<8;i++)n&&0===e[i]||(n&&(n=!1),a===i?(t+=i?\":\":\"::\",n=!0):(t+=L(e[i],16),i<7&&(t+=\":\")));return\"[\"+t+\"]\"}return e},de={},ce=m({},de,{\" \":1,'\"':1,\"<\":1,\">\":1,\"`\":1}),ue=m({},ce,{\"#\":1,\"?\":1,\"{\":1,\"}\":1}),he=m({},ue,{\"/\":1,\":\":1,\";\":1,\"=\":1,\"@\":1,\"[\":1,\"\\\\\":1,\"]\":1,\"^\":1,\"|\":1}),pe=function(e,t){var i=v(e,0);return i>32&&i<127&&!g(t,e)?e:encodeURIComponent(e)},ge={ftp:21,file:null,http:80,https:443,ws:80,wss:443},me=function(e){return g(ge,e.scheme)},Ce=function(e){return\"\"!=e.username||\"\"!=e.password},fe=function(e){return!e.host||e.cannotBeABaseURL||\"file\"==e.scheme},ve=function(e,t){var i;return 2==e.length&&N(z,U(e,0))&&(\":\"==(i=U(e,1))||!t&&\"|\"==i)},be=function(e){var t;return e.length>1&&ve(B(e,0,2))&&(2==e.length||\"/\"===(t=U(e,2))||\"\\\\\"===t||\"?\"===t||\"#\"===t)},Se=function(e){var t=e.path,i=t.length;!i||\"file\"==e.scheme&&1==i&&ve(t[0],!0)||t.length--},ye=function(e){return\".\"===e||\"%2e\"===G(e)},Ie={},Te={},Re={},we={},Ee={},Me={},Ae={},Oe={},De={},ke={},_e={},Ue={},Ne={},Pe={},Le={},xe={},We={},Ve={},Fe={},je={},Be={},Ge=function(e,t,i,n){var r,o,s,l,d,c=i||Ie,u=0,h=\"\",p=!1,m=!1,v=!1;for(i||(e.scheme=\"\",e.username=\"\",e.password=\"\",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=V(t,ae,\"\")),t=V(t,ne,\"\"),r=C(t);u<=r.length;){switch(o=r[u],c){case Ie:if(!o||!N(z,o)){if(i)return H;c=Re;continue}h+=G(o),c=Te;break;case Te:if(o&&(N(X,o)||\"+\"==o||\"-\"==o||\".\"==o))h+=G(o);else{if(\":\"!=o){if(i)return H;h=\"\",c=Re,u=0;continue}if(i&&(me(e)!=g(ge,h)||\"file\"==h&&(Ce(e)||null!==e.port)||\"file\"==e.scheme&&!e.host))return;if(e.scheme=h,i)return void(me(e)&&ge[e.scheme]==e.port&&(e.port=null));h=\"\",\"file\"==e.scheme?c=Pe:me(e)&&n&&n.scheme==e.scheme?c=we:me(e)?c=Oe:\"/\"==r[u+1]?(c=Ee,u++):(e.cannotBeABaseURL=!0,W(e.path,\"\"),c=Fe)}break;case Re:if(!n||n.cannotBeABaseURL&&\"#\"!=o)return H;if(n.cannotBeABaseURL&&\"#\"==o){e.scheme=n.scheme,e.path=f(n.path),e.query=n.query,e.fragment=\"\",e.cannotBeABaseURL=!0,c=Be;break}c=\"file\"==n.scheme?Pe:Me;continue;case we:if(\"/\"!=o||\"/\"!=r[u+1]){c=Me;continue}c=De,u++;break;case Ee:if(\"/\"==o){c=ke;break}c=Ve;continue;case Me:if(e.scheme=n.scheme,o==a)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=f(n.path),e.query=n.query;else if(\"/\"==o||\"\\\\\"==o&&me(e))c=Ae;else if(\"?\"==o)e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=f(n.path),e.query=\"\",c=je;else{if(\"#\"!=o){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=f(n.path),e.path.length--,c=Ve;continue}e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,e.path=f(n.path),e.query=n.query,e.fragment=\"\",c=Be}break;case Ae:if(!me(e)||\"/\"!=o&&\"\\\\\"!=o){if(\"/\"!=o){e.username=n.username,e.password=n.password,e.host=n.host,e.port=n.port,c=Ve;continue}c=ke}else c=De;break;case Oe:if(c=De,\"/\"!=o||\"/\"!=U(h,u+1))continue;u++;break;case De:if(\"/\"!=o&&\"\\\\\"!=o){c=ke;continue}break;case ke:if(\"@\"==o){p&&(h=\"%40\"+h),p=!0,s=C(h);for(var b=0;b<s.length;b++){var S=s[b];if(\":\"!=S||v){var y=pe(S,he);v?e.password+=y:e.username+=y}else v=!0}h=\"\"}else if(o==a||\"/\"==o||\"?\"==o||\"#\"==o||\"\\\\\"==o&&me(e)){if(p&&\"\"==h)return\"Invalid authority\";u-=C(h).length+1,h=\"\",c=_e}else h+=o;break;case _e:case Ue:if(i&&\"file\"==e.scheme){c=xe;continue}if(\":\"!=o||m){if(o==a||\"/\"==o||\"?\"==o||\"#\"==o||\"\\\\\"==o&&me(e)){if(me(e)&&\"\"==h)return J;if(i&&\"\"==h&&(Ce(e)||null!==e.port))return;if(l=re(e,h))return l;if(h=\"\",c=We,i)return;continue}\"[\"==o?m=!0:\"]\"==o&&(m=!1),h+=o}else{if(\"\"==h)return J;if(l=re(e,h))return l;if(h=\"\",c=Ne,i==Ue)return}break;case Ne:if(!N(K,o)){if(o==a||\"/\"==o||\"?\"==o||\"#\"==o||\"\\\\\"==o&&me(e)||i){if(\"\"!=h){var I=D(h,10);if(I>65535)return Y;e.port=me(e)&&I===ge[e.scheme]?null:I,h=\"\"}if(i)return;c=We;continue}return Y}h+=o;break;case Pe:if(e.scheme=\"file\",\"/\"==o||\"\\\\\"==o)c=Le;else{if(!n||\"file\"!=n.scheme){c=Ve;continue}if(o==a)e.host=n.host,e.path=f(n.path),e.query=n.query;else if(\"?\"==o)e.host=n.host,e.path=f(n.path),e.query=\"\",c=je;else{if(\"#\"!=o){be(P(f(r,u),\"\"))||(e.host=n.host,e.path=f(n.path),Se(e)),c=Ve;continue}e.host=n.host,e.path=f(n.path),e.query=n.query,e.fragment=\"\",c=Be}}break;case Le:if(\"/\"==o||\"\\\\\"==o){c=xe;break}n&&\"file\"==n.scheme&&!be(P(f(r,u),\"\"))&&(ve(n.path[0],!0)?W(e.path,n.path[0]):e.host=n.host),c=Ve;continue;case xe:if(o==a||\"/\"==o||\"\\\\\"==o||\"?\"==o||\"#\"==o){if(!i&&ve(h))c=Ve;else if(\"\"==h){if(e.host=\"\",i)return;c=We}else{if(l=re(e,h))return l;if(\"localhost\"==e.host&&(e.host=\"\"),i)return;h=\"\",c=We}continue}h+=o;break;case We:if(me(e)){if(c=Ve,\"/\"!=o&&\"\\\\\"!=o)continue}else if(i||\"?\"!=o)if(i||\"#\"!=o){if(o!=a&&(c=Ve,\"/\"!=o))continue}else e.fragment=\"\",c=Be;else e.query=\"\",c=je;break;case Ve:if(o==a||\"/\"==o||\"\\\\\"==o&&me(e)||!i&&(\"?\"==o||\"#\"==o)){if(\"..\"===(d=G(d=h))||\"%2e.\"===d||\".%2e\"===d||\"%2e%2e\"===d?(Se(e),\"/\"==o||\"\\\\\"==o&&me(e)||W(e.path,\"\")):ye(h)?\"/\"==o||\"\\\\\"==o&&me(e)||W(e.path,\"\"):(\"file\"==e.scheme&&!e.path.length&&ve(h)&&(e.host&&(e.host=\"\"),h=U(h,0)+\":\"),W(e.path,h)),h=\"\",\"file\"==e.scheme&&(o==a||\"?\"==o||\"#\"==o))for(;e.path.length>1&&\"\"===e.path[0];)F(e.path);\"?\"==o?(e.query=\"\",c=je):\"#\"==o&&(e.fragment=\"\",c=Be)}else h+=pe(o,ue);break;case Fe:\"?\"==o?(e.query=\"\",c=je):\"#\"==o?(e.fragment=\"\",c=Be):o!=a&&(e.path[0]+=pe(o,de));break;case je:i||\"#\"!=o?o!=a&&(\"'\"==o&&me(e)?e.query+=\"%27\":e.query+=\"#\"==o?\"%23\":pe(o,de)):(e.fragment=\"\",c=Be);break;case Be:o!=a&&(e.fragment+=pe(o,ce))}u++}},qe=function(e){var t,i,a=p(this,He),n=arguments.length>1?arguments[1]:void 0,o=S(e),s=R(a,{type:\"URL\"});if(void 0!==n)try{t=w(n)}catch(e){if(i=Ge(t={},S(n)))throw O(i)}if(i=Ge(s,o,null,t))throw O(i);var l=s.searchParams=new E,c=M(l);c.updateSearchParams(s.query),c.updateURL=function(){s.query=S(l)||null},r||(a.href=d(Je,a),a.origin=d(Ye,a),a.protocol=d(ze,a),a.username=d(Xe,a),a.password=d(Ke,a),a.host=d(Qe,a),a.hostname=d($e,a),a.port=d(Ze,a),a.pathname=d(et,a),a.search=d(tt,a),a.searchParams=d(it,a),a.hash=d(at,a))},He=qe.prototype,Je=function(){var e=w(this),t=e.scheme,i=e.username,a=e.password,n=e.host,r=e.port,o=e.path,s=e.query,l=e.fragment,d=t+\":\";return null!==n?(d+=\"//\",Ce(e)&&(d+=i+(a?\":\"+a:\"\")+\"@\"),d+=le(n),null!==r&&(d+=\":\"+r)):\"file\"==t&&(d+=\"//\"),d+=e.cannotBeABaseURL?o[0]:o.length?\"/\"+P(o,\"/\"):\"\",null!==s&&(d+=\"?\"+s),null!==l&&(d+=\"#\"+l),d},Ye=function(){var e=w(this),t=e.scheme,i=e.port;if(\"blob\"==t)try{return new qe(t.path[0]).origin}catch(e){return\"null\"}return\"file\"!=t&&me(e)?t+\"://\"+le(e.host)+(null!==i?\":\"+i:\"\"):\"null\"},ze=function(){return w(this).scheme+\":\"},Xe=function(){return w(this).username},Ke=function(){return w(this).password},Qe=function(){var e=w(this),t=e.host,i=e.port;return null===t?\"\":null===i?le(t):le(t)+\":\"+i},$e=function(){var e=w(this).host;return null===e?\"\":le(e)},Ze=function(){var e=w(this).port;return null===e?\"\":S(e)},et=function(){var e=w(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?\"/\"+P(t,\"/\"):\"\"},tt=function(){var e=w(this).query;return e?\"?\"+e:\"\"},it=function(){return w(this).searchParams},at=function(){var e=w(this).fragment;return e?\"#\"+e:\"\"},nt=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(r&&u(He,{href:nt(Je,(function(e){var t=w(this),i=S(e),a=Ge(t,i);if(a)throw O(a);M(t.searchParams).updateSearchParams(t.query)})),origin:nt(Ye),protocol:nt(ze,(function(e){var t=w(this);Ge(t,S(e)+\":\",Ie)})),username:nt(Xe,(function(e){var t=w(this),i=C(S(e));if(!fe(t)){t.username=\"\";for(var a=0;a<i.length;a++)t.username+=pe(i[a],he)}})),password:nt(Ke,(function(e){var t=w(this),i=C(S(e));if(!fe(t)){t.password=\"\";for(var a=0;a<i.length;a++)t.password+=pe(i[a],he)}})),host:nt(Qe,(function(e){var t=w(this);t.cannotBeABaseURL||Ge(t,S(e),_e)})),hostname:nt($e,(function(e){var t=w(this);t.cannotBeABaseURL||Ge(t,S(e),Ue)})),port:nt(Ze,(function(e){var t=w(this);fe(t)||(\"\"==(e=S(e))?t.port=null:Ge(t,e,Ne))})),pathname:nt(et,(function(e){var t=w(this);t.cannotBeABaseURL||(t.path=[],Ge(t,S(e),We))})),search:nt(tt,(function(e){var t=w(this);\"\"==(e=S(e))?t.query=null:(\"?\"==U(e,0)&&(e=B(e,1)),t.query=\"\",Ge(t,e,je)),M(t.searchParams).updateSearchParams(t.query)})),searchParams:nt(it),hash:nt(at,(function(e){var t=w(this);\"\"!=(e=S(e))?(\"#\"==U(e,0)&&(e=B(e,1)),t.fragment=\"\",Ge(t,e,Be)):t.fragment=null}))}),h(He,\"toJSON\",(function(){return d(Je,this)}),{enumerable:!0}),h(He,\"toString\",(function(){return d(Je,this)}),{enumerable:!0}),A){var rt=A.createObjectURL,ot=A.revokeObjectURL;rt&&h(qe,\"createObjectURL\",l(rt,A)),ot&&h(qe,\"revokeObjectURL\",l(ot,A))}y(qe,\"URL\"),n({global:!0,forced:!o,sham:!r},{URL:qe})},3753:(e,t,i)=>{\"use strict\";var a=i(2109),n=i(6916);a({target:\"URL\",proto:!0,enumerable:!0},{toJSON:function(){return n(URL.prototype.toString,this)}})},7987:function(e,t,i){var a,n;a=function(e){\"use strict\";var t,i,a={template:\"[%t] %l:\",levelFormatter:function(e){return e.toUpperCase()},nameFormatter:function(e){return e||\"root\"},timestampFormatter:function(e){return e.toTimeString().replace(/.*(\\d{2}:\\d{2}:\\d{2}).*/,\"$1\")},format:void 0},n={},r={reg:function(e){if(!e||!e.getLogger)throw new TypeError(\"Argument is not a root logger\");t=e},apply:function(e,i){if(!e||!e.setLevel)throw new TypeError(\"Argument is not a logger\");var r=e.methodFactory,o=e.name||\"\",s=n[o]||n[\"\"]||a;return n[o]||(e.methodFactory=function(e,t,i){var a=r(e,t,i),s=n[i]||n[\"\"],l=-1!==s.template.indexOf(\"%t\"),d=-1!==s.template.indexOf(\"%l\"),c=-1!==s.template.indexOf(\"%n\");return function(){for(var t=\"\",r=arguments.length,u=Array(r),h=0;h<r;h++)u[h]=arguments[h];if(o||!n[i]){var p=s.timestampFormatter(new Date),g=s.levelFormatter(e),m=s.nameFormatter(i);s.format?t+=s.format(g,m,p):(t+=s.template,l&&(t=t.replace(/%t/,p)),d&&(t=t.replace(/%l/,g)),c&&(t=t.replace(/%n/,m))),u.length&&\"string\"==typeof u[0]?u[0]=t+\" \"+u[0]:u.unshift(t)}a.apply(void 0,u)}}),(i=i||{}).template&&(i.format=void 0),n[o]=function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(t in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],t)&&(e[t]=arguments[i][t]);return e}({},s,i),e.setLevel(e.getLevel()),t||e.warn(\"It is necessary to call the function reg() of loglevel-plugin-prefix before calling apply. From the next release, it will throw an error. See more: https://github.com/kutuluk/loglevel-plugin-prefix/blob/master/README.md\"),e}};return e&&(i=e.prefix,r.noConflict=function(){return e.prefix===r&&(e.prefix=i),r}),r},void 0===(n=a.call(t,i,t,e))||(e.exports=n)},2043:function(e,t,i){var a,n;!function(r,o){\"use strict\";a=function(){var e=function(){},t=\"undefined\",i=typeof window!==t&&typeof window.navigator!==t&&/Trident\\/|MSIE /.test(window.navigator.userAgent),a=[\"trace\",\"debug\",\"info\",\"warn\",\"error\"];function n(e,t){var i=e[t];if(\"function\"==typeof i.bind)return i.bind(e);try{return Function.prototype.bind.call(i,e)}catch(t){return function(){return Function.prototype.apply.apply(i,[e,arguments])}}}function r(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function o(a){return\"debug\"===a&&(a=\"log\"),typeof console!==t&&(\"trace\"===a&&i?r:void 0!==console[a]?n(console,a):void 0!==console.log?n(console,\"log\"):e)}function s(t,i){for(var n=0;n<a.length;n++){var r=a[n];this[r]=n<t?e:this.methodFactory(r,t,i)}this.log=this.debug}function l(e,i,a){return function(){typeof console!==t&&(s.call(this,i,a),this[e].apply(this,arguments))}}function d(e,t,i){return o(e)||l.apply(this,arguments)}function c(e,i,n){var r,o=this;i=null==i?\"WARN\":i;var l=\"loglevel\";function c(){var e;if(typeof window!==t&&l){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var i=window.document.cookie,a=i.indexOf(encodeURIComponent(l)+\"=\");-1!==a&&(e=/^([^;]+)/.exec(i.slice(a))[1])}catch(e){}return void 0===o.levels[e]&&(e=void 0),e}}\"string\"==typeof e?l+=\":\"+e:\"symbol\"==typeof e&&(l=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=n||d,o.getLevel=function(){return r},o.setLevel=function(i,n){if(\"string\"==typeof i&&void 0!==o.levels[i.toUpperCase()]&&(i=o.levels[i.toUpperCase()]),!(\"number\"==typeof i&&i>=0&&i<=o.levels.SILENT))throw\"log.setLevel() called with invalid level: \"+i;if(r=i,!1!==n&&function(e){var i=(a[e]||\"silent\").toUpperCase();if(typeof window!==t&&l){try{return void(window.localStorage[l]=i)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+\"=\"+i+\";\"}catch(e){}}}(i),s.call(o,i,e),typeof console===t&&i<o.levels.SILENT)return\"No console available for logging\"},o.setDefaultLevel=function(e){i=e,c()||o.setLevel(e,!1)},o.resetLevel=function(){o.setLevel(i,!1),function(){if(typeof window!==t&&l){try{return void window.localStorage.removeItem(l)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+\"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\"}catch(e){}}}()},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var u=c();null==u&&(u=i),o.setLevel(u,!1)}var u=new c,h={};u.getLogger=function(e){if(\"symbol\"!=typeof e&&\"string\"!=typeof e||\"\"===e)throw new TypeError(\"You must supply a name when creating a logger.\");var t=h[e];return t||(t=h[e]=new c(e,u.getLevel(),u.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return u.noConflict=function(){return typeof window!==t&&window.log===u&&(window.log=p),u},u.getLoggers=function(){return h},u.default=u,u},void 0===(n=a.call(t,i,t,e))||(e.exports=n)}()}},t={};function i(a){var n=t[a];if(void 0!==n)return n.exports;var r=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}return i.amdO={},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.g=function(){if(\"object\"==typeof globalThis)return globalThis;try{return this||new Function(\"return this\")()}catch(e){if(\"object\"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,\"exports\",{enumerable:!0,set:()=>{throw new Error(\"ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: \"+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},i(8274)})()}));"],"sourceRoot":"webpack:///","file":"scripts.2833af0969414b9d.js"}